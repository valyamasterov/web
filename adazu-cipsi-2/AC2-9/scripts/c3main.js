// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

Lh=function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')};var Gh,Th,Ih,Ch,Ph,Rh,Eh,Ah,Fh,vh,Mh,Oh,Dh,kh,Lh,Nh,Bh,Wh,xh,jh,_h,Vh,Uh,Hh,zh,Jh,qh,$h,Xh,Yh,Kh,Zh,Qh,tn,sn,en,hn,nn,rn,on,an,O,D,k,L,N="undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(Lh,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):Lh;{let k=function(t){Mh=t},L=function(t){return t*kh},N=function(t,s){return Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},U=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},H=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*(s=s[3])-h*e;return n?(t[0]=s*(n=1/n),t[1]=-e*n,t[2]=-h*n,t[3]=i*n,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*r+n*o,t[1]=h*r+s*o,t[2]=e*a+n*i,t[3]=h*a+s*i,t},X=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*r,t[1]=h*i+s*r,t[2]=e*-r+n*i,t[3]=h*-r+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],i=i[1];return t[0]=e*r,t[1]=h*r,t[2]=n*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=vh*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},nt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},rt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mh(6);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,n){var r=new Mh(6);return r[0]=t,r[1]=s,r[2]=i,r[3]=e,r[4]=h,r[5]=n,r},ft=function(t,s,i,e,h,n,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],s=s[5],o=i*n-e*h;return o?(t[0]=n*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-n*r)*o,t[5]=(e*r-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+n*l,t[1]=h*a+r*l,t[2]=e*u+n*c,t[3]=h*u+r*c,t[4]=e*f+n*i+o,t[5]=h*f+r*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*a,t[1]=h*i+r*a,t[2]=e*-a+n*i,t[3]=h*-a+r*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=n*i,t[3]=r*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=e*a+n*i+o,t[5]=h*a+r*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},_t=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Gt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Tt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=vh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=vh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=vh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(n-u)<=vh*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=vh*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new Mh(9);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Pt=function(t){var s=new Mh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Rt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Et=function(t,s,i,e,h,n,r,o,a){var l=new Mh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=n,l[6]=r,l[7]=o,l[8]=a,l},At=function(t,s,i,e,h,n,r,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Dt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*r-o*l,c=-s*n+o*a,f=l*n-r*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*r)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*n)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(r*i-e*n)*d,t):null},kt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=r*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*r,t[3]=o*a-n*s,t[4]=i*s-h*a,t[5]=h*n-i*o,t[6]=n*l-r*a,t[7]=e*a-i*l,t[8]=i*r-e*n,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],n=t[6],r=t[7],o=t[8];return s*(o*e-h*r)+t[1]*(-o*i+h*n)+t[2]*(r*i-e*n)},n=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*r+d*l,t[1]=c*h+f*o+d*u,t[2]=c*n+f*a+d*s,t[3]=p*e+m*r+g*l,t[4]=p*h+m*o+g*u,t[5]=p*n+m*a+g*s,t[6]=y*e+w*r+i*l,t[7]=y*h+w*o+i*u,t[8]=y*n+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=c*e+i*r+l,t[7]=c*h+i*o+u,t[8]=c*n+i*a+s,t},Bt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*r,t[1]=i*h+c*o,t[2]=i*n+c*a,t[3]=i*r-c*e,t[4]=i*o-c*h,t[5]=i*a-c*n,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[3]=n-s,t[6]=o+u,t[1]=n+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-r,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,_=u*g-f*p,G=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*G+b*(u=u*s-d*p)-v*_+M*x)?(t[0]=(o*f-a*c+l*G)*(d=1/d),t[1]=(a*u-r*f-l*_)*d,t[2]=(r*c-o*u+l*x)*d,t[3]=(h*c-e*f-n*G)*d,t[4]=(i*f-h*u+n*_)*d,t[5]=(e*u-i*c-n*x)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},r=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=vh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=vh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=vh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=vh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=vh*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=vh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=vh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=vh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mh(16);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m){var g=new Mh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=n,g[6]=r,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},ns=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var i,e,h,n,r,o;return t===s?(i=s[1],e=s[2],h=s[3],n=s[6],r=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=h,t[13]=r,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,_=u*g-f*p,G=u*(s=s[15])-d*p,T=c*g-f*m,I=c*s-d*m,C=f*s-d*g,P=y*C-w*I+S*T+b*G-v*_+M*x;return P?(t[0]=(o*C-a*I+l*T)*(P=1/P),t[1]=(h*I-e*C-n*T)*P,t[2]=(m*M-g*v+s*b)*P,t[3]=(f*v-c*M-d*b)*P,t[4]=(a*G-r*C-l*_)*P,t[5]=(i*C-h*G+n*_)*P,t[6]=(g*S-p*M-s*w)*P,t[7]=(u*M-f*S+d*w)*P,t[8]=(r*I-o*G+l*x)*P,t[9]=(e*G-i*I-n*x)*P,t[10]=(p*v-m*S+s*y)*P,t[11]=(c*S-u*v-d*y)*P,t[12]=(o*_-r*T-a*x)*P,t[13]=(i*T-e*_+h*x)*P,t[14]=(m*w-p*b-g*y)*P,t[15]=(u*b-c*w+f*y)*P,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,_=u*g-f*p,G=u*(s=s[15])-d*p,T=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*T,t[1]=h*I-e*C-n*T,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*G-r*C-l*_,t[5]=i*C-h*G+n*_,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=r*I-o*G+l*x,t[9]=e*G-i*I-n*x,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*_-r*T-a*x,t[13]=i*T-e*_+h*x,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],n=t[5],r=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*n-i*h,p=s*r-e*h,m=i*r-e*n,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(h*w-n*y+r*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*h+S*a+b*f+v*g,t[2]=w*n+S*l+b*d+v*y,t[3]=w*r+S*u+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*h+S*a+b*f+v*g,t[6]=w*n+S*l+b*d+v*y,t[7]=w*r+S*u+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*h+S*a+b*f+v*g,t[10]=w*n+S*l+b*d+v*y,t[11]=w*r+S*u+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*h+S*a+b*f+v*g,t[14]=w*n+S*l+b*d+v*y,t[15]=w*r+S*u+b*p+v*s,t},us=function(t,s,i){var e,h,n,r,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=n*m+l*g+d*i+s[14],t[15]=r*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,n,r,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,_=e[0],G=e[1],e=e[2],T=Math.hypot(_,G,e);return T<vh?null:(_*=T=1/T,G*=T,e*=T,T=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=_*G*(h=1-i)-e*T,S=G*G*h+i,b=e*G*h+_*T,v=_*e*h+G*T,M=G*e*h-_*T,x=e*e*h+i,t[0]=n*(i=_*_*h+i)+(l=s[4])*(y=G*_*h+e*T)+(d=s[8])*(e=e*_*h-G*T),t[1]=r*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=n*w+l*S+d*b,t[5]=r*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=n*v+l*M+d*x,t[9]=r*v+u*M+p*x,t[10]=o*v+c*M+m*x,t[11]=a*v+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],n=s[5],r=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=n*i+l*e,t[6]=r*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-n*e,t[10]=u*i-r*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=n*i-l*e,t[2]=r*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=n*e+l*i,t[10]=r*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=n*i+l*e,t[2]=r*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-n*e,t[6]=u*i-r*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,h=i[0],n=i[1],i=i[2],r=Math.hypot(h,n,i);return r<vh?null:(h*=r=1/r,n*=r,i*=r,r=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=n*h*e+i*r,t[2]=i*h*e-n*r,t[3]=0,t[4]=h*n*e-i*r,t[5]=n*n*e+s,t[6]=i*n*e+h*r,t[7]=0,t[8]=h*i*e+n*r,t[9]=n*i*e-h*r,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],n=h+h,r=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*n,a=l*c,l=l*n,u=(s=s[3])*u,c=s*c,s=s*n;return t[0]=1-(a+(h=h*n)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(r+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(r+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new Mh(3),e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+n*n+r*r;return 0<c?(i[0]=2*(o*r+u*e+a*n-l*h)/c,i[1]=2*(a*r+u*h+l*e-o*n)/c,i[2]=2*(l*r+u*n+o*h-a*e)/c):(i[0]=2*(o*r+u*e+a*n-l*h),i[1]=2*(a*r+u*h+l*e-o*n),i[2]=2*(l*r+u*n+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],n=s[6],r=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,n),t[2]=Math.hypot(r,o,a),t},l=function(t,s){var i=new Mh(3),e=(d(i,s),1/i[0]),h=s[0]*e,n=s[1]*(u=1/i[1]),r=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-r)/c,t[2]=(n-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(e+r)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-r)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(n-o)/c,t[0]=(e+r)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],n=e[2],r=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,n),i[1]=Math.hypot(r,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,n=n*(i=1/i[2]),r=r*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-n)/e,t[2]=(h-r)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+r)/e,t[2]=(l+n)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-n)/e,t[0]=(h+r)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-r)/e,t[0]=(l+n)/e,t[1]=(a+c)/e,t[2]=.25*e),t},_s=function(t,s,i,e){var h=(r=s[0])*(u=r+r),n=r*(c=(a=s[1])+a),r=r*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(n+s)*f,t[2]=(r-c)*f,t[3]=0,t[4]=(n-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(r+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gs=function(t,s,i,e,h){var n=(o=s[0])*(c=o+o),r=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,w=(r+s)*d,d=(o-f)*d,r=(r-s)*p,s=(1-(n+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(n+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=r,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+r*g+p*h),t[13]=i[1]+g-(w*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},Ts=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[1]=n+s,t[2]=o-u,t[3]=0,t[4]=n-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,n,r){var o=1/(i-s),a=1/(h-e),l=1/(n-r);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(r+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Ps=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),r=Math.tan(s.leftDegrees*Math.PI/180),o=2/(r+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(r-s)*o*.5,t[9]=(h-n)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),l=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(r+n)*l,t[15]=1,t},Rs=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),r=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=n*r,t[15]=1,t},Es=function(t,s,i,e){var h,n,r,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<vh&&Math.abs(l-d)<vh&&Math.abs(s-i)<vh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,n=i*h-f*u,r=f*e-d*h,(o=Math.hypot(c,n,r))?(c*=o=1/o,n*=o,r*=o):r=n=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=n,t[6]=d,t[7]=0,t[8]=u,t[9]=r,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+n*l+r*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],n=s[1],s=s[2],r=e[0],o=e[1],e=e[2],a=h-i[0],l=n-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-r*i)*e+(r=r*l-o*a)*r)&&(c*=u=1/Math.sqrt(u),e*=u,r*=u),t[0]=c,t[1]=e,t[2]=r,t[3]=0,t[4]=l*r-i*e,t[5]=i*c-a*r,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=n,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ds=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],x=s[6],_=s[7],G=s[8],T=s[9],I=s[10],C=s[11],P=s[12],R=s[13],E=s[14],s=s[15];return Math.abs(i-y)<=vh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=vh*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(h-S)<=vh*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(n-b)<=vh*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-v)<=vh*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(o-M)<=vh*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=vh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-_)<=vh*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-G)<=vh*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(c-T)<=vh*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-I)<=vh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=vh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-P)<=vh*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-R)<=vh*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-E)<=vh*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mh(3);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new Mh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mh(3);return e[0]=t,e[1]=s,e[2]=i,e},Us=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Hs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ni=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ri=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[0],r=i[1],i=i[2];return t[0]=h*i-s*r,t[1]=s*n-e*i,t[2]=e*r-h*n,t},oi=function(t,s,i,e){var h=s[0],n=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(w(s,i),-1),1)),n=Math.sin(h),r=Math.sin((1-e)*h)/n,e=Math.sin(e*h)/n;return t[0]=r*s[0]+e*i[0],t[1]=r*s[1]+e*i[1],t[2]=r*s[2]+e*i[2],t},li=function(t,s,i,e,h,n){var r=n*n,o=r*(2*n-3)+1,a=r*(n-2)+n,l=r*(n-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(r=r*(3-2*n)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*r,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*r,t},ui=function(t,s,i,e,h,n){var r=1-n,o=r*r,a=n*n,l=o*r;return t[0]=s[0]*l+i[0]*(o=3*n*o)+e[0]*(r=3*a*r)+h[0]*(a=a*n),t[1]=s[1]*l+i[1]*o+e[1]*r+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*r+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(n=n||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/n,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/n,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],n=s[0],r=s[1],o=h*(s=s[2])-(c=i[2])*r,a=c*n-e*s,l=e*r-h*n,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=n+(o*=h)+(u*=2),t[1]=r+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0],n[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),n[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},gi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),n[1]=h[1],n[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},yi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),n[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),n[2]=h[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],h=t[2],n=s[0],r=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(n*n+r*r+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],n=s[1],s=s[2];return Math.abs(i-h)<=vh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},_i=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Gi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ti=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Pi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ri=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ei=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Di=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},ki=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return 0<n&&(n=1/Math.sqrt(n)),t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*n,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Ui=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],r=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*r-s*n,t[2]=e*a-l*r+s*h,t[3]=-e*o+l*n-u*h,t},Hi=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,n,r,o;for(s=s||1;1<=(r=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(n=2*Oh()-1)*n););var a=Math.sqrt((1-r)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*n*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*n+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*n+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*n+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*n+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*n-a*h,u=i*h+a*e-r*n,c=i*n+r*h-o*e;return t[0]=l*i+(e=-r*e-o*h-a*n)*-r+u*-a-c*-o,t[1]=u*i+e*-o+c*-r-l*-a,t[2]=c*i+e*-a+l*-o-u*-r,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=vh*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},_=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},G=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return vh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*r+h*a-n*o,t[1]=h*i+s*o+n*r-e*a,t[2]=n*i+s*a+e*o-h*r,t[3]=s*i-e*r-h*o-n*a,t},T=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*r,t[1]=h*i+n*r,t[2]=n*i-h*r,t[3]=s*i-e*r,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i-n*r,t[1]=h*i+s*r,t[2]=n*i+e*r,t[3]=s*i-h*r,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*r,t[1]=h*i-e*r,t[2]=n*i+s*r,t[3]=s*i-n*r,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},P=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),r=0<n?s*Math.sin(n)/n:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*Math.cos(n),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=0<(n=Math.sqrt(i*i+e*e+h*h))?Math.atan2(n,s)/n:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return R(t,s),Hh(t,t,i),P(t,t),t},E=function(t,s,i,e){var h,n,r=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=r*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=vh<1-f?(f=Math.acos(f),h=Math.sin(f),n=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(n=1-e,e),t[0]=n*r+f*l,t[1]=n*o+f*u,t[2]=n*a+f*c,t[3]=n*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},ne=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(n=n?1/n:0),t[1]=-e*n,t[2]=-h*n,t[3]=s*n,t},re=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,n=s[0]+s[4]+s[8];return 0<n?(h=Math.sqrt(n+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(n=s[3*(n=s[4]>s[0]?1:0)+n]<s[8]?2:n))%3,e=(2+n)%3,h=Math.sqrt(s[3*n+n]-s[3*i+i]-s[3*e+e]+1),t[n]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+n]+s[3*n+i])*h,t[e]=(s[3*e+n]+s[3*n+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Dh,n=Math.PI/360,r=(e*=n,i*=n,Math.sin(s*=n)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"xzy":t[0]=r*l*c-o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c+r*a*u;break;case"yxz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;case"yzx":t[0]=r*l*c+o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c-r*a*u;break;case"zxy":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"zyx":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-vh},ue=function(){var t=new Mh(8);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,n,r,o){var a=new Mh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=n,a[6]=r,a[7]=o,a},de=function(t,s,i,e,h,n,r){var o=new Mh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),n=.5*n,r=.5*r;return o[4]=h*e+n*i-r*s,o[5]=n*e+r*t-h*i,o[6]=r*e+h*s-n*t,o[7]=-h*t-n*s-r*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],n=s[0],r=s[1],o=s[2],s=s[3];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*r,t[5]=h*s+i*n-e*o,t[6]=i*s+e*r-h*n,t[7]=-e*n-h*r-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=_(),e=(l(i,s),new Mh(3));return a(e,s),F(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,h,n,r,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],h=s[6],n=s[7],r=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+n*r+e*a-h*o),t[1]=2*(e*s+n*o+h*r-i*a),t[2]=2*(h*s+n*a+i*o-e*r),t},Me=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=r*o+h*i-n*a+l,t[5]=r*a+n*o-e*i+u,t[6]=r*i+e*a-h*o+c,t[7]=-e*o-h*a-n*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return T(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},_e=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return I(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return C(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Te=function(t,s,i){var e=i[0],h=i[1],n=i[2],i=i[3],r=s[0],o=s[1],a=s[2],l=s[3];return t[0]=r*i+l*e+o*n-a*h,t[1]=o*i+l*h+a*e-r*n,t[2]=a*i+l*n+r*h-o*e,t[3]=l*i-r*e-o*h-a*n,t[4]=(r=s[4])*i+(l=s[7])*e+(o=s[5])*n-(a=s[6])*h,t[5]=o*i+l*h+a*e-r*n,t[6]=a*i+l*n+r*h-o*e,t[7]=l*i-r*e-o*h-a*n,t},Ie=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*r+h*a-n*o,t[1]=h*l+s*o+n*r-e*a,t[2]=n*l+s*a+e*o-h*r,t[3]=s*l-e*r-h*o-n*a,t[4]=e*(l=i[7])+s*(r=i[4])+h*(a=i[6])-n*(o=i[5]),t[5]=h*l+s*o+n*r-e*a,t[6]=n*l+s*a+e*o-h*r,t[7]=s*l-e*r-h*o-n*a,t},Ce=function(t,s,i,e){var h,n,r,o,a,l;return Math.abs(e)<vh?O(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(r=Math.sin(e))*i[0]/l,n=r*i[1]/l,r=r*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*r-(a=s[2])*n,t[1]=o*i+e*n+a*h-l*r,t[2]=a*i+e*r+l*n-o*h,t[3]=e*i-l*h-o*n-a*r,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*h-e*r,t[6]=a*i+l*r+e*n-o*h,t[7]=l*i-e*h-o*n-a*r,t)},Pe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Re=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+r*p+h*g-n*m,t[1]=h*i+r*m+n*p-e*g,t[2]=n*i+r*g+e*m-h*p,t[3]=r*i-e*p-h*m-n*g,t[4]=e*u+r*o+h*l-n*a+c*i+s*p+f*g-d*m,t[5]=h*u+r*a+n*o-e*l+f*i+s*m+d*p-c*g,t[6]=n*u+r*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=r*u-e*o-h*a-n*l+s*i-c*p-f*m-d*g,t},Ee=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Yh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},De=function(t,s){var i,e,h,n,r,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(r=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(n=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=n,t[4]=(r-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-n*l)/u),t},ke=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=vh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=vh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=vh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(n-f)<=vh*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=vh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=vh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=vh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},D=function(){var t=new Mh(2);return Mh!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new Mh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},Ue=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},He=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},nh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},rh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],n=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*n+i[0],t[1]=h*n+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},wh=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=vh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,w,S,b,x,_,G,T,I,C,P,R,E,A,F,O,D,vh=1e-6,Mh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Dh="zyx",kh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:vh,get m(){return Mh},S:Oh,M:Dh,_:k,G:L,equals:N},Nh=Object.freeze({__proto__:null,create:B,clone:W,T:j,identity:V,I:U,set:H,C:z,P:J,R:q,A:$,multiply:t,rotate:X,scale:Y,F:K,O:Z,str:Q,D:tt,L:st,add:it,N:s,B:et,equals:ht,W:nt,j:rt,mul:t,sub:s}),Bh=Object.freeze({__proto__:null,create:ot,clone:at,T:lt,identity:ut,I:ct,set:ft,P:dt,A:pt,multiply:i,rotate:mt,scale:gt,translate:yt,F:wt,O:St,V:bt,str:vt,D:Mt,add:xt,N:e,W:_t,j:Gt,B:Tt,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,U:Ct,clone:Pt,T:Rt,I:Et,set:At,identity:Ft,C:Ot,P:Dt,R:kt,A:Lt,multiply:n,translate:Nt,rotate:Bt,scale:Wt,V:jt,F:Vt,O:Ut,H:Ht,J:zt,$:Jt,X:qt,str:$t,D:Xt,add:Yt,N:r,W:Kt,j:Zt,B:Qt,equals:ts,mul:n,sub:r}),xh=Object.freeze({__proto__:null,create:ss,clone:is,T:es,I:hs,set:ns,identity:p,C:rs,P:os,R:as,A:ls,multiply:o,translate:us,scale:cs,rotate:fs,Y:ds,K:ps,Z:ms,V:gs,O:ys,F:ws,tt:Ss,it:bs,et:vs,ht:f,nt:Ms,ot:a,lt:d,ut:l,ct:xs,gt:_s,yt:Gs,J:Ts,St:Is,bt:u,perspective:u,vt:Cs,Mt:Ps,xt:c,ortho:c,_t:Rs,Gt:Es,Tt:As,str:Fs,D:Os,add:Ds,N:ks,W:Ls,j:Ns,B:Bs,equals:Ws,mul:o,sub:ks}),Xh=Js,Zh=qs,Uh=$s,Qh=ii,tn=ei,jh=Vs,sn=hi,Fh=m(),_h=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,I:g,T:Us,set:Hs,add:zs,N:Js,multiply:qs,It:$s,ceil:Xs,floor:Ys,min:Ks,max:Zs,round:Qs,scale:ti,Ct:si,Pt:ii,Rt:ei,Et:hi,At:ni,inverse:ri,normalize:y,Ft:w,Ot:S,Dt:oi,kt:ai,Lt:li,Nt:ui,random:ci,Bt:fi,Wt:di,jt:pi,Y:mi,K:gi,Z:yi,angle:wi,Vt:Si,str:bi,B:vi,equals:Mi,sub:Xh,mul:Zh,div:Uh,Ut:Qh,Ht:tn,zt:jh,Jt:sn,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Fh[0]=t[r],Fh[1]=t[r+1],Fh[2]=t[r+2],h(Fh,Fh,n),t[r]=Fh[0],t[r+1]=Fh[1],t[r+2]=Fh[2];return t}}),Xh=Ci,Zh=Pi,Uh=Ri,Qh=Ni,tn=Bi,sn=v,en=M,Ah=b(),Vh=Object.freeze({__proto__:null,create:b,clone:xi,I:_i,T:Gi,set:Ti,add:Ii,N:Ci,multiply:Pi,It:Ri,ceil:Ei,floor:Ai,min:Fi,max:Oi,round:Di,scale:ki,Ct:Li,Pt:Ni,Rt:Bi,length:v,Et:M,At:Wi,inverse:ji,normalize:Vi,Ft:x,Ot:Ui,Dt:Hi,random:zi,Bt:Ji,jt:qi,Vt:$i,str:Xi,B:Yi,equals:Ki,sub:Xh,mul:Zh,div:Uh,Ut:Qh,Ht:tn,zt:sn,Jt:en,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Ah[0]=t[r],Ah[1]=t[r+1],Ah[2]=t[r+2],Ah[3]=t[r+3],h(Ah,Ah,n),t[r]=Ah[0],t[r+1]=Ah[1],t[r+2]=Ah[2],t[r+3]=Ah[3];return t}}),Xh=xi,Zh=_i,Uh=Gi,Qh=Ti,tn=Ii,sn=se,Hh=ki,zh=x,en=Hi,hn=Jh=v,nn=qh=M,$h=Vi,rn=Yi,Ph=m(),Rh=g(1,0,0),Eh=g(0,1,0),on=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Ph,Rh,s),jh(Ph)<1e-6&&S(Ph,Eh,s),y(Ph,Ph),G(t,Ph,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Ph,s,i),t[0]=Ph[0],t[1]=Ph[1],t[2]=Ph[2],t[3]=1+e,$h(t,t))},Ih=_(),Ch=_(),an=function(t,s,i,e,h,n){return E(Ih,s,h,n),E(Ch,i,e,n),E(t,Ih,Ch,2*n*(1-n)),t},Th=h(),Xh=Object.freeze({__proto__:null,create:_,identity:Zi,qt:G,$t:Qi,Xt:te,multiply:se,Y:T,K:I,Z:C,Yt:ie,exp:P,Kt:R,pow:ee,kt:E,random:he,P:ne,Zt:re,Qt:A,ts:oe,str:ae,clone:Xh,I:Zh,T:Uh,set:Qh,add:tn,mul:sn,scale:Hh,Ft:zh,Dt:en,length:Jh,zt:hn,Et:qh,Jt:nn,normalize:$h,B:rn,equals:le,ss:on,es:an,hs:function(t,s,i,e){return Th[0]=i[0],Th[3]=i[1],Th[6]=i[2],Th[1]=e[0],Th[4]=e[1],Th[7]=e[2],Th[2]=-s[0],Th[5]=-s[1],Th[8]=-s[2],$h(t,A(t,Th))}}),Yh=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,I:fe,ns:de,ht:F,V:pe,F:me,U:ge,T:O,identity:ye,set:we,os:Uh,ls:Se,us:Uh,ds:be,ot:ve,translate:Me,Y:xe,K:_e,Z:Ge,gs:Te,ys:Ie,ws:Ce,add:Pe,multiply:Re,mul:Re,scale:Ee,Ft:Yh,Dt:Ae,P:Fe,Zt:Oe,length:Jh,zt:Jh,Et:Kh,Jt:Zh,normalize:De,str:ke,B:Le,equals:Ne}),tn=ih,sn=He,en=ze,hn=Je,nn=th,rn=sh,on=eh,Gh=D(),an=Object.freeze({__proto__:null,create:D,clone:Be,I:We,T:je,set:Ve,add:Ue,N:He,multiply:ze,It:Je,ceil:qe,floor:$e,min:Xe,max:Ye,round:Ke,scale:Ze,Ct:Qe,Pt:th,Rt:sh,length:ih,Et:eh,At:hh,inverse:nh,normalize:rh,Ft:oh,Ot:ah,Dt:lh,random:uh,Ss:ch,bs:fh,Wt:dh,Bt:ph,rotate:mh,angle:gh,Vt:yh,str:wh,B:Sh,equals:bh,zt:tn,sub:sn,mul:en,div:hn,Ut:nn,Ht:rn,Jt:on,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Gh[0]=t[r],Gh[1]=t[r+1],h(Gh,Gh,n),t[r]=Gh[0],t[r+1]=Gh[1];return t}}),globalThis.vs=Lh,globalThis.vs.Ms=Nh,globalThis.vs.xs=Bh,globalThis.vs._s=Wh,globalThis.vs.Gs=xh,globalThis.vs.Ts=Xh,globalThis.vs.Is=Qh,globalThis.vs.Cs=an,globalThis.vs.Ps=_h,globalThis.vs.Rs=Vh}{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=h*t[0][0]+n*t[0][1],r=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=r*s[0][0]+o*s[0][1],a=h*o-r*n;return m(a,0,i=i||0)||(e[0]=(o*t-n*s)/a,e[1]=(h*s-r*t)/a),e},h=function(t,s,i,e){var h,n=s[0]-t[0],s=s[1]-t[1],r=e[0]-i[0];return r*s-(e=e[1]-i[1])*n!=0&&(h=(r*(t[1]-i[1])+e*(i[0]-t[0]))/(e*n-r*s),0<=(t=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(r*s-e*n)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},_=function(t,s,i){return 0<=o(t,s,i)},G=function(t,s,i){return o(t,s,i)<0},T=function(t,s,i){return o(t,s,i)<=0},n=function(t,s,i,e){var h,n,r;return e?(r=D,(n=O)[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1],h=n[0]*r[0]+n[1]*r[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),Math.acos(h/(n*r))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},r=function(t){t.length=0},P=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},R=function(t,s){return G(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=k,n=L;if(_(C(t,s+1),C(t,s),C(t,i))&&T(C(t,s-1),C(t,s),C(t,i)))return!1;for(var r=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&_(C(t,s),C(t,i),C(t,o+1))&&T(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),n[0]=C(t,o),n[1]=C(t,o+1),e=a(h,n),I(C(t,s),e)<r))return!1;return!0},E=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(r(h),s<i)for(var n=s;n<=i;n++)h.push(t[n]);else{for(n=0;n<=i;n++)h.push(t[n]);for(n=s;n<t.length;n++)h.push(t[n])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,n=0;n<t.length;++n)if(R(t,n))for(var r=0;r<t.length;++r)if(u(t,n,r)){for(var i=f(c(t,n,r,e)),o=f(c(t,r,n,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,n),C(t,r)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],n=0;n<i.length;n++){var r=d(i[n],h);if(r){i.splice(n,1),i.push(r[0],r[1]);break}}return i}return e=t.indexOf((h=s)[0]),n=t.indexOf(h[1]),-1!==e&&-1!==n&&[c(t,e,n),c(t,n,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var n=s[1]-t[1],s=t[0]-s[0],t=n*t[0]+s*t[1],r=e[1]-i[1],e=i[0]-e[0],i=r*i[0]+e*i[1],o=n*e-r*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(n*i-r*t)/o]},F=function(t,s,i,e,h,n,r){n=n||100,r=r||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(n<++r)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var v=0;v<t.length;++v)if(R(S,v)){i.push(S[v]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,v-1),C(S,v),C(S,M))&&T(C(S,v-1),C(S,v),C(S,M-1))&&(l=A(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),G(C(S,v+1),C(S,v),l))&&(f=I(S[v],l))<c&&(c=f,a=l,m=M),x(C(S,v+1),C(S,v),C(S,M+1))&&T(C(S,v+1),C(S,v),C(S,M))&&(l=A(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),x(C(S,v-1),C(S,v),l))&&(f=I(S[v],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(P(y,S,v,p+1),y.push(l),w.push(l),0!==m&&P(w,S,m,S.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,S.length),P(y,S,0,p+1),y.push(l),w.push(l),P(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)_(C(S,v-1),C(S,v),C(S,M))&&T(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&E(S,v,M)&&(d=f,g=M%t.length);v<g?(P(y,S,v,g+1),0!==g&&P(w,S,g,b.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,b.length),P(y,S,0,g+1),P(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,h,n,r),F(w,s,i,e,h,n,r)):(F(w,s,i,e,h,n,r),F(y,s,i,e,h,n,r)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)n(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,_,G,T,n,I,C,r,P,l,R,u,E,c,f,d,A,F,m,g,O=[],D=[],k=[],L=[],self.Es={As:s,Fs:F,Os:i,Ds:e,ks:p,Ls:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,n=self.Ns=class{constructor(){throw TypeError("static class can't be instantiated")}static Bs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Ws(){t=!0}static js(){return t}static Vs(){s=!0}static Us(){return s}static Hs(t){i=t}static zs(){return i}static Js(){return"final"===i}};n.isDebug=!1,n.qs=!1,n.hardwareConcurrency=navigator.hardwareConcurrency||2,self.$s={}}{const s=self.Ns;s.Xs=class{constructor(t){this.Ys=t,this.Ks=new Map,this.Zs()}Zs(){let t=this.Ys,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Qs(i)}Qs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ks.set(i,e)}else this.Ks.set(t,null)}si(){for(const t of this.Ks)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ii(t){return this.Ks.has(t)}ei(t){const s=this.Ks.get(t);return void 0===s?null:s}hi(){history.replaceState("",document.title,location.pathname+location.search)}ni(t){this.Ys=t,this.Ks.clear(),this.Zs()}},s.ri=new s.Xs(location.search),s.oi=new s.Xs(location.hash),s.ri.ii("perf")&&(s.ai=!0),"dev"!==s.ri.ei("mode")&&s.Hs("final")}{let e=function(t){const s=parseFloat(t),i=V.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ns,j="(unknown)",V=(a.li={ci:j,fi:j,di:j,mi:j,gi:NaN,yi:j,wi:"browser",Si:!0,bi:!1,vi:!1,Mi:!1,xi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),U=navigator.userAgent,H=navigator.userAgentData;if(H&&0<H.brands.length){let s=function(t){let s="",i="",e="",h="";for(const n of t){const r=z.get(n.brand),o=(!s&&r&&(s=r,i=n.version),J.get(n.brand));!e&&o&&(e=o,h=n.version)}s||"Chromium"!==e||(a.li.di="Chromium",a.li.mi=h),a.li.di=s||j,a.li.mi=i||j,a.li.yi=e||j};s,a.li.ci=H.platform,a.li.bi=H.mobile,a.li.Si=!a.li.bi;const z=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(H.brands);let i=!1;a.li.xi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.li.ci?a.li.fi=e(t.platformVersion):a.li.fi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(U);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.li.ci="Windows";const s=t[1];a.li.fi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.li.ci="macOS",a.li.fi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.li.ci="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.li.ci="Linux"}),t(/android/i,()=>{a.li.ci="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.li.ci="Android",a.li.fi=t[1]}),a.li.ci===j&&(t(/(iphone|ipod|ipad)/i,t=>{a.li.ci="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.li.ci="iOS",a.li.fi=t[1].replace(/_/g,".")}));const q=/chrome\//i.test(U),$=/chromium\//i.test(U),X=/edg\//i.test(U),Y=/OPR\//.test(U),K=/nwjs/i.test(U),Z=/safari\//i.test(U),Q=/webkit/i.test(U),tt=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.li.di="Chrome",a.li.mi=t[1],a.li.yi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.li.di="Edge",a.li.mi=t[1],a.li.yi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.li.di="Opera",a.li.mi=t[1],a.li.yi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.li.di="Chromium",a.li.mi=t[1],a.li.yi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.li.di="NW.js",a.li.mi=t[1],a.li.yi="Chromium",a.li.wi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.li.di="Firefox",a.li.mi=t[1],a.li.yi="Gecko"}),!Z||q||$||X||Y||K||(a.li.di="Safari",a.li.yi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.li.mi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.li.di="Chrome for iOS",a.li.mi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.li.di="Firefox for iOS",a.li.mi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.li.di="Edge for iOS",a.li.mi=t[1]})),a.li.yi===j&&Q&&(a.li.yi="WebKit"),"Android"===a.li.ci&&"Safari"===a.li.di&&(a.li.di="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),st=tt.has(a.li.ci)||"nwjs"===a.li.wi;a.li.Si=st,a.li.bi=!st}"Chrome"===a.li.di&&"browser"===a.li.wi&&/wv\)/.test(U)&&(a.li.wi="webview"),"nwjs"!==a.li.wi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.li.wi="webapp"),a.li.gi=parseFloat(a.li.mi);const i="macOS"===a.li.ci&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.li.ci="iOS",a.li.fi=a.li.mi,a.li.Si=!1,a.li.bi=!0,a.li.Mi=!0),a.li.vi="macOS"===a.li.ci||"iOS"===a.li.ci}{let r=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=ht.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,it);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(et)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),r(t)})(s),ht.set(s,t),t.catch(t=>ht.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},n=function(t,h){const s=t.objectStore(et).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};r,o,t,s,a,e,n;const it=2,et="keyvaluepairs",ht=new Map,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,h=!0){const t=await a(s);try{const n=t.transaction([et],e?"readwrite":"readonly");return i(n)}catch(t){if(h&&"InvalidStateError"===t.name)return ht.delete(s),B(s,i,e,!1);throw t}}class ot{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,n){return e(h),s(this.name,async t=>{const s=t.objectStore(et).put(n,h),i=r(s),e=o(t);await Promise.all([e,i])})}get(n){return e(n),t(this.name,async t=>{const s=t.objectStore(et).get(n),i=r(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(et).delete(h),i=r(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(et).clear(),i=r(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(et).getAllKeys();s=r(h)}else s=n(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(nt){const h=t.objectStore(et).getAll();s=r(h)}else s=n(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=n(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self._i=ot}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const at=self._i,lt=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.Gi=t,this.Ti=!this.Gi,this.Ti||"undefined"!=typeof indexedDB||(this.Ti=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ii=new Map}Ci(t){if(!this.Ti)for(const s of lt)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ti=!0;break}}async Pi(t){const s=this.Ii.get(t),i=await h(s);return void 0===i?null:i}async Ri(t,s){s=await h(s),this.Ii.set(t,s)}Ei(t){this.Ii.delete(t)}Ai(){this.Ii.clear()}Fi(){return Array.from(this.Ii.keys())}Oi(){return this.Ti}Di(){return this.Ii}ki(t){this.Ii=t}async getItem(s,t){if(e(t),this.Ti)return this.Pi(s);let i;try{i=await this.Gi.get(s)}catch(t){return this.Ci(t),this.Ti?this.Pi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ti)await this.Ri(s,i);else try{await this.Gi.set(s,i)}catch(t){if(this.Ci(t),!this.Ti)throw t;await this.Ri(s,i)}}async removeItem(s,t){if(e(t),this.Ti)this.Ei(s);else try{await this.Gi.delete(s)}catch(t){this.Ci(t),this.Ti?this.Ei(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ti)this.Ai();else try{await this.Gi.clear()}catch(t){this.Ci(t),this.Ti?this.Ai():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ti)return this.Fi();let s=[];try{s=await this.Gi.keys()}catch(t){if(this.Ci(t),this.Ti)return this.Fi();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ti?Promise.resolve(!0):this.Gi.ready()}Li(t){if(t.Ni)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new at(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Bi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Wi(t){i("localforage.defineDriver()")}ji(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new at("localforage"))}{const e=self.Ns;if(e.Vi={},e.Vi.Ui=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Vi.Hi="undefined"!=typeof HTMLDialogElement,e.Vi.Ji=!!self.requestIdleCallback,e.Vi.ImageBitmap=!!self.createImageBitmap,e.Vi.ImageBitmapOptions=!1,e.Vi.$i=!1,e.Vi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Vi.ImageBitmapOptions=!0}).catch(()=>{e.Vi.ImageBitmapOptions=!1})}catch(t){e.Vi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Vi.$i=10===t.width&&10===t.height}).catch(()=>{e.Vi.$i=!1})}catch(t){e.Vi.$i=!1}}if(e.Vi.Xi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Vi.Yi=!(!navigator.permissions||!navigator.permissions.query),e.Vi.Ki=!1,e.Vi.Yi){const ct={name:"clipboard-read"};navigator.permissions.query(ct).then(()=>{e.Vi.Ki=!0}).catch(()=>{e.Vi.Ki=!1})}e.Vi.Zi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Vi.Qi="undefined"!=typeof Proxy,e.Vi.te=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Vi.ie="function"==typeof fetch,e.Vi.he=!!(self.isSecureContext&&"Opera"!==e.li.di&&navigator.storage&&navigator.storage.persist),e.Vi.ne=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Vi.re=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.li.ci)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Vi.ImageDecoder=void 0!==self.ImageDecoder,e.Vi.oe=!!self.VideoEncoder,e.Vi.ae=!!self.showOpenFilePicker,e.Vi.le=!!self.queryLocalFonts,e.Vi.UserActivation=!!navigator.userActivation,e.Vi.ue=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Vi.ue=i&&"image/webp"===i.type}catch(t){e.Vi.ue=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ft=self.Ns;if(!String.prototype.trimStart){const dt=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(dt,"")}}if(!String.prototype.trimEnd){const pt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(pt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ft.fe(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=mt.de(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const mt=self.Ns;self.assert=function(t,s){t||i(s)}}{const h=self.Ns,gt=self.$s,yt=(h.pe=function(t){return"number"==typeof t},h.me=function(t){return h.pe(t)&&isFinite(t)},h.ge=function(t){if(!h.pe(t))throw new TypeError("expected number")},h.ye=function(t){h.we(t)},h.Se=function(t,s,i){if(!h.pe(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.ve=function(...s){for(let t of s);},h.Me=function(t){if(!h.me(t))throw new TypeError("expected finite number")},h.xe=function(t){h.we(t)},h._e=function(...s){for(let t of s);},h.Ge=function(t){return"string"==typeof t},h.Te=function(t){if(!h.Ge(t))throw new TypeError("expected string")},h.Ie=function(t){h.we(t)},h.Ce=function(...s){for(let t of s);},h.Pe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Re=function(t){if(!h.Pe(t))throw new TypeError("expected simple object")},h.Ee=function(t){if(!h.we(t)&&!h.Pe(t))throw new TypeError("expected simple object")},h.Ae=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Fe=function(t){if(!h.Ae(t))throw new TypeError("expected object")},h.Oe=function(t){h.we(t)},h.De=function(...s){for(let t of s);},h.ke=function(t){return h.Le(t,Blob)&&"string"==typeof t.name},h.Ne=function(t){if(!h.ke(t))throw new TypeError("expected file")},h.Be=function(t){h.we(t)},h.We=function(t){return Array.isArray(t)},h.je=function(t){if(!h.We(t))throw new TypeError("expected array")},h.Ve=function(t){h.we(t)},h.Ue=function(...s){for(let t of s);},h.He=function(t){return!(!h.We(t)||t.length&&!h.We(t[0]))},h.Je=function(s){if(!h.He(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.We(t))throw new TypeError("expected 2d array")},h.qe=function(t){h.we(t)},h.$e=function(t){return"function"==typeof t},h.Xe=function(t,s){if(!h.$e(t))throw new TypeError("expected function");if(!h.we(s)&&t!==s)throw new TypeError("expected same function reference")},h.Ye=function(t){h.we(t)},h.Ke=function(...s){for(let t of s);},h.Ze=function(s,...i){if(!h.$e(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.we(t)&&s===t)return;throw new TypeError("expected same function reference")},h.Qe=function(...s){if(!h.we(s))for(let t of s);},h.th=function(t,s){return t instanceof s},h.ih=function(s,...i){for(let t of i)if(h.th(s,t))return!0;return!1},h.eh=function(t,s){if(!h.th(t,s))throw new TypeError("unexpected type")},h.hh=function(t,s){h.we(t)},h.nh=function(t,...s){for(let t of s);},h.rh=function(t,...s){if(!h.ih(t,...s))throw new TypeError("unexpected type")},h.oh=function(t,...s){if(!h.we(t)&&!h.ih(t,...s))throw new TypeError("unexpected type")},h.ah=function(s,i){for(let t of s)if(!h.th(t,i))return!1;return!0},h.uh=function(s){for(let t of s)if(!h.me(t))return!1;return!0},h.fh=function(s,t){for(let t of s);},h.dh=function(s,t){if(!h.we(s))for(let t of s);},h.ph=function(s,t){if(!h.we(s))for(let t of s);},h.mh=function(s){for(let t of s);},h.gh=function(s){if(!h.we(s))for(let t of s);},h.yh=function(t,s){return!(h.we(t)||!h.Ge(t.nodeName))&&(!s||h.wh(t.nodeName,s))},h.Sh=function(t,s){if(h.we(t)||!h.Ge(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.wh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.bh=function(t,s){h.we(t)},h.Mh=function(t,s){return!(h.we(t)||!h.Ge(t.tagName))&&(!s||h.wh(t.tagName,s))},h.xh=function(t,s){if(h.we(t)||!h.Ge(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.wh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h._h=function(t,s){h.we(t)},h.Gh=function(t){return h.Mh(t,"img")||h.Mh(t,"canvas")||h.Mh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Th=function(t){if(!h.Gh(t))throw new TypeError("expected drawable")},h.Ih=function(t){h.we(t)},h.Ch=function(t){return t instanceof ImageData||h.Gh(t)},h.Ph=function(t){if(!h.Ch(t))throw new TypeError("expected drawable or image data")},h.Rh=function(t){if(!h.we(t)&&!h.Ch(t))throw new TypeError("expected drawable or image data")},h.Eh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Ah},h.Fh=function(t){if(!h.Eh(t))throw new TypeError("expected string-like")},h.Oh=function(t){h.we(t)},h.Dh=function(...s){for(let t of s);},h.kh=function(){throw new Error("must be overridden")},h.Lh=function(){throw new Error("not yet implemented")},h.Nh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.we=function(t){return null==t},h.Bh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Wh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.jh=function(t){return h.th(t,yt)},h.Vh=function(t){},h.Uh=function(t){h.Hh(t,yt)},h.zh=function(t,...s){if(!h.Jh(t,...s))throw new TypeError("unexpected type")},h.Jh=function(t,...s){for(const i of s)if(h.Le(t,i))return!0;return!1},h.Hh=function(t,s){if(!h.Le(t,s))throw new TypeError("unexpected type")},h.Le=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},gt.ge=h.ge,gt.ye=h.ye,gt.Me=h.Me,gt.xe=h.xe,gt.Te=h.Te,gt.Ie=h.Ie,gt.Fe=h.Fe,gt.Oe=h.Oe,gt.je=h.je,gt.Ve=h.Ve,gt.Xe=h.Xe,gt.Ye=h.Ye,gt.eh=h.eh,gt.hh=h.hh,gt.we=h.we}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.de())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.qh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},n=function(s){let i=new Set;for(let t in s)i.add(t);return i},r=function(t,s){let i=n(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.$h(s,[...i]),s.length&&console.warn(`[Defence] '${p.qh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,n,r;const p=self.Ns,wt=new Map;p.Xh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Yh=function(t,...s){wt.has(t)||wt.set(t,-1),-1===wt.get(t)&&wt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),wt.set(t,-1)}))};let o,a=(p.Kh=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Zh:0,Qh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Zh.toPrecision(3)} :: calls => `+this.Qh}})},p.tn=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Zh=i.total/i.Qh,console.log(i.toString()),i.Qh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.de=function(){return(new Error).stack},p.sn=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.qh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.pe(t)?"<number>":p.Ge(t)?"<string>":p.We(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.$e(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.hn={};const St=new Set(["then","splice"]);p.hn.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||h(`Accessed missing property '${s}' from defended object '${p.qh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&h(`Accessed property '${s}' on a released object '${p.qh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.hn.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.qh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.qh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.qh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.hn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.qh(t)}'`)},p.hn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.qh(t)}'`)},p.hn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.qh(t)}'`)};let f=-1,d=(p.nn=class{constructor(){if(p.qs&&p.Vi.Qi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.hn);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.rn=function(s){if(p.qs&&p.Vi.Qi&&s instanceof p.nn){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.an=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.qs&&r(t,i),p.rn(i)},p.ln=function(t){let s=u.get(t);s&&c.set(s,p.de())},p.un=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.cn=class{constructor(t){this.dn="",t&&this.start(t)}start(t){p.ai&&(this.dn=t,performance.mark(this.dn+"-Start"))}end(){p.ai&&(performance.mark(this.dn+"-End"),performance.measure(this.dn,this.dn+"-Start",this.dn+"-End"))}next(t){p.ai&&(this.end(),this.dn=t,performance.mark(this.dn+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ns,bt=2*Math.PI,vt=Math.PI/180,Mt=180/Math.PI,xt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.pn=function(t,s,i,e,h){const n=i-s;if(0==n&&0===e)return t;const r=h-e;return(t-s)*r/n+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.mn=function(t,s,i){return t<s?s:i<t?i:t},y.gn=function(t){return(t%=bt)<0&&(t+=bt),t},y.yn=function(t){return t*vt},y.wn=function(t){return t*Mt},y.Sn=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.bn=function(t,s,i,e){const h=i-t,n=e-s;return h*h+n*n},y.vn=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Mn=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s),r=i*h+e*n;return 1<=r?0:r<=-1?Math.PI:Math.acos(r)},y.xn=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return Math.acos(e*n+h*r)>i?0<h*n-e*r?y.gn(t+i):y.gn(t-i):y.gn(s)},y._n=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s);return e*h-i*n<=0},y.Gn=function(t,s,i,e=0){let h=y.Mn(t,s),n=bt*e;return y._n(s,t)?y.gn(t+(h+n)*i):y.gn(t-(h+n)*i)},y.Tn=function(t,s,i,e=0){const h=y.Mn(t,s),n=bt*e;return y._n(s,t)?y.gn(t+(h+n)*i):y.gn(t+(bt-h+n)*i)},y.In=function(t,s,i,e=0){const h=y.Mn(t,s),n=bt*e;return y._n(s,t)?y.gn(t-(-bt+h-n)*i):y.gn(t-(h+n)*i)},y.Cn=function(t,s){const i=y.Mn(t,s);return y._n(t,s)?y.gn(s-i):y.gn(s+i)},y.Dt=function(t,s,i){return t+i*(s-t)},y.Pn=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Rn=function(t,s,i,e,h){return y.Dt(e,h,y.Pn(t,s,i))},y.En=function(t,s,i,e){return y.Dt(y.Dt(t,s,e),y.Dt(s,i,e),e)},y.An=function(t,s,i,e,h){return y.Dt(y.En(t,s,i,h),y.En(s,i,e,h),h)},y.Fn=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.On=function(t){return 0<t&&0==(t-1&t)},y.Dn=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.kn=function(t,s){return Math.round(t*s)/s},y.Ln=function(t,s){return Math.floor(t*s)/s},y.Nn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Bn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Wn=function(t,s,i){return y.mn(t,0,255)|y.mn(s,0,255)<<8|y.mn(i,0,255)<<16},1024),_t=16384,Gt=8191,Tt=(y.jn=function(t,s,i,e){return t=y.mn(Math.floor(1024*t),-8192,Gt),s=y.mn(Math.floor(1024*s),-8192,Gt),i=y.mn(Math.floor(1024*i),-8192,Gt),e=y.mn(Math.floor(1023*e),0,1023),t<0&&(t+=_t),s<0&&(s+=_t),i<0&&(i+=_t),-(t*_t*_t*xt+s*_t*xt+i*xt+e)},y.Vn=function(t,s,i){return y.jn(t,s,i,1)},y.Un=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(_t*_t*xt));return t>Gt&&(t-=_t),t/1024}},y.Hn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(_t*_t*xt)/(_t*xt));return t>Gt&&(t-=_t),t/1024}},y.zn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(_t*xt)/xt);return t>Gt&&(t-=_t),t/1024}},y.Jn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%xt);return s/1023}},y.qn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.$n=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.qn(i,e);return[i/t,e/t]},y.Xn=function(t,s,i,e,h,n,r,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,r),c=Math.max(h,r);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||m<f)return!1;const g=h-t+r-i,y=n-s+o-e,w=i-t,S=e-s,b=r-h,v=o-n,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const _=w*y-S*g;return Math.abs(_)<=M},y.Yn=function(t,s,i,e,h,n,r,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<r)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const _=w*y-S*g;return Math.abs(_)<=M},y.Kn=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.Zn(),u=h.Qn(),c=h.tr(),f=h.ir(),d=h.er(),p=h.hr(),m=h.nr(),g=h.rr();return y.Yn(t,s,i,e,n,r,o,a,l,u,c,f)||y.Yn(t,s,i,e,n,r,o,a,c,f,d,p)||y.Yn(t,s,i,e,n,r,o,a,d,p,m,g)||y.Yn(t,s,i,e,n,r,o,a,m,g,l,u)},y.lr=function(s,i,e,h,n){let r=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=n.length-4;u<=t;u+=2)if(y.Yn(s,i,e,h,r,o,a,l,n[u],n[u+1],n[u+2],n[u+3]))return!0;return y.Yn(s,i,e,h,r,o,a,l,n[u],n[u+1],n[0],n[1])};y.ur=function(t,s,i,e,h,n,r,o){const a=i-t,l=e-s,u=r-h,c=o-n,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(r-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(r-t)+(h-r)*(o-s))/f:2},y.cr=function(t,s,i,e,h,n,r,o,a){const l=(r-h)*a,u=(o-n)*a;return y.ur(t,s,i,e,h-l,n-u,r+l,o+u)},y.dr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.pr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.mr=function(t,s,i,e,h,n,r,o,a,l,u,c){return[t*e+s*r+i*l,t*h+s*o+i*u,t*n+s*a+i*c]}}{let l=self.Ns,s=null,i="";if("undefined"!=typeof document){const It=(s=document).querySelector("base");(i=It&&It.hasAttribute("href")?It.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.Sr=function(){return i},l.br=function(){if(!s)return"";const t=s.location;return l.vr(t.origin+t.pathname)+i},l.vr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Mr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l._r=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.Gr=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Tr=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Ir=function(t){return t.replace(/\\/g,"/")},l.Cr=function(t,s){const i=t?l._r(t).slice(1):"";return s===i},l.Pr=function(t,s){let i,e;return l.ke(t)&&(i=l.Tr(t.name)),l.Ge(t)&&(i=l.Tr(t)),l.ke(s)&&(e=l.Tr(s.name)),l.Ge(s)&&(e=l.Tr(s)),i===e},l.Rr=function(t){t=l.Ir(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,n,r="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(n=h).lastIndexOf("."),a=(0<o&&(r=h.slice(o),n=h.slice(0,-r.length)),s+e+h);return{dir:e,Er:h,name:n,root:s,ext:r,Ar:a}},l.Fr=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Or=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Dr=function(){},l.wh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.kr=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Lr=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Nr=function(t,s){t.length=s},l.Br=function(t){t&&0!==t.length&&l.Nr(t,0)},l.Wr=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Nr(t,0)}l.Nr(i,0)}},l.jr=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.Vr=function(t,s,i){const e=t.length;(s|=0)<e?l.Nr(t,s):e<s&&l.jr(t,s,i)},l.Ur=function(t,s){l.Br(t),l.$h(t,s)},l.$h=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Hr=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Nr(i,s)}},l.zr=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Jr=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.qr=function(i,e){let h=[],n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[n]=t,++n)}return l.Nr(i,n),h},l.$r=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Nr(i,h),t-h},l.Xr=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.Yr=function(t,s){if(!l.Xr(t,s))throw new RangeError("array index out of bounds")},l.Kr=function(t){return t.slice()},l.Zr=function(t,i){let e=[];for(let s of t)if(l.Ae(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.We(s)?e.push(l.Zr(s,i)):e.push(s);return e},l.Qr=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.eo=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.ho=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.no=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.ro=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.ao=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.lo=function(o,a){return o.length?new Promise((i,e)=>{let h=[],n=0,r=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{r||(h[s]=t,++n===o.length?i(h):a(n,o.length))}).catch(t=>{r=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.uo=function(t){e.push(t)},l.co=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),n=new Map,r=new MessageChannel,o=(r.port2.onmessage=function(t){const s=t.data,i=n.get(s);n.delete(s),i&&i(performance.now())},l.fo=function(t){const s=h++;return n.set(s,t),r.port1.postMessage(s),s},l.do=function(t){n.delete(t)},l.po=l.fo,l.mo=function(){return new Promise(t=>l.po(t))},new Set);l.yo=function(s){const i=self.requestAnimationFrame(async t=>{await l.mo(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.wo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const n=self.Ns;n.So=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},n.bo=function(t){return!n.So(t)},n.vo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},n.Mo=function(t,s){return fetch(t,s).then(t=>(n.vo(t),t))},n.xo=function(t){return n.Mo(t).then(t=>t.text())},n._o=function(t){return n.Mo(t).then(t=>t.json())},n.Go=function(t){return n.Mo(t).then(t=>t.blob())},n.To=function(t){return n.Mo(t).then(t=>t.arrayBuffer())},n.Io=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},n.Co=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},n.Po=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},n.Ro=function(t){return n.Po(t).then(t=>JSON.parse(t))},n.Eo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await n.Io(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},n.Ao=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},n.Fo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=n.mn(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},n.Oo=function(t,s,i){const e=n.Ao(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),n.Fo(e,s,i)},n.Do=function(t,s,i){if(n.Vi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>n.Oo(t,s,i));if(n.Vi.ImageBitmap)return createImageBitmap(t).then(t=>n.Oo(t,s,i));{const e=n.Ao(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),n.Fo(e,s,i)}},n.ko=function(t,s){t.clear();for(const i of s)t.add(i)},n.Lo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},n.No=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},n.Bo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},n.Wo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},n.jo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},n.Vo=function(t){return"object"==typeof t&&"function"==typeof t.next},n.Uo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ns,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Pt=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Ho=class{constructor(t,s,i,e){this.zo=NaN,this.Jo=NaN,this.qo=NaN,this.$o=NaN,this.zo=0,this.Jo=0,this.qo=0,this.$o=0,t instanceof u.Ho?this.set(t):this.Xo(t||0,s||0,i||0,e||0)}Yo(t,s,i){return this.zo=+t,this.Jo=+s,this.qo=+i,this.mn(),this}Xo(t,s,i,e){return this.zo=+t,this.Jo=+s,this.qo=+i,this.$o=+e,this.mn(),this}set(t){return this.zo=t.zo,this.Jo=t.Jo,this.qo=t.qo,this.$o=t.$o,this}T(t){return this.set(t)}add(t){this.zo+=t.zo,this.Jo+=t.Jo,this.qo+=t.qo,this.$o+=t.$o,this.mn()}Ko(t,s,i,e=0){this.zo+=+t,this.Jo+=+s,this.qo+=+i,this.$o+=+e,this.mn()}Zo(t){this.Qo(Math.max(this.zo,t.zo)-Math.min(this.zo,t.zo)),this.ta(Math.max(this.Jo,t.Jo)-Math.min(this.Jo,t.Jo)),this.ia(Math.max(this.qo,t.qo)-Math.min(this.qo,t.qo)),this.ea(Math.max(this.$o,t.$o)-Math.min(this.$o,t.$o)),this.mn()}na(t){this.zo=t.zo,this.Jo=t.Jo,this.qo=t.qo}Qo(t){this.zo=u.mn(+t,0,1)}ra(){return this.zo}ta(t){this.Jo=u.mn(+t,0,1)}oa(){return this.Jo}ia(t){this.qo=u.mn(+t,0,1)}aa(){return this.qo}ea(t){this.$o=u.mn(+t,0,1)}la(){return this.$o}clone(){return u.an(u.Ho,this.zo,this.Jo,this.qo,this.$o)}toArray(){return[this.zo,this.Jo,this.qo,this.$o]}ua(){return new Float64Array(this.toArray())}ca(t,s){t[s++]=this.zo,t[s++]=this.Jo,t[s++]=this.qo,t[s]=this.$o}fa(t,s){t[s++]=this.zo,t[s++]=this.Jo,t[s]=this.qo}equals(t){return this.zo===t.zo&&this.Jo===t.Jo&&this.qo===t.qo&&this.$o===t.$o}da(t){return this.zo===t.zo&&this.Jo===t.Jo&&this.qo===t.qo}pa(t,s,i){return this.zo===t&&this.Jo===s&&this.qo===i}ga(t,s,i,e){return this.zo===t&&this.Jo===s&&this.qo===i&&this.$o===e}ya(t,s){return t[s]===Math.fround(this.zo)&&t[s+1]===Math.fround(this.Jo)&&t[s+2]===Math.fround(this.qo)&&t[s+3]===Math.fround(this.$o)}wa(t,s){return t[s]===Math.fround(this.zo)&&t[s+1]===Math.fround(this.Jo)&&t[s+2]===Math.fround(this.qo)}multiply(t){this.zo*=t.zo,this.Jo*=t.Jo,this.qo*=t.qo,this.$o*=t.$o}Sa(t){this.zo*=t,this.Jo*=t,this.qo*=t,this.$o*=t}ba(){return this.zo*=this.$o,this.Jo*=this.$o,this.qo*=this.$o,this}Ma(){return this.zo/=this.$o,this.Jo/=this.$o,this.qo/=this.$o,this}mn(){return this.zo=u.mn(this.zo,0,1),this.Jo=u.mn(this.Jo,0,1),this.qo=u.mn(this.qo,0,1),this.$o=u.mn(this.$o,0,1),this}xa(t){this.zo=u.Un(t),this.Jo=u.Hn(t),this.qo=u.zn(t),this.$o=u.Jn(t)}_a(t,s,i){const e=u.me(t)?t:this.ra(),h=u.me(s)?s:this.oa(),n=u.me(i)?i:this.aa();return`rgb(${100*e}%, ${100*h}%, ${100*n}%)`}Ga(t,s,i,e){const h=u.me(t)?t:this.ra(),n=u.me(s)?s:this.oa(),r=u.me(i)?i:this.aa(),o=u.me(e)?e:this.la();return`rgba(${100*h}%, ${100*n}%, ${100*r}%, ${o})`}Ta(){const t=Math.round(255*this.ra()),s=Math.round(255*this.oa()),i=Math.round(255*this.aa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Ia(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Qo(s),isFinite(i)&&this.ta(i),isFinite(e)&&this.ia(e),this.ea(1),!0}Ca(){const t=Math.round(255*this.ra()),s=Math.round(255*this.oa()),i=Math.round(255*this.aa());return t+`, ${s}, `+i}Pa(){const t=Math.round(255*this.ra()),s=Math.round(255*this.oa()),i=Math.round(255*this.aa());return[t,s,i]}Ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Qo(i),isFinite(e)&&this.ta(e),isFinite(h)&&this.ia(h),this.ea(1),!0}Ea(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Qo(i),isFinite(e)&&this.ta(e),isFinite(h)&&this.ia(h),this.ea(1),!0}Aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.Qo(i),isFinite(e)&&this.ta(e),isFinite(h)&&this.ia(h),isFinite(n)&&this.ea(n),!0}Fa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.Qo(i),isFinite(e)&&this.ta(e),isFinite(h)&&this.ia(h),isFinite(n)&&this.ea(n),!0}Oa(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ea(t):this.Ra(t);if(t.startsWith("rgba("))return t.includes("%")?this.Fa(t):this.Aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Da(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ea(t):4===s.length&&this.Fa(t):3===s.length?this.Ra(t):4===s.length&&this.Aa(t)}}return this.Ia(t)}toJSON(){return[this.zo,this.Jo,this.qo,this.$o]}ka(t,s,i,e){let h,n,r;if(t%=360,s=u.mn(s,0,100),i=u.mn(i,0,100),e=u.mn(e,0,1),t/=360,i/=100,0==(s/=100))h=n=r=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),n=l(a,o,t),r=l(a,o,t-1/3)}return this.Qo(h),this.ta(n),this.ia(r),this.ea(e),this}Da(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Ct.exec(s),e=Pt.exec(s);return i&&4===i.length?(this.ka(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.ka(+i[1],+i[2],+i[3],+i[4]),0))}La(){const t=this.zo,s=this.Jo,i=this.qo,e=this.$o,h=u.Ho.Na(t,s,i),n=u.Ho.Ba(t,s,i),r=u.Ho.Wa(t,s,i);return`hsla(${h}, ${n}%, ${r}%, ${e})`}ja(){const t=this.zo,s=this.Jo,i=this.qo;return[u.Ho.Na(t,s,i),u.Ho.Ba(t,s,i),u.Ho.Wa(t,s,i),this.$o]}Va(t){!Array.isArray(t)||t.length<3||(this.zo=t[0],this.Jo=t[1],this.qo=t[2],this.$o=4<=t.length?t[3]:1)}set r(t){this.Qo(t)}get r(){return this.ra()}set g(t){this.ta(t)}get g(){return this.oa()}set b(t){this.ia(t)}get b(){return this.aa()}set a(t){this.ea(t)}get a(){return this.la()}Ua(t,s){switch(t){case 0:this.Qo(s);break;case 1:this.ta(s);break;case 2:this.ia(s);break;case 3:this.ea(s);break;default:throw new RangeError("invalid color index")}}Ha(t){switch(t){case 0:return this.ra();case 1:return this.oa();case 2:return this.aa();case 3:return this.la();default:throw new RangeError("invalid color index")}}static za(t,s){let i,e;if(Array.isArray(t))(i=new u.Ho).Va(t);else{if(!(t instanceof u.Ho))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Ho).Va(s);else{if(!(s instanceof u.Ho))throw new Error("unexpected type");e=s}return i.equals(e)}static Ja(t,s){return u.mn(Math.max(t,s)-Math.min(t,s),0,1)}static qa(t,s){const i=new u.Ho;return i.Qo(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i.ta(Math.max(t.Jo,s.Jo)-Math.min(t.Jo,s.Jo)),i.ia(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i.ea(Math.max(t.$o,s.$o)-Math.min(t.$o,s.$o)),i}static $a(t,s){const i=new u.Ho(0,0,0,1);return i.Qo(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i.ta(Math.max(t.Jo,s.Jo)-Math.min(t.Jo,s.Jo)),i.ia(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i}static Na(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let n=0;switch(e){case t:n=(s-i)/(e-h)+(s<i?6:0);break;case s:n=(i-t)/(e-h)+2;break;case i:n=(t-s)/(e-h)+4}return Math.round(n/6*360)}static Ba(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const n=(e+h)/2,r=e-h,o=.5<n?r/(2-e-h):r/(e+h);return Math.round(100*o)}static Wa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),n=(e+h)/2;return e?Math.round(100*n):0}},u.Ho.Xa=Object.freeze(u.an(u.Ho,1,1,1,1)),u.Ho.Ya=Object.freeze(u.an(u.Ho,0,0,0,1)),u.Ho.Ka=Object.freeze(u.an(u.Ho,0,0,0,0))}{const Rt=self.Ns;Rt.Za=class{constructor(t,s){this.Qa=0,this.sl=0,t instanceof Rt.Za?this.T(t):this.set(t||0,s||0)}set(t,s){this.Qa=+t,this.sl=+s}T(t){this.Qa=t.Qa,this.sl=t.sl}equals(t){return this.Qa===t.Qa&&this.sl===t.sl}il(t,s){return this.Qa===t&&this.sl===s}ya(t,s){return t[s]===Math.fround(this.Qa)&&t[s+1]===Math.fround(this.sl)}el(t){this.Qa=+t}hl(){return this.Qa}nl(t){this.sl=+t}rl(){return this.sl}toArray(){return[this.Qa,this.sl]}ua(){return new Float64Array(this.toArray())}ca(t,s){t[s++]=this.Qa,t[s]=this.sl}offset(t,s){this.Qa+=+t,this.sl+=+s}scale(t,s){this.Qa*=t,this.sl*=s}It(t,s){this.Qa/=t,this.sl/=s}round(){this.Qa=Math.round(this.Qa),this.sl=Math.round(this.sl)}floor(){this.Qa=Math.floor(this.Qa),this.sl=Math.floor(this.sl)}ceil(){this.Qa=Math.ceil(this.Qa),this.sl=Math.ceil(this.sl)}angle(){return Rt.vn(0,0,this.Qa,this.sl)}ol(){return this.Qa*this.Qa+this.sl*this.sl}length(){return Math.hypot(this.Qa,this.sl)}al(t,s){const i=this.Qa*s-this.sl*t;this.sl=this.sl*s+this.Qa*t,this.Qa=i}rotate(t){0!==t&&this.al(Math.sin(t),Math.cos(t))}ll(t,s,i){0===t||s===this.Qa&&i===this.sl||(this.Qa-=s,this.sl-=i,this.al(Math.sin(t),Math.cos(t)),this.Qa+=+s,this.sl+=+i)}move(t,s){0!==s&&(this.Qa+=Math.cos(t)*s,this.sl+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Qa/=t,this.sl/=t)}mn(t,s){this.Qa=Rt.mn(this.Qa,t,s),this.sl=Rt.mn(this.sl,t,s)}Ft(t){return this.Qa*t.Qa+this.sl*t.sl}reverse(){this.Qa=-this.Qa,this.sl=-this.sl}ul(){let t=this.Qa;return this.Qa=this.sl,this.sl=-t,this}}}{const Et=self.Ns;Et.Rect=class{constructor(t,s,i,e){this.cl=NaN,this.fl=NaN,this.dl=NaN,this.pl=NaN,this.cl=0,this.fl=0,this.dl=0,this.pl=0,t instanceof Et.Rect?this.T(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.cl=+t,this.fl=+s,this.dl=+i,this.pl=+e}gl(t,s,i,e){s=+s,this.cl=t=+t,this.fl=s,this.dl=t+ +i,this.pl=s+ +e}T(t){this.cl=+t.cl,this.fl=+t.fl,this.dl=+t.dl,this.pl=+t.pl}clone(){return new Et.Rect(this.cl,this.fl,this.dl,this.pl)}static yl(t,s){const i=new Et.Rect;return i.wl(Math.min(t.cl,s.cl)),i.Sl(Math.min(t.fl,s.fl)),i.bl(Math.max(t.dl,s.dl)),i.vl(Math.max(t.pl,s.pl)),i}static Ml(t){return new Et.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.cl===t.cl&&this.fl===t.fl&&this.dl===t.dl&&this.pl===t.pl}xl(t,s,i,e){return this.cl===t&&this.fl===s&&this.width()===i&&this.height()===e}ya(t,s){return t[s]===Math.fround(this.cl)&&t[s+1]===Math.fround(this.fl)&&t[s+2]===Math.fround(this.dl)&&t[s+3]===Math.fround(this.pl)}wl(t){this.cl=+t}_l(){return this.cl}Sl(t){this.fl=+t}Gl(){return this.fl}bl(t){this.dl=+t}Tl(){return this.dl}vl(t){this.pl=+t}Il(){return this.pl}toArray(){return[this.cl,this.fl,this.dl,this.pl]}ua(){return new Float64Array(this.toArray())}Cl(){return new DOMRect(this.cl,this.fl,this.width(),this.height())}static Pl(t){return Et.an(Et.Rect,t.left,t.top,t.right,t.bottom)}ca(t,s){t[s++]=this.cl,t[s++]=this.fl,t[s++]=this.dl,t[s]=this.pl}Rl(t,s){t[s++]=this.cl,t[s++]=this.fl,t[s++]=this.dl,t[s++]=this.fl,t[s++]=this.dl,t[s++]=this.pl,t[s++]=this.cl,t[s]=this.pl}El(t,s,i){t[s++]=this.cl,t[s++]=this.fl,t[s++]=i,t[s++]=this.dl,t[s++]=this.fl,t[s++]=i,t[s++]=this.dl,t[s++]=this.pl,t[s++]=i,t[s++]=this.cl,t[s++]=this.pl,t[s]=i}width(){return this.dl-this.cl}height(){return this.pl-this.fl}Al(){return(this.cl+this.dl)/2}Fl(){return(this.fl+this.pl)/2}offset(t,s){s=+s,this.cl+=t=+t,this.fl+=s,this.dl+=t,this.pl+=s}offsetLeft(t){this.cl+=+t}offsetTop(t){this.fl+=+t}Ol(t){this.dl+=+t}Dl(t){this.pl+=+t}kl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.fl<this.pl?this.cl<this.dl?this.pl=this.fl+this.width():this.pl=this.fl-this.width():this.cl<this.dl?this.pl=this.fl-this.width():this.pl=this.fl+this.width()}Ll(t,s){s=+s,this.cl-=t=+t,this.fl-=s,this.dl+=t,this.pl+=s}Nl(t,s){s=+s,this.cl+=t=+t,this.fl+=s,this.dl-=t,this.pl-=s}multiply(t,s){this.cl*=t,this.fl*=s,this.dl*=t,this.pl*=s}It(t,s){this.cl/=t,this.fl/=s,this.dl/=t,this.pl/=s}Bl(t){this.cl=+t-this.cl,this.dl=+t-this.dl}Wl(t){this.fl=+t-this.fl,this.pl=+t-this.pl}jl(t,s){const i=this.width(),e=this.height(),h=this._l()+i*t,n=this.Gl()+e*s;this.gl(h-e*s,n-i*t,e,i)}Vl(){const t=this.cl;this.cl=this.dl,this.dl=t}Ul(){const t=this.fl;this.fl=this.pl,this.pl=t}Hl(t){const s=this.fl;this.fl=+t-this.pl,this.pl=+t-s}round(){this.cl=Math.round(this.cl),this.fl=Math.round(this.fl),this.dl=Math.round(this.dl),this.pl=Math.round(this.pl)}zl(){this.cl=Math.ceil(this.cl),this.fl=Math.ceil(this.fl),this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl)}Jl(){this.cl=Math.floor(this.cl),this.fl=Math.floor(this.fl),this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl)}floor(){this.cl=Math.floor(this.cl),this.fl=Math.floor(this.fl),this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl)}ceil(){this.cl=Math.ceil(this.cl),this.fl=Math.ceil(this.fl),this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl)}mn(t,s,i,e){this.cl=Math.max(this.cl,+t),this.fl=Math.max(this.fl,+s),this.dl=Math.min(this.dl,+i),this.pl=Math.min(this.pl,+e)}ql(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.cl=Et.mn(this.cl,t,i),this.fl=Et.mn(this.fl,s,e),this.dl=Et.mn(this.dl,t,i),this.pl=Et.mn(this.pl,s,e)}normalize(){this.cl>this.dl&&this.Vl(),this.fl>this.pl&&this.Ul()}$l(t){return!(t.dl<this.cl||t.pl<this.fl||t.cl>this.dl||t.fl>this.pl)}Xl(t,s,i){return!(t.dl+s<this.cl||t.pl+i<this.fl||t.cl+s>this.dl||t.fl+i>this.pl)}Yl(t,s){return t>=this.cl&&t<=this.dl&&s>=this.fl&&s<=this.pl}Kl(t){return t.cl>=this.cl&&t.fl>=this.fl&&t.dl<=this.dl&&t.pl<=this.pl}Zl(t){t.cl<this.cl&&(this.cl=+t.cl),t.fl<this.fl&&(this.fl=+t.fl),t.dl>this.dl&&(this.dl=+t.dl),t.pl>this.pl&&(this.pl=+t.pl)}Ql(t){this.cl=Et.Dt(t.cl,t.dl,this.cl),this.fl=Et.Dt(t.fl,t.pl,this.fl),this.dl=Et.Dt(t.cl,t.dl,this.dl),this.pl=Et.Dt(t.fl,t.pl,this.pl)}}}{const At=self.Ns;At.tu=class{constructor(t,s,i,e,h,n,r,o){this.su=NaN,this.iu=NaN,this.eu=NaN,this.hu=NaN,this.nu=NaN,this.ru=NaN,this.ou=NaN,this.au=NaN,this.su=0,this.iu=0,this.eu=0,this.hu=0,this.nu=0,this.ru=0,this.ou=0,this.au=0,t instanceof At.tu?this.T(t):this.set(t||0,s||0,i||0,e||0,h||0,n||0,r||0,o||0)}set(t,s,i,e,h,n,r,o){this.su=+t,this.iu=+s,this.eu=+i,this.hu=+e,this.nu=+h,this.ru=+n,this.ou=+r,this.au=+o}lu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}T(t){this.su=t.su,this.iu=t.iu,this.eu=t.eu,this.hu=t.hu,this.nu=t.nu,this.ru=t.ru,this.ou=t.ou,this.au=t.au}equals(t){return this.su===t.su&&this.iu===t.iu&&this.eu===t.eu&&this.hu===t.hu&&this.nu===t.nu&&this.ru===t.ru&&this.ou===t.ou&&this.au===t.au}uu(t){this.su=+t}Zn(){return this.su}cu(t){this.iu=+t}Qn(){return this.iu}fu(t){this.eu=+t}tr(){return this.eu}du(t){this.hu=+t}ir(){return this.hu}pu(t){this.nu=+t}er(){return this.nu}mu(t){this.ru=+t}hr(){return this.ru}gu(t){this.ou=+t}nr(){return this.ou}yu(t){this.au=+t}rr(){return this.au}wu(){return new DOMQuad(new DOMPoint(this.su,this.iu),new DOMPoint(this.eu,this.hu),new DOMPoint(this.nu,this.ru),new DOMPoint(this.ou,this.au))}static Su(t){return At.an(At.tu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.su,this.iu,this.eu,this.hu,this.nu,this.ru,this.ou,this.au]}ua(){return new Float64Array(this.toArray())}ca(t,s){t[s++]=this.su,t[s++]=this.iu,t[s++]=this.eu,t[s++]=this.hu,t[s++]=this.nu,t[s++]=this.ru,t[s++]=this.ou,t[s]=this.au}bu(t,s,i){t[s++]=this.su,t[s++]=this.iu,t[s++]=i,t[s++]=this.eu,t[s++]=this.hu,t[s++]=i,t[s++]=this.nu,t[s++]=this.ru,t[s++]=i,t[s++]=this.ou,t[s++]=this.au,t[s]=i}offset(t,s){s=+s,this.su+=t=+t,this.iu+=s,this.eu+=t,this.hu+=s,this.nu+=t,this.ru+=s,this.ou+=t,this.au+=s}round(){this.su=Math.round(this.su),this.iu=Math.round(this.iu),this.eu=Math.round(this.eu),this.hu=Math.round(this.hu),this.nu=Math.round(this.nu),this.ru=Math.round(this.ru),this.ou=Math.round(this.ou),this.au=Math.round(this.au)}floor(){this.su=Math.floor(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu),this.hu=Math.floor(this.hu),this.nu=Math.floor(this.nu),this.ru=Math.floor(this.ru),this.ou=Math.floor(this.ou),this.au=Math.floor(this.au)}ceil(){this.su=Math.ceil(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu),this.hu=Math.ceil(this.hu),this.nu=Math.ceil(this.nu),this.ru=Math.ceil(this.ru),this.ou=Math.ceil(this.ou),this.au=Math.ceil(this.au)}vu(t){this.su=t.cl,this.iu=t.fl,this.eu=t.dl,this.hu=t.fl,this.nu=t.dl,this.ru=t.pl,this.ou=t.cl,this.au=t.pl}Mu(t,s){0===s?this.vu(t):this.xu(t,Math.sin(s),Math.cos(s))}xu(t,s,i){const e=t.cl*s,h=t.fl*s,n=t.dl*s,r=t.pl*s,o=t.cl*i,a=t.fl*i,l=t.dl*i,u=t.pl*i;this.su=o-h,this.iu=a+e,this.eu=l-h,this.hu=a+n,this.nu=l-r,this.ru=u+n,this.ou=o-r,this.au=u+e}_u(t){t.set(Math.min(this.su,this.eu,this.nu,this.ou),Math.min(this.iu,this.hu,this.ru,this.au),Math.max(this.su,this.eu,this.nu,this.ou),Math.max(this.iu,this.hu,this.ru,this.au))}Yl(t,s){let i=this.eu-this.su,e=this.hu-this.iu,h=this.nu-this.su,n=this.ru-this.iu,r=t-this.su,o=s-this.iu,a=i*i+e*e,l=i*h+e*n,u=i*r+e*o,c=h*h+n*n,f=h*r+n*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.ou-this.su)*i+(e=this.au-this.iu)*e)*f-(l=i*h+e*n)*(u=i*r+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Al(){return(this.su+this.eu+this.nu+this.ou)/4}Fl(){return(this.iu+this.hu+this.ru+this.au)/4}Gu(t,s,i,e){return!(!this.Yl(t,s)&&!this.Yl(i,e))||At.Kn(t,s,i,e,this)}Tu(t){let s=t.Al(),i=t.Fl();if(this.Yl(s,i))return!0;if(s=this.Al(),i=this.Fl(),t.Yl(s,i))return!0;const e=this.su,h=this.iu,n=this.eu,r=this.hu,o=this.nu,a=this.ru,l=this.ou,u=this.au;return At.Kn(e,h,n,r,t)||At.Kn(n,r,o,a,t)||At.Kn(o,a,l,u,t)||At.Kn(l,u,e,h,t)}Iu(){const t=this.su,s=this.iu;this.su=this.eu,this.iu=this.hu,this.eu=this.nu,this.hu=this.ru,this.nu=this.ou,this.ru=this.au,this.ou=t,this.au=s}Cu(){this.Pu(0,2),this.Pu(1,3),this.Pu(6,4),this.Pu(7,5)}Ru(){this.Pu(0,6),this.Pu(1,7),this.Pu(2,4),this.Pu(3,5)}Eu(){this.Pu(2,6),this.Pu(3,7)}Pu(t,s){const i=this.Au(t);this.Fu(t,this.Au(s)),this.Fu(s,i)}Au(t){switch(t){case 0:return this.su;case 1:return this.iu;case 2:return this.eu;case 3:return this.hu;case 4:return this.nu;case 5:return this.ru;case 6:return this.ou;case 7:return this.au;default:throw new RangeError("invalid quad point index")}}Fu(t,s){switch(s=+s,t){case 0:this.su=s;break;case 1:this.iu=s;break;case 2:this.eu=s;break;case 3:this.hu=s;break;case 4:this.nu=s;break;case 5:this.ru=s;break;case 6:this.ou=s;break;case 7:this.au=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Ft=self.Ns,Ot=[0,0,1,0,1,1,0,1],Dt=Ft.an(Ft.tu);Ft.Ou=class extends Ft.nn{constructor(t,s=!0){super(),t=t||Ot,this.Du=Float64Array.from(t),this.ku=new Ft.Rect,this.Lu=!0,this.Nu=s}ln(){}Bu(){return this.Du}Wu(){return this.Du.length/2}ju(t){this.Du.length===t.length?this.Du.set(t):this.Du=Float64Array.from(t),this.Lu=!0}Vu(){this.ju(Ot)}T(t){this.ju(t.Du)}Uu(){this.Lu=!0}Hu(){if(this.Lu){let i=this.Du,e=i[0],h=i[1],n=e,r=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>n&&(n=o),a<h&&(h=a),a>r&&(r=a)}this.ku.set(e,h,n,r),this.Lu=!1}}vu(t,s,i){let e=this.Du;8!==e.length&&(e=new Float64Array(8),this.Du=e),e[0]=t._l()-s,e[1]=t.Gl()-i,e[2]=t.Tl()-s,e[3]=t.Gl()-i,e[4]=t.Tl()-s,e[5]=t.Il()-i,e[6]=t._l()-s,e[7]=t.Il()-i,this.ku.T(t),0===s&&0===i||this.ku.offset(-s,-i),this.Lu=!1}zu(t,s,i){Dt.T(t),Dt.offset(s,i),this.ju(Dt.toArray()),this.Lu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Ju(t,s,e,h)}Ju(i,e,h,n){const r=this.Du;for(let t=0,s=r.length;t<s;t+=2){const o=t+1,a=r[t]*i,l=r[o]*e;r[t]=a*n-l*h,r[o]=l*n+a*h}this.Lu=!0}offset(i,e){const h=this.Du;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Yl(i,e){const h=this.Du;if(i===h[0]&&e===h[1])return!0;this.Hu();let t=this.ku,n=t._l()-110,r=t.Gl()-101,o=t.Tl()+131,a=t.Il()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=n<i?(l=n,i):(l=i,n),f=r<e?(u=r,e):(u=e,r),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=h.length;t<s;t+=2){const S=(t+2)%s,b=h[t],v=h[t+1],M=h[S],x=h[1+S];Ft.Yn(n,r,i,e,l,c,u,f,b,v,M,x)&&++y,Ft.Yn(o,a,i,e,d,m,p,g,b,v,M,x)&&++w}return y%2==1||w%2==1}qu(t,c,f){const d=t.Du,p=this.Du;if(this.Yl(d[0]+c,d[1]+f))return!0;if(t.Yl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],n=p[1+t],r=0,o=0,a,l;a=i<h?(r=i,h):(r=h,i),l=e<n?(o=e,n):(o=n,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(Ft.Yn(i,e,h,n,r,a,o,l,g,y,w,S))return!0}}return!1}Gu(i,e,h,n,r,o){if(this.Yl(h-i,n-e))return!0;if(this.Yl(r-i,o-e))return!0;let a=0,l=0,u,c;u=h<r?(a=h,r):(a=r,h),c=n<o?(l=n,o):(l=o,n);const f=this.Du;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Ft.Yn(h,n,r,o,a,u,l,c,p,m,g,y))return!0}return!1}Cu(i){const e=this.Du;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Lu=!0}Ru(i){const e=this.Du;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Lu=!0}Eu(){const i=this.Du;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Lu=!0}$u(){let i=this.Du,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Wu()}Xu(){let i=this.Du,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Wu()}Yu(){return this.Du}Ku(){return this.Wu()}Zu(){return this.Nu}}}{const kt=self.Ns;kt.Qu=class extends kt.nn{constructor(t){if(super(),this.tc=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}ln(){this.ic(),this.tc=null}ec(){return 0===this.tc.size}ic(){const t=this.tc;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.tc,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ei(t,s){const i=this.tc.get(t);return i&&i.get(s)}ii(t,s){const i=this.tc.get(t);return!!i&&i.has(s)}hc(t,s){const i=this.tc,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}nc(t){const s=this.tc,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}rc(){let t=0;for(const s of this.tc.values())t+=s.size;return t}*values(){for(const t of this.tc.values())yield*t.values()}*oc(){for(const[t,s]of this.tc.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.tc.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Lt=self.Ns;Lt.ac=class extends Lt.nn{constructor(){super(),this.lc=new Set,this.uc=[],this.cc=!1}ln(){this.ic()}ic(){this.lc.clear(),Lt.Br(this.uc),this.cc=!1}fc(t){this.lc.has(t)||(this.lc.add(t),this.cc)||this.uc.push(t)}ii(t){return this.lc.has(t)}hc(t){this.lc.delete(t)&&(this.cc=!0)}rc(){return this.lc.size}ec(){return 0===this.lc.size}dc(){return this.cc&&(this.mc(),this.cc=!1),this.uc}mc(){const t=this.uc;Lt.Br(t);for(const s of this.lc)t.push(s)}}}{const Nt=self.Ns,Bt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ut=new Map,Ht=new Map,zt=new Map,Jt=new Map,qt=new Map,$t=(qt.set("linear","noease"),qt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Kt=(self.yc=class ns{constructor(){}static wc(){return"default"}static Sc(){return"noease"}static vc(t){return Yt.get(t)}static Mc(s,...i){this.xc();let t,e=(s?(jt.has(s)||jt.set(s,new Map),[...(t=jt.get(s)).keys()].filter(t=>!ns._c(t,s)||ns._c(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...Wt.keys()].concat(e).filter(t=>!i.includes(t))}static Gc(){this.xc();const t=[...Ut.keys()];return t.sort(),[...Wt.keys()].concat(t)}static Tc(){this.xc();const t=[...Ut.keys()];return t.sort(),t}static Ic(t){for(const s of $t){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Cc(t){return this.xc(),[...Wt.keys()].includes(t)}static Pc(t){const s=qt.get(t);return s?Bt.get(s):ns.Cc(t)?Bt.get(t):zt.has(t)?zt.get(t):void 0}static Rc(t){return this.xc(),Jt.get(t)}static Ec(t,s){this.xc();const i=ns.Pc(t);if(i)return i;if(s)return jt.get(s).get(t);throw new Error("missing ease function")}static _c(t,s){this.xc();const i=Vt.get(s);if(i)return i.get(t)}static Ac(t,s){this.xc();const i=ns.Pc(t);return!!i||!!jt.get(s).get(t)}static Fc(t){this.xc();const s=ns.Pc(t);return s||Ut.get(t)}static Oc(t){return this.xc(),Ht.get(t)}static Dc(t){this.xc();const s=this.Gc();return s[t]}static kc(t,s){this.xc();const i=this.Mc(s);return i.indexOf(t)}static Lc(t){return this.kc(t)}static xc(){0===Bt.size&&(this.Nc("default",()=>{}),this.Nc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Nc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Nc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Nc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Nc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Nc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Nc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Nc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Nc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Nc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Nc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Nc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Nc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Nc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Nc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Nc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Nc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Nc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Nc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Nc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Nc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Nc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Nc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Bc("cubicbezier",this.Wc),this.Bc("spline",this.jc))}static Nc(t,s,i=!1){if("function"==typeof s)ns.Vc(t,s,"predefined");else{if(!Nt.We(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Nt.an(self.BuiltInTransition,t,i);h.SetFromJson(s),ns.Vc(t,(t,s,i,e)=>h.Uc(t,s,i,e),"predefined"),Jt.set(t,h)}else{const n=Nt.an(Nt.Hc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.zc(i),ns.Vc(t,(t,s,i,e)=>n.Uc(t,s,i,e),"predefined")}}}static Bc(t,s){ns.Vc(t,s,"private")}static Jc(t,s,i,e){this.xc(),ns.Vc(t,s,"custom",i,e)}static qc(t,s){if(!this.Cc(t)&&![...zt.keys()].includes(t)){const i=jt.get(s),e=(i&&i.delete(t),Vt.get(s));e&&e.delete(t)}}static Vc(t,s,i,e,h){switch(i){case"predefined":Bt.set(t,s),Wt.set(t,s);break;case"custom":if(e){jt.has(e)||jt.set(e,new Map),Vt.has(e)||Vt.set(e,new Map);const n=jt.get(e),r=(n.set(t,s),Vt.get(e));r.set(t,h)}else Ut.set(t,s),Ht.set(t,h);break;case"private":Bt.set(t,s),zt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static $c(t,s,i,e){return 0===e?s:i*t/e+s}static Wc(t,s,i,e,h){const n=s,r=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return n+r+o+a}static jc(t,s,i,e,h,n,r,o,a,l){if(e===h&&n===r)return t;const u=hs(t,s,e,n,o,l),c=Qt(i,h,r,a),f=ts(i,h,r,a),d=ss(i,h,r,a);return is(u,c,f,d)}static Xc(t,s,i,e){const h=[],n=Qt(t,s,i,e),r=ts(t,s,i,e),o=ss(t,s,i,e);for(let t=0;t<Kt;++t){const a=is(t*Zt,n,r,o);h.push(a)}return h}},11),Zt=1/(Kt-1),Qt=(t,s,i,e)=>e-3*i+3*s-t,ts=(t,s,i,e)=>3*i-6*s+3*t,ss=(t,s,i,e)=>3*(s-t),is=(t,s,i,e)=>((s*t+i)*t+e)*t,es=(t,s,i,e)=>3*s*t*t+2*i*t+e,hs=(r,t,s,i,e,h)=>{if(1==r)return 1;let o=0,n=1,a=h[n],l=Kt-1;for(Kt;n!=l&&a<=r;)n++,a=h[n],o+=Zt;n--;let u=(r-(a=h[n]))/(h[n+1]-a),c=o+u*Zt,f=Qt(t,s,i,e),d=ts(t,s,i,e),p=ss(t,s,i,e),m=es(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=is(c,f,d,p)-r,y=es(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Zt,e=0,h,n;do{c=s+(i-s)/2;let t=is(c,f,d,p)-r;0<t?i=c:s=c,h=1e-7<Math.abs(t),n=++e<10}while(h&&n);return c}}}{let o=function(t){rs.Ge(t)};o;const rs=self.Ns;rs.Yc=class{constructor(t){this.Kc=[],this.dn=t||"",this.Zc=0}ln(){this.ic(),this.Kc=null}Qc(){return this.dn}ic(){rs.Wr(this.Kc),this.Zc=0}tf(){return this.Zc}if(t=Math.random()*this.tf()){let s=0;for(const[i,e]of this.Kc)if(t<(s+=i))return e;return 0}ef(t,s){o(s),this.Zc+=t,this.Kc.push([t,s])}hf(s,i){o(i);const e=0===s;for(let t=0;t<this.Kc.length;t++){const h=this.Kc[t],n=e||h[0]===s,r=h[1]===i;if(n&&r){this.Kc.splice(t,1),this.Zc-=h[0];break}}}nf(){return JSON.stringify(this.Kc)}static rf(t,s){const i=new rs.Yc(s),e=JSON.parse(t);for(const h of e){const n=h[0],r=h[1];i.ef(n,r)}return i}}}{let t=self.Ns,i=0;t.lf=class{constructor(t,s){this.uf=t,this.cf=s,this.ff=i++,this.uf.df("runtime","screen-reader-text",{type:"create",id:this.ff,text:this.cf})}ln(){this.uf.df("runtime","screen-reader-text",{type:"release",id:this.ff}),this.uf=null,this.cf="",this.ff=-1}pf(t){this.cf!==t&&(this.cf=t,this.uf.df("runtime","screen-reader-text",{type:"update",id:this.ff,text:this.cf}))}}}{const os=self.Ns;os.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.mf=!1,this.gf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.gf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.mf=!0}}}{const as=self.Ns;as.Event.yf=class extends as.nn{constructor(t){super(),this.wf=t,this.Sf=[],this.bf=new Set,this.vf=[],this.Mf=new Set,this.xf=0,this._f=[]}ln(){0<this.xf||(as.Br(this.Sf),this.bf.clear(),as.Br(this.vf),this.Mf.clear(),as.Br(this._f),as.ln(this))}Gf(t,s){this.Tf()?this._f.push({If:"add",Cf:t,capture:s}):s?this.bf.has(t)||(this.Sf.push(t),this.bf.add(t)):this.Mf.has(t)||(this.vf.push(t),this.Mf.add(t))}Pf(t,s){this.Tf()?this._f.push({If:"remove",Cf:t,capture:s}):s?this.bf.has(t)&&(this.bf.delete(t),as.zr(this.Sf,t)):this.Mf.has(t)&&(this.Mf.delete(t),as.zr(this.vf,t))}Rf(){return!this.Sf.length&&!this.vf.length}Tf(){return 0<this.xf}Ef(){const t=new Set,s=new Set;for(const i of this._f)if("add"===i.If)this.Gf(i.Cf,i.capture),(i.capture?s:t).delete(i.Cf);else{if("remove"!==i.If)throw new Error("invalid op");(i.capture?(this.bf.delete(i.Cf),s):(this.Mf.delete(i.Cf),t)).add(i.Cf)}as.$r(this.vf,t),as.$r(this.Sf,s),as.Br(this._f)}Af(i){this.Ff();let e=!1;for(let t=0,s=this.Sf.length;t<s;++t)if(this.Sf[t](i),i.mf){e=!0;break}if(!e)for(let t=0,s=this.vf.length;t<s&&(this.vf[t](i),!i.mf);++t);return this.Of(),!i.defaultPrevented}Df(i){this.Ff();for(let t=0,s=this.Sf.length;t<s;++t)this.Sf[t](i);for(let t=0,s=this.vf.length;t<s;++t)this.vf[t](i);return this.Of(),!0}Ff(){this.xf++}Of(){this.xf--,0===this.xf&&0<this._f.length&&this.Ef()}kf(t){t?this.Ff():this.Of()}Lf(i){let e=[];for(let s=0,t=this.Sf.length;s<t;++s){let t=this.Sf[s];e.push(as.Nf(()=>t(i)))}for(let s=0,t=this.vf.length;s<t;++s){let t=this.vf[s];e.push(as.Nf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Bf(i){const e=[];this.Ff();for(let t=0,s=this.Sf.length;t<s;++t){const h=this.Sf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.vf.length;t<s;++t){const n=this.vf[t](i);n instanceof Promise&&e.push(n)}return this.Of(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Wf(t){return this.Bf(t)}async jf(i){this.Ff();for(let t=0,s=this.Sf.length;t<s;++t){const e=this.Sf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.vf.length;t<s;++t){const h=this.vf[t](i);h instanceof Promise&&await h}return this.Of(),!i.defaultPrevented}*Vf(i){this.Ff();for(let t=0,s=this.Sf.length;t<s;++t){const e=this.Sf[t](i);as.Vo(e)&&(yield*e)}for(let t=0,s=this.vf.length;t<s;++t){const h=this.vf[t](i);as.Vo(h)&&(yield*h)}this.Of()}}}{const ls=self.Ns;ls.Event.Uf=class extends ls.nn{constructor(){super(),this.Hf=new Map,this.zf=!1}ln(){if(this.zf)throw new Error("already released");this.Jf(),this.zf=!0,ls.ln(this)}un(){return this.zf}Jf(){if(this.Hf){for(let t of this.Hf.values())t.ln();this.Hf.clear()}}qf(t,s){let i=this.Hf.get(t);return i||(s?(i=ls.an(ls.Event.yf,t),this.Hf.set(t,i),i):null)}$f(t){return this.Hf.has(t)}addEventListener(t,s,i){let e=this.qf(t,!0);e.Gf(s,!!i)}removeEventListener(t,s,i){let e=this.qf(t,!1);e&&(e.Pf(s,!!i),e.Rf())&&this.Hf.delete(t)}dispatchEvent(t){const s=this.qf(t.type,!1);return!s||(t.cancelable?s.Af(t):s.Df(t))}Xf(t){const s=this.qf(t.type,!1);return s?(t.gf=!0,s.Lf(t)):Promise.resolve(!0)}async Yf(t){const s=this.qf(t.type,!1);if(!s)return!0;this.Hf.delete(t.type),t.gf=!0;const i=await s.Lf(t);return s.ln(),i}async Kf(t){const s=this.qf(t.type,!1);return!s||s.Wf(t)}Zf(t){const s=this.qf(t.type,!1);return!s||s.Bf(t)}async Qf(t){const s=this.qf(t.type,!1);return!s||s.jf(t)}t0(t){const s=this.qf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Vf(t)}kf(t){for(const s of this.Hf.values())s.kf(t)}}}{let n=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;r(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);n(s)}}},r=function(s){let t;try{t=s.Cf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(n,s,r,self.Ns),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.ri.ii("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Nf=function(i){let e=null;return t.isDebug&&(e=t.de()),new Promise((t,s)=>{u.push({Cf:i,resolve:t,reject:s,stack:e}),h?r(u.pop()):-1===c&&n(a)})},t.Nf.s0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){n=-1},s=function(){r=-1,o=-1;let i=Date.now();for(let s of a)if(s.i0(i)){let t=s.e0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);r=self.setTimeout(s,t)}},i=(t,s,self.Ns),e=1e3,h=100,n=-1,r=(i.h0=function(){return-1===n&&(n=Date.now(),self.setTimeout(t,16)),n},-1),o=-1,a=new Set;i.n0=class{constructor(t,s){this.r0=t,this.o0=1e3*s,this.a0=0,this.l0=!1}u0(){let t=i.h0();this.a0=t+this.o0,this.l0||(a.add(this),this.l0=!0),-1===r?(o=this.a0,r=self.setTimeout(s,this.o0+h)):this.a0<o&&o>t+e&&(self.clearTimeout(r),o=this.a0,r=self.setTimeout(s,this.o0+h))}i0(t){return!(t>=this.a0)||(this.r0()?(this.a0=t+this.o0,!0):this.l0=!1)}e0(){return this.a0}c0(){this.l0&&(a.delete(this),this.l0=!1,0===a.size)&&-1!==r&&(self.clearTimeout(r),r=-1,o=-1)}ln(){this.c0(),this.r0=null}}}{const us=self.Ns;us.f0=class cs{constructor(t){this.d0=!1,this.p0=t}m0(){this.d0||(this.d0=!0,this.p0&&(this.p0(),this.p0=null))}g0(){return this.d0}ln(){this.m0()}static ln(t){return new cs(()=>t.ln())}static y0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const n=new us.w0;for(let t of i)s.addEventListener(t,e,h),n.fc(us.an(us.f0,()=>s.removeEventListener(t,e,h)));return n}return s.addEventListener(i,e,h),us.an(us.f0,()=>s.removeEventListener(i,e,h))}},us.S0=class extends us.f0{b0(t){this.p0=t}},us.w0=class extends us.f0{constructor(...s){super(),this.v0=new Set;for(let t of s)this.fc(t)}fc(...s){if(this.d0)throw new Error("already disposed");for(let t of s)this.v0.add(t)}M0(t){if(this.d0)throw new Error("already disposed");this.v0.delete(t)}x0(){if(this.d0)throw new Error("already disposed");if(this.v0){for(let t of this.v0)t.m0();this.v0.clear()}}g0(){return this.d0}m0(){if(this.d0)throw new Error("already disposed");this.d0=!0;for(let t of this.v0)t.m0();this.v0.clear(),this.v0=null}ln(){this.m0()}}}{const fs=self.Ns;fs._0=class extends fs.nn{constructor(){super(),this.G0=0,this.sl=0,this.T0=0,this.I0=0}fc(t){this.sl=(t=+t)-this.G0,this.T0=this.I0+this.sl,this.G0=this.T0-this.I0-this.sl,this.I0=this.T0}C0(t){this.I0-=+t}ei(){return this.I0}u0(){this.G0=0,this.sl=0,this.T0=0,this.I0=0}Set(t){this.G0=0,this.sl=0,this.T0=0,this.I0=+t}P0(t){this.G0=t.G0,this.sl=t.sl,this.T0=t.T0,this.I0=t.I0}ln(){}}}{const ds=self.Ns,r={};r.R0=function(t){this.E0=t,this.right=this.E0.A0,this.left=this.E0.A0,this.parent=null,this.color=!1,this.key=null},r.F0=function(t){this.size=0,this.A0=new r.R0(this),this.A0.color=!1,this.root=this.A0,this.root.parent=this.A0,this.compare=t||this.O0},r.F0.prototype.O0=function(t,s){return t<s?-1:s<t?1:0},r.F0.prototype.clone=function(){var t=new r.F0(this.compare);return t.D0(this),t},r.F0.prototype.clear=function(){this.size=0,this.A0=new r.R0(this),this.A0.color=!1,this.root=this.A0,this.root.parent=this.A0},r.F0.prototype.k0=function(t){var s=t.right;t.right=s.left,s.left!=this.A0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.A0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},r.F0.prototype.L0=function(t){var s=t.left;t.left=s.right,s.right!=this.A0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.A0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},r.F0.prototype.N0=function(t){if(this.contains(t))this.B0(t).key=t;else{for(var s=new r.R0(this),i=(s.key=t,this.A0),e=this.root;e!=this.A0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.A0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.A0,s.right=this.A0,s.color=!0,this.W0(s),this.size++}},r.F0.prototype.W0=function(t){for(;t!=this.A0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.k0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.A0&&this.L0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.L0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.A0&&this.k0(t.parent.parent))}this.root.color=!1},r.F0.prototype.j0=function(t){var s=t.left==this.A0||t.right==this.A0?t:this.V0(t),i=s.left!=this.A0?s.left:s.right;i.parent=s.parent,s.parent==this.A0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.U0(i),this.size--},r.F0.prototype.U0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.k0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.L0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.k0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.L0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.k0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.L0(t.parent),this.root))}t.color=!1},r.F0.prototype.remove=function(t){var s;return(t=this.B0(t))!=this.A0?(s=t.key,this.j0(t),s):null},r.F0.prototype.H0=function(t,s){this.remove(s)},r.F0.prototype.min=function(t){for(;t.left!=this.A0;)t=t.left;return t},r.F0.prototype.max=function(t){for(;t.right!=this.A0;)t=t.right;return t},r.F0.prototype.V0=function(t){if(t.right!=this.A0)return this.min(t.right);for(var s=t.parent;s!=this.A0&&t==s.right;)s=(t=s).parent;return s},r.F0.prototype.z0=function(t){if(t.left!=this.A0)return this.max(t.left);for(var s=t.parent;s!=this.A0&&t==s.left;)s=(t=s).parent;return s},r.F0.prototype.J0=function(t){if(0<this.size){var s=this.B0(t);if(s==this.A0)return null;if(s.right!=this.A0)return this.min(s.right).key;for(var i=s.parent;i!=this.A0&&s==i.right;)i=(s=i).parent;return i!=this.A0?i.key:null}return null},r.F0.prototype.q0=function(t){if(0<this.size){var s=this.B0(t);if(s==this.A0)return null;if(s.left!=this.A0)return this.max(s.left).key;for(var i=s.parent;i!=this.A0&&s==i.left;)i=(s=i).parent;return i!=this.A0?i.key:null}return null},r.F0.prototype.$0=function(){return this.min(this.root).key},r.F0.prototype.X0=function(){return this.max(this.root).key},r.F0.prototype.B0=function(t){for(var s=this.root;s!=this.A0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},r.F0.prototype.contains=function(t){return null!=this.B0(t).key},r.F0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},r.F0.prototype.D0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.N0(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.N0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.N0(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.N0(t[e])},r.F0.prototype.Y0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.H0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.remove(t[e])},r.F0.prototype.K0=function(t){if("array"==r.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==r.typeOf(t.forEach))return t.every(this.contains,this);if("function"==r.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==r.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},r.F0.prototype.range=function(t,s){var i=[];return this.Z0(function(t){i.push(t)},t,s),i},r.F0.prototype.Q0=function(t,s){if(!this.td())for(var i=this.min(this.root);i!=this.A0;){if(t.call(s,i.key,this))return;i=this.V0(i)}},r.F0.prototype.ed=function(t,s,i){if(!this.td())for(var e=this.B0(s);e!=this.A0;){if(t.call(i,e.key,this))return;e=this.V0(e)}},r.F0.prototype.hd=function(t,s,i){if(!this.td())for(var e=this.min(this.root),h=this.B0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.V0(e)}},r.F0.prototype.Z0=function(t,s,i,e){if(!this.td())for(var h=this.B0(s),n=this.B0(i);h!=n;){if(t.call(e,h.key,this))return;h=this.V0(h)}},r.F0.prototype.nd=function(t,s){if(!this.td())for(var i=this.max(this.root);i!=this.A0;){if(t.call(s,i.key,this))return;i=this.z0(i)}},r.F0.prototype.forEach=function(t,s){if(!this.td())for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))t.call(s,i.key,i.key,this)},r.F0.prototype.some=function(t,s){if(!this.td())for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},r.F0.prototype.every=function(t,s){if(this.td())return!1;for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},r.F0.prototype.map=function(t,s){var i=[];if(!this.td())for(var e=this.min(this.root);e!=this.A0;e=this.V0(e))i.push(t.call(s,e.key,e.key,this));return i},r.F0.prototype.filter=function(t,s){var i=[];if(!this.td())for(var e=this.min(this.root);e!=this.A0;e=this.V0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},r.F0.prototype.getCount=function(){return this.size},r.F0.prototype.td=function(){return 0==this.size},r.F0.prototype.isSubsetOf=function(t){var s=r.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.td())return!0;for(var e=this.min(this.root);e!=this.A0;e=this.V0(e))r.contains.call(t,t,e.key)&&i++;return i==this.getCount()},r.F0.prototype.intersection=function(t){var s=new r.F0(this.compare);if(!this.td())for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))t.contains.call(t,i.key,i.key,this)&&s.N0(i.key);return s},ds.F0=class extends ds.nn{constructor(t){super(),this.rd=new r.F0(t),this.od=!1,this.ad=new Set,this.ld=new Set}fc(t){this.od?this.rd.contains(t)?this.ld.delete(t):this.ad.add(t):this.rd.N0(t)}M0(t){this.od?this.rd.contains(t)?this.ld.add(t):this.ad.delete(t):this.rd.remove(t)}ii(t){return this.od?!!this.ad.has(t)||!this.ld.has(t)&&this.rd.contains(t):this.rd.contains(t)}ic(){this.rd.clear(),this.ad.clear(),this.ld.clear()}toArray(){if(this.od)throw new Error("cannot be used in queueing mode");return this.rd.getValues()}rc(){return this.rd.getCount()+this.ad.size-this.ld.size}ec(){return 0===this.rc()}ud(){if(this.ec())throw new Error("empty set");if(this.od)throw new Error("cannot be used in queueing mode");const t=this.rd,s=t.min(t.root);return s.key}fd(){if(this.ec())throw new Error("empty set");if(this.od)throw new Error("cannot be used in queueing mode");const t=this.ud();return this.M0(t),t}dd(t){if(this.od!==(t=!!t)&&!(this.od=t)){for(const s of this.ld)this.rd.remove(s);this.ld.clear();for(const i of this.ad)this.rd.N0(i);this.ad.clear()}}pd(t){this.rd.forEach(t)}*values(){if(!this.ec()){const s=this.rd;for(let t=s.min(s.root);t!=s.A0;t=s.V0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ps=self.Ns;ps.md=class{constructor(t=ps.hardwareConcurrency){this.gd=t,this.yd=[],this.wd=0}fc(i){return new Promise((t,s)=>{this.yd.push({Cf:i,resolve:t,reject:s}),this.Sd()})}bd(i){for(let t=0,s=this.yd.length;t<s;++t)if(this.yd[t].Cf===i)return t;return-1}vd(t,s){const i=this.bd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.yd[i].resolve(s),this.yd.splice(i,1)}Md(t,s){const i=this.bd(t);if(-1===i)throw new Error("cannot find promise to reject");this.yd[i].reject(s),this.yd.splice(i,1)}async Sd(){if(this.yd.length&&!(this.wd>=this.gd)){this.wd++;const s=this.yd.shift();try{const t=await s.Cf();s.resolve(t)}catch(t){s.reject(t)}this.wd--,this.Sd()}}static async xd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ms=self.Ns;ms._d=class{constructor(t,s,i){this.r0=t,this.Gd=s,this.Td=i||2*s,this.Id=-1,this.Cd=-1/0,this.Pd=()=>this.Rd(),this.Ed=!1,this.Ad=!1,this.Fd=null}Od(t){this.Ad=!!t}Dd(){return void 0!==ms.Battery&&ms.Battery.IsOnBatteryPower()?this.Td:this.Gd}kd(...e){if(-1===this.Id){this.Fd=e;let t=ms.h0(),s=t-this.Cd,i=this.Dd();i<=s&&this.Ad?(this.Cd=t,this.Ld()):this.Id=self.setTimeout(this.Pd,Math.max(i-s,4))}}Ld(){this.Ed=!0;const t=this.Fd;this.Fd=null,t?this.r0(...t):this.r0(),this.Ed=!1}u0(){this.Ed||(this.Nd(),this.Fd=null,this.Cd=ms.h0())}Rd(){this.Id=-1,this.Cd=ms.h0(),this.Ld()}Nd(){-1!==this.Id&&(self.clearTimeout(this.Id),this.Id=-1)}ln(){this.Nd(),this.r0=null,this.Fd=null,this.Pd=null}}}{const gs=self.Ns;gs.Bd=class{constructor(){this.Wd=new Map,this.jd=!1,this.Vd=null,this.Ud=null,this.Hd=null,this.zd=null}Jd(t){this.jd=!!t}qd(){return this.jd}$d(t){this.Vd=t}Xd(t){if(this.Vd)return this.Vd(t);throw new Error("no get base size callback set")}Yd(t){this.Ud=t}Kd(t,s,i,e,h,n){if(this.Ud)return this.Ud(t,s,i,e,h,n);throw new Error("no raster at size callback set")}Zd(t){this.Hd=t}Qd(t){if(!this.Hd)throw new Error("no release result callback set");this.Hd(t)}t1(t){this.zd=t}s1(){if(!this.zd)throw new Error("no redraw callback set");this.zd()}i1(t){let s=this.Wd.get(t);return s||(s=gs.an(gs.e1,this,t),this.Wd.set(t,s)),s.h1(),s}n1(t){this.Wd.delete(t.o1())}a1(){for(const t of this.Wd.values())t.l1(),t.u1()}}}{const ys=self.Ns;ys.e1=class{constructor(t,s){this.c1=t,this.f1=s,this.d1=0,this.m1=0,this.g1=0,this.w1=this.c1.Xd(s).then(t=>{this.c1&&(this.m1=t[0],this.g1=t[1],this.c1.s1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.S1=!0,this.c1&&this.c1.s1()}),this.b1=0,this.v1=0,this.M1=0,this._1=0,this.G1=!1,this.T1=null,this.I1=!1,this.S1=!1}ln(){if(this.d1<=0)throw new Error("already released");this.d1--,0===this.d1&&this.C1()}l1(){this.T1&&(this.c1.Qd(this.T1),this.T1=null)}C1(){this.l1(),this.c1.n1(this),this.c1=null}o1(){return this.f1}h1(){this.d1++}P1(){return 0<this.d1}R1(){return this.T1}u1(){this.I1=!0}async E1(e,h,n){if(0!==h&&0!==n&&!this.S1&&!this.G1){let t=ys.Dn(Math.ceil(h)),s=ys.Dn(Math.ceil(n)),i=Math.max(t,s);if(4096<i){const r=4096/i;h*=r,n*=r,t=Math.min(Math.ceil(t*r),4096),s=Math.min(Math.ceil(s*r),4096)}if(h<t&&n<s){const o=h/n,a=t/s;n=o<a?(h=s*o,s):(h=t)/o}if(this.c1.qd()&&(t=Math.ceil(h),s=Math.ceil(n)),!(t<=this.b1&&s<=this.v1)||this.I1){this.G1=!0,this.b1=t,this.v1=s;const l=await this.c1.Kd(this.f1,e,this.b1,this.v1,h,n);this.c1&&(this.l1(),this.T1=l,this.M1=h,this._1=n,this.G1=!1,this.I1=!1,this.c1.s1())}}}A1(){return this.w1}F1(){return this.m1}O1(){return this.g1}D1(){return this.M1}L1(){return this._1}N1(){return this.S1}}}{let s=function(t){return vs.get(t)};s;const c=self.Ns,ws=(c.B1="\ufeff",new Set("0123456789")),Ss=(c.W1=function(t){return ws.has(t)},new Set(" \t\n\r\u2028\u2029"));c.j1=function(t){return Ss.has(t)},c.V1=function(t){return[...t].filter(t=>!c.j1(t)).join("")},c.U1=function(t){for(const s of t)if(!c.j1(s))return!1;return!0},c.H1=function(t){for(const s of t)if(!c.j1(s))return!1;return!0},c.z1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.J1=function(t){return[...t].filter(t=>!c.z1(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.q1=function(t){return!c.j1(t)&&i&&i.test(t)};const bs=new Set("0123456789.+-e"),vs=(c.X1=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ws.has(t))return!1;for(let t of s)if(!bs.has(t))return!1;return!0},c.Y1=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.W1(t))break;--i}return s.substr(0,i)},c.K1=function(t){let s=c.Y1(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ms=/[&<>"']/g,xs=(c.Z1=function(t){return t.replace(Ms,s)},c.Q1=function(t){let s=c.tp(t,"\\","\\\\");return s=c.tp(s,'"','\\"'),s=c.tp(s,"\t","\\t"),s=c.tp(s,"\r",""),c.tp(s,"\n","\\n")},c.ip=function(t){let s=c.tp(t,"&","&amp;");return s=c.tp(s,"<","&lt;"),s=c.tp(s,">","&gt;"),c.tp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),_s=(c.fe=function(t){return t.replace(xs,"\\$&")},c.ep=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.hp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,n,r=[];for(;-1<(n=t.indexOf(s,h));)r.push(n),h=n+e;return r},c.tp=function(t,s,i){return t.replaceAll(s,()=>i)},c.np=function(t,s,i){return t.replace(new RegExp(c.fe(s),"gi"),()=>i)},c.rp=function(t,s){"string"==typeof s?t.textContent=s:s.op()?t.textContent=s.toString():(t.innerHTML=s.lp(),s instanceof c.Ah&&s.up(t))},c.cp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Ah?t.equals(s):s instanceof c.HtmlString||s instanceof c.Ah?s.equals(t):t===s},c.fp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const n=`{${t}}`;if(!i.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);h=h.replace(n,e[t].toString())}return h},c.pp=function(i,...e){let h=i,n=-1,r=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(r=t,h=h.replace(o,e[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=r&&n<r)throw new Error(`missing placeholder '${n}' in string substitution`);return h},c.mp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.gp=function(t,s){return s<t?1:t<s?-1:0},c.yp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.Sp=function(t){const s=[];for(const i of _s.segment(t))s.push(i.segment);return s},c.bp=function*(t){for(const s of _s.segment(t))yield s.segment},c.vp=function(t){let s=0;for(const i of _s.segment(t))++s;return s},1073741824),Ts=1024*Gs,Is={Mp:!(c.xp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),_p:!0,Gp:!0,Tp:!0,Ip:!0};c.Cp=function(t,s){s=Object.assign({},Is,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s._p){const r=Math.floor(t/86400);0<r&&(t-=24*r*3600,i.push(h(".days",null,r)))}if(s.Gp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Tp){const a=Math.floor(t/60);(0<a||i.length||!s.Ip)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.Ip){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const n=(s.Mp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),n},c.Pp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Rp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Ep=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Vr(i,4,"0"),c.Vr(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Ap=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Fp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Op=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,n,r,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,h=1;h<=t.length;h++)r=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(n+1,o[h]+1)),o[h-1]=n,n=r;o[t.length]=n}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const n=parseInt(e.substring(3),10)-1;if(n<0||n>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[n],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.tp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const r=a[s];if("string"==typeof r)return`<a href="${a[s]}">`;if("function"==typeof r)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ns),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Ah=class{constructor(t,s){if(this.Dp=s&&s.kp?t:f.Z1(t),this.Lp="",this.Np=!1,this.Bp=[],this.Wp=[],s){if(this.Np=!!s.jp,s.links){if(9<s.links.length)throw new Error("too many links");this.Bp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Wp=s.tips}}this.Vp=this.Dp.includes("["),this.Up=this.Np&&this.Dp.includes("\n"),this.Hp=!this.Vp&&!this.Up&&!this.Dp.includes("&"),this.zp=!1,this.Jp=[]}toString(){return this.Dp}valueOf(){return this.Dp}op(){return this.Hp}qp(){return this.Vp?this.Dp.replace(i,""):this.Dp}lp(){if(this.Hp)return this.Dp;if(!this.Lp&&this.Dp){let t=this.Dp;this.Vp&&(u=0,a=this.Bp,l=this.Wp,t=t.replace(i,s),a=null,l=null),this.Up&&(t=t.replace(e,"<br>")),this.Lp=t}return this.Lp}up(i){if(this.Bp.length)for(let t=0,s=this.Bp.length;t<s;++t){const e=this.Bp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.lp()===t.lp():t instanceof f.Ah?this.Dp===t.Dp:this.Dp===t}$p(){if(!this.zp){let e=[],t=this.Dp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const n=i.index;if(!(0<n&&"\\"===t.charAt(n-1))){const r=i[0],o=i[1],a=i[2],l=t.substring(s,n);if(s=n+r.length,l&&e.push({text:l,Xp:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Xp:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),Xp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Yp(c.text));this.Jp=e.map(t=>t.icon?f.an(f.Kp,{icon:t.icon,Xp:t.Xp}):f.an(f.Zp,{Qp:f.Sp(t.text),Xp:t.Xp})),this.zp=!0}return this.Jp}Yp(t){return t=f.tp(t,"\\[","["),f.tp(t,"\\\\","\\")}static tm(t){return f.an(f.Ah,t,{kp:!0}).qp()}static im(t){return t.replace(p,"")}}}{let l=function(t){return""!==t&&""!==t&&w.j1(t)},a=function(t){return Cs.has(t)},u=function(t){return w.q1(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Ns,Cs=new Set("");w.hm=class{constructor(){this.nm=[],this.rm=null}om(){return this.nm}am(){return this.nm.length}lm(t){this.rm=t}um(t,s){let i=0,e=0,h=0,n=0,r=0;for(const o of t){if(-1===o.fm()){const a=s(o);o.pm(a.height),o.gm(a.fontBoundingBoxAscent||0),o.ym(a.fontBoundingBoxDescent||0),o.wm(a.Sm||0),o.vm()?o.Mm(a.width):o.xm()&&o._m(this.rm)}i+=o.fm(),e=Math.max(e,o.Gm()),h=Math.max(h,o.Tm()),n=Math.max(n,o.Im()),r=Math.max(r,o.Cm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:n,Sm:r}}Pm(t,s,i,e,h,n){this.nm.push(w.an(w.hm.Rm,{Em:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Sm:n}))}hm(s,n,r,i,o){if("string"==typeof s&&(s=[w.an(w.Zp,{Qp:w.Sp(s)})]),w.Br(this.nm),!(!s.length||1===s.length&&s[0].vm()&&s[0].ec()||r<2)){if(1===s.length){const a=s[0];if(a.vm()&&a.Am()<=100&&!a.Fm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Sm:h}=n(a);if(t+=o,a.Mm(t),a.pm(s),a.gm(i||0),a.ym(e||0),a.wm(h||0),t<=r)return void this.Pm([a],t,s,i,e,h)}}let t;t="word"===i?this.Om(s):"cjk"===i?this.Dm(s):this.km(s),this.Lm(t,n,r,o)}}Om(t){let s=[],i=[],e=!1;for(const h of t){const n=h.Nm();if(h.xm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Bm())if(y(r))0<i.length&&s.push(i),s.push([w.an(w.Zp,{Qp:["\n"],Xp:n})]),i=[];else if(0===i.length)i.push(w.an(w.Zp,{Qp:[r],Xp:n})),e=l(r);else{const o=l(r);if(o===e){const a=i.at(-1);a.Nm()===n?a.Wm(r):i.push(w.an(w.Zp,{Qp:[r],Xp:n}))}else s.push(i),i=[w.an(w.Zp,{Qp:[r],Xp:n})],e=o}}return 0<i.length&&s.push(i),s}Dm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.Nm();if(h.xm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Bm())if(y(r))0<i.length&&s.push(i),s.push([w.an(w.Zp,{Qp:["\n"],Xp:n})]),i=[];else{if(0===i.length)i.push(w.an(w.Zp,{Qp:[r],Xp:n}));else if(e||u(r)){const o=i.at(-1);o.Nm()===n?o.Wm(r):i.push(w.an(w.Zp,{Qp:[r],Xp:n}))}else s.push(i),i=[w.an(w.Zp,{Qp:[r],Xp:n})];e=a(r)}}return 0<i.length&&s.push(i),s}km(t){const s=[];for(const i of t)if(i.vm()){const e=i.Bm();w.$h(s,e.map(t=>[w.an(w.Zp,{Qp:[t],Xp:i.Nm()})]))}else s.push([i]);return s}jm(t){return t.map(t=>t.Vm())}Um(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.vm()&&i[0].vm()&&i[0].Nm()===t.Nm()&&(t.Hm(i[0].Bm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Vm())}}Lm(t,s,i,e){let h=[],n=0,r=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].vm()&&1===u[0].Am()&&y(u[0].Bm()[0])){if(0===r){const c=w.an(w.Zp,{Qp:[" "],Xp:u[0].Nm()}),f=s(c);r=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Sm||0}this.Pm(h,n,r,o,a,l),h=[],n=0,r=0,o=0,a=0,l=0}else{const d=this.jm(h),p=(this.Um(d,u),this.um(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Pm(h,n,r,o,a,l),h=[],u[0].vm()&&w.H1(u[0].Bm()))n=0,r=0,o=0,a=0,l=0;else{this.Um(h,u);const g=this.um(h,s);n=g.width,r=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Sm}else h=d,n=m,r=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Sm}0<h.length&&this.Pm(h,n,r,o,a,l),this.zm(s,e)}zm(s,i){for(const e of this.nm){const h=e.Jm();if(h.length){let t=h.at(-1);if(t.vm()){const n=t.Bm(),r=n.slice(0);if(c(r),0===r.length)e.qm(-t.fm()),h.pop();else if(r.length<n.length){t.$m(r);const o=s(t).width,a=t.fm()-o;t.Mm(o),e.qm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).qm(i),e.qm(i))}}}}ic(){w.Br(this.nm)}Xm(){return this.nm.reduce((t,s)=>Math.max(t,s.fm()),0)}Ym(){return this.nm.reduce((t,s)=>t+s.Gm(),0)}}}{const Ps=self.Ns;Ps.hm.Rm=class{constructor(t){this.Jp=t.Em||[],this.Km=t.width||-1,this.Zm=t.height||-1,this.Qm=t.fontBoundingBoxAscent||-1,this.tg=t.fontBoundingBoxDescent||-1,this.sg=t.Sm||-1,this.ig=0,this.eg=0}Em(){return this.Jp.values()}*hg(){const s=this.Jp;for(let t=s.length-1;0<=t;--t)yield s[t]}Jm(){return this.Jp}qm(t){this.Km+=t}fm(){return this.Km}Gm(){return this.Zm}ng(){return this.Qm}Im(){return this.tg}Cm(){return this.sg}rg(t){this.ig=t}og(){return this.ig}ag(t){this.eg=t}lg(){return this.eg}}}{const Rs=self.Ns;Rs.ug=class{constructor(t){this.fg=t.Xp||[],this.Km=t.width||-1,this.Zm=t.height||-1,this.Qm=t.fontBoundingBoxAscent||-1,this.tg=t.fontBoundingBoxDescent||-1,this.sg=t.Sm||-1,this.ig=0,this.eg=0}vm(){return!1}xm(){return!1}Nm(){return this.fg}dg(s){const i=this.fg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}pg(t){return!!this.dg(t)}mg(){const t=new Map;for(const s of this.fg)t.set(s.tag,s.param);return t}qm(t){this.Km+=t}Mm(t){this.Km=t}fm(){return this.Km}pm(t){this.Zm=t}Gm(){return this.Zm}gm(t){this.Qm=t}Tm(){return this.Qm}ym(t){this.tg=t}Im(){return this.tg}wm(t){this.sg=t}Cm(){return this.sg}rg(t){this.ig=t}og(){return this.ig}ag(t){this.eg=t}lg(){return this.eg}}}{const Es=self.Ns;Es.Zp=class extends Es.ug{constructor(t){super(t),this.gg=t.Qp}vm(){return!0}Hm(t){Es.$h(this.gg,t),this.Km=-1,this.Zm=-1,this.Qm=-1,this.tg=-1,this.sg=-1}Wm(t){this.gg.push(t)}Vm(){return Es.an(Es.Zp,{Qp:this.gg.slice(0),Xp:this.fg,width:this.Km,height:this.Zm,fontBoundingBoxAscent:this.Qm,fontBoundingBoxDescent:this.tg,Sm:this.sg})}Bm(){return this.gg}$m(t){this.gg=t}Am(){return this.gg.length}ec(){return 0===this.gg.length}Fm(){return this.gg.includes("\n")}}}{const As=self.Ns;As.Kp=class extends As.ug{constructor(t){super(t),this.yg=t.icon}xm(){return!0}wg(){return this.yg}Vm(){return As.an(As.Kp,{icon:this.yg,Xp:this.fg,width:this.Km,height:this.Zm,fontBoundingBoxAscent:this.Qm,fontBoundingBoxDescent:this.tg,Sm:this.sg})}Sg(t){if(!t)return null;let s=Number(this.yg);return String(s)===this.yg?(s=Math.floor(s),t.bg(s)):t.vg(this.yg)}_m(t){const s=this.Sg(t);this.Km=s?this.Zm*s.fm()/s.Gm():0}Mg(t){const s=this.Sg(t);return s?s.Mg():null}Am(){return 1}}}{const Fs=self.Ns;Fs.xg=class{constructor(t){this._g=new Map,this.Gg=t.Tg,this.Ig=t.Cg}ln(){for(const t of this._g.values())t.ln();this._g.clear()}Pg(t){let s=this._g.get(t);if(!s){const i=this.Gg(t);s=Fs.an(Fs.Rg,this,{source:t,Eg:i}),this._g.set(t,s)}return s}Ag(t){return this._g.has(t)}Fg(t){const s=this._g.get(t);s&&s.ln(),this._g.delete(t)}async Og(t){return this.Ig(t)}}}{const Os=self.Ns;Os.Rg=class{constructor(t,s){this.Dg=t,this.kg=s.source,this.Lg=[],this.Ng=new Map,this.Bg=!1,this.Wg=!1,this.jg=null;const i=s.Eg.Vg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Os.an(Os.Ug,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Lg.push(h),e.tag&&this.Ng.set(e.tag.toLowerCase(),h)}}ln(){for(const t of this.Lg)t.ln();Os.Br(this.Lg),this.Ng.clear(),this.Dg=null,this.kg=null}Hg(){return this.Bg}zg(){return this.Wg}Jg(){return this.jg||(this.jg=this.qg()),this.jg}async qg(){if(!this.Bg){this.Bg=!0,this.Wg=!0;const t=await this.Dg.Og(this.kg);if(this.Dg){const i=t.Vg;for(let t=0,s=Math.min(i.length,this.Lg.length);t<s;++t){const e=i[t].$g;this.Lg[t].Xg(e)}this.Wg=!1}}}bg(t){return(t=Math.floor(t))<0||t>=this.Lg.length?null:this.Lg[t]}vg(t){return this.Ng.get(t.toLowerCase())||null}}}{const Ds=self.Ns;Ds.Ug=class{constructor(t,s){this.Yg=t,this.kg=s.source||null,this.Kg=s.index,this.Zg=s.tag,this.Km=s.width,this.Zm=s.height,this.Qg=null}ln(){this.Km=0,this.Zm=0,this.Yg=null}ty(){return this.kg}fm(){return this.Km}Gm(){return this.Zm}Xg(t){this.Qg=t}Mg(){return this.Qg}}}{let e=function(t,s,i,e){const h=Ws;_h.N(Ns,i,s),_h.N(Bs,t,s),_h.Ot(h,Ns,Bs),_h.normalize(h,h),e.set(h[0],h[1],h[2],_h.Ft(t,h))},r=function(t,s,i,e,h,n,r){const o=r.x,a=r.y,l=r.z,u=r.w,c=r.iy,f=r.ey,d=r.hy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*n*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*h*f+a*s*m+l*n*d+l*i*g;return u<w},h=function(t,s,i,e){const h=e.x,n=e.y,r=e.z,o=e.w,a=h*t+n*s+r*i;return o<=a};e,r,h;const ks=self.Ns,Ls=self.vs,_h=Ls.Ps,Vh=Ls.Rs,xh=Ls.Gs,Ns=_h.create(),Bs=_h.create(),Ws=_h.create(),js=Vh.create(),Vs=xh.create(),Us=_h.create(),Hs=_h.create(),zs=_h.create(),Js=_h.create(),qs=_h.create(),$s=_h.create(),Xs=_h.create(),Ys=_h.create(),Ks=Vh.I(0,0,1,1);ks.ny={oy(t,s,i,e,h,n,r){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,r[0]=(.5*(c*=p)+.5)*n[2]+n[0],r[1]=(.5*f+.5)*n[3]+n[1],r[2]=.5*(1+d),!0)},uy(t,s,i,e,h,n,r){const o=Vs,a=js;return xh.multiply(o,h,e),null!==xh.P(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,Vh.Bt(a,a,o),0!==a[3])&&(a[3]=1/a[3],r[0]=a[0]*a[3],r[1]=a[1]*a[3],r[2]=a[2]*a[3],!0)},my(t,s,i,e,h,n,r){const o=Ns,a=Bs;if(!ks.ny.uy(t,s,0,e,h,n,o))return!1;if(!ks.ny.uy(t,s,1,e,h,n,a))return!1;let l=Bs,u=(_h.N(l,a,o),Ws),c=(_h.set(u,0,0,1),-i),f=_h.Ft(u,l),d=0;if(0===f){const p=_h.Ft(u,o)+c;if(0!==p)return!1}else if((d=-(_h.Ft(o,u)+c)/f)<0)return!1;return _h.Ct(r,o,l,d),!0}};class Zs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.iy=NaN,this.ey=NaN,this.hy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.iy=0<t?1:0,this.ey=0<s?1:0,this.hy=0<i?1:0}}ks.ny.gy=class{constructor(){this.yy=new Zs,this.wy=new Zs,this.Sy=new Zs,this.by=new Zs,this.vy=new Zs,this.My=new Zs}xy(t,s){const i=Ks;ks.ny.uy(0,1,0,t,s,i,Us),ks.ny.uy(1,1,0,t,s,i,Hs),ks.ny.uy(0,0,0,t,s,i,zs),ks.ny.uy(1,0,0,t,s,i,Js),ks.ny.uy(0,1,1,t,s,i,qs),ks.ny.uy(1,1,1,t,s,i,$s),ks.ny.uy(0,0,1,t,s,i,Xs),ks.ny.uy(1,0,1,t,s,i,Ys),e(zs,Us,qs,this.yy),e(Us,Hs,$s,this.wy),e(Hs,Js,Ys,this.Sy),e(Js,zs,Xs,this.by),e(Xs,qs,$s,this.My),e(Js,Hs,Us,this.vy)}_y(t,s,i,e,h,n){return r(t,s,i,e,h,n,this.yy)&&r(t,s,i,e,h,n,this.wy)&&r(t,s,i,e,h,n,this.Sy)&&r(t,s,i,e,h,n,this.by)&&r(t,s,i,e,h,n,this.vy)&&r(t,s,i,e,h,n,this.My)}Gy(t,s,i){return!h(t,s,i,this.vy)}}}{const Qs=self.Ns,ti=self.vs,_h=ti.Ps,Vh=ti.Rs,xh=ti.Gs,si=xh.create(),ii=_h.I(0,0,0),ei=_h.I(0,0,0),hi=_h.I(0,0,0),ni=_h.I(0,1,0),ri=(Vh.I(0,0,0,0),new Qs.tu),oi=new Qs.Rect,ai=new Qs.tu(0,0,1,0,1,1,0,1),li={Ty:1,Iy:1e4},ui=xh.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Qs.ny.Cy=class{constructor(t){t=Object.assign({},li,t),this.Km=0,this.Zm=0,this.Py=Qs.yn(45),this.Ry=Math.tan(this.Py/2),this.Ey=xh.create(),this.Ay=xh.create(),this.Fy=!1,this.Oy=t.Ty,this.Dy=t.Iy,this.ky=[],this.Ly=new Map,this.Ny=null,this.By=null,this.Wy=null,this.jy=null,this.Vy=null,this.Uy=null,this.Hy=null,this.zy=null,this.Jy=null,this.qy=null,this.$y=null,this.Xy=null,this.Yy=new Map,this.Ky=null,this.Zy=[],this.Qy=new Map,this.iw=0,this.ew=0,this.hw=1,this.rw=[this.hw],this.ow=1,this.aw=[this.ow],this.lw=.5,this.uw=[this.lw],this.fw=0,this.dw=!0,this.pw=!1}mw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}gw(){this.iw=0,this.ew=0,this.Ny=null,this.By=null,this.Wy=null,this.jy=null,this.Vy=null,this.Uy=null,this.Hy=null,this.zy=null,this.Jy=null,this.qy=null,this.$y=null,this.Xy=null,this.yw()}ww(){this.gw(),this.Ky=null}Sw(){for(const t of this.ky)t.ln();this.gw()}fm(){return this.Km}Gm(){return this.Zm}bw(t){return this.Mw()?100:t/(2*this.xw())}_w(t){if(this.Mw()){const s=t/(2*this.xw());return s/this.bw(t)}return 1}Gw(t){this.Oy=t}Tw(){return this.Oy}Iw(t){this.Dy=t}Cw(){return this.Dy}Pw(t){this.Py=t,this.Ry=Math.tan(this.Py/2)}Rw(){return this.Py}xw(){return this.Ry}Ew(){this.Fy=!1}Aw(){this.Fy=!0}Mw(){return!this.Fy}Fw(){return this.Fy}Ow(t,s,i=.5,e=.5){const h=this.Tw(),n=this.Cw(),r=this.Rw();if(.5===i&&.5===e)this.Dw()?xh.vt(t,r,s,h,n):xh.perspective(t,r,s,h,n);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.xw()*h,f=c*s;xh.St(t,o*f,a*f,l*c,u*c,h,n),this.Dw()&&xh.mul(t,ui,t)}}kw(t,s,i,e=1){const h=self.devicePixelRatio,n=2*this.bw(i)*h*this.xw()/i,r=s*n/(2*h*e),o=i*n/(2*h*e),a=-r,l=r,u=-o,c=o;this.Dw()?xh._t(t,a,l,u,c,this.Tw(),this.Cw()):xh.ortho(t,a,l,u,c,this.Tw(),this.Cw())}Lw(t,s,i,e,h,n=1){let r=1;this.Mw()&&(r=200*this.xw()/h);const o=hi,a=(_h.set(o,r,-r,1),ii),l=ei;_h.multiply(a,s,o),_h.multiply(l,i,o),xh.Gt(t,a,l,e||ni),o[2]=n,xh.scale(t,t,o)}Nw(t,s,i,e,h,n,r,o){return _h.set(ii,t,s,i),_h.set(ei,e,h,n),this.Lw(si,ii,ei,ni,r,o),si}Bw(t){this.ky.push(t),this.Ly.set(t.Qc(),t)}Ww(t){const s=this.ky.indexOf(t);-1!==s&&this.ky.splice(s,1),this.Ly.delete(t.Qc())}yw(){Qs.Br(this.ky),this.Ly.clear()}jw(t){return this.Ly.get(t)||null}Vw(){return this.Ny}Uw(){this.Hw(this.Ny)}zw(){return this.By}Jw(){this.Hw(this.By)}qw(){this.Hw(this.Wy)}$w(){this.Hw(this.jy)}Xw(){this.Hw(this.Vy)}Yw(){this.Hw(this.Uy)}Kw(){this.Hw(this.Hy)}Zw(){this.Hw(this.zy)}Qw(){this.Hw(this.Jy)}tS(){this.Hw(this.qy)}sS(){this.Hw(this.$y)}iS(){this.Hw(this.Xy)}eS(t){this.Ky=t}hS(){return this.Ky}nS(t,s,i,e){let h=Qs.ny.oS.rS(t,s,i,e),n=this.Yy.get(h);return n||(n=Qs.an(Qs.ny.oS,this,t,s,i,e),this.Yy.set(h,n)),n.aS(),n}lS(t){t.uS(),0===t.cS()&&(this.Ky===t&&(this.Ky=null),this.Yy.delete(t.fS()),t.ln())}dS(t){Qs.Br(this.Zy),this.Qy.clear();let s=0;for(const i of t){const e=i[0],h=i[1],n=i[2];this.Zy.push([h,n]),this.Qy.set(e,{number:s,pS:h,mS:n}),s++}}gS(t){return this.Zy[t]}yS(t){return this.gS(t)[0]}wS(t){return this.gS(t)[1]}SS(t){const s=this.Qy.get(t);if(void 0===s)throw new Error("invalid blend name");return s}bS(t){const s=this.Qy.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}vS(t){this.iw=t}MS(){return this.iw}xS(t){this.ew=t,this.Ky=null}_S(){return this.ew}Rm(t,s,i,e){const h=Qs.vn(t,s,i,e),n=Math.sin(h),r=Math.cos(h),o=.5*this.hw,a=n*o,l=r*o,u=this.ow;2===u?this.GS(t,s,0,i,e,0,a,l):1===u?this.TS(t,s,0,i,e,0,a,l):this.IS(t,s,0,i,e,0,a,l)}CS(t,s,i,e,h,n){const r=Qs.vn(t,s,e,h),o=Math.sin(r),a=Math.cos(r),l=.5*this.hw,u=o*l,c=a*l,f=this.ow;2===f?this.GS(t,s,i,e,h,n,u,c):1===f?this.TS(t,s,i,e,h,n,u,c):this.IS(t,s,i,e,h,n,u,c)}GS(t,s,i,e,h,n,r,o){const a=this.lw,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=2*o,p=2*r,m=l+r,g=u-o,y=l-r+d,w=u+o+p,S=c+r,b=f-o,v=c-r-d,M=f+o-p;this.PS(m,g,i,S,b,n,v,M,n,y,w,i,ai)}TS(t,s,i,e,h,n,r,o){const a=this.lw,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.PS(d,p,i,y,w,n,S,b,n,m,g,i,ai)}IS(t,s,i,e,h,n,r,o){const a=this.lw,l=t+a,u=s+a,c=e+a,f=h+a,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.PS(d,p,i,y,w,n,S,b,n,m,g,i,ai)}RS(t,s,i,e,h,n){const r=Qs.vn(t,s,i,e),o=Math.sin(r),a=Math.cos(r),l=.5*this.hw,u=o*l,c=a*l,f=this.ow;2===f?this.ES(t,s,i,e,u,c,h,n):1===f?this.AS(t,s,i,e,u,c,h,n):this.FS(t,s,i,e,u,c,h,n)}ES(t,s,i,e,h,n,r,o){const a=this.lw,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=2*n,p=2*h,m=l+h,g=u-n,y=l-h+d,w=u+n+p,S=c+h,b=f-n,v=c-h-d,M=f+n-p;ri.set(m,g,S,b,v,M,y,w),oi.set(r,0,o,0),this.OS(ri,oi)}AS(t,s,i,e,h,n,r,o){const a=this.lw,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;ri.set(d,p,y,w,S,b,m,g),oi.set(r,0,o,0),this.OS(ri,oi)}FS(t,s,i,e,h,n,r,o){const a=this.lw,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;ri.set(d,p,y,w,S,b,m,g),oi.set(r,0,o,0),this.OS(ri,oi)}DS(t,s,i,e){const h=.5*this.hw,n=this.ow;2===n?this.kS(t,s,i,e,h):1===n?this.LS(t,s,i,e,h):this.NS(t,s,i,e,h)}kS(t,s,i,e,h){this.GS(t,s,0,i,s,0,0,h),this.GS(i,s,0,i,e,0,h,0),this.GS(i,e,0,t,e,0,0,-h),this.GS(t,e,0,t,s,0,-h,0)}LS(t,s,i,e,h){this.TS(t,s,0,i,s,0,0,h),this.TS(i,s,0,i,e,0,h,0),this.TS(i,e,0,t,e,0,0,-h),this.TS(t,e,0,t,s,0,-h,0)}NS(t,s,i,e,h){this.IS(t,s,0,i,s,0,0,h),this.IS(i,s,0,i,e,0,h,0),this.IS(i,e,0,t,e,0,0,-h),this.IS(t,e,0,t,s,0,-h,0)}BS(t){this.DS(t._l(),t.Gl(),t.Tl(),t.Il())}WS(t){const s=Qs.vn(t.Zn(),t.Qn(),t.tr(),t.ir()),i=Math.sin(s),e=Math.cos(s),h=.5*this.hw,n=i*h,r=e*h,o=this.ow;2===o?this.jS(t,n,r):1===o?this.VS(t,n,r):this.US(t,n,r)}jS(t,s,i){this.GS(t.Zn(),t.Qn(),0,t.tr(),t.ir(),0,s,i),this.GS(t.tr(),t.ir(),0,t.er(),t.hr(),0,i,-s),this.GS(t.er(),t.hr(),0,t.nr(),t.rr(),0,-s,-i),this.GS(t.nr(),t.rr(),0,t.Zn(),t.Qn(),0,-i,s)}VS(t,s,i){this.TS(t.Zn(),t.Qn(),0,t.tr(),t.ir(),0,s,i),this.TS(t.tr(),t.ir(),0,t.er(),t.hr(),0,i,-s),this.TS(t.er(),t.hr(),0,t.nr(),t.rr(),0,-s,-i),this.TS(t.nr(),t.rr(),0,t.Zn(),t.Qn(),0,-i,s)}US(t,s,i){this.IS(t.Zn(),t.Qn(),0,t.tr(),t.ir(),0,s,i),this.IS(t.tr(),t.ir(),0,t.er(),t.hr(),0,i,-s),this.IS(t.er(),t.hr(),0,t.nr(),t.rr(),0,-s,-i),this.IS(t.nr(),t.rr(),0,t.Zn(),t.Qn(),0,-i,s)}HS(t){this.hw=t,this.rw[this.rw.length-1]=t}zS(){return this.hw}JS(t){if(100<=this.rw.length)throw new Error("pushed too many line widths - check push/pop pairs");this.rw.push(t),this.hw=t}qS(){if(this.rw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.rw.pop(),this.hw=this.rw.at(-1)}$S(){this.ow=0,this.aw[this.aw.length-1]=0}XS(){this.ow=1,this.aw[this.aw.length-1]=0}YS(){this.ow=2,this.aw[this.aw.length-1]=0}KS(t){if("butt"===t)this.ZS();else if("square"===t)this.QS();else{if("zag"!==t)throw new Error("invalid line cap");this.tb()}}ZS(){if(100<=this.aw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.aw.push(0),this.ow=0}QS(){if(100<=this.aw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.aw.push(1),this.ow=1}tb(){if(100<=this.aw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.aw.push(2),this.ow=2}sb(){if(this.aw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.aw.pop(),this.ow=this.aw.at(-1)}ib(t){this.lw=t,this.uw[this.uw.length-1]=t}eb(){return this.lw}hb(t){if(100<=this.uw.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.uw.push(t),this.lw=t}nb(){if(this.uw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.uw.pop(),this.lw=this.uw.at(-1)}rb(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],n=s[1];for(let t=0;t<i;t+=2){const r=2*t,o=s[2+r],a=s[3+r],l=s[4+r],u=s[5+r];if(t===e)this.ob(h,n,o,a,l,u,l,u);else{const c=s[6+r],f=s[7+r];this.ob(h,n,o,a,l,u,c,f)}}}ab(){return 3}lb(){this.ub(!0),this.fw++}cb(){return this.fw}fb(){this.fw++}pb(t){this.dw=!!t}mb(){return this.dw}gb(t){this.pw=!!t}yb(){return this.pw}wb(){return!1}Dw(){return!1}Sb(){}bb(){}vb(){}Mb(){return this.Sb()+this.bb()+this.vb()}xb(){return Qs.an(Qs.ny._b,this)}}}{const ci=self.Ns;ci.ny.Gb=class{constructor(t,s){this.dn=s.name,this.Tb=t,this.Ib=s.Cb||0,this.Pb=s.Rb||0,this.Eb=!!s.Ab,this.Fb=!!s.Ob,this.Db=!!s.kb,this.Lb=!!s.Nb,this.Bb=!!s.Wb,this.jb=!!s.Vb,this.Ub=!!s.Hb,this.zb=!1,this.Jb=this.Eb||this.jb||0!==this.Ib||0!==this.Pb}ln(){this.Tb=null}qb(){return this.Tb}Qc(){return this.dn}$b(){return 0!==this.Ib||0!==this.Pb}Xb(){return this.Ib}Yb(){return this.Pb}Kb(){return this.Eb}Zb(){return this.Fb}Qb(){return this.Db}tv(){return this.Lb}sv(){return this.Bb}hv(){return this.jb}nv(){return this.Ub}rv(){return this.zb}ov(){return this.Jb}av(){return!1}}}{const fi=self.Ns;fi.ny.oS=class{constructor(t,s,i,e,h){this.Tb=t,this.d1=0,this.lv=null,this.uv="",this.cv=i,this.dv=fi.an(fi.Ho),this.dv.set(e),this.pv=h,"string"==typeof s?this.uv=s:(this.lv=s,this.uv=this.lv.Qc())}ln(){if(0<this.d1)throw new Error("releasing state group still in use");this.Tb=null,this.lv=null,this.uv=""}gv(){const t=this.Tb;t.Hw(this.lv),t.yv(this.cv),t.wv(this.dv),t.xS(this.pv),t.eS(this)}fS(){return fi.ny.oS.rS(this.uv,this.cv,this.dv,this.pv)}aS(){++this.d1}uS(){--this.d1}cS(){return this.d1}Sv(){this.lv=null}bv(t){if(this.lv=t.jw(this.uv),!this.lv)throw new Error("failed to restore shader program")}static rS(t,s,i,e){const h="string"==typeof t?t:t.Qc();return h+","+s+","+i.ra()+","+i.oa()+","+i.aa()+","+i.la()+","+e}}}{let e=function(t,s,i){const e=i.Zn(),h=i.Qn(),n=i.tr()-e,r=i.ir()-h,o=i.nr()-e,a=i.rr()-h,l=n*t,u=r*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const T=self.Ns,di=T.an(T.tu);T.ny.vv=class{constructor(t,s,i){this.Mv=t,this.xv=s,this._v=i,this.Qa=NaN,this.sl=NaN,this.pv=NaN,this.Gv=NaN,this.Tv=NaN,this.Qa=0,this.sl=0,this.pv=0,this.Gv=0,this.Tv=0}Iv(t,s,i,e){this.Qa=t,this.sl=s,this.Gv=i,this.Tv=e}Cv(){return this.Qa}Pv(t){this.Qa!==t&&(this.Qa=t,this.Mv.Rv())}Ev(){return this.sl}Av(t){this.sl!==t&&(this.sl=t,this.Mv.Rv())}Fv(){return this.pv}Ov(t){this.pv!==t&&(this.pv=Math.max(t,0),this.Mv.Rv())}Dv(){return this.Gv}kv(t){this.Gv=t}Lv(){return this.Tv}Nv(t){this.Tv=t}Bv(t,s,i){[this.Qa,this.sl]=e(t.Qa,t.sl,s),this.pv=t.pv,this.Gv=T.Dt(i._l(),i.Tl(),t.Gv),this.Tv=T.Dt(i.Gl(),i.Il(),t.Tv)}Wv(t,s,i){[this.Qa,this.sl]=e(t.Qa,t.sl,s),this.pv=t.pv,[this.Gv,this.Tv]=e(t.Gv,t.Tv,i)}jv(){return{x:this.Cv(),y:this.Ev(),z:this.Fv(),u:this.Dv(),v:this.Lv()}}Vv(t){this.Pv(t.x),this.Av(t.y),t.hasOwnProperty("z")&&this.Ov(t.z),this.kv(t.u),this.Nv(t.v)}Uv(){return this.Mv}Hv(){return this.xv}zv(){return this._v}},T.ny.Jv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.qv=i,this.$v=t,this.Xv=s||null,this.Yv=[],this.Kv=0,this.Zv=0,this.Qv=1,this.tM=1,this.sM=0,this.iM=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const n=[];for(let t=0;t<i;++t){const r=T.an(T.ny.vv,this,t,s),o=t/e,a=s/h;r.Iv(o,a,o,a),n.push(r)}this.Yv.push(n)}}ln(){T.Br(this.Yv)}eM(){return this.qv}hM(){return this.$v}nM(){return this.Xv}rM(){return this.Yv}Rv(){this.iM=!0}oM(){if(this.iM){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const n of this.Yv)for(const r of n){const o=r.Cv(),a=r.Ev();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,r.Fv())}this.Kv=t,this.Zv=s,this.Qv=i,this.tM=e,this.sM=h,this.iM=!1}}aM(){return this.oM(),this.Kv}lM(){return this.oM(),this.Zv}uM(){return this.oM(),this.Qv}cM(){return this.oM(),this.tM}fM(){return this.oM(),this.sM}dM(){return 0<this.fM()}pM(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.qv||s<0||s>=this.$v?null:this.Yv[s][t]}mM(t,i,e){const h=e instanceof T.Rect;if(t.eM()!==this.eM()||t.hM()!==this.hM())throw new Error("source mesh wrong size");const n=t.Yv,r=this.Yv;for(let t=0,s=r.length;t<s;++t){const o=n[t],a=r[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.Bv(l,i,e):u.Wv(l,i,e)}}}gM(n){let r=this.Yv,o=r[0];for(let t=1,s=r.length;t<s;++t){let i=r[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];di.set(e.Dv(),e.Lv(),a.Dv(),a.Lv(),l.Dv(),l.Lv(),h.Dv(),h.Lv()),n.PS(e.Cv(),e.Ev(),e.Fv(),a.Cv(),a.Ev(),a.Fv(),l.Cv(),l.Ev(),l.Fv(),h.Cv(),h.Ev(),h.Fv(),di),e=a,h=l}o=i}}yM(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.Yv,l=t[0];for(let n=1,r=t.length;n<r;++n){let i=t[n],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.Cv(),e.Ev(),e.Fv()),[m,g,y]=a(u.Cv(),u.Ev(),u.Fv()),[w,S,b]=a(c.Cv(),c.Ev(),c.Fv()),[v,M,x]=a(h.Cv(),h.Ev(),h.Fv());o.CS(f,d,p,m,g,y),o.CS(f,d,p,w,S,b),o.CS(f,d,p,v,M,x),t===s-1&&o.CS(m,g,y,w,S,b),n===r-1&&o.CS(v,M,x,w,S,b),e=u,h=c}l=i}}wM(t){let i=.99999999,e=t.Bu(),h=[],n=this.eM()-1,r=this.hM()-1,o=1/n,a=1/r,l=n-1,u=r-1,c=e[0],f=e[1],d=T.mn(Math.floor(c*n),0,l),p=T.mn(Math.floor(f*r),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=T.mn(T.Dt(c,g,w),0,1),f=T.mn(T.Dt(f,y,w),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=T.mn(Math.floor(c*n),0,l),p=T.mn(Math.floor(f*r),0,u);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,_=(d+1)*o,G=(p+1)*a;if(m=T.dr(c,f,M,x,_,x,_,G),0!==S&&0<=(w=T.cr(c,f,g,y,M,x,_,G,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=T.cr(c,f,g,y,M,x,_,x,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=T.cr(c,f,g,y,_,x,_,G,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=T.cr(c,f,g,y,M,x,M,G,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=T.cr(c,f,g,y,M,G,_,G,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return T.an(T.Ou,h)}SM(t,s){const i=this.bM(t);this.vM(i),s.ju(i)}bM(t){const i=[],e=t.Bu();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],n=e[t+1],[r,o]=this.MM(h,n);i.push(r,o)}return i}MM(t,s){const i=this.eM()-1,e=this.hM()-1,h=1/i,n=1/e,r=T.mn(Math.floor(t*i),0,i-1),o=T.mn(Math.floor(s*e),0,e-1),a=r*h,l=o*n,u=(r+1)*h,c=(o+1)*n,f=this.pM(r,o),d=this.pM(r+1,o+1),p=T.dr(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+n,y=this.pM(r+(p?1:0),o+(p?0:1)),[w,S,b]=T.pr(t,s,a,l,m,g,u,c);return T.mr(w,S,b,f.Cv(),f.Ev(),f.Fv(),y.Cv(),y.Ev(),y.Fv(),d.Cv(),d.Ev(),d.Fv())}vM(i){let e=[],h=i[0],n=i[1],r=h-i.at(-2),o=n-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-n,d=Math.abs(c)<1e-7&&Math.abs(r)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(r);(!d&&!p&&.001<Math.abs(c/r-f/o)||0==c&&0==f)&&e.push(h,n),h=l,n=u,r=c,o=f}6<=e.length&&e.length<i.length&&T.Ur(i,e)}jv(){return{cols:this.eM(),rows:this.hM(),points:this.Yv.map(t=>t.map(t=>t.jv()))}}Vv(t){const i=this.eM(),e=this.hM();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const n=h[s];for(let t=0;t<i;++t){const r=this.pM(t,s);r.Vv(n[t])}}}}}{let d=function(t,s){let i,e,h,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{xM:i,_M:e,format:h,type:n}};d;const pi=self.Ns,mi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),gi=new Set(["nearest","bilinear","trilinear"]),yi=new Set(["default","low","high"]),wi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={GM:"clamp-to-edge",TM:"clamp-to-edge",IM:"trilinear",CM:0,PM:"rgba8",RM:!0,EM:"default",premultiplyAlpha:!0,AM:!1,width:-1,height:-1},bi={premultiplyAlpha:!0,flipY:!1},vi=new Set;pi.ny.FM=class{constructor(t){this.Tb=t,this.OM=null,this.Km=0,this.Zm=0,this.DM=!0,this.kM="clamp-to-edge",this.LM="clamp-to-edge",this.NM="trilinear",this.BM=0,this.WM="rgba8",this.jM=!1,this.VM="default",this.d1=0}UM(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.OM)throw new Error("already created texture");if(this.kM=t.GM,this.LM=t.TM,this.NM=t.IM,this.BM=t.CM,this.WM=t.PM,this.jM=!!t.RM&&this.Tb.mb(),this.VM=t.EM,!wi.has(this.kM)||!wi.has(this.LM))throw new Error("invalid wrap mode");if(!gi.has(this.NM))throw new Error("invalid sampling");if(!mi.has(this.WM))throw new Error("invalid pixel format");if(!yi.has(this.VM))throw new Error("invalid mipmap quality");if(this.DM=!0,s instanceof ArrayBuffer||null===s||t.AM){if(this.Km=t.width,this.Zm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Km*this.Zm*4)throw new Error("ArrayBuffer wrong size")}else this.Km=s.width,this.Zm=s.height;if(this.Km<=0||this.Zm<=0)throw new Error("invalid texture data size");if(t.AM){const o=pi.Ao(this.Km,this.Zm),a=o.getContext("2d");a.drawImage(s,0,0,this.Km,this.Zm),s=o}const i=pi.On(this.Km)&&pi.On(this.Zm),e=this.Tb.HM();if(this.Km>e||this.Zm>e)throw new Error("texture data exceeds maximum texture size");const h=this.Tb.zM(),n=this.Tb.JM(),r=(this.OM=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.OM),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.WM,h));if(this.Tb.qM()||i||!this.$M())if(2<=n){let t;t=this.jM?Math.floor(Math.log2(Math.max(this.Km,this.Zm))+1):1,h.texStorage2D(h.TEXTURE_2D,t,r.xM,this.Km,this.Zm),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Km,this.Zm,r.format,r.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,r.format,r.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,r._M,this.Km,this.Zm,0,r.format,r.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,r._M,this.Km,this.Zm,0,r.format,r.type,null):h.texImage2D(h.TEXTURE_2D,0,r._M,r.format,r.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Km,this.Zm):s)instanceof ImageData){const c=pi.Ao(this.Km,this.Zm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=pi.Ao(pi.Dn(this.Km),pi.Dn(this.Zm)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.NM,u.drawImage(s,0,0,this.Km,this.Zm,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,r._M,r.format,r.type,l)}null!==s&&this.XM(h),h.bindTexture(h.TEXTURE_2D,null),this.Tb.YM(),this.d1=1,vi.add(this)}KM(t,s,i){if(i=Object.assign({},Si,i),this.OM)throw new Error("already created texture");if(this.kM=i.GM,this.LM=i.TM,this.NM=i.IM,this.WM=i.PM,this.jM=!!i.RM&&this.Tb.mb(),this.VM=i.EM,!wi.has(this.kM)||!wi.has(this.LM))throw new Error("invalid wrap mode");if(!gi.has(this.NM))throw new Error("invalid sampling");if(!mi.has(this.WM))throw new Error("invalid pixel format");if(!yi.has(this.VM))throw new Error("invalid mipmap quality");this.DM=!1,this.Km=Math.floor(t),this.Zm=Math.floor(s);const e=pi.On(this.Km)&&pi.On(this.Zm),h=this.Tb.HM();if(this.Km<=0||this.Zm<=0)throw new Error("invalid texture size");if(this.Km>h||this.Zm>h)throw new Error("texture exceeds maximum texture size");if(!this.Tb.qM()&&this.$M()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.Tb.zM(),r=this.Tb.JM(),o=(this.OM=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.OM),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.WM,n)),a=2<=r?o.xM:o._M;n.texImage2D(n.TEXTURE_2D,0,a,this.Km,this.Zm,0,o.format,o.type,null),this.XM(n),n.bindTexture(n.TEXTURE_2D,null),this.Tb.YM(),this.d1=1,vi.add(this)}ZM(t){if("default"===this.VM)return this.DM?t.NICEST:t.FASTEST;if("low"===this.VM)return t.FASTEST;if("high"===this.VM)return t.NICEST;throw new Error("invalid mipmap quality")}$M(){return"clamp-to-edge"!==this.kM||"clamp-to-edge"!==this.LM}QM(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}XM(t){const s=pi.On(this.Km)&&pi.On(this.Zm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.QM(t,this.kM)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.QM(t,this.LM)),"nearest"===this.NM)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.jM=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Tb.qM())&&this.jM){t.hint(t.GENERATE_MIPMAP_HINT,this.ZM(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.NM&&!this.Tb.yb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.jM=!1;const i=this.Tb.t2();i&&0<this.BM&&"nearest"!==this.NM&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.BM,this.Tb.s2()))}i2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.OM||this.d1<=0)throw new Error("texture not created");if(this.DM)throw new Error("cannot update static texture");s=Object.assign({},bi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.Tb.JM(),n=this.Tb.zM(),r=(n.bindTexture(n.TEXTURE_2D,this.OM),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.WM,n)),o=2<=h?r.xM:r._M;try{if(this.Km===i&&this.Zm===e){const a=pi.On(this.Km)&&pi.On(this.Zm);n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,r.type,t),(a||this.Tb.qM())&&this.jM&&(n.hint(n.GENERATE_MIPMAP_HINT,this.ZM(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Km=i,this.Zm=e;const l=pi.On(this.Km)&&pi.On(this.Zm);if(!this.Tb.qM()&&this.$M()&&!l)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,r.format,r.type,t),(l||this.Tb.qM())&&this.jM&&(n.hint(n.GENERATE_MIPMAP_HINT,this.ZM(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.Tb.YM()}e2(){if(0<this.d1)throw new Error("texture still has references");if(!this.OM)throw new Error("already deleted texture");vi.delete(this);const t=this.Tb.zM();t.deleteTexture(this.OM),this.OM=null}h2(){return!!this.OM}n2(){return this.OM}qb(){return this.Tb}o2(){this.d1++}a2(){if(this.d1<=0)throw new Error("no more references");this.d1--}l2(){return this.d1}fm(){return this.Km}Gm(){return this.Zm}u2(){return this.DM}c2(){let t=this.Km*this.Zm;switch(this.WM){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.jM&&(t+=Math.floor(t/3)),t}static Sv(){vi.clear()}static f2(){return vi.values()}}}{const Mi=self.Ns,xi=self.vs,_h=xi.Ps,xh=xi.Gs,_i=new Set(["nearest","bilinear","trilinear"]),Gi={IM:"trilinear",alpha:!0,depth:!1,d2:!0,m2:!0,g2:0},Ti=new Set;Mi.ny.w2=class{constructor(t){this.Tb=t,this.S2=null,this.b2=null,this.OM=null,this.v2=null,this.Km=0,this.Zm=0,this.M2=!0,this.NM="trilinear",this._2=!0,this.G2=!1,this.T2=!0,this.I2=0,this.C2=xh.create(),this.P2=0,this.R2=0,this.E2=0}A2(t,s,i){i=Object.assign({},Gi,i);const e=this.Tb.JM();if(this.OM||this.v2)throw new Error("already created render target");if(this.NM=i.IM,this._2=!!i.alpha,this.G2=!!i.depth,this.T2=!!i.d2,this.M2=!!i.m2,this.I2=i.g2,!_i.has(this.NM))throw new Error("invalid sampling");if(0<this.I2&&(e<2||this.T2))throw new Error("invalid use of multisampling");if(e<2&&(this.T2=!0),this.Km=t,this.Zm=s,this.Km<=0||this.Zm<=0)throw new Error("invalid render target size");this.F2();const h=this.Tb.zM();if(this.S2=h.createFramebuffer(),this.G2&&(this.b2=h.createFramebuffer()),this.T2){this.OM=this.Tb.O2(this.Km,this.Zm,{IM:this.NM,PM:this._2?"rgba8":"rgb8",RM:!1});const r=this.OM.n2();h.bindFramebuffer(h.FRAMEBUFFER,this.S2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),this.G2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.b2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0))}else{this.v2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.v2);const o=this._2?h.RGBA8:h.RGB8;if(0<this.I2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.I2>l&&(this.I2=l)}else this.I2=0}0===this.I2?h.renderbufferStorage(h.RENDERBUFFER,o,this.Km,this.Zm):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.I2,o,this.Km,this.Zm),h.bindFramebuffer(h.FRAMEBUFFER,this.S2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.v2),this.G2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.b2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.v2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const n=this.Tb.D2();this.G2&&n&&(h.bindFramebuffer(h.FRAMEBUFFER,this.S2),this.Tb.L2()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,n,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,n)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}N2(t,s){if(this.Km!==t||this.Zm!==s){this.Km=t,this.Zm=s,this.F2();const i=this.Tb.zM(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.S2),this.OM?this.OM.i2(new ImageData(this.Km,this.Zm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.v2),i.renderbufferStorage(i.RENDERBUFFER,this._2?i.RGBA8:i.RGB8,this.Km,this.Zm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Tb.D2());this.G2&&e&&(this.Tb.L2()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}e2(){if(!this.OM&&!this.v2)throw new Error("already deleted render target");Ti.delete(this);const t=this.Tb.zM(),s=(this.OM?(t.bindFramebuffer(t.FRAMEBUFFER,this.S2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.G2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.b2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Tb.B2(this.OM),this.OM=null):this.v2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.S2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.G2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.b2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.v2),this.v2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Tb.JM()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.S2),this.G2&&t.deleteFramebuffer(this.b2),this.Tb.W2());s.j2=null,this.S2=s.V2=null}F2(){this.Tb.Ow(this.C2,this.Km/this.Zm),this.P2=this.Tb.Rw(),this.R2=this.Tb.Tw(),this.E2=this.Tb.Cw()}U2(){return this.S2}H2(){return this.b2}qb(){return this.Tb}z2(){return this.OM}J2(){return this.Tb.Rw()===this.P2&&this.Tb.Tw()===this.R2&&this.Tb.Cw()===this.E2||this.F2(),this.C2}q2(){return"nearest"!==this.NM}X2(){return this._2}Y2(){return this.T2}K2(){return this.G2}fm(){return this.Km}Gm(){return this.Zm}Z2(){return this.M2}Q2(){return this.I2}tx(){const t={IM:this.NM,alpha:this._2,d2:this.T2};return this.M2||(t.width=this.Km,t.height=this.Zm),t}ix(t){return"nearest"!==(t=Object.assign({},Gi,t)).IM===this.q2()&&!!t.alpha===this.X2()&&!!t.depth===this.K2()&&!(2<=this.Tb.JM()&&!!t.d2!==this.Y2())&&("number"==typeof t.width||"number"==typeof t.height?!this.Z2()&&this.fm()===Math.floor(t.width)&&this.Gm()===Math.floor(t.height):this.Z2())}hx(){return this.OM?this.OM.n2():null}c2(){return this.OM?this.OM.c2():this.Km*this.Zm*(this._2?4:3)}static async nx(t,s){const i=await t.ox(s,!0);return Mi.Do(i)}static Sv(){Ti.clear()}static ux(){return Ti.values()}static mx(t,s){for(const i of Ti)i.Z2()&&i.N2(t,s)}}}{const m=self.Ns,Ii=self.vs,_h=Ii.Ps,xh=Ii.Gs,Ci=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.ny.gx=class extends m.ny.Gb{static async yx(t,s){const i=t.zM(),e=s.src,h=s.wx,n=s.name,r=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(r,e),i.compileShader(r),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,r),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Sx());if(l?await t.bx(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Fr(5),!i.getShaderParameter(r,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(r);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.J1(i.getProgramInfoLog(a)||"").trim();return u&&!m.U1(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),i.deleteShader(r),i.deleteShader(o),a}static async vx(t,s){const i=await m.ny.gx.yx(t,s);return new m.ny.gx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.zM(),h=t.W2(),n=(t.ub(),e.useProgram(s),this.Mx=e,this.lv=s,this.xx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),r=e.getAttribLocation(s,"aTex"),o=(this._x=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Gx),e.vertexAttribPointer(n,t.ab(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Tx),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==this._x&&(e.bindBuffer(e.ARRAY_BUFFER,t.Ix),e.vertexAttribPointer(this._x,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this._x)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Cx=new m.ny.Px(this,"matP","mat4"),this.Rx=new m.ny.Px(this,"matMV","mat4"),this.Ex=new m.ny.Px(this,"color","vec4"),this.Ax=new m.ny.Px(this,"samplerFront","sampler"),this.Fx=new m.ny.Px(this,"pointTexStart","vec2"),this.Ox=new m.ny.Px(this,"pointTexEnd","vec2"),this.Dx=new m.ny.Px(this,"zElevation","float"),this.kx=new m.ny.Px(this,"tileSize","vec2"),this.Lx=new m.ny.Px(this,"tileSpacing","vec2"),this.Nx=new m.ny.Px(this,"color2_","vec4"),this.Bx=new m.ny.Px(this,"outlineThickness","float"),this.Wx=new m.ny.Px(this,"samplerBack","sampler"),this.jx=new m.ny.Px(this,"samplerDepth","sampler"),this.Vx=new m.ny.Px(this,"destStart","vec2"),this.Ux=new m.ny.Px(this,"destEnd","vec2"),this.Hx=new m.ny.Px(this,"srcStart","vec2"),this.zx=new m.ny.Px(this,"srcEnd","vec2"),this.Jx=new m.ny.Px(this,"srcOriginStart","vec2"),this.qx=new m.ny.Px(this,"srcOriginEnd","vec2"),this.$x=new m.ny.Px(this,"pixelSize","vec2"),this.Xx=new m.ny.Px(this,"seconds","float"),this.Yx=new m.ny.Px(this,"devicePixelRatio","float"),this.Kx=new m.ny.Px(this,"layerScale","float"),this.Zx=new m.ny.Px(this,"layerAngle","float"),this.Qx=new m.ny.Px(this,"layoutStart","vec2"),this.t_=new m.ny.Px(this,"layoutEnd","vec2"),this.s_=new m.ny.Px(this,"zNear","float"),this.i_=new m.ny.Px(this,"zFar","float"),this.e_=!!(this.$x.h_()||this.Xx.h_()||this.Wx.h_()||this.Vx.h_()||this.Ux.h_()||this.Hx.h_()||this.zx.h_()||this.Jx.h_()||this.qx.h_()||this.Yx.h_()||this.Kx.h_()||this.Zx.h_()||this.Qx.h_()||this.t_.h_()),i.parameters||[]);this.n_=[],this.zb=this.$x.h_()||this.Hx.h_()||this.zx.h_()||this.Jx.h_()||this.qx.h_(),this.r_=!1,this.o_=!1,this.Ex.a_(1,1,1,1),this.Nx.a_(1,1,1,1),this.Ax.l_(0),this.Wx.l_(1),this.jx.l_(2),this.Fx.u_(0,0),this.Ox.u_(1,1),this.Dx.c_(0),this.kx.u_(0,0),this.Lx.u_(0,0),this.Vx.u_(0,0),this.Ux.u_(1,1),this.Hx.u_(0,0),this.zx.u_(0,0),this.Jx.u_(0,0),this.qx.u_(0,0),this.$x.u_(0,0),this.Yx.c_(1),this.s_.c_(t.Tw()),this.i_.c_(t.Cw()),this.Kx.c_(1),this.Zx.c_(0),this.Xx.c_(0),this.Qx.u_(0,0),this.t_.u_(0,0),this.Bx.c_(1);for(const l of o){const u=l[0],c=l[2],f=new m.ny.Px(this,u,c);"color"===c?f.f_(0,0,0):f.c_(0),this.n_.push(f)}this.xx?this.d_(h.p_):(this.m_(h.p_,!0),this.g_(h.y_,!0));const a=h.w_;e.useProgram(a?a.lv:null)}ln(){this.Mx.deleteProgram(this.lv),this.lv=null,this.Tb.Ww(this),this.Mx=null,super.ln()}S_(){return this.Mx}b_(){return this.lv}v_(){return this.n_.length}M_(t){return t<0||t>=this.n_.length?null:this.n_[t].x_()}__(i){for(let t=0,s=i.length;t<s;++t)if(!this.n_[t].G_(i[t]))return!1;return!0}T_(i){for(let t=0,s=i.length;t<s;++t)this.n_[t].I_(i[t])}C_(t,s,i,e,h,n,r,o,a,l){return!this.Wx.h_()&&!(this.$x.h_()&&!this.$x.P_(h,n)||this.Vx.h_()&&!this.Vx.P_(t._l(),t.Gl())||this.Ux.h_()&&!this.Ux.P_(t.Tl(),t.Il())||this.Yx.h_()&&!this.Yx.R_(r)||this.Kx.h_()&&!this.Kx.R_(o)||this.Zx.h_()&&!this.Zx.R_(a)||this.Hx.h_()&&!this.Hx.P_(s._l(),s.Gl())||this.zx.h_()&&!this.zx.P_(s.Tl(),s.Il())||this.Jx.h_()&&!this.Jx.P_(i._l(),i.Gl())||this.qx.h_()&&!this.qx.P_(i.Tl(),i.Il())||this.Qx.h_()&&!this.Qx.P_(e._l(),e.Gl())||this.t_.h_()&&!this.t_.P_(e.Gl(),e.Il())||this.Xx.h_()&&!this.Xx.R_(l))}E_(t,s,i,e,h,n,r,o,a,l){this.Wx.h_()||(this.$x.h_()&&this.$x.A_(h,n),this.Vx.h_()&&this.Vx.A_(t._l(),t.Gl()),this.Ux.h_()&&this.Ux.A_(t.Tl(),t.Il()),this.Yx.h_()&&this.Yx.F_(r),this.Kx.h_()&&this.Kx.F_(o),this.Zx.h_()&&this.Zx.F_(a),this.Hx.h_()&&this.Hx.A_(s._l(),s.Gl()),this.zx.h_()&&this.zx.A_(s.Tl(),s.Il()),this.Jx.h_()&&this.Jx.A_(i._l(),i.Gl()),this.qx.h_()&&this.qx.A_(i.Tl(),i.Il()),this.Qx.h_()&&this.Qx.A_(e._l(),e.Gl()),this.t_.h_()&&this.t_.A_(e.Gl(),e.Il()),this.Xx.h_()&&this.Xx.F_(l))}m_(t,s){this.r_&&!s||this.xx||(this.Cx.h_()&&this.Cx.O_(t),this.r_=!0)}D_(){this.r_=!1}g_(t,s){this.o_&&!s||this.xx||(this.Rx.h_()&&this.Rx.O_(t),this.o_=!0)}k_(){this.o_=!1}d_(t){if(!this.xx)throw new Error("not device transform shader");this.Cx.O_(t);const s=this.Tb,i=s.fm()/2,e=s.Gm()/2,h=s.Nw(i,e,s.bw(s.Gm()),i,e,0,s.Gm());this.Rx.O_(h)}L_(t){this.Ex.h_()&&this.Ex.N_(t[0],t[1],t[2],t[3])}static B_(){return Ci}static W_(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static j_(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static V_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static U_(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static H_(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static z_(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static J_(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static q_(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static X_(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static Y_(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static K_(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Z_(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Q_(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static tG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static sG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static iG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static eG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static hG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static nG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static rG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static oG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static aG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Pi=self.Ns,Ri=self.vs,xh=Ri.Gs,Ei=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Pi.ny.Px=class{constructor(t,s,i){if(!Ei.has(i))throw new Error("invalid uniform type");this.Xv=t,this.Mx=this.Xv.S_(),this.dn=s,this.wf=i,this.lG="color"===this.wf,this.uG=this.Mx.getUniformLocation(this.Xv.b_(),s),this.cG=!!this.uG;const e=Ei.get(i);this.fG=new Float32Array(e),this.dG=new Float32Array(e)}ln(){this.Xv=null,this.Mx=null,this.uG=null}h_(){return this.cG}x_(){return this.wf}pG(){return this.lG}c_(t){this.h_()&&(this.fG[0]=t,this.dG.set(this.fG),this.Mx.uniform1f(this.uG,t))}l_(t){this.h_()&&(this.fG[0]=t,this.dG.set(this.fG),this.Mx.uniform1i(this.uG,t))}u_(t,s){this.h_()&&(this.fG[0]=t,this.fG[1]=s,this.dG.set(this.fG),this.Mx.uniform2f(this.uG,t,s))}f_(t,s,i){this.h_()&&(this.fG[0]=t,this.fG[1]=s,this.fG[2]=i,this.dG.set(this.fG),this.Mx.uniform3f(this.uG,t,s,i))}a_(t,s,i,e){this.h_()&&(this.fG[0]=t,this.fG[1]=s,this.fG[2]=i,this.fG[3]=e,this.dG.set(this.fG),this.Mx.uniform4f(this.uG,t,s,i,e))}mG(t){t=Math.fround(t);const s=this.fG;s[0]!==t&&(s[0]=t,this.Mx.uniform1f(this.uG,t))}gG(t){const s=this.fG;s[0]!==t&&this.Mx.uniform1i(this.uG,s[0]=t)}yG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.fG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Mx.uniform2f(this.uG,t,s))}wG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.fG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Mx.uniform3f(this.uG,t,s,i))}N_(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.fG;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Mx.uniform4f(this.uG,t,s,i,e))}O_(t){const s=this.fG;xh.B(s,t)||(Pi.Lr(s,t,0),this.Mx.uniformMatrix4fv(this.uG,!1,t))}G_(t){const s=this.dG;return this.pG()?s[0]===Math.fround(t.ra())&&s[1]===Math.fround(t.oa())&&s[2]===Math.fround(t.aa()):s[0]===Math.fround(t)}I_(t){const s=this.dG;this.pG()?(s[0]=t.ra(),s[1]=t.oa(),s[2]=t.aa()):s[0]=t}R_(t){return this.dG[0]===Math.fround(t)}P_(t,s){const i=this.dG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}F_(t){this.dG[0]=t}A_(t,s){const i=this.dG;i[0]=t,i[1]=s}}}{const Ai=self.Ns,Fi=self.vs,Vh=Fi.Rs,xh=Fi.Gs;Ai.ny.SG=class{constructor(t){this.renderer=t,this.y_=xh.create(),this.p_=xh.create(),this.j2=null,this.V2=null,this.bG=!1,this.vG=Vh.I(1,1,1,1),this.w_=null,this.MG=new Ai.Rect,this.clearColor=Ai.an(Ai.Ho,0,0,0,0)}},Ai.ny.xG=class{constructor(t){const s=new ArrayBuffer(96);this.wf=0,this._G=t,this.Mx=t.renderer.zM(),this.GG=0,this.TG=0,this.IG=null,this.CG=new Float32Array(s,0,16),this.PG=new Float32Array(s,64,4),this.EG=new Float32Array(s,80,4),this.AG=[]}FG(t,s){this.wf=1,this.GG=t,this.TG=s}OG(){const t=this.Mx;t.drawElements(t.TRIANGLES,this.TG,t.UNSIGNED_SHORT,this.GG)}DG(t){this.wf=2,this.IG=t}kG(){const t=this.Mx,s=this.IG;t.bindTexture(t.TEXTURE_2D,s?s.n2():null)}LG(t){this.wf=3,t.ca(this.PG,0)}NG(){const t=this.PG,s=this._G;Vh.T(s.vG,t),s.w_.L_(t)}BG(t){this.wf=21,t.ca(this.PG,0)}WG(){const t=this.PG,s=this._G.w_;s.Nx.h_()&&s.Nx.N_(t[0],t[1],t[2],t[3])}jG(t,s){this.wf=4,this.GG=t,this.TG=s}VG(){this.Mx.blendFunc(this.GG,this.TG)}UG(t,s,i,e){this.wf=5;const h=this.PG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}HG(){const t=this.PG;this.Mx.viewport(t[0],t[1],t[2],t[3])}zG(t){this.wf=6,xh.T(this.CG,t)}JG(){const t=this._G,i=t.renderer.ky,e=t.w_,h=this.CG;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.m_(h,!0):n.D_()}xh.T(t.p_,h)}qG(t){this.wf=7,xh.T(this.CG,t)}$G(){const t=this._G,i=t.renderer.ky,e=t.w_,h=this.CG;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.g_(h,!0):n.k_()}xh.T(t.y_,h)}XG(t){this.wf=8,this.IG=t}YG(){const t=this.Mx,s=this.IG,i=this._G;s?(i.j2=s.U2(),i.V2=s.H2(),i.bG&&i.V2?t.bindFramebuffer(t.FRAMEBUFFER,i.V2):t.bindFramebuffer(t.FRAMEBUFFER,i.j2)):(i.j2=null,i.V2=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}KG(t){this.wf=9,t.ca(this.CG,0)}ZG(t,s,i,e){this.wf=9;const h=this.CG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}QG(){const t=this.Mx,s=this.CG,i=this._G,e=i.clearColor,h=s[0],n=s[1],r=s[2],o=s[3];e.ga(h,n,r,o)||(t.clearColor(h,n,r,o),e.Xo(h,n,r,o)),t.clear(t.COLOR_BUFFER_BIT)}tT(t){this.wf=15,t.ca(this.CG,0)}sT(){const t=this.CG;this._G.MG.set(t[0],t[1],t[2],t[3])}iT(t,s){this.wf=10,this.GG=t,this.TG=1,this.CG[0]=s}eT(){const t=this.Mx,s=this._G,i=s.renderer,e=i.By,h=(t.useProgram(e.lv),e.m_(s.p_,!1),e.g_(s.y_,!1),s.MG),n=(e.Fx.h_()&&e.Fx.yG(h._l(),h.Gl()),e.Ox.h_()&&e.Ox.yG(h.Tl(),h.Il()),this.CG[0]);if(e.Dx.h_()&&e.Dx.mG(n),e.Ex.h_()){const r=s.vG;e.Ex.N_(r[0],r[1],r[2],r[3])}t.drawArrays(t.POINTS,this.GG/4,this.TG),t.useProgram(s.w_.lv)}hT(t){this.wf=11,this.IG=t}nT(){const t=this.Mx,s=this._G,i=this.IG;if(s.w_=i,t.useProgram(i.lv),i.m_(s.p_,!1),i.g_(s.y_,!1),i.Ex.h_()){const e=s.vG;i.Ex.N_(e[0],e[1],e[2],e[3])}}rT(){this.wf=12}oT(){const t=this._G.w_,s=this.Mx,i=this.CG,e=this.PG,h=this.EG;if(t.Wx.h_()){const n=this._G.renderer,r=this.IG;n.aT!==r&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,r?r.n2():null),n.aT=r,s.activeTexture(s.TEXTURE0))}t.$x.h_()&&t.$x.yG(i[0],i[1]),t.Vx.h_()&&t.Vx.yG(i[2],i[3]),t.Ux.h_()&&t.Ux.yG(i[4],i[5]),t.Yx.h_()&&t.Yx.mG(this.TG),t.Kx.h_()&&t.Kx.mG(i[6]),t.Zx.h_()&&t.Zx.mG(i[7]),t.Hx.h_()&&t.Hx.yG(i[12],i[13]),t.zx.h_()&&t.zx.yG(i[14],i[15]),t.Jx.h_()&&t.Jx.yG(h[0],h[1]),t.qx.h_()&&t.qx.yG(h[2],h[3]),t.Qx.h_()&&t.Qx.yG(e[0],e[1]),t.t_.h_()&&t.t_.yG(e[2],e[3]),t.Xx.h_()&&t.Xx.mG(this.GG)}lT(){this.wf=13}uT(){const t=this._G.w_,i=t.n_,e=this.AG;for(let t=0,s=i.length;t<s;++t){const h=i[t],n=e[t];h.pG()?h.wG(n.ra(),n.oa(),n.aa()):h.mG(n)}}cT(t){this.wf=14,this.IG=t}fT(){const t=this.Mx,s=this.IG,i=this._G.j2;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}dT(t,s,i){this.wf=17;const e=this.CG,h=this._G.renderer,n=(e[0]=t.fm(),e[1]=t.Gm(),e[2]=(s||h).fm(),e[3]=(s||h).Gm(),e[4]=t.q2()?1:0,e[5]="stretch"===i,this.AG);Ai.Br(n),n.push(t.U2()),n.push(s?s.U2():null)}pT(){const t=this.CG,s=this.AG,i=this.Mx,e=t[0],h=t[1],n=t[2],r=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,n,r,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,n),f=Math.min(h,r),d=Math.max(h-r,0),p=Math.max(r-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}mT(t){this.wf=18,this.IG=t}gT(){this.IG.yT(),this.IG=null}wT(t){this.wf=19,this.IG=t}ST(){this.IG.bT(),this.IG=null}vT(t,s,i){this.wf=20;const e=this.CG;e[0]=t,e[1]=s,e[2]=i}MT(){const t=this._G.w_,s=this.CG;t.$x.h_()&&t.$x.yG(s[0],s[1]),t.Bx.h_()&&t.Bx.mG(s[2])}xT(t,s,i,e,h,n,r){this.wf=16;const o=this.CG;t.ca(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=n/s,o[9]=r/i}_T(){const t=this._G.w_,s=this.CG;t.Hx.h_()&&t.Hx.yG(s[0],s[1]),t.$x.h_()&&t.$x.yG(s[4],s[5]),t.kx.h_()&&t.kx.yG(s[6],s[7]),t.Lx.h_()&&t.Lx.yG(s[8],s[9])}GT(t,s,i,e,h,n,r){this.wf=29;const o=this.CG;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=n,o[6]=r}TT(){const t=this._G.w_,s=this.CG;t.$x.h_()&&t.$x.yG(s[0],s[1]),t.kx.h_()&&t.kx.yG(s[2],s[3]),t.Bx.h_()&&t.Bx.mG(s[4]),t.Lx.h_()&&t.Lx.yG(s[5],s[6])}IT(t){this.wf=22,this.GG=t?1:0}CT(){const t=this.Mx,s=0!==this.GG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}PT(t){this.wf=23,this.GG=t?1:0}RT(){const t=this.Mx;0===this.GG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}ET(t){this.wf=24,this.GG=t?1:0}AT(){const t=this.Mx,s=this._G,i=s.renderer,e=0!==this.GG;s.bG=e,t.activeTexture(t.TEXTURE2),e?(s.V2&&t.bindFramebuffer(t.FRAMEBUFFER,s.V2),t.bindTexture(t.TEXTURE_2D,i.D2())):(t.bindTexture(t.TEXTURE_2D,null),s.V2&&t.bindFramebuffer(t.FRAMEBUFFER,s.j2)),t.activeTexture(t.TEXTURE0)}FT(){this.wf=25}OT(){const t=this.Mx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}DT(){this.wf=26}kT(){const t=this.Mx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}LT(){this.wf=27}NT(){const t=this.Mx;t.disable(t.STENCIL_TEST)}BT(t,s,i,e,h){this.wf=28,this.GG=t?1:0;const n=this.CG;n[0]=s,n[1]=i,n[2]=e,n[3]=h}WT(){const t=this.Mx,s=this.CG;1===this.GG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}jT(){switch(this.wf){case 1:return void this.OG();case 2:return void this.kG();case 3:return void this.NG();case 4:return void this.VG();case 5:return void this.HG();case 6:return void this.JG();case 7:return void this.$G();case 8:return void this.YG();case 9:return void this.QG();case 10:return void this.eT();case 11:return void this.nT();case 12:return void this.oT();case 13:return void this.uT();case 14:return void this.fT();case 15:return void this.sT();case 16:return void this._T();case 17:return void this.pT();case 18:return void this.gT();case 19:return void this.ST();case 20:return void this.MT();case 21:return void this.WG();case 22:return void this.CT();case 23:return void this.RT();case 24:return void this.AT();case 25:return void this.OT();case 26:return void this.kT();case 27:return void this.NT();case 28:return void this.WT();case 29:return void this.TT()}}}}{let I=function(t,s,i,e,h,n){s?t.strokeRect(i,e,h,n):t.fillRect(i,e,h,n)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Oi=self.Ns,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),ki={timeout:60},Li=new Oi.Ho(0,0,0,1),Ni=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Wi=new Set(["word","cjk","character"]),ji=new Set(["ltr","rtl"]),Vi=new Set;Oi.FontManager&&Oi.FontManager.addEventListener("fontload",t=>{const s=t.font.Qc();for(const i of Vi)(i.VT()||Oi.wh(i.UT(),s))&&i.HT()});let s=!1,i=!1;Oi.ny._b=class{constructor(t,s){s=Object.assign({},ki,s),this.Tb=t,this.zT="Arial",this.JT=16,this.qT=1,this.$T=0,this.XT=!1,this.YT=!1,this.KT="black",this.ZT=!1,this.rm=null,this.QT=!0,this.tI=null,this.sI=new Set,this.iI="left",this.eI="top",this.cf="",this.hI=null,this.nI=Oi.an(Oi.hm),this.rI="word",this.oI="ltr",this.aI=!1,this.lI=!1,this.uI=!1,this.cI=-1,this.fI=0,this.dI=0,this.pI=0,this.Km=0,this.Zm=0,this.mI=1,this.gI=null,this.yI=null,this.wI=null,this.SI=null,this.bI=-1,this.vI=-1,this.MI="",this.xI="",this._I="",this.GI=1,this.TI=1,this.II=t=>this.CI(t),this.OM=null,this.RI=new Oi.Rect,this.EI=1,this.AI=new Oi.n0(()=>{this.FI(),this.OI(8,8)},s.timeout),this.DI=null,this.kI=!1,Vi.add(this)}ln(){this.tI=null,this.sI.clear(),this.rm=null,this.hI=null,this.gI=null,this.yI=null,this.wI=null,this.SI=null,this.II=null,this.AI.ln(),this.DI=null,this.FI(),this.nI.ic(),this.nI=null,this.Tb=null,this.kI=!0,Vi.delete(this)}LI(){this.uI=!0}NI(){this.LI(),this.lI=!0}HT(){this.NI(),this.aI=!0}BI(t){if(this.ZT!==(t=!!t)){this.ZT=t;const s=this.ZT?"alphabetic":"top";this.yI&&(this.yI.textBaseline=s),this.wI&&(this.wI.textBaseline=s),this.HT()}}VT(){return this.ZT}lm(t){this.rm!==t&&(this.rm=t,this.nI.lm(t),this.rm&&this.rm.zg()&&this.rm.Jg().then(()=>this.LI()),this.HT())}WI(t){this.QT!==(t=!!t)&&(this.QT=t,this.LI())}jI(t){this.zT!==(t=t||"serif")&&(this.zT=t,this.HT())}UT(){return this.zT}VI(t){this.JT!==(t=t<.1?.1:t)&&(this.JT=t,this.HT())}UI(){return this.JT}HI(t){this.qT!==t&&(this.qT=t,this.HT())}zI(t){this.$T!==t&&(this.$T=t,this.NI())}JI(){return this.$T}qI(t){this.XT!==(t=!!t)&&(this.XT=t,this.HT())}$I(){return this.XT}XI(t){this.YT!==(t=!!t)&&(this.YT=t,this.HT())}YI(){return this.YT}KI(t){t=Math.floor(t),this.cI!==t&&(this.cI=t,this.LI())}ZI(){return this.cI}QI(t,s){let i=[];(this.XT||s.pg("b"))&&i.push("bold"),(this.YT||s.pg("i"))&&i.push("italic");const e=s.dg("size"),h=(e?parseFloat(e.param):this.JT)*this.qT;i.push(t?h+"pt":h*this.tC()+"pt");let n=this.zT,r=s.dg("font");return r&&r.param&&(n=r.param,this.tI)&&!this.sI.has(n)&&(this.tI(n),this.sI.add(n)),n&&(Di.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}wv(t){t instanceof Oi.Ho&&(t=t._a()),this.KT!==t&&(this.KT=t,this.LI())}sC(t,s,i){Li.Yo(t,s,i),this.wv(Li)}iC(t){if(!Ni.has(t))throw new Error("invalid horizontal alignment");this.iI!==t&&(this.iI=t,this.NI())}eC(){return this.iI}hC(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.eI!==t&&(this.eI=t,this.NI())}nC(){return this.eI}rC(t){if(!Wi.has(t))throw new Error("invalid word wrap mode");this.rI!==t&&(this.rI=t,this.HT())}oC(){return this.rI}aC(t){if(!ji.has(t))throw new Error("invalid text direction");this.oI!==t&&(this.oI=t,this.yI&&(this.yI.direction=this.oI),this.wI&&(this.wI.direction=this.oI),this.HT())}lC(){return this.oI}pf(t){this.cf!==t&&(this.cf=t,this.HT())}uC(){return this.cf}tC(){return this.EI*this.mI*self.devicePixelRatio}cC(n,r,o){if(void 0===o&&(o=1),!(n<=0||this.dI===n&&this.pI===r&&this.mI===o)){let t=this.dI,s=(this.dI=n,this.pI=r,this.mI=o,self.devicePixelRatio),i=(this.Km=this.dI*this.mI*s,this.Zm=this.pI*this.mI*s,Math.max(this.Km,this.Zm)),e=Math.min(this.Tb.HM(),4096),h=1;e<i&&(h=e/i,this.Km=Math.min(this.Km*h,e),this.Zm=Math.min(this.Zm*h,e)),this.EI=h,this.dI!==t?this.HT():this.NI()}}fm(){return this.Km}Gm(){return this.Zm}fC(){return this.mI}dC(){return this.pC(),this.nI.Xm()}mC(){return this.pC(),this.nI.Ym()+this.nI.am()*(this.$T+4)-this.$T}gC(){this.pC();let t=0;for(const s of this.nI.om())for(const i of s.Em())t+=i.Am();return t}z2(){return this.AI.u0(),this.yC(),this.OM}wC(t,s){this.pC();const i=this.tC(),e=this.nI.om();for(const h of e){const n=h.Im()*i;if(s>=h.lg()-h.Gm()*i+n&&s<h.lg()+n)for(const r of h.Em())if(t>=r.og()&&t<r.og()+r.fm()*i)return r}return null}*SC(t){this.pC();const s=this.nI.om();for(const i of s)for(const e of i.Em()){const h=e.dg("tag");h&&Oi.wh(h.param,t)&&(yield e)}}bC(t,s){for(const i of this.SC(t)){if(0===s)return i;--s}return null}vC(t){let s=0;for(const i of this.SC(t))++s;return s}yC(){this.OM&&!this.uI&&!this.lI&&!this.aI||this.kI||this.Km<=0||this.Zm<=0||(this.uI=!1,this.MC())}MC(){this.kI||(this.pC(),this.OI(Math.max(Oi.Dn(Math.ceil(this.Km)),128),Math.max(Oi.Dn(Math.ceil(this.Zm)),64)),this.xC(),this._C(),this.AI.u0())}OI(t,s){this.gI||(this.gI=Oi.Ao(16,16));let i=!1;this.bI===t&&this.vI===s||(this.bI=t,this.vI=s,this.gI.width=t,this.gI.height=s,i=!0),this.yI||(this.yI=this.gI.getContext("2d"),i=!0),i?(this.yI.textBaseline=this.ZT?"alphabetic":"top",this.yI.direction=this.oI,this.yI.font=this.MI,this.yI.fillStyle=this._I,this.yI.strokeStyle=this._I,this.yI.globalAlpha=this.GI,this.yI.lineWidth=this.TI):this.yI.clearRect(0,0,t,s)}GC(){this.wI||(this.wI=Oi.Ao(16,16).getContext("2d"),this.SI=Oi.Ao(16,16).getContext("2d"),this.wI.textBaseline=this.ZT?"alphabetic":"top",this.SI.textBaseline="top",this.wI.direction=this.oI,this.SI.direction=this.oI)}TC(t){this.xI!==t&&(this.xI=t,this.wI.font=t,this.SI.font=t)}IC(){if(!s){s=!0,this.GC();const t=this.wI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}pC(){this.CC(),this.PC()}CC(){this.aI&&(this.GC(),!this.ZT||this.hI&&this.hI.toString()===this.cf||(this.hI=new Oi.Ah(this.cf,{kp:!0})),this.nI.hm(this.ZT?this.hI.$p():this.cf,this.II,this.dI,this.rI,0),this.aI=!1)}PC(){this.lI&&(this.RC(),this.lI=!1)}CI(t){let s=t.vm()?t.Bm().join(""):" ",i=(this.TC(this.QI(!0,t)),t.dg("size")),e=(i?parseFloat(i.param):this.JT)*this.qT,h=this.wI.measureText(s),n=0;if(this.ZT&&this.IC()){const r=this.SI.measureText(s);n=h.fontBoundingBoxAscent-r.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Sm:n}}EC(t){this.MI!==t&&(this.MI=t,this.yI.font=t)}AC(t){this._I!==t&&(this._I=t,this.yI.fillStyle=t,this.yI.strokeStyle=t)}FC(t){this.GI!==t&&(this.GI=t,this.yI.globalAlpha=t)}OC(t){this.TI!==t&&(this.TI=t,this.yI.lineWidth=t)}RC(){let e=this.tC(),h=(4+this.$T)*e,n=0,r=this.nI.om();if(0!==r.length){for(const s of r){s.rg(NaN),s.ag(NaN);for(const o of s.Em())o.rg(NaN),o.ag(NaN)}let t=this.ZT&&this.IC(),i=r[0].Gm()*e;if("center"===this.eI){const a=r.reduce((t,s)=>t+s.Gm()*e+h,0)-h;n=Math.max(this.Zm/2-a/2,0),t&&(i=r[0].Cm()*e)}else if("bottom"===this.eI){const l=r.reduce((t,s)=>t+s.Gm()*e+h,0)-this.$T*e,u=t?r.at(-1).Im()*e:0;n=this.Zm-l-u-2}for(let t=0,s=r.length;t<s;++t){const c=r[t],f=c.Gm()*e,d=n;if(this.ZT){if(n+=0===t?i:f,0<t&&n>this.Zm-4*e)break}else if(0<t&&n>=this.Zm-f)break;0<=d&&this.DC(c,n,e),this.ZT||(n+=f),n+=h}}}DC(t,s,i){let e=0;"center"===this.iI?e=Math.floor((this.Km-t.fm()*i)/2):"right"===this.iI&&(e=this.Km-t.fm()*i),t.rg(e),t.ag(s);for(const h of"ltr"===this.oI?t.Em():t.hg())this.kC(h,e,s,i),e+=h.fm()*i}kC(t,s,i,e){const h=t.dg("offsetx"),n=(s+=h?o(h.param,t.Gm())*e:0,t.dg("offsety"));if(i+=n?o(n.param,t.Gm())*e:0,t.xm()){const r=t.dg("iconoffsety");i+=r?o(r.param,t.Gm())*e:.2*t.Gm()*e}t.rg(s),t.ag(i)}xC(){this.yI.imageSmoothingEnabled=this.QT,this.yI.imageSmoothingQuality="high",this.fI=0;const t=this.tC(),s=this.nI.om();for(const i of s)this.LC(i,t)}LC(t,s){const i=t.og(),e=t.lg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.oI?t.Em():t.hg())this.NC(h,s,t.Gm())}NC(r,o,a){const l=this.yI,u=r.og(),c=r.lg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=r.fm()*o,i=r.Gm()*o,e=r.Gm()/16,h=(4+this.$T)*o,n=r.vm()?r.Bm():null;if(-1!==this.cI){if(this.fI>=this.cI)return;r.vm()&&this.fI+n.length>this.cI&&(n=n.slice(0,this.cI-this.fI),s=this.CI(r).width*o),this.fI+=r.Am()}const f=r.dg("background"),d=r.pg("u"),p=r.pg("s");if((!r.vm()||!Oi.H1(n)||f||d||p)&&!r.pg("hide")){const m=r.dg("color"),g=r.dg("opacity"),y=(this.FC(g?parseFloat(g.param)/100:1),f&&(this.AC(f.param),l.fillRect(u,c-i,s,i+h)),r.dg("linethickness")),w=y?parseFloat(y.param):1,S=r.pg("stroke");if(S&&this.OC(.5*e*w*this.tC()),r.vm()){const b=n.join("");if(this.EC(this.QI(!1,r)),!S){this.OC(.5*e*w*this.tC());const v=r.dg("outlineback");v&&(this.AC(v.param),this.BC(!0,b,u,c,s))}if(this.AC(m?m.param:this.KT),this.BC(S,b,u,c,s),!S){this.OC(.5*e*w*this.tC());const M=r.dg("outline");M&&(this.AC(M.param),this.BC(!0,b,u,c,s))}}else if(r.xm()&&0<r.fm()){const x=r.Mg(this.rm);x&&l.drawImage(x,u,c-i,s,i)}if(this.AC(m?m.param:this.KT),d&&I(l,S,u,c+o*t,s,o*t*w),p){const _=c-i/4,G=o*e,T=_+G/2;l.fillRect(u,T-G*w/2,s,G*w)}}}}BC(t,s,i,e,h){"rtl"===this.oI&&(i+=h),t?"Gecko"===Oi.li.yi?this.yI.strokeText(s,i,e,h):this.yI.strokeText(s,i,e):"Gecko"===Oi.li.yi?this.yI.fillText(s,i,e,h):this.yI.fillText(s,i,e)}_C(){this.Tb.WC()||(this.OM||(this.OM=this.Tb.O2(this.gI.width,this.gI.height,{RM:!0,EM:"high"})),this.Tb.jC(this.gI,this.OM),this.RI.set(0,0,this.Km/this.OM.fm(),this.Zm/this.OM.Gm()),this.DI&&this.DI())}VC(){return this.RI}FI(){this.OM&&(this.Tb.WC()||this.Tb.B2(this.OM),this.OM=null)}static Sv(){for(const t of Vi)t.FI()}static UC(){return Vi.values()}}}{const Ui=self.Ns;class Hi{constructor(t){this.Mx=t.zM(),this.HC=t.JM(),this.zC=t.JC(),this.qC=null,this.l0=!1,this.$C=!1,this.XC=0,1===this.HC?this.qC=this.zC.createQueryEXT():this.qC=this.Mx.createQuery()}ln(){this.YC(),this.Mx=null,this.zC=null,this.$C=!1}YC(){this.qC&&(1===this.HC?this.zC.deleteQueryEXT(this.qC):this.Mx.deleteQuery(this.qC),this.qC=null)}yT(){if(this.l0)throw new Error("query already active");1===this.HC?this.zC.beginQueryEXT(this.zC.TIME_ELAPSED_EXT,this.qC):this.Mx.beginQuery(this.zC.TIME_ELAPSED_EXT,this.qC),this.l0=!0}bT(){if(!this.l0)throw new Error("query not active");1===this.HC?this.zC.endQueryEXT(this.zC.TIME_ELAPSED_EXT):this.Mx.endQuery(this.zC.TIME_ELAPSED_EXT),this.l0=!1}KC(){if(this.qC&&!this.$C&&!this.l0){let t;t=1===this.HC?this.zC.getQueryObjectEXT(this.qC,this.zC.QUERY_RESULT_AVAILABLE_EXT):this.Mx.getQueryParameter(this.qC,this.Mx.QUERY_RESULT_AVAILABLE);const s=this.Mx.getParameter(this.zC.GPU_DISJOINT_EXT);t&&!s&&(1===this.HC?this.XC=this.zC.getQueryObjectEXT(this.qC,this.zC.QUERY_RESULT_EXT):this.XC=this.Mx.getQueryParameter(this.qC,this.Mx.QUERY_RESULT),this.XC/=1e9,this.$C=!0),(t||s)&&this.YC()}}ZC(){return this.$C}QC(){if(this.$C)return this.XC;throw new Error("no result available")}}Ui.ny.tP=class{constructor(t){this.Tb=t,this.fw=t.cb(),this.l0=!1,this.sP=null,this.iP=!1,this.eP=null,this.hP=[]}ln(){for(const t of this.hP)t instanceof Hi&&t.ln();Ui.Br(this.hP),this.sP=null,this.eP=null,this.Tb=null}yT(){if(this.l0)throw new Error("query already active");const t=this.Tb.nP();0<t.length?(this.iP=!0,this.sP=t.at(-1),this.sP.rP(),this.sP.hP.push(this)):(this.iP=!1,this.sP=null),this.l0=!0,t.push(this),this.oP()}bT(){if(!this.l0)throw new Error("query not active");const t=this.Tb.nP().pop();if(t!==this)throw new Error("can only end most nested query");this.l0=!1,this.rP(),this.sP&&(this.sP.oP(),this.sP=null)}oP(){this.eP=Ui.an(Hi,this.Tb),this.hP.push(this.eP),this.eP.yT()}rP(){this.eP.bT(),this.eP=null}KC(){for(const t of this.hP)t.KC()}aP(){return this.iP}ZC(){return this.hP.every(t=>t.ZC())}QC(){return this.hP.reduce((t,s)=>t+s.QC(),0)}cb(){return this.fw}}}{const zi=self.Ns;zi.ny.lP=class{constructor(t,s=1e3){this.Tb=t,this.uP=s,this.cP=[],this.Tb.fP(this)}ln(){this.ic(),this.Tb.dP(this),this.Tb=null}ic(){for(const t of this.cP)t.ln();zi.Br(this.cP)}pP(){const t=new zi.ny.tP(this.Tb);if(this.cP.push(t),this.cP.length>this.uP){const s=this.cP.shift();s.ln()}return t}mP(t){for(const s of this.cP){if(s.cb()>=t)return;if(s.aP())return;s.KC()}}gP(t,s){if(s<=t)return NaN;let i=0;for(const e of this.cP){if(e.cb()>=s)break;if(!(e.cb()<t)){if(!e.ZC())return NaN;i+=e.QC()}}return i}yP(i){for(let t=0,s=this.cP.length;t<s;++t){const e=this.cP[t];if(!(e.cb()<i))return void(0<t&&this.cP.splice(0,t));e.ln()}}}}{let i=function(){h=-1;for(const t of e)t.wP()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ns),t=self.vs,v=(t.Ps,t.Rs),y=t.Gs,n={powerPreference:"default",SP:!0,alpha:!1,depth:!1,bP:!1,vP:2,failIfMajorPerformanceCaveat:!1},r=new Set(["default","low-power","high-performance"]),c=new b.tu(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.tu,x=new b.Rect,_=null,e=(b.isDebug&&(self.MP=function(){_?_.loseContext():console.warn("WEBGL_lose_context not supported")},self.xP=function(){_?_.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.ny._P=class extends b.ny.Cy{constructor(t,s){if(super(s),s=Object.assign({},n,s),!r.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.vP&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Mx=e,this.GP=e.getContextAttributes(),this.TP=e.getParameter(e.VERSION),this.HC=h,this.IP=v.create(),this.CP=!1,this.PP=y.create(),this.RP=!!s.depth,this.EP=!(!s.depth||!s.bP),this.AP=this.RP,this.FP=!1,this.OP=null,this.DP=!0,this.kP=0,this.LP=0,this.Gx=null,this.Tx=null,this.NP=null,this.Ix=null,this.BP=new Float32Array(8e3*this.ab()),this.WP=new Uint16Array(12e3),this.jP=new Float32Array(16e3),this.VP=new Float32Array(32e3),this.UP=0,this.HP=0,this.zP=0,this.JP=0,this.qP=null,this.$P=null,this.XP=[],this.YP=0,this.KP=0,this.ZP=null,this.QP=0,this._G=b.an(b.ny.SG,this),this.tR=b.an(b.Ho,1,1,1,1),this.sR=null,this.aT=null,this.iR=0,this.eR=0,this.hR=new b.Rect,this.nR=b.an(b.Rect,0,0,-1,-1),this.rR=0,this.oR=-1,this.aR=0,this.lR=0,this.uR=0,this.cR="(unavailable)",this.fR="(unavailable)",this.dR=[],this.pR=!1,this.mR=null,this.gR=null,this.yR=null,this.wR=null,this.SR=null,this.bR=null,this.vR=0,this.MR=!!s.SP,this.zC=null,this.xR=new Set,this._R=[],this.mw(this.WP)}wb(){return!0}async ww(){super.ww();const t=this.Mx,s=this.ab(),i=(this.tR.Xo(1,1,1,1),this.sR=null,this.aT=null,this.UP=0,this.zP=0,this.JP=8e3*s-4*s,b.Br(this.XP),this.YP=0,this.KP=0,this.qP=null,this.ZP=null,this.hR.set(0,0,1,1),this.QP=0,this._G),e=(i.w_=null,i.j2=null,i.V2=null,v.set(i.vG,1,1,1,1),i.clearColor.Xo(0,0,0,0),i.MG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.iR=t.ONE,this.eR=t.ONE_MINUS_SRC_ALPHA,this.GR(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.RP?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.AP=this.RP,this.FP=!1,this.Ix=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Ix),t.bufferData(t.ARRAY_BUFFER,this.VP.byteLength,t.DYNAMIC_DRAW),this.Gx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Gx),t.bufferData(t.ARRAY_BUFFER,this.BP.byteLength,t.DYNAMIC_DRAW),this.Tx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Tx),t.bufferData(t.ARRAY_BUFFER,this.jP.byteLength,t.DYNAMIC_DRAW),this.NP=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.NP),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.WP,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.oR=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.aR=e[0],this.lR=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),r=(this.uR=h&&n?Math.min(h.precision,n.precision):0,2048<this.lR&&(this.lR=2048),this.dR=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(r&&(this.cR=t.getParameter(r.UNMASKED_VENDOR_WEBGL),this.fR=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),this.mR=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(_=t.getExtension("WEBGL_lose_context")),this.MR&&(1===this.JM()?this.zC=t.getExtension("EXT_disjoint_timer_query"):this.zC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.gR=t.getExtension("EXT_texture_filter_anisotropic"),this.gR?this.vR=t.getParameter(this.gR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.vR=0,this.JM()<2&&this.RP&&this.EP&&(this.yR=t.getExtension("WEBGL_depth_texture"),!this.yR))throw new Error("no depth texture support");this.JM()<2&&(this.wR=t.getExtension("EXT_frag_depth"),this.SR=t.getExtension("OES_standard_derivatives"),this.bR=t.getExtension("EXT_shader_texture_lod"));let o=b.ny.gx,a=o.W_(!1),l=o.V_(),u=a,c=o.Z_(),f=o.Y_(),d=o.z_(),p=o.W_(!0),m=!1;this.RP&&(this.JM()<2?this.wR&&(l=o.U_(),c=o.Q_(),d=o.J_(),m=!0):(u=o.j_(),l=o.H_(),c=o.tG(),f=o.K_(),d=o.q_(),p=o.j_(!0)));const g=o.X_(this.JM(),m,this.SR&&this.bR),y=2<=this.JM()?o.j_():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.sG(),a,"<fill>"],[o.iG(),a,"<lineargradient>"],[o.eG(),a,"<penumbra>"],[o.nG(),a,"<hardellipse>"],[o.rG(),a,"<hardellipseoutline>"],[o.oG(),a,"<smoothellipse>"],[o.aG(),a,"<smoothellipseoutline>"],[o.hG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.TR({src:t[0],wx:t[1],name:t[2]})));this.Ny=S[0],this.$P=S[1],this.By=S[2],this.Vy=S[3],this.Uy=S[4],this.Hy=S[5],this.zy=S[6],this.Jy=S[7],this.qy=S[8],this.$y=S[9],this.Xy=S[10],this.Wy=S[11],this.jy=S[12],this.Uw()}async TR(t){const s=await b.ny.gx.vx(this,t);return this.Bw(s),s}IR(){this.qP=null}cC(t,s,i){if(this.Km!==t||this.Zm!==s||i){this.ub();const e=this.Mx,h=this._G;this.Km=t,this.Zm=s,this.CR(0,0,t,s),this.Ow(this.PP,t/s),this.PR(this.PP),this.$P&&(e.useProgram(this.$P.b_()),this.$P.d_(this.Ey),this.qP=this.$P,this._G.w_=this.$P),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.sR=null,this.aT=null,this.RP&&this.DP&&this.RR(this.Km,this.Zm),this.ZP&&this.ZP.N2(this.Km,this.Zm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.ZP=null,h.j2=null,h.V2=null}}RR(t,s){const i=this.Mx;this.OP&&this.kP===t&&this.LP===s||(this.EP?(this.OP&&i.deleteTexture(this.OP),this.OP=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.OP),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.JM()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.yR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.yR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.OP&&i.deleteRenderbuffer(this.OP),this.OP=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.OP),i.renderbufferStorage(i.RENDERBUFFER,2<=this.HC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.kP=t,this.LP=s)}ER(t,s){this.RP&&(this.DP=!1,this.RR(t,s))}AR(){this.RP&&(this.DP=!0,this.RR(this.Km,this.Zm))}CR(t,s,i,e){const h=this.IP;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const n=this.FR();n.UG(t,s,i,e),v.set(h,t,s,i,e),this.KP=0}}Pw(t){super.Pw(t),this.Ow(this.PP,this.Km/this.Zm)}Gw(t){super.Gw(t),this.Ow(this.PP,this.Km/this.Zm)}Iw(t){super.Iw(t),this.Ow(this.PP,this.Km/this.Zm)}PR(t){if(!y.B(this.Ey,t)){const s=this.FR();s.zG(t),y.T(this.Ey,t),this.KP=0,this.CP=!0}}OR(){let t,s,i,e=this.ZP;i=(null===e?(t=this.PP,s=this.fm(),this):(t=e.J2(),s=e.fm(),e)).Gm(),this.PR(t),this.CR(0,0,s,i)}DR(t){if(!y.B(this.Ay,t)){const s=this.FR();s.qG(t),y.T(this.Ay,t),this.KP=0,this.CP=!0}}kR(){this.CP=!1}LR(){return this.CP}W2(){return this._G}FR(){const t=this.XP;return this.YP===t.length&&t.push(new b.ny.xG(this._G)),t[this.YP++]}ub(){0===this.YP||this.WC()||(this.NR(),this.BR(),this.YP=0,this.UP=0,this.HP=0,this.zP=0,this.KP=0)}NR(){const t=this.Mx;0<this.zP&&(t.bindBuffer(t.ARRAY_BUFFER,this.Ix),t.bufferSubData(t.ARRAY_BUFFER,0,this.VP.subarray(0,this.zP))),0<this.UP&&(t.bindBuffer(t.ARRAY_BUFFER,this.Gx),t.bufferSubData(t.ARRAY_BUFFER,0,this.BP.subarray(0,this.UP)),t.bindBuffer(t.ARRAY_BUFFER,this.Tx),t.bufferSubData(t.ARRAY_BUFFER,0,this.jP.subarray(0,this.HP)))}BR(){const i=this.XP;for(let t=0,s=this.YP;t<s;++t)i[t].jT()}WR(){return this.tR.la()}jR(t,s,i,e){const h=this.tR;if(!h.ga(t,s,i,e)){h.Xo(t,s,i,e);const n=this.FR();n.LG(h),this.KP=0,this.Ky=null}}VR(t){const s=this.tR;if(s.la()!==t){s.ea(t);const i=this.FR();i.LG(s),this.KP=0,this.Ky=null}}wv(t){const s=this.tR;if(!s.equals(t)){s.set(t);const i=this.FR();i.LG(s),this.KP=0,this.Ky=null}}UR(){this.jR(1,1,1,1)}HR(){return this.tR}zR(t){if(t!==this.sR){const s=this.FR();s.DG(t),this.sR=t,this.KP=0}}YM(){this.sR=null}yv(t){const s=this.gS(t);this.JR(s[0],s[1])}qR(t){const s=this.SS(t);this.JR(s.pS,s.mS)}JR(t,s){if(t!==this.iR||s!==this.eR){const i=this.FR();i.jG(t,s),this.iR=t,this.eR=s,this.KP=0,this.Ky=null}}$R(){return this.iR===this.Mx.ONE&&this.eR===this.Mx.ONE_MINUS_SRC_ALPHA}YR(){this.JR(this.Mx.ONE,this.Mx.ONE_MINUS_SRC_ALPHA)}KR(){this.JR(this.Mx.SRC_ALPHA,this.Mx.ONE_MINUS_SRC_ALPHA)}ZR(){this.JR(this.Mx.ONE,this.Mx.ZERO)}Rect(t){this.QR(t._l(),t.Gl(),t.Tl(),t.Il())}QR(t,s,i,e){this.ob(t,s,i,s,i,e,t,e)}tE(){let t=this.UP;if(t>=this.JP&&(this.ub(),t=0),1===this.KP)this.XP[this.YP-1].TG+=6;else{const s=this.FR();s.FG(t,6),this.KP=1}}sE(t){t.bu(this.BP,this.UP,this.iw+this.ew),this.UP+=12}tu(t){this.tE(),this.sE(t),c.ca(this.jP,this.HP),this.HP+=8}ob(t,s,i,e,h,n,r,o){this.tE();let a=this.BP,l=this.UP,u=this.iw+this.ew;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=n,a[l++]=u,a[l++]=r,a[l++]=o,a[l++]=u,this.UP=l,c.ca(this.jP,this.HP),this.HP+=8}OS(t,s){this.tE(),this.sE(t),s.Rl(this.jP,this.HP),this.HP+=8}iE(t,s){this.tE(),this.sE(t),s.ca(this.jP,this.HP),this.HP+=8}eE(t,s,i,e,h,n,r,o,a,l,u,c,f){this.tE();let d=this.BP,p=this.UP,m=this.iw+this.ew;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.UP=p,f.Rl(this.jP,this.HP),this.HP+=8}PS(t,s,i,e,h,n,r,o,a,l,u,c,f){this.tE();let d=this.BP,p=this.UP,m=this.iw+this.ew;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.UP=p,f.ca(this.jP,this.HP),this.HP+=8}hE(e,h,n){const r=this.BP,o=this.jP;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=n.length;i<t;){const a=n[i++],l=n[i++],u=n[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.tE();let t=this.UP,s=this.HP;r[t++]=e[0+c],r[t++]=e[1+c],r[t++]=e[2+c],r[t++]=e[0+f],r[t++]=e[1+f],r[t++]=e[2+f],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.UP=t,this.HP=s}}nE(t,s){this.xS(0),y.T(w,this.Ey),y.T(S,this.Ay),this.OR();const[i,e]=this.rE(this.ZP),h=this.Nw(0,0,this.bw(e),0,0,0,e);if(this.DR(h),"crop"===t&&this.ZP&&s){const n=this.Km/2,r=this.Zm/2,o=s.fm(),a=s.Gm(),l=this.ZP.fm(),u=this.ZP.Gm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-n,r-p,-n+c,r-f-p),M.vu(x),x.set(0,d,c,f+d),x.It(o,a),this.OS(M,x)}else{const m=i/2,g=e/2;this.QR(-m,g,m,-g)}this.PR(w),this.DR(S)}oE(t){if(!this.hR.equals(t)){this.hR.T(t);const s=this.FR();s.tT(t),this.KP=0}}aE(){}lE(t,s,i,e){7996<=this.zP&&this.ub();let h=this.zP,n=this.iw+this.ew;if(2===this.KP&&this.QP===n)this.XP[this.YP-1].TG++;else{const o=this.FR();o.iT(h,n),this.KP=2,this.QP=n}const r=this.VP;r[h++]=t,r[h++]=s,r[h++]=i,r[h++]=e,this.zP=h}Hw(t){if(this.qP!==t){const s=this.FR();s.hT(t),this.qP=t,this.KP=0,this.Ky=null}}uE(){return this.qP}cE(){this.Hw(this.$P)}fE(t){const s=this.FR();s.BG(t),this.KP=0}dE(t,s,i=1){const e=this.FR();e.vT(t,s,i),this.KP=0}pE(t,s,i,e,h,n,r){if(this.qP!==this.Wy)throw new Error("must set tilemap fill mode first");const o=this.FR();o.xT(t,s,i,e,h,n,r),this.KP=0}mE(t,s,i,e,h,n,r){if(this.qP!==this.jy)throw new Error("must set tile randomization mode first");const o=this.FR();o.GT(t,s,i,e,h,n,r),this.KP=0}gE(t,s,i,e,h,n,r,o,a,l,u){const c=this.qP;if(u%=10800,c.e_&&!c.C_(s,i,e,h,n,r,o,a,l,u)){const f=this.FR(),d=(f.rT(),c.E_(s,i,e,h,n,r,o,a,l,u),f.CG),p=(d[0]=n,d[1]=r,s.ca(d,2),d[6]=a,d[7]=l,i.ca(d,12),f.PG),m=(h.ca(p,0),p[1]);p[1]=p[3],p[3]=m,e.ca(f.EG,0),f.GG=u,f.TG=o,c.Wx.h_()?f.IG=t?t.z2():null:f.IG=null,this.KP=0}}yE(t){const s=this.qP;if(0!==t.length&&!s.__(t)){const i=this.FR();i.lT(),s.T_(t),b.Ur(i.AG,t),this.KP=0}}wE(t,s,i,e){const h=this.FR();h.ZG(t,s,i,e),this.KP=0}ic(t){const s=this.FR();s.KG(t),this.KP=0}SE(){}lb(){super.lb(),this.Mx.flush()}bE(){if(this.RP&&this.ZP&&this.ZP.K2()){const t=this.FR();t.IT(this.AP),this.KP=0}}vE(t){if(this.AP!==(t=!!t)&&this.RP){this.AP=t;const s=this.FR();s.PT(t),this.KP=0}}ME(){return this.AP}D2(){return this.OP}L2(){return this.EP}xE(t){if(t=!!t,this.EP&&this.FP!==t){if(t&&this.ME())throw new Error("depth still enabled");this.FP=t;const s=this.FR();s.ET(t),this.KP=0}}_E(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.nR.xl(t,s,i,e)){this.nR.gl(t,s,i,e);const n=h||this.rE(this.GE())[1],r=(s=n-s-e,this.FR());r.BT(!0,t,s,i,e),this.KP=0}}TE(){if(-1!==this.nR.Tl()){this.nR.set(0,0,-1,-1);const t=this.FR();t.BT(!1,0,0,0,0),this.KP=0}}IE(){for(const t of this.xR)t.mP(this.fw)}WC(){return!this.Mx||this.Mx.isContextLost()||this.pR}Sv(){super.Sw(),b.ny.FM.Sv(),b.ny.w2.Sv(),b.ny._b.Sv();for(const t of this.xR)t.ic();this.dR=[],this.zC=null,this.mR=null,this.gR=null,this.yR=null,this.wR=null,this.SR=null,this.bR=null,this.vR=0,this.cR="(unavailable)",this.fR="(unavailable)",this.qP=null,this.$P=null,this.OP=null;for(const s of this.Yy.values())s.Sv()}async bv(){this.pR=!0,await this.ww(),this.pR=!1;for(const t of this.Yy.values())t.bv(this);this.cC(this.Km,this.Zm,!0)}CE(t,s){if(this.WC())throw new Error("context lost");this.ub();const i=b.an(b.ny.FM,this);return i.UM(t,s),i}async PE(e,h){if(this.WC())throw new Error("context lost");if(h=Object.assign({},h),b.Vi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.GM&&"clamp-to-edge"!==h.GM||h.TM&&"clamp-to-edge"!==h.TM,i=b.On(t.width)&&b.On(t.height);return this.qM()||i||!s?h.premultiplyAlpha=!1:b.Vi.$i?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Dn(t.width),resizeHeight:b.Dn(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Nf(()=>this.CE(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Eo(e);e=t}return b.Nf(()=>this.CE(e,h))}O2(t,s,i){this.ub();const e=b.an(b.ny.FM,this);return e.KM(t,s,i),e}jC(t,s,i){this.ub(),s.i2(t,i)}B2(t){t&&(t.a2(),0<t.l2()||(this.ub(),t===this.sR&&(this.Mx.bindTexture(this.Mx.TEXTURE_2D,null),this.sR=null),t===this.aT&&(this.Mx.activeTexture(this.Mx.TEXTURE1),this.Mx.bindTexture(this.Mx.TEXTURE_2D,null),this.Mx.activeTexture(this.Mx.TEXTURE0),this.aT=null),t.e2()))}RE(t){let s=this.Km,i=this.Zm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.ub();const h=b.an(b.ny.w2,this);return h.A2(s,i,Object.assign({m2:e},t)),this.ZP=null,this._G.j2=null,this._G.V2=null,h}EE(t,s=!0){if(t!==this.ZP){t&&t.Z2()&&t.N2(this.Km,this.Zm);const i=this.FR();i.XG(t),this.ZP=t,this.KP=0,s&&this.OR()}}GE(){return this.ZP}rE(t){return t?[t.fm(),t.Gm()]:[this.Km,this.Zm]}AE(t,s="stretch"){if(this.HC<2||this.ZP&&0<this.ZP.Q2())this.ZR(),this.UR(),this.FE(t,s);else{const i=this.FR();i.dT(t,this.ZP,s),this.KP=0}}FE(t,s="stretch"){const i=t.z2();if(!i)throw new Error("not a texture-backed render target");this.zR(i),this.nE(s,i)}OE(t){if(!(this.HC<2)){const s=this.FR();s.cT(t.U2()),this.KP=0}}DE(t){this.EE(null),this.ub();const s=t.z2();s===this.sR&&(this.Mx.bindTexture(this.Mx.TEXTURE_2D,null),this.sR=null),s===this.aT&&(this.Mx.activeTexture(this.Mx.TEXTURE1),this.Mx.bindTexture(this.Mx.TEXTURE_2D,null),this.Mx.activeTexture(this.Mx.TEXTURE0),this.aT=null),t.e2()}async ox(t,s,i){this.ub();let e=this.ZP,h,n,r,o=(r=t?(h=t.fm(),n=t.Gm(),t.U2()):(h=this.fm(),n=this.Gm(),null),0),a=0,l=h,u=n;if(i){o=b.mn(Math.floor(i._l()),0,h-1),a=b.mn(Math.floor(i.Gl()),0,n-1);let t=i.width(),s=(t=0===t?h-o:b.mn(Math.floor(t),0,h-o),i.height());s=0===s?n-a:b.mn(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}let c=this.Mx,f=(c.bindFramebuffer(c.FRAMEBUFFER,r),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.ZP=null,this._G.j2=null,this._G.V2=null,this.EE(e)}),d;if(!s&&2<=this.JM()){c.bindFramebuffer(c.READ_FRAMEBUFFER,r);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.bx(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}kE(){this.vE(!0);const t=this.FR();t.FT(),this.KP=0,this.rR=1}LE(){this.vE(!1);const t=this.FR();t.DT(),this.KP=0,this.rR=2}NE(){return 2===this.rR}BE(){this.vE(!0);const t=this.FR();t.LT(),this.KP=0,this.rR=0}WE(t){if(this.jE()){const s=this.FR();s.mT(t),this.KP=0}}VE(t){if(this.jE()){const s=this.FR();s.wT(t),this.KP=0}}bx(s){const t=new Promise(t=>e.add({resolve:t,wP:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}Sb(){return this.Km*this.Zm*(this.GP.alpha?4:3)}bb(){let t=0;for(const s of b.ny.w2.ux())s.z2()||(t+=s.c2());return t}vb(){let t=0;for(const s of b.ny.FM.f2())t+=s.c2();return t}UE(){return this.TP}JM(){return this.HC}HE(){return"webgl"+this.JM()}qM(){return 2<=this.JM()}HM(){return this.oR}zE(){return this.aR}JE(){return this.lR}qE(){return 0!==this.uR}$E(){return this.uR}XE(){return this.cR}YE(){return this.fR}KE(){if(2<=this.JM())return"webgl2";{const t=[];return this.wR&&t.push("EXT_frag_depth"),this.SR&&t.push("OES_standard_derivatives"),this.bR&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}ZE(){return this.dR}jE(){return!!this.zC}JC(){return this.zC}Sx(){return this.mR}t2(){return this.gR}s2(){return this.vR}fP(t){this.xR.add(t)}dP(t){this.xR.delete(t)}nP(){return this._R}zM(){return this.Mx}GR(t){this.dS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}QE(){return this.xb()}}}{const Ji=self.Ns,qi={tA:null,sA:null,iA:null,getTime:null,eA:null};Ji.ny.hA=class{constructor(t){t=Object.assign({},qi,t),this.nA=t.tA,this.rA=t.sA,this.oA=t.iA,this.aA=t.getTime,this.lA=t.eA,this.uA=null,this.cA=new Set}fA(t){this.cA.add(t)}dA(t){this.cA.delete(t)}Sv(){this.uA=null;for(const t of this.cA)t.Sv()}pA(t){return this.nA?this.nA(t):[t.fm(),t.Gm()]}GE(t){return this.rA(t)}mA(t,s){this.oA(t,s)}gA(){return this.aA()}s1(t){this.lA(t)}yA(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.uA||this.uA.fm()===s&&this.uA.Gm()===i||(t.B2(this.uA),this.uA=null),null===this.uA&&(this.uA=t.CE(null,{width:s,height:i,IM:"nearest",RM:!1})),this.uA}}}{const o=self.Ns,$i=self.vs,xh=$i.Gs,Xi=o.an(o.Rect),Yi=o.an(o.Rect),Ki=o.an(o.Rect),Zi=o.an(o.Rect),Qi=xh.create(),te=xh.create(),se={wA:null,SA:null,bA:null,vA:!1},ie={MA:null,xA:!1,_A:!1,GA:!1,TA:!1,IA:!1,CA:!1};o.ny.PA=class{constructor(t,s){s=Object.assign({},se,s),this.c1=t,this.RA=s.wA,this.EA=s.SA,this.AA=s.bA,this.FA=null,this.OA=[],this.DA=[],this.kA=[],this.LA=!1,this.cv=0,this.NA=!1,this.BA=!1,this.WA=!1,this.jA=!1,this.VA=!1,this.UA=!1,this.CP=!1,this.HA=!1,this.zA=!1,this.JA=!1,this.qA=!1,this.$A=!1,this.XA=0,this.YA=[null,null,null],this.KA=!!s.vA,this.ZA=0,this.QA=0,this.t3=0,this.s3=0,this.i3=null,this.e3=null,this.h3=o.an(o.Rect),this.n3=o.an(o.Rect),this.r3=o.an(o.Rect),this.o3=o.an(o.Rect),this.a3=o.an(o.Rect),this.l3=1,this.u3=1,this.f3=0,this.d3=0,this.m3=null,this.g3=null,this.y3=0,this.w3=0,this.S3=!1,this.C2=xh.create(),this.b3=xh.create(),this.c1.fA(this)}ln(){this.c1.dA(this),o.Br(this.kA),o.Br(this.OA),o.Br(this.DA),this.i3=null,this.e3=null,this.RA=null,this.EA=null,this.AA=null}Sv(){this.LA=!0,o.Br(this.kA),o.Br(this.OA),o.Br(this.DA)}v3(){return this.LA}M3(h,t){if(t=Object.assign({},ie,t),o.Br(this.kA),this.ZA=0,this.QA=0,this.NA=!1,this.BA=!1,this.WA=!1,this.jA=!1,this.VA=!1,this.UA=!1,this.XA=0,this.$A=!!t.TA,this.qA=!!t.CA,this.LA=!1,o.Ur(this.OA,h),0!==h.length){if(t.MA){if(t.MA.length!==h.length)throw new Error("incorrect indexMap length");o.Ur(this.DA,t.MA)}else{o.Br(this.DA);for(let t=0,s=h.length;t<s;++t)this.DA.push(t)}for(const s of h)this.ZA+=s.Xb(),this.QA+=s.Yb(),s.sv()&&(this.NA=!0),s.nv()&&(this.BA=!0),s.hv()&&(this.WA=!0),s.Kb()&&(this.jA=!0),s.av()&&(this.VA=!0);this.UA=this.x3(h[0].qb());const n=this._3(h[0],t),r=this.G3(h.at(-1),t);if(1!==h.length||n||r){this.JA=!1;let e=0;n&&(this.XA=1,this.kA.push(o.an(o.ny.PA.I3.T3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||n){let t=1===e?2:1;s!==i-1||r||(t=0),this.XA=Math.max(this.XA,t),this.kA.push(o.an(o.ny.PA.I3.C3,this,e,t,s)),e=t}else this.XA=1,this.kA.push(o.an(o.ny.PA.I3.P3,this,-1,1,s)),e=1;r&&this.kA.push(o.an(o.ny.PA.I3.R3,this,e,0))}else this.JA=!0}}_3(t,s){return!!(s.xA||t.Zb()||s.GA&&!t.tv()||t.nv()&&!this.qA||0!==this.ZA||0!==this.QA)||(t.qb().wb()?t.hv()&&(s.IA||s.TA)||t.rv()&&s.TA:t.hv()&&!this.UA&&s.IA)}G3(t,s){return!!s._A||(t.qb().wb()?t.hv()||t.Kb():(t.hv()||t.Kb())&&this.E3())}x3(t){return t.Dw()&&this.WA&&!this.jA}A3(t,s,i){t.Dw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.m3=s,this.i3=i.F3||null,this.e3=i.contextObject||null,this.cv=i.O3||0,this.l3=i.devicePixelRatio||1,this.u3=i.D3||1,this.f3=i.L3||0,this.d3="number"==typeof i.time?i.time:this.c1.gA(),this.CP=!1,t.kR(),this.NA&&this.N3();let e=!1;if(this.B3()&&(this.W3(t,i),e=!0,this.g3=this.c1.yA(t,this.t3,this.s3),Xi.T(this.n3),Xi.Jl(),t.Dw()&&t._MaybeDoPendingClearRenderPass(this.m3),t.CopyTextureToTexture(this.m3.z2(),this.g3,Xi._l(),Xi.Gl(),Xi.width(),Xi.height())),this.JA)this.j3(t,i);else if(e||this.W3(t,i),0!==this.r3.width()||0!==this.r3.height()){t.YR(),t.UR(),t.vS(0),t.xS(0),this.FA=i.V3||null,this.y3=i.U3||0,this.w3=i.H3||0,this.S3=!!i.z3,this.J3(t),this.YA[0]=s,this.YA[1]=1<=this.XA?this.q3():null,this.YA[2]=2===this.XA?this.q3():null;for(const h of this.kA){const n=this.X3(h.Y3()),r=this.X3(h.K3());t.Dw()?h.Z3(t,n,r):h.Q3(t,n,r)}t.zR(null),this.YA[1]&&this.tF(this.YA[1]),this.YA[2]&&this.tF(this.YA[2]),this.YA.fill(null),this.sF(t),this.m3=null,this.g3=null,this.i3=null,this.e3=null,this.FA=null}}W3(t,s){const[i,e]=this.c1.pA(t);this.iF(t,i,e),this.eF(s)}iF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.t3===s&&this.s3===i||this.hF(t,s,i,0,0,this.C2,this.b3),this.t3=s,this.s3=i}hF(t,s,i,e,h,n,r){const o=s/2+e,a=i/2+h,l=(t.Ow(n,s/i),t.Nw(o,a,t.bw(i),o,a,0,i));xh.T(r,l)}eF(t){this.h3.T(t.nF),t.rF?this.n3.T(t.rF):this.n3.set(0,0,this.t3,this.s3),this.r3.T(this.n3),this.r3.It(this.t3,this.s3);const s=this.u3*this.l3;this.n3.Ll(this.ZA*s,this.QA*s),this.a3.T(this.n3),this.a3.It(this.t3,this.s3),this.n3.ql(0,0,this.t3,this.s3),this.o3.T(this.n3),this.o3.It(this.t3,this.s3)}J3(t){if(this.HA=t.ME(),this.zA=t.NE(),this.qA)t.vE(!1),this.BA&&t.xE(!0);else{if(Xi.T(this.n3),t.wb()){const s=this.u3*this.l3;Xi.Ll(Math.max(this.ZA,1)*s,Math.max(this.QA,1)*s),Xi.Jl(),Xi.mn(0,0,this.t3,this.s3)}else Xi.Jl();t._E(Xi._l(),Xi.Gl(),Xi.width(),Xi.height(),this.s3)}}oF(t){t.UR(),this.qA||(this.zA&&t.BE(),t.vE(!1),this.BA&&t.xE(!0)),t.Dw()&&t.SetNormalizedCoordsProgramVariant(!0)}sF(t){t.xE(!1),this.zA&&t.LE(),t.vE(this.HA),this.qA||t.TE(),t.Dw()&&t.SetNormalizedCoordsProgramVariant(!1),this.CP=t.LR()}aF(){this.a3.mn(0,0,1,1)}X3(t){return t<0?null:this.YA[t]}q3(){return this.c1.GE(this)}lF(){return this.m3}tF(t){this.c1.mA(t,this)}uF(t){return this.OA[t]}cF(t){this.FA?this.FA(this,t,()=>this.RA(t,this)):this.RA(t,this),this.JA||this.oF(t)}fF(t){if(this.qA)return!0;if(0!==this.y3||0!==this.w3)return!1;const[s,i]=t.rE(t.GE());return s===this.t3&&i===this.s3}dF(t,s){let i=this.C2,e=this.b3;if(s&&!this.fF(t)){i=Qi,e=te;const[h,n]=t.rE(t.GE());this.hF(t,h,n,this.y3,this.w3,i,e),this.qA||t.TE()}t.PR(i),t.DR(e)}N3(){this.c1.s1(this)}pF(t,s){return this.AA(this.DA[t],s)}mF(t,s){let i=this.a3,e=this.o3,h=this.r3;t.wb()&&(Yi.T(i),Yi.Wl(1),i=Yi,Ki.T(e),Ki.Wl(1),e=Ki,Zi.T(h),Zi.Wl(1),h=Zi),this.gF(t,s,e,h,i,1/this.t3,1/this.s3)}yF(t,s){let e=this.o3,h=this.r3,n=1/this.t3,r=1/this.s3;if(this.EA){let{wF:t,SF:s,bF:i}=this.EA(this.i3);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.t3,i=i||this.s3,e=t,h=t,n=1/s,r=1/i}else t.wb()&&(Ki.T(e),Ki.Wl(1),e=Ki,Zi.T(h),Zi.Wl(1),h=Zi);let i=this.a3;t.wb()&&((i=Yi).T(this.a3),i.Wl(1)),this.gF(t,s,e,h,i,n,r),t.Dw()&&this.VA&&t.SetProgramParameter_IsSrcTexRotated(this.$A)}vF(t){return this.WA?t.Dw()?this.B3()?this.g3:this.m3.z2():this.m3:null}gF(t,s,i,e,h,n,r){t.gE(this.vF(t),h,i,e,this.h3,n,r,this.l3,this.u3,this.f3,this.d3),t.yE(this.pF(s,t))}j3(t,s){const i=this.OA[0],e=t.ME(),h=i.nv();h&&(t.vE(!1),t.xE(!0),this.a3.set(0,0,1,1),this.r3.set(0,0,1,1)),t.Hw(i),t.yv(this.cv),t.EE(this.m3);let n=0,r=1;if(this.r3.set(0,0,1,1),i.rv()&&this.EA){const{wF:o,SF:a,bF:l}=this.EA(this.i3);o&&this.r3.T(o),n=Number.isFinite(a)?1/a:0,r=Number.isFinite(l)?1/l:0}else{const[u,c]=this.c1.pA(t);n=1/u,r=1/c}s.nF?this.h3.T(s.nF):this.h3.set(0,0,0,0),t.gE(this.vF(t),this.a3,this.r3,this.r3,this.h3,n,r,this.l3,this.u3,this.f3,this.d3),t.yE(this.pF(0,t)),t.Dw()&&this.VA&&t.SetProgramParameter_IsSrcTexRotated(this.$A),t.vS(0),this.cF(t),h&&(t.xE(!1),t.vE(e))}B3(){return this.UA}E3(){return!this.UA}MF(){return this.WA}xF(){return!!this.JA&&!this.B3()}_F(){return this.qA}GF(){return this.i3}TF(){return this.e3}IF(){return this.cv}CF(){return this.S3}LR(){return this.CP}PF(){return this.n3}RF(){return this.o3}EF(){return this.KA}async AF(t,s,i){}}}{const ee=self.Ns;ee.ny.PA.I3=class{constructor(t,s,i,e=-1){this.FF=t,this.OF=s,this.DF=i,this.Kg=e}kF(){return this.FF}Y3(){return this.OF}K3(){return this.DF}LF(){return this.Kg}b_(){return this.kF().uF(this.LF())}Q3(t,s,i){}Z3(t,s,i){}}}{const he=self.Ns;he.ny.PA.I3.T3=class extends he.ny.PA.I3{constructor(t,s,i,e){super(t,s,i,e)}Q3(t,s,i){const e=this.kF();t.YR(),t.Uw(),t.EE(i,e.CF()),t.wE(0,0,0,0),e.cF(t),e.aF()}Z3(t,s,i){const e=this.kF();t.YR(),t.Uw(),t.EE(i,!1),t.wE(0,0,0,0),e.cF(t),e.aF()}}}{const ne=self.Ns,re=ne.an(ne.Rect),oe=ne.an(ne.tu);ne.ny.PA.I3.R3=class extends ne.ny.PA.I3{constructor(t,s,i,e){super(t,s,i,e)}Q3(t,s,i){const e=this.kF();t.Uw(),t.EE(i),e.dF(t,!0),t.yv(e.IF()),t.zR(s.z2()),oe.vu(e.PF()),re.T(e.RF()),re.Wl(1),t.OS(oe,re),e.EF()&&t.OE(s)}Z3(t,s,i){const e=this.kF();t.Uw(),t.EE(i,!1),e.fF(t)?oe.vu(e.RF()):(t.SetNormalizedCoordsProgramVariant(!1),e.dF(t,!0),oe.vu(e.PF())),t.SetBackTexture(null),t.yv(e.IF()),t.zR(s.z2()),e._F()?t.nE():t.OS(oe,e.RF())}}}{const ae=self.Ns;ae.ny.PA.I3.P3=class extends ae.ny.PA.I3{constructor(t,s,i,e){super(t,s,i,e)}Q3(t,s,i){const e=this.kF();t.EE(i,e.CF()),t.wE(0,0,0,0),t.ZR(),t.Hw(this.b_()),e.yF(t,this.LF()),e.cF(t),e.aF()}Z3(t,s,i){const e=this.kF();t.EE(i,!1),t.wE(0,0,0,0),t.ZR(),t.Hw(this.b_()),e.yF(t,this.LF()),e.cF(t),e.aF()}}}{const le=self.Ns,ue=le.an(le.Rect),ce=le.an(le.tu);le.ny.PA.I3.C3=class extends le.ny.PA.I3{constructor(t,s,i,e){super(t,s,i,e)}Q3(t,s,i){const e=this.kF(),h=(t.EE(i),0===this.K3());h?t.yv(e.IF()):(t.wE(0,0,0,0),t.ZR()),t.Hw(this.b_()),e.mF(t,this.LF()),t.zR(s.z2()),e.dF(t,h),ce.vu(e.PF()),ue.T(e.RF()),ue.Wl(1),t.OS(ce,ue),e.EF()&&t.OE(s)}Z3(t,s,i){const e=this.kF(),h=(t.EE(i,!1),0===this.K3());h?(t.yv(e.IF()),t.SetBackTexture(null),e.fF(t)?ce.vu(e.RF()):(t.SetNormalizedCoordsProgramVariant(!1),e.dF(t,!0),ce.vu(e.PF()))):(t.wE(0,0,0,0),t.ZR(),ce.vu(e.RF())),t.Hw(this.b_()),e.mF(t,this.LF()),t.zR(s.z2()),e._F()?t.nE():t.OS(ce,e.RF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},c=(u,self.Ns),f=self.$s,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.NF=class{constructor(t){d=t,Object.defineProperties(this,{BF:{value:d.jF().WF(),writable:!1},VF:{value:d.HF().UF(),writable:!1},zF:{value:{},writable:!1},JF:{value:{},writable:!1},qF:{value:d.$F(),writable:!1},XF:{value:d.YF(),writable:!1},storage:{value:new self.KF(d),writable:!1},isInWorker:{value:d.ZF(),writable:!1},QF:{value:d.tO(),writable:!1},sO:{value:d.iO(),writable:!1},IM:{value:d.eO(),writable:!1},hO:{value:d.nO(),writable:!1},rO:{value:new self.oO(t),writable:!1},aO:{value:new self.lO(t),writable:!1}}),d.uO().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.uO().addEventListener("keyup",t=>s.delete(t.key)),d.Uf().addEventListener("window-blur",()=>s.clear()),d.ZF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}cO(t){Object.defineProperties(this.zF,t)}fO(t){Object.defineProperties(this.JF,t)}addEventListener(t,s){d.uO().addEventListener(t,s)}removeEventListener(t,s){d.uO().removeEventListener(t,s)}dO(t,...s){f.Te(t);const i=d.pO(),e=i.mO(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Zu())return e.gO();if(s.length<e.yO())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.yO()} expected)`);let h=e.wO(),n=h.SO(),r=i.bO();if(r){n=n.slice(0);const a=new Set(n);for(const l of r.SO())a.has(l)||(n.push(l),a.add(l));for(const u of i.vO())a.has(u)||(n.push(u),a.add(u))}const o=h.MO(n,e.xO(),e._O(),e.gO(),...s);return o}GO(t){const s=d.IO().TO();if(!s)throw new Error("not in a function which returns a value");switch(s.CO()){case 1:"number"==typeof t&&s.PO(t);break;case 2:"string"==typeof t&&s.PO(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.PO(t)}}signal(t){f.Te(t),d.pO().RO(t)}EO(t){return f.Te(t),d.pO().AO(t)}FO(){return[d.tO(),d.iO()]}get isSuspended(){return d.OO()}get dt(){return d.DO()}get kO(){return d.LO()}get gameTime(){return d.NO()}get BO(){return d.WO()}get timeScale(){return d.jO()}set timeScale(t){f.Me(t),d.VO(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.UO()}get framesPerSecond(){return d.UO()}get HO(){return d.zO()}get JO(){return d.qO()}get $O(){return d.XO()}get YO(){return d.KO()}set YO(t){if(!e.has(t))throw new Error("invalid framerate mode");d.ZO(t)}get QO(){return d.tD()}set QO(t){f.Me(t),d.sD(t)}get iD(){return d.eD()}set iD(t){d.hD(t)}random(){return d.nD()}get layout(){const t=d.rD();if(t)return t.oD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}aD(t){let s=d.lD(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.uD(t))return i.oD();throw new Error("invalid layout")}cD(){return d.lD().fD().map(t=>t.oD())}dD(t){let s=d.lD(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.uD(t)))throw new Error("invalid layout");s.pD()||s.mD(i)}get keyboard(){const t=d.gD().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get yD(){const t=d.gD().yD;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get wD(){const t=d.gD().wD;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get SD(){const t=d.gD().SD;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}bD(t,s){f.Te(t),f.Te(s),d.vD(t,s)}MD(t){f.Me(t);const s=d.xD(t);return s?s._D():null}GD(t,e){f.Xe(e);const h=d.TD();for(const s of t){const i=d.ID(s),n=i.CD();p.push([n.PD().LF(),n.RD()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t._D(),s._D()));let i=!1;for(let t=0,s=p.length;t<s;++t){const r=m[t],o=h.ED(p[t][0]),a=p[t][1],l=o.AD();l[a]!==r&&((l[a]=r).CD().FD(o,!0),o.OD(r),i=!0)}i&&d.DD(),c.Br(p),c.Br(m)}}async kD(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.LD("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.LD("runtime","alert",{message:t+(d.ZF()?" [via Web Worker]":"")})}ND(t){return f.Me(t),d.BD(t)}WD(t){d.jD(t)}}}{let s=self.Ns,r=null;self.VD=class{constructor(t){r=t,Object.defineProperties(this,{UD:{value:r.HD("audio/webm; codecs=opus"),writable:!1}})}zD(t){const s=self.qD.JD(t);if(!s)throw new Error("invalid IImageInfo");s.$D(r.XD())}YD(t){return r.xo(t)}KD(t){return r._o(t)}ZD(t){return r.Go(t)}QD(t){return r.To(t)}sk(t){return r.ik(t)}ek(t){return"flat"===r.hk()&&s.bo(t)&&(t=t.toLowerCase()),r.nk(t)}get rk(){return r.ak()}async lk(t,s){if(this.UD)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await r.XD().uk(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),n=h.getChannelData(0);return n.set(e),h}ck(...t){return r.fk(...t)}dk(t){return r.pk(t)}mk(t){return r.gk(t)}}}{let r=self.Ns,i=self.$s,o=null;self.yk=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.XD(),writable:!1}})}wk(t,s){const i=o.XD(),e=i.ID(t),h=i.ID(s);return o.Sk(e,h)}bk(t,s){const i=o.XD(),e=i.ID(t);for(const h of s){const n=i.ID(h);if(o.Sk(e,n))return h}return null}vk(t){const s=o.XD().ID(t),i=o.Mk(s);return i?i._D():null}xk(t,s){if(i.Me(t),i.Me(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o._k(t,s)}Gk(){return o.Tk()}Ik(t,s){let i=o.XD(),e;e=Array.isArray(t)?t.map(t=>i.Ck(t)):[i.Ck(t)];const h=r.Rect.Ml(s),n=[];return o.Pk(null,e,h,n),n.map(t=>t._D())}}}{let s=self.Ns,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),n=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.oO=class{constructor(t){i=t,Object.defineProperties(this,{Rk:{value:s.li.bi,writable:!1},Ek:{value:e.get(s.li.ci)||"unknown",writable:!1},Ak:{value:s.li.fi,writable:!1},Fk:{value:h.get(s.li.di)||"unknown",writable:!1},Ok:{value:s.li.mi,writable:!1},Dk:{value:n.get(s.li.yi)||"unknown",writable:!1}})}get exportType(){let t=i.kk();return i.Lk()?t="nwjs":i.Nk()?t="windows-webview2":"cordova"===t?t="Android"===s.li.ci?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.Wk().Bk()}get jk(){return i.Wk().Vk()}get Uk(){return i.Wk().Hk()}get zk(){return i.Wk().Jk()}get qk(){return i.Wk().$k()}get Xk(){return i.Wk().Yk()}get devicePixelRatio(){return i.Kk()}}}{const fe=self.$s;self.KF=class{constructor(t){this.Zk=t.Qk()}getItem(t){return fe.Te(t),this.Zk.getItem(t)}setItem(t,s){return fe.Te(t),this.Zk.setItem(t,s)}removeItem(t){return fe.Te(t),this.Zk.removeItem(t)}clear(){return this.Zk.clear()}keys(){return this.Zk.keys()}}}{const de=self.Ns,pe=de.Bs();self.tL=class{#sL;constructor(){const t=de.eL.iL(pe);this.#sL=t,Object.defineProperties(this,{runtime:{value:t.XD().hL(),writable:!1},nL:{value:t.rL(),writable:!1},oL:{value:t.aL(),writable:!1},lL:{value:t.uL(),writable:!1},cL:{value:t.fL(),writable:!1},dL:{value:t.pL(),writable:!1},mL:{value:t.gL(),writable:!1},yL:{value:t.wL(),writable:!1},SL:{value:t.bL(),writable:!1}})}static vL(t){if(!t)return null;const s=de.eL.ML(t);return s?s.xL():null}_L(){return this.#sL.TL().GL()}IL(){return this.#sL.CL()._D()}}}{const me=self.Ns,ge=self.$s,ye=me.Bs();self.PL=class{#sL;constructor(){const t=me.eL.iL(ye);this.#sL=t,Object.defineProperties(this,{name:{value:t.Qc(),writable:!1},runtime:{value:t.XD().hL(),writable:!1},RL:{value:t.EL().xL(),writable:!1}}),t.XD().AL(this,t)}addEventListener(t,s){ge.Te(t),ge.Xe(s),this.#sL.uO().addEventListener(t,s)}removeEventListener(t,s){ge.Te(t),ge.Xe(s),this.#sL.uO().removeEventListener(t,s)}FL(){return[...this.instances()]}OL(){return me.first(this.instances())}DL(){return[...this.kL()]}LL(){return me.first(this.kL())}NL(t){const s=this.#sL,i=s.XD().BL(t),e=s.WL(i);return e?e._D():null}*instances(){for(const t of this.#sL.jL())yield t._D()}*kL(){for(const t of this.#sL.UL().VL())yield t._D()}HL(t){ge.Xe(t);const s=this.#sL;if(0<s.zL())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.JL(t)}Li(t,s,i,e,h){if(ge.ge(s),ge.ge(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#sL,r=n.XD(),o=r.rD().PD(t);if(!o)throw new Error("invalid layer");const a=r.qL(n,o,s,i,e,h),l=(e&&o.$L(a),r.pO());return l.XL(!0),a.YL(),l.XL(!1),l.KL()||r.lD().ZL()||r.QL(),a._D()}}}{const we=self.$s,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.t5=class{constructor(t){l.set(this,t);const s=[],i=t.s5(),e=i.i5().length;for(let t=0;t<e;++t)s.push(new self.e5(i,t));Object.defineProperties(this,{name:{value:t.Qc(),writable:!1},index:{value:t.LF(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){we.Te(t),we.Xe(s),l.get(this).uO().addEventListener(t,s)}removeEventListener(t,s){we.Te(t),we.Xe(s),l.get(this).uO().removeEventListener(t,s)}get width(){return l.get(this).fm()}set width(t){we.Me(t),l.get(this).Mm(t)}get height(){return l.get(this).Gm()}set height(t){we.Me(t),l.get(this).pm(t)}h5(t,s){we.Me(t),we.Me(s);const i=l.get(this);i.Mm(t),i.pm(s)}getSize(){const t=l.get(this);return[t.fm(),t.Gm()]}set scale(t){we.Me(t),l.get(this).n5(t)}get scale(){return l.get(this).r5()}set angle(t){we.Me(t),l.get(this).o5(t)}get angle(){return l.get(this).a5()}set scrollX(t){we.ge(t),l.get(this).l5(t)}get scrollX(){return l.get(this).u5()}set scrollY(t){we.ge(t),l.get(this).c5(t)}get scrollY(){return l.get(this).f5()}scrollTo(t,s){we.ge(t),we.ge(s);const i=l.get(this);i.l5(t),i.c5(s)}d5(){const t=l.get(this);return[t.u5(),t.f5()]}p5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.PD(t))?i.m5():null}g5(){return l.get(this).y5().map(t=>t.m5())}*w5(){for(const t of l.get(this).w5())yield t.m5()}S5(t,s,i){const e=l.get(this),h=self.b5,n=(we.Te(t),we.hh(s,h),s?e.XD().v5(s):null),r=Se.indexOf(i);if(r<0)throw new Error("invalid location");e.M5(t,n,r)}x5(t,s,i){const e=l.get(this),h=e.XD(),n=self.b5,r=(we.eh(t,n),h.v5(t));if(!r)throw new Error("invalid layer");we.hh(s,n);const o=s?h.v5(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e._5(r,o,a)}G5(t){const s=l.get(this),i=self.b5,e=(we.eh(t,i),s.XD().v5(t));if(!e)throw new Error("invalid layer");const h=e.XD();s.T5(e),h.pO().KL()||h.QL()}I5(){const t=l.get(this),s=t.XD();t.C5(),s.pO().KL()||s.QL()}P5(t,s){we.Me(t),we.Me(s),l.get(this).R5(t,s)}E5(){return l.get(this).A5()}set X(t){we.Te(t);const s=l.get(this);if("perspective"===t)s.F5();else{if("orthographic"!==t)throw new Error("invalid projection");s.O5()}}get X(){return l.get(this).D5()?"orthographic":"perspective"}}}{const be=self.Ns,ve=self.$s,f=new WeakMap,Me=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),xe=new Map([...Me.entries()].map(t=>[t[1],t[0]])),_e=be.an(be.Ho);self.b5=class{constructor(t){f.set(this,t);const s=[],i=t.s5(),e=i.i5().length;for(let t=0;t<e;++t)s.push(new self.e5(i,t));Object.defineProperties(this,{name:{value:t.Qc(),writable:!1},layout:{value:t.uD().oD(),writable:!1},effects:{value:s,writable:!1}}),t.XD().AL(this,t)}get k5(){const t=f.get(this).L5();return t?t.m5():null}*N5(){for(const t of f.get(this).N5())yield t.m5()}*B5(){for(const t of f.get(this).W5())yield t.m5()}*j5(){for(const t of f.get(this).W5())for(const s of t.V5())yield s.m5()}get index(){return f.get(this).LF()}get isVisible(){return f.get(this).U5()}set isVisible(t){f.get(this).H5(t)}get z5(){return f.get(this).J5()}get isInteractive(){return f.get(this).q5()}set isInteractive(t){f.get(this).X5(t)}get Y5(){return f.get(this).K5()}set Y5(t){f.get(this).Z5(!!t)}get Q5(){return f.get(this).tN()}get opacity(){return f.get(this).WR()}set opacity(t){t=be.mn(+t,0,1),isNaN(t)||f.get(this).VR(t)}set scale(t){ve.Me(t),f.get(this).sN(t)}get scale(){return f.get(this).iN()}set scaleRate(t){ve.Me(t),f.get(this).eN(t)}get scaleRate(){return f.get(this).hN()}set angle(t){ve.Me(t),f.get(this).o5(t)}get angle(){return f.get(this).nN()}set parallaxX(t){ve.Me(t),f.get(this).rN(t)}get parallaxX(){return f.get(this).oN()}set parallaxY(t){ve.Me(t),f.get(this).aN(t)}get parallaxY(){return f.get(this).lN()}set uN(t){ve.Me(t),f.get(this).Ov(t)}get uN(){return f.get(this).Fv()}set cN(t){f.get(this).fN(t)}get cN(){return f.get(this).dN()}set pN(t){f.get(this).mN(t)}get pN(){return f.get(this).gN()}set O3(t){ve.Te(t);const s=Me.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).yv(s)}get O3(){return xe.get(f.get(this).yN())}set backgroundColor(t){if(ve.je(t),t.length<3)throw new Error("expected 3 elements");_e.Yo(t[0],t[1],t[2]);const s=f.get(this),i=s.wN();i.da(_e)||(i.na(_e),s.XD().DD())}get backgroundColor(){const t=f.get(this).wN();return[t.ra(),t.oa(),t.aa()]}set scrollX(t){ve.ge(t);const s=f.get(this);s.SN(!0),s.l5(t)}get scrollX(){return f.get(this).u5()}set scrollY(t){ve.ge(t);const s=f.get(this);s.SN(!0),s.c5(t)}get scrollY(){return f.get(this).f5()}scrollTo(t,s){ve.ge(t),ve.ge(s);const i=f.get(this);i.SN(!0),i.l5(t),i.c5(s)}d5(){const t=f.get(this);return[t.u5(),t.f5()]}bN(){f.get(this).SN(!1)}getViewport(){return f.get(this).vN().Cl()}MN(t,s,i=0){ve.ge(t),ve.ge(s),ve.ge(i);const e=f.get(this),h=e.XD();return e.xN(t-h._N(),s-h.GN(),i)}TN(t,s,i=0){ve.ge(t),ve.ge(s),ve.ge(i);const e=f.get(this),h=e.XD(),[n,r]=e.IN(t,s,i);return[n+h._N(),r+h.GN()]}CN(t,s,i=0){return ve.ge(t),ve.ge(s),ve.ge(i),f.get(this).PN(t,s,i)}RN(t,s,i=0){return ve.ge(t),ve.ge(s),ve.ge(i),f.get(this).EN(t,s,i)}get AN(){return f.get(this).FN()}}}{let e=function(t){let s=Ie.get(t);return s||(s=Ge.an(Ge.Event.Uf),Ie.set(t,s)),s};e;const Ge=self.Ns,Te=self.$s,Ie=new WeakMap,Ce=Ge.Bs();self.ON=class{#sL;constructor(){const t=Ge.eL.iL(Ce),s={runtime:{value:(this.#sL=t).XD().hL(),writable:!1},DN:{value:t.kN().GL(),writable:!1},RL:{value:t.EL().xL(),writable:!1}};t.LN(s),t.NN(s),Object.defineProperties(this,s),t.XD().AL(this,t)}static BN(){return Ge.eL.WN()}jN(){const t=Ie.get(this);t&&(t.ln(),Ie.delete(this))}addEventListener(t,s,i){Te.Te(t),Te.Xe(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.Te(t),Te.Xe(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}VN(){const t=this.#sL,s=t.XD();s.UN(t),s.pO().KL()||s.lD().ZL()||s.pO().HN()||s.QL()}zN(){const t=this.#sL.JN();return t?t.map(t=>t._D()):[]}*qN(){const t=this.#sL;if(t.$N())for(const s of t.XN())yield s._D()}get uid(){return this.#sL.YN()}get KN(){return this.#sL.ZN()}set timeScale(t){Te.Me(t),this.#sL.VO(t)}get timeScale(){return this.#sL.QN()}t4(){this.#sL.s4()}get dt(){const t=this.#sL;return t.XD().DO(t)}i4(...t){Te.je(t);const s=new Set(t),i=this.#sL.e4();return s.isSubsetOf(i)}h4(t){Te.eh(t,Set),this.#sL.n4(t)}r4(){return new Set(this.#sL.e4())}signal(t){Te.Te(t);const s=this.#sL;s.XD().pO().o4(s,t)}EO(t){Te.Te(t);const s=this.#sL;return s.XD().pO().a4(s,t)}}}{const Pe=self.Ns,Re=self.$s,Ee=Pe.Bs();self.l4=class extends self.ON{#sL;#u4=!1;#c4=null;#f4=!1;#d4=null;#m4;#g4;constructor(t){super(),this.#sL=Pe.eL.iL(Ee),this.#u4=!1,this.#c4=null,this.#f4=!1,this.#d4=null,this.#m4=t?.domComponentId,this.#g4=t?.wrapperComponentId}jN(){this.y4(!1),this.w4(!1),super.jN()}S4(){return Pe.eL.b4()}v4(t){const s=this.#sL;s.XD().M4(t,s)}x4(t){const s=this.#sL;return s.XD()._4(t,s)}G4(t,s){if(Re.Te(t),Re.Xe(s),!this.#m4)throw new Error("no DOM component id set");const i=this.#sL.XD();i.T4(this.#m4,t,s)}I4(t){Re.je(t);for(const[s,i]of t)this.G4(s,i)}C4(t,s){if(Re.Te(t),!this.#m4)throw new Error("no DOM component id set");const i=this.#sL.XD();i.df(this.#m4,t,s)}P4(t,s){if(Re.Te(t),!this.#m4)throw new Error("no DOM component id set");const i=this.#sL.XD();return i.LD(this.#m4,t,s)}R4(t,s){const i=this.#sL.XD();if(!i.ZF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#m4,handler:t,data:s,responseId:null});this.C4(t,s)}y4(t){if(this.#u4!==(t=!!t)){this.#u4=t;const s=this.#sL.XD();t?(this.#c4||(this.#c4=()=>this.E4()),s.Uf().addEventListener("tick",this.#c4)):s.Uf().removeEventListener("tick",this.#c4)}}A4(){return this.#u4}E4(){}w4(t){if(this.#f4!==(t=!!t)){this.#f4=t;const s=this.#sL.XD();t?(this.#d4||(this.#d4=()=>this.F4()),s.Uf().addEventListener("tick2",this.#d4)):s.Uf().removeEventListener("tick2",this.#d4)}}O4(){return this.#f4}F4(){}D4(){return[]}L4(){return null}N4(t){}B4(){if(!this.#g4)throw new Error("no wrapper component id set");const t=this.#sL.XD();return t.W4(this.#g4)}j4(t,s){if(Re.Te(t),Re.Xe(s),!this.#g4)throw new Error("no wrapper component id set");const i=this.#sL.XD();i.V4(this.#g4,t,s)}U4(t){Re.je(t);for(const[s,i]of t)this.j4(s,i)}H4(t,s){if(!this.#g4)throw new Error("no wrapper component id set");this.runtime.aO.z4(this.#g4,t,s)}J4(t,s){if(this.#g4)return this.runtime.aO.q4(this.#g4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#X4;#Y4;constructor(t){super(t);const s=Ae.eL.iL(ke),i=s.CD(),e=(this.#X4=s,this.#Y4=i,De.set(this,s),[]),h=i.K4();if(h){const r=i.kN().s5().i5().length;for(let t=0;t<r;++t)e.push(new self.e5(h,t))}const n={effects:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#Y4.uD().oD()}get Z4(){return this.#Y4.PD().m5()}get x(){return this.#Y4.Cv()}set x(t){t=+t;const s=this.#Y4;isNaN(t)||s.Cv()===t||(s.Pv(t),s.Q4())}get y(){return this.#Y4.Ev()}set y(t){t=+t;const s=this.#Y4;isNaN(t)||s.Ev()===t||(s.Av(t),s.Q4())}setPosition(t,s){t=+t,s=+s;const i=this.#Y4;isNaN(t)||isNaN(s)||i.Cv()===t&&i.Ev()===s||(i.tB(t,s),i.Q4())}sB(){const t=this.#Y4;return[t.Cv(),t.Ev()]}iB(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#Y4;i.eB(t,s),i.Q4()}}get uN(){return this.#Y4.Fv()}set uN(t){t=+t;const s=this.#X4,i=this.#Y4;isNaN(t)||i.Fv()===t||(i.Ov(t),s.XD().DD())}get hB(){return this.#Y4.nB()}get width(){return this.#Y4.fm()}set width(t){t=+t;const s=this.#Y4;isNaN(t)||s.fm()===t||(s.Mm(t),s.Q4())}get height(){return this.#Y4.Gm()}set height(t){t=+t;const s=this.#Y4;isNaN(t)||s.Gm()===t||(s.pm(t),s.Q4())}h5(t,s){t=+t,s=+s;const i=this.#Y4;isNaN(t)||isNaN(s)||i.fm()===t&&i.Gm()===s||(i.cC(t,s),i.Q4())}getSize(){const t=this.#Y4;return[t.fm(),t.Gm()]}get angle(){return this.#Y4.a5()}set angle(t){t=Ae.gn(+t);const s=this.#Y4;isNaN(t)||s.a5()===t||(s.o5(t),s.Q4())}get rB(){return Ae.wn(this.angle)}set rB(t){this.angle=Ae.yn(t)}_u(){return this.#Y4.oB().Cl()}aB(){return this.#Y4.lB().wu()}uB(){return this.#Y4.cB()}get isVisible(){return this.#Y4.J5()}set isVisible(t){t=!!t;const s=this.#X4,i=this.#Y4;i.J5()!==t&&(i.H5(t),s.XD().DD())}get opacity(){return this.#Y4.WR()}set opacity(t){t=Ae.mn(+t,0,1);const s=this.#X4,i=this.#Y4;isNaN(t)||i.WR()===t||(i.VR(t),s.XD().DD())}set fB(t){if(Fe.je(t),t.length<3)throw new Error("expected 3 elements");Be.Yo(t[0],t[1],t[2]);const s=this.#X4,i=this.#Y4;i.dB().da(Be)||(i.pB(Be),s.XD().DD())}get fB(){const t=this.#Y4.dB();return[t.ra(),t.oa(),t.aa()]}set O3(t){Fe.Te(t);const s=Le.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#X4,e=this.#Y4;e.yv(s),i.XD().DD()}get O3(){return Ne.get(this.#Y4.yN())}mB(){this.#Y4.gB()}yB(){this.#Y4.wB()}SB(t){Fe.eh(t,Oe);const s=this.#X4,i=s.XD().v5(t);if(!i)throw new Error("invalid layer");s.CD().bB(i)}vB(t,s){Fe.eh(t,h),this.#Y4.MB(De.get(t),s)}get zIndex(){return this.#Y4.RD()}get xB(){return this.#Y4._B()}set xB(t){this.#Y4.GB(!!t)}Yl(t,s){return Fe.ge(t),Fe.ge(s),this.#Y4.TB(+t,+s)}wk(t){Fe.eh(t,h);const s=this.#X4,i=De.get(t);return s.XD().HF().Sk(s,i)}vk(){const t=this.#X4,s=t.XD().HF().Mk(t);return s?s._D():null}getParent(){const t=this.#X4.IB();return t?t._D():null}CB(){const t=this.#X4.PB();return t?t._D():null}*RB(){for(const t of this.#X4.RB())yield t._D()}EB(){return this.#X4.AB()}OB(t){const s=this.#X4.DB(t);return s?s._D():null}*children(){for(const t of this.#X4.children())yield t._D()}*kB(){for(const t of this.#X4.kB())yield t._D()}LB(t,s){Fe.eh(t,h),Fe.Oe(s),s=s||{};const i=this.#X4,e=De.get(t);i.NB(e,s)}removeChild(t){Fe.eh(t,h);const s=this.#X4,i=De.get(t);s.BB(i)}WB(){const t=this.#X4;if(t.jB()){const s=t.IB();s.BB(t)}}VB(){const t=this.#Y4;return{UB:t.HB(),zB:t.JB(),qB:t.$B(),XB:t.YB(),KB:t.ZB(),QB:t.t6(),s6:t.i6(),e6:t.h6(),n6:t.r6()}}o6(t,s){Fe.Me(t),Fe.Me(s),this.#Y4.a6(t,s)}l6(){const t=this.#Y4;t.u6(),t.Q4()}c6(t,s,i){Fe.Me(t),Fe.Me(s),Fe.Fe(i);const e=this.#Y4;e.f6(t,s,i)&&e.Q4()}d6(t,s){let i=NaN,e=NaN,h=NaN,n=NaN,r=NaN,o=this.#Y4;if(o.p6()){const a=o.m6(),l=a.pM(t,s);null!==l&&(i=l.Cv(),e=l.Ev(),h=l.Fv(),n=l.Dv(),r=l.Lv())}return{x:i,y:e,uN:h,u:n,v:r}}g6(){const t=this.#Y4;if(!t.p6())return[0,0];const s=t.m6();return[s.eM(),s.hM()]}}};0;const Ae=self.Ns,Fe=self.$s,Oe=self.b5,De=new WeakMap,ke=Ae.Bs(),Le=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Ne=new Map([...Le.entries()].map(t=>[t[1],t[0]])),Be=Ae.an(Ae.Ho);self.y6=t(self.ON),self.w6=t(self.l4)}{const We=self.$s;self.S6=class extends self.y6{#sL;constructor(){super(),this.#sL=self.ON.BN()}b6(){return this.#sL.M6().v6()}focus(){this.#sL.M6().x6()}blur(){this.#sL.M6()._6()}G6(t,s){We.Te(t),this.#sL.M6().T6(t,s)}}}{let e=function(t){let s=Ue.get(t);return s||(s=je.an(je.Event.Uf),Ue.set(t,s)),s};e;const je=self.Ns,Ve=self.$s,Ue=new WeakMap,He=je.Bs();self.I6=class{#sL;constructor(){const t=je.eL.iL(He),s={runtime:{value:(this.#sL=t).XD().hL(),writable:!1},behavior:{value:t.P6().C6(),writable:!1},R6:{value:t.A6().E6(),writable:!1}};Object.defineProperties(this,s),t.XD().AL(this,t)}static BN(){return je.eL.WN()}get F6(){return this.#sL.O6()._D()}jN(){const t=Ue.get(this);t&&(t.ln(),Ue.delete(this))}addEventListener(t,s,i){Ve.Te(t),Ve.Xe(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ve.Te(t),Ve.Xe(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const ze=self.Ns,Je=ze.Bs();self.D6=class{constructor(){const t=ze.eL.iL(Je),s={runtime:{value:t.XD().hL(),writable:!1},behavior:{value:t.P6().C6(),writable:!1},name:{value:t.Qc(),writable:!1}};Object.defineProperties(this,s)}}}{const qe=self.Ns,$e=qe.Bs();self.k6=class{#sL;constructor(){const t=qe.eL.iL($e),s={runtime:{value:(this.#sL=t).XD().hL(),writable:!1}};Object.defineProperties(this,s)}FL(){return this.#sL.VL().map(t=>t._D())}static vL(t){if(!t)return null;const s=qe.eL.L6(t);return s?s.C6():null}}}{const Xe=self.Ns,Ye=self.$s,Ke=Xe.an(Xe.Ho);self.e5=class{#sL;constructor(t,s){this.#sL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#sL.i5();return t[this.index].Qc()}get isActive(){return this.#sL.N6(this.index)}set isActive(t){t=!!t;const s=this.#sL;s.N6(this.index)!==t&&(s.B6(this.index,t),s.W6(),s.XD().DD())}setParameter(t,s){Ye.Me(t),t=Math.floor(+t);const i=this.#sL,e=i.j6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Xe.Ho){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ke.Yo(s[0],s[1],s[2]),s=Ke}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.V6(this.index,t,s);h&&i.N6(this.index)&&i.XD().DD()}getParameter(t){Ye.Me(t),t=Math.floor(+t);const s=this.#sL,i=s.j6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Xe.Ho?[i.ra(),i.oa(),i.aa()]:i}}}self.U6=class{#sL;constructor(t){this.#sL=t,Object.defineProperties(this,{name:{value:t.Qc(),writable:!1}})}get speed(){return this.#sL.H6()}get isLooping(){return this.#sL.z6()}get repeatCount(){return this.#sL.J6()}get q6(){return this.#sL.X6()}get Y6(){return this.#sL.K6()}get frameCount(){return this.#sL.Z6()}Q6(){return this.#sL.tW().map(t=>t.sW())}*frames(){for(const t of this.#sL.tW())yield t.sW()}};self.qD=class{#sL;constructor(t){this.#sL=t}static JD(t){return t.#sL}get width(){return this.#sL.fm()}get height(){return this.#sL.Gm()}getSize(){const t=this.#sL;return[t.fm(),t.Gm()]}iW(t){return t.eW(this)}hW(){return this.#sL.VC().Cl()}};{const Ze=self.$s;self.nW=class extends self.qD{#sL;constructor(t){super(t.rW()),this.#sL=t,Object.defineProperties(this,{duration:{value:t.oW(),writable:!1},aW:{value:t.lW(),writable:!1},uW:{value:t.cW(),writable:!1}})}fW(){const t=this.#sL;return[t.lW(),t.cW()]}dW(){return this.#sL.pW()}mW(t){return this.gW(t)[0]}yW(t){return this.gW(t)[1]}gW(t){let s=this.#sL,i=null;if("number"==typeof t)i=s.wW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.SW(t)}return i?[i.Cv(),i.Ev()]:this.fW()}bW(){const t=this.#sL.vW();return t?t.Wu():0}MW(t){return this.xW(t)[0]}_W(t){return this.xW(t)[1]}xW(t){Ze.Me(t),t=Math.floor(t);const s=this.#sL.vW();if(!s||t<0||t>=s.Wu())return[0,0];const i=s.Bu(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#sL.GW()}}}{let s=function(t){const s=th.get(t);if(s.TW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Qe=self.$s,th=new WeakMap;self.IW=class{constructor(t){th.set(this,t),t.XD().AL(this,t)}pause(){s(this).PW()}resume(){s(this).RW()}stop(){s(this).u0()}i4(t){return s(this).EW(t)}set time(t){Qe.Me(t),s(this).AW(t)}get time(){return s(this).gA()}set totalTime(t){Qe.Me(t),s(this).FW(t)}get totalTime(){return s(this).OW()}set isLooping(t){s(this).DW(!!t)}get isLooping(){return s(this).kW()}set Y6(t){s(this).LW(!!t)}get Y6(){return s(this).NW()}set playbackRate(t){Qe.Me(t),s(this).BW(t)}get playbackRate(){return s(this).WW()}get progress(){const t=s(this);return t.gA()/t.OW()}get tags(){return s(this).jW()}get finished(){return s(this).VW()}get isPlaying(){return s(this).IsPlaying()}get UW(){return s(this).HW()}get zW(){return th.get(this).TW()}}}{let i=new WeakMap;self.JW=class extends self.IW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Qc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.TW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.$s),h=new WeakMap,n=new WeakMap,r=null;self.qW=class extends self.IW{constructor(t,s,i){super(t),r=r||i.$W,h.set(this,t),s&&n.set(this,s)}stop(){const t=i(this),s=n.get(this);s.XW(t)}YW(t){e.Te(t);const s=self.yc.Dc(r(t));i(this).KW(s)}get F6(){const t=i(this).ZW();return t?t._D():null}get QW(){return i(this).tj()}set QW(t){i(this).sj(!!t)}get value(){const t=i(this);if("value"!==t.ij())throw new Error("not a value tween");return t.hj("value").ej()}}}self.nj=class extends self.tL{constructor(){super()}};{const sh=self.Ns,ih=self.$s,eh=sh.Bs();self.rj=class extends self.nj{#sL;#m4;#oj=0;#aj=new Map;constructor(t){if(super(),this.#sL=sh.eL.iL(eh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#m4=t.domComponentId,this.lj("elem-focused",t=>t.uj()),this.lj("elem-blurred",t=>{t&&t.cj()})}fj(t){const s=this.#oj++;return this.#aj.set(s,t),s}dj(t){this.#aj.delete(t)}lj(t,i){const s=this.#sL.XD();s.T4(this.#m4,t,t=>{const s=this.#aj.get(t.elementId);i(s,t)})}pj(t){ih.je(t);for(const[s,i]of t)this.pj(s,i)}}}{const hh=self.Ns,nh=(new WeakMap,hh.Bs());self.mj=class extends self.PL{#sL;constructor(){super(),this.#sL=hh.eL.iL(nh)}gj(){}yj(){return this.#sL.rW().wj()}Sj(t){}bj(t){}vj(){}Mj(t){}}}{const rh=self.Ns,oh=(new WeakMap,rh.Bs());self.xj=class extends self.w6{#sL;#_j=null;#Gj=null;constructor(t){super(t),this.#sL=rh.eL.iL(oh)}jN(){if(super.jN(),this.#_j){const t=this.#sL.XD().Uf();t.removeEventListener("renderercontextlost",this.#_j),t.removeEventListener("renderercontextrestored",this.#Gj),this.#_j=null,this.#Gj=null}}Tj(){if(!this.#_j){this.#_j=()=>this.Ij(),this.#Gj=()=>this.Cj();const t=this.#sL.XD().Uf();t.addEventListener("renderercontextlost",this.#_j),t.addEventListener("renderercontextrestored",this.#Gj)}}Ij(){}Cj(){}Pj(t){}}}{const ah=self.Ns,lh=ah.an(ah.Rect),uh=new WeakMap,ch=ah.Bs();self.Rj=class extends self.xj{#Ej=-1;#Aj=!0;#Fj=!1;#Oj=!1;#Dj=-.2;#kj=ah.an(ah.Rect,0,0,-1,-1);#Lj=0;#Nj=0;#Bj=-1;#Wj=-1;#jj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=ah.eL.iL(ch),i=(uh.set(this,s),this.#Ej=this.RL.fj(this),s.XD().Wk());this.#Lj=i.Vj(),this.#Nj=i.Uj(),this.y4(!0)}jN(){super.jN(),this.RL.dj(this.#Ej),this.Hj("destroy"),this.#Ej=-1,uh.delete(this)}zj(){const t=uh.get(this).XD();if(t.ZF())throw new Error("not valid in worker mode");return this.Jj("get-element")}Hj(t,s){(s=s||{}).elementId=this.#Ej,this.C4(t,s)}Jj(t,s){return(s=s||{}).elementId=this.#Ej,this.R4(t,s)}qj(t,s){return(s=s||{}).elementId=this.#Ej,this.P4(t,s)}$j(t){t=t||{};const s=uh.get(this).CD();t.elementId=this.#Ej,t.isVisible=s.J5(),t.htmlIndex=s.PD().Xj(),t.htmlZIndex=s.Yj(),Object.assign(t,this.Kj()),this.#Aj=!!t.isVisible,this.R4("create",t),this.Zj(!0)}Qj(t){this.#Aj!==(t=!!t)&&(this.#Aj=t,this.Hj("set-visible",{isVisible:t}))}E4(){this.Zj(!1)}t8(){const t=uh.get(this).XD(),s=t.Wk().s8();return"Android"===ah.li.ci&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}Zj(u){const c=uh.get(this);if(!c.i8()){let t=c.CD(),s=t.PD(),i=t.oB(),[e,h]=s.IN(i._l(),i.Gl()),[n,r]=s.IN(i.Tl(),i.Il()),o=c.XD().Wk(),a=o.Hk(),l=o.Jk();if(t.J5()&&s.J5())if(!this.t8()&&(n<=0||r<=0||a<=e||l<=h))this.Qj(!1);else{lh.set(e,h,n,r);const f=o.Vj(),d=o.Uj(),p=s.Xj(),m=t.Yj();if(!u&&lh.equals(this.#kj)&&this.#Lj===f&&this.#Nj===d&&this.#Bj===p&&this.#Wj===m)this.Qj(!0);else{this.#kj.T(lh),this.#Lj=f,this.#Nj=d,this.#Bj=p,this.#Wj=m,this.Qj(!0);let t=null;this.#Oj&&(t=s.e8()+this.#Dj),this.Hj("update-position",{left:Math.round(this.#kj._l()),top:Math.round(this.#kj.Gl()),width:Math.round(this.#kj.width()),height:Math.round(this.#kj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Qj(!1)}}h8(){this.Jj("focus",{focus:!0})}n8(){this.Jj("focus",{focus:!1})}uj(){this.#Fj=!0}cj(){this.#Fj=!1}r8(){return this.#Fj}o8(t,s){this.postToDOMElement("set-css-style",{prop:ah.jo(t),val:s})}a8(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}l8(t){this.postToDOMElement("remove-attribute",{name:t})}u8(){this.#jj||(this.#jj=!0,Promise.resolve().then(()=>{this.#jj=!1,this.Hj("update-state",this.Kj())}))}Kj(){}c8(){return this.#Ej}}}self.f8=class extends self.k6{constructor(){super()}};self.d8=class extends globalThis.D6{constructor(){super()}gj(){}};{const fh=self.Ns,dh=new WeakMap,ph=fh.Bs();self.p8=class extends self.I6{#u4=!1;#f4=!1;#m8=!1;constructor(){super(),dh.set(this,fh.eL.iL(ph))}jN(){super.jN(),this.y4(!1),this.w4(!1),this.g8(!1),dh.delete(this)}S4(){return fh.eL.b4()}y8(){}v4(t){const s=dh.get(this);s.XD().M4(t,s.O6(),s.A6())}x4(t){const s=dh.get(this);return s.XD()._4(t,s.O6(),s.A6())}y4(t){if(this.#u4!==(t=!!t)){this.#u4=t;const s=dh.get(this).XD();t?s.w8(this):s.S8(this)}}A4(){return this.#u4}E4(){}w4(t){if(this.#f4!==(t=!!t)){this.#f4=t;const s=dh.get(this).XD();t?s.b8(this):s.v8(this)}}O4(){return this.#f4}F4(){}g8(t){if(this.#m8!==(t=!!t)){this.#m8=t;const s=dh.get(this).XD();t?s.M8(this):s.x8(this)}}_8(){return this.#m8}G8(){}D4(){return[]}L4(){return null}N4(t){}}}{let e=self.$s,h=null;self.lO=class{constructor(t){h=t}WD(t){h.jD(t)}z4(t,s,i){e.Te(t),e.Te(s),e.Ve(i),h.T8(t,s,i)}q4(t,s,i){return e.Te(t),e.Te(s),e.Ve(i),h.I8(t,s,i)}C8(t){return e.Ie(t),new self.P8(h,t)}set E8(t){h.A8(!!t)}get E8(){return h.F8()}O8(t){h.D8(!!t)}k8(t){e.ge(t);const s=h.L8(t);return s?s.GL():null}}}self.P8=class{#N8;#B8;#W8;#j8;#V8;#U8;constructor(t,s){const i=(this.#N8=t).pO(),e=t.bO(),h=(this.#B8=e,this.#W8=e.H8(),t.IO()),n=(this.#j8=h.z8(),this.#V8=h.J8(e),i.q8()),r=n.J8();this.#U8=r,s&&r.X8(s),t.Y8(!1)}K8(){const t=this.#N8.pO(),s=this.#W8,i=this.#U8;t.Z8(s),this.#B8.Q8(this.#j8,this.#V8),t.tV(s),i.sV(i.LF()+1)}get iV(){return this.#U8.eV()}release(){const t=this.#N8,s=t.IO(),i=t.pO().q8();t.Y8(!0),i.hV(),s.hV()}};{let d=self.Ns,h=self.$s,p=null,n=null;self.nV=class{constructor(t,s){n=t,p=s}rV(){p.YR()}oV(t){p.qR(t)}aV(){p.Xw()}lV(){p.Uw()}uV(){p.iS()}setColor(t){p.jR(t[0],t[1],t[2],t[3])}cV(t,s,i,e){p.jR(t,s,i,e)}fV(){p.UR()}dV(t){p.VR(t)}pV(t){p.xS(t)}mV(){p._S()}rect(t){p.QR(t.left,t.top,t.right,t.bottom)}gV(t,s,i,e){p.QR(t,s,i,e)}yV(t){p.tu(d.tu.Su(t))}wV(t,s,i,e,h,n,r,o){p.ob(t,s,i,e,h,n,r,o)}SV(t,s){p.OS(d.tu.Su(t),d.Rect.Pl(s))}bV(t,s){p.iE(d.tu.Su(t),d.tu.Su(s))}vV(t,s,i,e,h,n,r,o,a,l,u,c,f){p.eE(t,s,i,e,h,n,r,o,a,l,u,c,d.Rect.Pl(f))}MV(t,s,i,e,h,n,r,o,a,l,u,c,f){p.PS(t,s,i,e,h,n,r,o,a,l,u,c,d.tu.Su(f))}xV(t,s,i){p.hE(t,s,i)}_V(t){p.rb(t)}line(t,s,i,e){p.Rm(t,s,i,e)}GV(t,s,i,e,h,n){p.RS(t,s,i,e,h,n)}TV(t,s,i,e){p.DS(t,s,i,e)}IV(t){p.BS(d.Rect.Pl(t))}CV(t){p.WS(d.tu.Su(t))}PV(t){p.JS(t)}RV(){p.qS()}EV(t){p.KS(t)}AV(){p.sb()}FV(t){h.hh(t,self.OV);const s=t?n.v5(t):null;p.zR(s)}DV(t,s){const i=self.qD.JD(t);if(i)return i.kV(p,{GM:s?.GM??"clamp-to-edge",TM:s?.TM??"clamp-to-edge",IM:s?.IM??"trilinear",RM:s?.RM??!0});throw new Error("invalid IImageInfo")}LV(t){const s=self.qD.JD(t);if(!s)throw new Error("invalid IImageInfo");s.FI()}eW(t){const s=self.qD.JD(t);if(!s)throw new Error("invalid IImageInfo");const i=s.z2();return self.OV.NV(n,i)}BV(t,s,i){h.Me(t),h.Me(s);const e=p.O2(t,s,{GM:i?.GM??"clamp-to-edge",TM:i?.TM??"clamp-to-edge",IM:i?.IM??"trilinear",RM:i?.RM??!0});return self.OV.NV(n,e)}WV(t,s,i){h.eh(s,self.OV);const e=n.v5(s);p.jC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.eh(t,self.OV);const s=n.v5(t);p.B2(s)}jV(){const t=p.xb();return new self.VV(n,t)}UV(){n.Wk().HV(p)}zV(t){h.eh(t,globalThis.b5);const s=n.v5(t);s.JV(p)}}}{const mh=new WeakMap,gh=new WeakMap;self.OV=class{constructor(t,s){mh.set(this,{runtime:t,qV:s}),gh.set(s,this),t.AL(this,s),Object.defineProperties(this,{width:{value:s.fm(),writable:!1},height:{value:s.Gm(),writable:!1}})}static NV(t,s){if(!s)return null;const i=gh.get(s);return i||new self.OV(t,s)}}}{let e=function(t){return wh.get(t).$V};e;const yh=self.$s,wh=new WeakMap;self.VV=class{constructor(t,s){wh.set(this,{runtime:t,$V:s}),t.AL(this,s)}release(){e(this).ln()}set XV(t){yh.Te(t),e(this).jI(t)}get XV(){return e(this).UT()}set YV(t){yh.Me(t),e(this).VI(t)}get YV(){return e(this).UI()}set lineHeight(t){yh.Me(t),e(this).zI(t)}get lineHeight(){return e(this).JI()}set KV(t){e(this).qI(t)}get KV(){return e(this).$I()}set ZV(t){e(this).XI(t)}get ZV(){return e(this).YI()}setColor(t){yh.je(t),this.QV(t[0],t[1],t[2])}QV(t,s,i){e(this).sC(t,s,i)}tU(t){yh.Te(t),e(this).wv(t)}set sU(t){e(this).iC(t)}get sU(){return e(this).eC()}set verticalAlign(t){e(this).hC(t)}get verticalAlign(){return e(this).nC()}set iU(t){e(this).rC(t)}get iU(){return e(this).oC()}set eU(t){e(this).aC(t)}get eU(){return e(this).lC()}set text(t){yh.Te(t),e(this).pf(t)}get text(){return e(this).uC()}h5(t,s,i){yh.Me(t),yh.Me(s),yh.Me(i),e(this).cC(t,s,i)}iW(){const{runtime:t,$V:s}=wh.get(this),i=s.z2();return self.OV.NV(t,i)}hW(){return e(this).VC().Cl()}hU(t){yh.Xe(t),e(this).DI=t}nU(){e(this).FI()}get rU(){return e(this).dC()}get oU(){return e(this).mC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return bh.get(i)||""},n=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,n;const d=self.Ns,Sh=new Set(["local","remote"]),bh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.aU=class extends d.nn{constructor(t,s){super();const i=s.exportType,e=(this.uf=t,this.lU="folders",this.uU=new Map,this.cU="cordova"===i,this.fU=!!s.isiOSCordova,this.dU=!!s.isFileProtocol,this.pU=s.swClientId,this.mU=s.supportedAudioFormats||{},this.gU=new Map,this.yU=!1,this.wU=s.scriptFolder,this.SU="",this.bU="",this.vU="",this.MU=s.fileMap||new Map,this.xU=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this._U=e?"remote":"local",this.GU=new Map,this.TU=[],this.IU=[],this.CU=!1,this.PU=0,this.RU=0,this.EU=0,this.AU=!1,this.FU=d.an(d._d,()=>this.OU(),50),this.DU=d.an(d.md,Math.max(d.hardwareConcurrency,8)),this.kU=d.an(d.md,20),this.LU=new self.VD(this)}ln(){for(const t of this.GU.values())t.ln();this.GU.clear(),d.Br(this.IU),this.uf=null}XD(){return this.uf}NU(t){this.lU=t}hk(){return this.lU}BU(){return this.wU}WU(t){this.SU=t}ak(){return this.SU}jU(t){this.bU=t}VU(){return this.bU}UU(t){this.vU=t}HU(){return this.vU}zU(){return this.dU}Go(t,s){return s=s||this._U,d.bo(t)?("flat"===this.lU&&(t=t.toLowerCase()),this.cU&&this.dU?this.JU(t):"playable-ad-single-file"===this.uf.kk()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.DU:this.kU).fc(()=>d.Go(t))):d.Go(t)}To(t){return d.bo(t)?("flat"===this.lU&&(t=t.toLowerCase()),this.cU&&this.dU?this.qU(t):"playable-ad-single-file"===this.uf.kk()?d.Co(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this._U?this.DU:this.kU).fc(()=>d.To(t))):d.To(t)}xo(t){return d.bo(t)?("flat"===this.lU&&(t=t.toLowerCase()),this.cU&&this.dU?this.$U(t):"playable-ad-single-file"===this.uf.kk()?d.Po(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this._U?this.DU:this.kU).fc(()=>d.xo(t))):d.xo(t)}async _o(t){const s=await this.xo(t);return JSON.parse(s)}XU(t,s){return"flat"===this.lU&&(t=t.toLowerCase()),this.uf.LD("runtime","cordova-fetch-local-file",{filename:t,as:s})}$U(t){return this.XU(t,"text")}async JU(t){const s=await this.XU(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async YU(t){"flat"===this.lU&&(t=t.toLowerCase());let s=this.uU.get(t);if(!s){const i=await this.JU(t);s=URL.createObjectURL(i),this.uU.set(t,s)}return s}qU(t){return this.XU(t,"buffer")}nk(t){"flat"===this.lU&&(t=t.toLowerCase());let s=this.SU+t;return"Gecko"===d.li.yi&&"preview"===this.uf.kk()?this.KU(s):s}ik(t){return d.So(t)?Promise.resolve(t):this.cU&&this.dU?this.YU(t):"playable-ad-single-file"===this.uf.kk()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.lU&&(t=t.toLowerCase()),Promise.resolve(t))}ZU(s){if(d.So(s)||"preview"!==this.uf.kk()||!this.pU||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.pU),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}QU(t){return this.ik(t)}tH(t){if(t.sH&&!Sh.has(t.sH))throw new Error("invalid load policy");let s=this.GU.get(t.url);return s||(s=d.an(d.iH,this,{url:t.url,size:t.size||0,sH:t.sH||this._U}),this.GU.set(s.eH(),s),this.CU)||(this.PU+=s.rc(),this.IU.push(s.hH().then(()=>this.nH(s.rc())))),s}rH(t){this.GU.delete(t.eH())}async oH(){try{await Promise.all(this.IU),this.EU=1}catch(t){console.error("Error loading: ",t),this.AU=!0,this.OU()}}aH(){this.CU=!0}lH(){return this.AU}nH(t){this.RU+=t,this.FU.kd()}OU(){const t=d.an(d.Event,"loadingprogress");this.EU=d.mn(this.RU/this.PU,0,1),t.progress=this.EU,this.uf.Uf().dispatchEvent(t)}uH(){return this.EU}cH(t){d.Ur(this.TU,t),this.TU.length&&this.IU.push(this.fH())}async fH(){const t=[],s=[];for(const[i,e,h]of this.TU)this.PU+=h,t.push(this.dH(i,e,s).then(()=>this.nH(h)));await Promise.all(t),this.uf.ZF()&&0<s.length&&await this.uf.LD("runtime","load-webfonts",{webfonts:s})}async dH(s,i,e){try{let t=await this.ik(i);"Gecko"===d.li.yi&&(s=`'${s}'`),("Gecko"===d.li.yi&&"preview"===this.uf.kk()||"playable-ad-single-file"===this.uf.kk())&&(t=this.KU(t));const h=new FontFace(s,`url('${t}')`);(this.uf.ZF()?self:document).fonts.add(h),await h.load(),this.uf.ZF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}HD(t){return!!this.mU[t]}pH(t,s){this.yU=!!s;for(const[i,e,h]of t)this.gU.set(i,{fileName:i,mH:e.map(t=>({type:t[0],gH:t[1],yH:i+t[1],fileSize:t[2]})),isMusic:h})}wH(t){"flat"===this.lU&&(t=t.toLowerCase());const s=this.gU.get(t);if(!s)return null;let i=null;for(const e of s.mH)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.HD(e.type))return e;return i}SH(t){const s=this.wH(t);return s?{url:this.nk(s.yH),type:s.type}:null}bH(){if(this.yU){const t=[];for(const s of this.gU.values())if(!s.isMusic){const i=this.wH(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.nk(i.yH),type:i.type,fileSize:i.fileSize})}return t}return[]}vH(t){return"preview"===this.uf.kk()&&(t=new URL(t,location.href).toString()),this.MU.get(t)||null}KU(t){let s=this.xU.get(t);if(!s){const i=this.vH(t);if(!i)return t;s=URL.createObjectURL(i),this.xU.set(t,s)}return s}WF(){return this.LU}async fk(...t){const s=await Promise.all(t.map(t=>this.ik(t)));if(this.uf.ZF())if(1===t.length){const i=t[0];await import((d.bo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.bo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>n(t)))}async pk(t){if(WebAssembly.compileStreaming){const s=await this.ik(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.To(t);return WebAssembly.compile(i)}}async gk(t){const s=await this.ik(t);return this.uf.LD("runtime","add-stylesheet",{url:s})}}}{const ln=self.Ns;ln.MH=class extends ln.nn{constructor(t,s){super(),this.xH=t,this.uf=t.XD(),this._H=s.url||"",this.GH=s.size,this.TH=s.sH,this.IH=s.blob||null,this.CH=!!this.IH,this.jg=null}ln(){this.jg=null,this.xH=null,this.uf=null,this.IH=null}eH(){return this._H}rc(){return this.GH}hH(){return"local"===this.TH||this.IH?(this.CH=!0,Promise.resolve()):(this.jg||(this.jg=this.xH.Go(this._H,this.TH).then(t=>(this.CH=!0,this.jg=null,this.IH=t)).catch(t=>{console.error("Error loading resource: ",t),this.jg=null})),this.jg)}PH(){return this.CH}RH(){return this.IH?Promise.resolve(this.IH):this.jg||this.xH.Go(this._H,this.TH)}}}{const un=self.Ns,cn=new un.md,fn=new Set;un.iH=class extends un.MH{constructor(t,s){super(t,s),this.EH=null,this.AH=null,this.d1=0,this.FH=-1,this.OH=-1,fn.add(this)}ln(){if(0!==this.d1)throw new Error("released image asset which still has texture references");this.xH.rH(this),this.EH=null,fn.delete(this),super.ln()}static DH(){for(const t of fn)t.EH=null,t.AH=null,t.d1=0}kV(t,s){return s=s||{},this.d1++,this.AH?Promise.resolve(this.AH):(this.EH||(s.CM=this.uf.Wk().kH(),this.EH=this.LH(t,s)),this.EH)}async LH(s,i){try{const e=await this.RH();return 0===this.d1?this.EH=null:await cn.fc(async()=>{const t=await s.PE(e,i);return this.EH=null,0===this.d1?(s.B2(t),null):(this.AH=t,this.FH=t.fm(),this.OH=t.Gm(),this.AH)})}catch(t){throw console.error("Failed to load texture: ",t),t}}FI(){if(this.d1<=0)throw new Error("texture released too many times");if(this.d1--,0===this.d1&&this.AH){const t=this.AH.qb();t.B2(this.AH),this.AH=null}}NH(){return this.d1}z2(){return this.AH}fm(){return this.FH}Gm(){return this.OH}async BH(){const t=await this.RH();return un.Vi.ImageBitmap?createImageBitmap(t):un.Eo(t)}}}{let t=function(t,s){return t.CD().WH()-s.CD().WH()};t;const dn=self.Ns;dn.jH=class extends dn.nn{constructor(t,s,i){super(),this.VH=t,this.Qa=s,this.sl=i,this.UH=[],this.HH=!0,this.zH=new Set,this.JH=!1}ln(){dn.Br(this.UH),this.zH.clear(),this.VH=null}u0(){dn.Br(this.UH),this.HH=!0,this.zH.clear(),this.JH=!1}qH(){this.HH=!1}ec(){if(this.UH.length){if(this.UH.length>this.zH.size)return!1;this.$H()}return!0}XH(t){this.zH.has(t)?(this.zH.delete(t),0===this.zH.size&&(this.JH=!1)):(this.UH.push(t),this.HH=1===this.UH.length)}M0(t){this.zH.add(t),this.JH=!0,50<=this.zH.size&&this.$H()}$H(){this.JH&&(this.UH.length===this.zH.size?this.u0():(dn.$r(this.UH,this.zH),this.zH.clear(),this.JH=!1))}YH(){this.HH||(this.UH.sort(t),this.HH=!0)}KH(t){this.$H(),this.YH(),this.UH.length&&t.push(this.UH)}}}{const pn=self.Ns;pn.ZH=class extends pn.nn{constructor(t,s){super(),this.QH=t,this.t7=s,this.s7=pn.an(pn.Qu)}ln(){this.s7.ln(),this.s7=null}i7(t,s,i){let e=this.s7.ei(t,s);return e||(i?(e=pn.an(pn.jH,this,t,s),this.s7.Set(t,s,e),e):null)}e7(t){return Math.floor(t/this.QH)}h7(t){return Math.floor(t/this.t7)}n7(e,h,n){if(h)for(let i=h._l(),t=h.Tl();i<=t;++i)for(let t=h.Gl(),s=h.Il();t<=s;++t)if(!n||!n.Yl(i,t)){const r=this.i7(i,t,!1);r&&(r.M0(e),r.ec())&&this.s7.hc(i,t)}if(n)for(let i=n._l(),t=n.Tl();i<=t;++i)for(let t=n.Gl(),s=n.Il();t<=s;++t)h&&h.Yl(i,t)||this.i7(i,t,!0).XH(e)}r7(t,s){let i=this.e7(t._l()),e=this.h7(t.Gl()),h=this.e7(t.Tl()),n=this.h7(t.Il());for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.i7(i,t,!1);r&&r.KH(s)}}o7(t){let s=t._l(),i=t.Gl(),e=t.Tl(),h=t.Il();for(;s<=e;++s)for(let t=i;t<=h;++t){const n=this.i7(s,t,!1);n&&n.qH()}}}}{let r=function(t,s){return t.CD().WH()-s.CD().WH()},t=function(t,s){return t.CD().Fv()-s.CD().Fv()};r,t;const S=self.Ns,mn=new S.Rect,gn=new S.tu,yn=[],wn=(new S.Rect,new S.Rect,self.vs),_h=wn.Ps,Vh=wn.Rs,xh=wn.Gs,Sn=xh.create(),bn=_h.create(),vn=Vh.create(),Mn=_h.create(),xn=_h.create(),_n=_h.create(),Gn=S.an(S.Za),Tn=(S.an(S.Rect),[]),In=[],Cn=[],Pn={name:"",sid:-1,a7:!1,isVisible:!0,isInteractive:!0,Y5:!1,backgroundColor:[1,1,1,1],cN:!0,l7:[1,1],opacity:1,pN:!1,u7:!1,c7:!1,f7:!1,scaleRate:1,O3:0,uN:0,d7:[],p7:[],m7:[]};S.g7=class extends S.nn{constructor(t,s,i){super(),i=Object.assign({},Pn,i),this.y7=t,this.uf=t.XD(),this.w7=s,this.dn=i.name,this.Kg=-1,this.S7=!!i.Y5,this.b7=-1,this.v7=i.sid,this.M7=!!i.a7,this.x7=!!i.isVisible,this._7=!!i.isInteractive,this.G7=S.an(S.Ho),this.G7.Va(i.backgroundColor),this.T7=!!i.cN,this.I7=i.l7[0],this.C7=i.l7[1],this.dv=S.an(S.Ho,1,1,1,i.opacity),this.P7=S.an(S.Ho),this.R7=!!i.pN,this.E7=!!i.u7,this.A7=!!i.c7,this.F7=!!i.f7,this.O7=i.scaleRate,this.cv=i.O3,this.D7=null,this.k7=1,this.pv=i.uN,this.L7=0,this.N7=0,this.B7=0,this.W7=!1,this.IP=S.an(S.Rect),this.j7=S.an(S.Rect),this.V7=S.an(S.Rect),this.U7=!0,this.C2=xh.create(),this.H7=!0,this.b3=xh.create(),this.z7=!0,this.J7=S.an(S.ny.gy),this.q7=!0,this.X7=[],this.Y7=i.d7,this.K7=[],this.Z7=[],this.Q7=new Map,this.UH=[],this.sz=!1,this.iz=!1,this.ez=!1;const h=this.uf.Wk();this.hz=S.an(S.nz,this,i.p7),this.FF=S.an(S.ny.PA,h.rz(),{wA:(t,s)=>{const i=s.GF(),e=i.GE();t.wv(i.oz()),t.FE(e),t.OE(e),h.az(e)},bA:t=>this.s5().lz(t)}),this.uz=!0,this.cz=!0,this.fz=null,this.dz=[],this.pz=!1,this.mz=S.an(S.Rect,0,0,-1,-1),this.gz=S.an(S.Rect,0,0,-1,-1),this.yz=new self.b5(this),this.wz(),this.Sz()&&(this.fz=S.an(S.ZH,this.uf.tO(),this.uf.iO())),this.bz=i.m7.map(t=>S.g7.vz(this.y7,this,t))}Mz(){for(const t of this.Y7){const s=this.uf.xz(t[1]);this.y7._z(s),s.Gz()||(s.Tz(t),s.Iz(this.Kg)),this.K7.push(t),this.Q7.set(t[2],t)}S.Ur(this.X7,this.K7),this.Y7=null}static vz(t,s,i){return S.an(S.g7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],Y5:i[19],backgroundColor:i[4].map(t=>t/255),cN:i[5],l7:[i[6],i[7]],opacity:i[8],pN:i[9],u7:i[17],c7:i[18],f7:i[10],scaleRate:i[11],O3:i[12],uN:i[16],d7:i[14],p7:i[15],m7:i[20]})}ln(){for(const t of this.bz)t.ln();S.Br(this.bz);for(const s of this.UH)this.uf.UN(s);S.Br(this.UH),this.hz.ln(),this.hz=null,this.FF.ln(),this.FF=null,this.yz=null,this.w7=null,this.y7=null,this.uf=null}Cz(t){return this.Q7.get(t)}Pz(h){let n=this.y7.Rz(),r=0,o=this.K7;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.uf.xz(t[1]),i=!0;if(!s.Ez()||n){const a=this.uf.Az(t,this,!0);h.push(a),s.Fz()&&(i=!1,this.Z7.push(a.YN()))}i&&(o[r]=o[e],++r)}S.Nr(o,r),this.uf.QL(),this.OD()}Oz(t,s){if(!t.EL().aL())throw new Error("instance is not of world type");const i=t.CD();if(i.PD()!==this)throw new Error("instance added to wrong layer");this.UH.push(t),0!==i.Fv()&&(this.ez=!0),s&&this.Sz()&&t.CD().Q4(),this.OD(t)}Dz(t){this.UH.includes(t)||(this.UH.push(t),0!==t.CD().Fv()&&(this.ez=!0),this.OD(t))}kz(t,s){const i=t.CD();if(i.PD()!==this)throw new Error("instance added to wrong layer");this.UH.unshift(t),0!==i.Fv()&&(this.ez=!0),this.OD(t),s&&this.Sz()&&t.CD().Q4()}Lz(t,s){const i=this.UH.indexOf(t);i<0||(s&&this.Sz()&&t.CD().Nz(),this.UH.splice(i,1),this.OD(t),this.Bz())}Wz(){this.ez=!0}Bz(){0===this.UH.length&&(this.ez=!1)}jz(t){if(t){const s=new Set;for(const i of this.UH){const e=i.CD().WH();0<=e&&s.add(e)}let t=-1;for(const h of this.UH){const n=h.CD();if(!(0<=n.WH())){for(++t;s.has(t);)++t;n.Vz(t)}}}this.UH.sort(r)}Uz(){}zz(){for(const t of this.UH)t.kN().Fz()||this.uf.UN(t);this.uf.QL(),S.Br(this.UH),this.ez=!1,this.OD()}Jz(s,t,i,e,h,n){const r=this.uf.pO(),o=this.uf.qz(),a=s.$z(),l=[];for(const u of this.K7){const c=u[0],f=c[0],d=c[1];if(t.Yl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.Xz(p))continue}let t=h;if(!t){const y=this.uf.TD();t=this.uD()===y?this:(t=y.Yz(this.Qc()))||y.ED(this.LF())}const m=this.uf.Az(u,t,!1,void 0,void 0,!1,n),g=(t.$L(m),m.CD());g.eB(i,e),g.Q4(),r.XL(!0),m.YL(),r.XL(!1),l.push(m)}}return l}zL(){return this.UH.length}uD(){return this.y7}Qc(){return this.dn}Kz(t){this.Kg=t}LF(){return this.Kg}Zz(t){this.b7=t}Xj(){return this.b7}K5(){return this.S7}Z5(t){this.S7!==(t=!!t)&&(this.S7=t,this.y7.Qz(),this.uf.DD())}t9(){let t=this.L5();return(t?t.W5():this.uD().s9()).indexOf(this)}i9(){return this.v7}XD(){return this.uf}e9(){return this.M7}h9(){for(const t of this.N5())if(t.e9())return!0;return!1}Kk(){return this.uf.Kk()}s5(){return this.hz}kF(){return this.n9(),this.FF}n9(){const t=this.r9();if(this.uz||t!==this.cz||this.FF.v3()){const s=this.s5().o9();this.FF.M3(s.map(t=>t.b_()),{MA:s.map(t=>t.LF()),xA:!t,CA:!0}),this.uz=!1,this.cz=t}}W6(){this.s5().W6(),this.uz=!0}Sz(){return this.F7&&!this.A7}a9(){return this.fz}l9(){this.pz=!1}J5(){for(const t of this.u9())if(!t.U5())return!1;return!0}U5(){return this.x7}H5(t){this.x7!==(t=!!t)&&(this.x7=t,this.uf.DD())}X5(t){this._7=!!t}q5(){return this._7}tN(){for(const t of this.u9())if(!t.q5())return!1;return!0}SN(t){if(this.W7!==(t=!!t)){if(this.W7=t){const s=this.uD();this.N7=s.u5(),this.B7=s.f5()}this.c9(),this.uf.DD()}}f9(){return this.W7}l5(t){const s=this.uD(),i=s.d9(),e=s.p9();this.N7!==(t=(t=e<t?e:t)<i?i:t)&&(this.N7=t,this.f9())&&(this.c9(),this.uf.DD())}c5(t){const s=this.uD(),i=s.m9(),e=s.g9();this.B7!==(t=(t=e<t?e:t)<i?i:t)&&(this.B7=t,this.f9())&&(this.c9(),this.uf.DD())}u5(){return this.f9()?this.N7:this.uD().u5()}f5(){return this.f9()?this.B7:this.uD().f5()}vN(){return this.y9(),this.IP}w9(){return this.y9(),this.j7}S9(){return this.y9(),this.V7}A5(){const t=this.uD();return[t.b9(),t.v9()]}bw(t){return this.uf.bw(t)}M9(c,e){const h=this.w9();if(0===c)e.T(h);else{let o=h.Al(),a=h.Fl(),t=this.x9(c),s=h.width()/t,i=h.height()/t,[l,u]=this.A5();if(.5!==l||.5!==u){let t=this._9(),s=this.uf,i=this.bw()/t,e=(l-.5)*s.G9()/i,h=(u-.5)*s.T9()/i,n=this.a5(),r=(0!==n&&(Gn.set(e,h),Gn.rotate(n),e=Gn.hl(),h=Gn.rl()),S.Pn(t,0,c));o+=S.Dt(e,0,r),a+=S.Dt(h,0,r)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}WR(){return this.dv.la()}VR(t){t=S.mn(t,0,1),this.dv.la()!==t&&(this.dv.ea(t),this.wz(),this.uf.DD())}wz(){this.P7.T(this.dv),this.P7.ba()}oz(){return this.P7}r9(){return this.dv.ga(1,1,1,1)}hN(){return this.O7}eN(t){this.O7!==t&&(this.O7=t,this.c9(),this.uf.DD())}oN(){return this.I7}lN(){return this.C7}I9(t,s){this.I7===t&&this.C7===s||(this.I7=t,this.C7=s,this.c9(),this.uf.DD())}rN(t){this.I9(t,this.lN())}aN(t){this.I9(this.oN(),t)}Ov(t){this.pv!==t&&(this.pv=t,this.uf.DD())}Fv(){return this.pv}o5(t){t=S.gn(t),this.L7!==t&&(this.L7=t,this.c9(),this.uf.DD())}a5(){return S.gn(this.y7.a5()+this.L7)}nN(){return this.L7}C9(){return 0<this.UH.length}AD(){return this.UH}P9(){return this.R9()&&this.A7?(S.Ur(Cn,this.AD()),Cn.sort((t,s)=>this.E9(t,s)),Cn):this.AD()}A9(t){S.$h(t,this.P9());for(const s of this.bz)s.J5()&&0<s.WR()&&s.A9(t)}E9(t,s){const i=this.uD().F9(),e=i[0],h=i[1],n=i[2],r=t.CD(),o=s.CD(),a=r.Cv()-e,l=r.Ev()-h,u=r.Fv()-n,c=o.Cv()-e,f=o.Ev()-h,d=o.Fv()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}wN(){return this.G7}dN(){return this.T7}fN(t){this.T7!==(t=!!t)&&(this.T7=t,this.uf.DD())}gN(){return this.R7}mN(t){this.R7!==(t=!!t)&&(this.R7=t,this.uf.DD())}O9(){return!this.XD().D9()||!this.E7}R9(){return!this.O9()}k9(){return this.R9()&&this.uD().L9()}N9(){if(!this.k9())return!1;for(const t of this.bz)if(!t.N9())return!1;return!0}yv(t){this.cv!==t&&(this.cv=t,this.uf.DD())}yN(){return this.cv}B9(){return!this.w7}L5(){return this.w7}W9(t){this.w7=t}W5(){return this.bz}j9(){return 0<this.bz.length}V9(t,s=!0){s?this.bz.push(t):this.bz.unshift(t)}U9(t,s,i){let e=this.bz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.bz.splice(e,0,t)}H9(t){const s=this.bz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.bz.splice(s,1)}z9(){for(const t of this.bz)if(t.J9())return!0;return!1}*V5(){for(const t of this.bz)yield*t.V5();yield this}*N5(){let t=this.L5();for(;t;)yield t,t=t.L5()}*u9(){yield this,yield*this.N5()}q9(t){for(const s of this.N5())if(s===t)return!0;return!1}X9(t){return this===t||this.I7===t.I7&&this.C7===t.C7&&this.k7===t.k7&&this.O7===t.O7&&this.L7===t.L7&&this.u5()===t.u5()&&this.f5()===t.f5()}Y9(){return{parallaxX:this.oN(),parallaxY:this.lN(),scale:this.iN(),scaleRate:this.hN(),angle:this.nN(),hasOwnScroll:this.f9(),scrollX:this.u5(),scrollY:this.f5()}}K9(t){this.I9(t.parallaxX,t.parallaxY),this.sN(t.scale),this.eN(t.scaleRate),this.o5(t.angle),this.SN(t.hasOwnScroll),this.l5(t.scrollX),this.c5(t.scrollY),this.y9()}Z9(t){if(0!==t.size){const s=S.$r(this.UH,t);0<s&&(this.Bz(),this.OD())}}OD(t){this.sz=!1,this.pz=!1,t&&!t.kN().EL().uL()||(this.iz=!1)}Q9(){if(!this.sz){if(this.UH.sort(t),this.Sz())for(let t=0,s=this.UH.length;t<s;++t){const i=this.UH[t].CD();i.Vz(t),this.fz.o7(i.tJ())}else for(let t=0,s=this.UH.length;t<s;++t)this.UH[t].CD().Vz(t);this.sz=!0}}sJ(){if(!this.iz){let t=this.y7.iJ(this.Xj()),s=t.map(t=>[...t.V5()]).flat(),i=0;for(const e of s){for(const h of e.AD())h.kN().EL().uL()&&h.CD().eJ(i++);e.hJ()}}}hJ(){this.iz=!0}nJ(){return{isVisible:this.J5(),opacity:this.WR(),isInteractive:this.q5()}}rJ(t,s,i){const e=t.CD(),h=s.CD();if(e.PD()!==this||h.PD()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=e.RD(),r=h.RD();return n!==r+(i?1:-1)&&(S.Hr(this.UH,n),n<r&&r--,i&&r++,r===this.UH.length?this.UH.push(t):this.UH.splice(r,0,t),this.OD(t),!0)}oJ(t,s){let i=[],e=0,h=0,n=t.length,r=s.length;for(;e<n&&h<r;){const o=t[e],a=s[h];o.CD().WH()<a.CD().WH()?(i.push(o),++e):(i.push(a),++h)}for(;e<n;++e)i.push(t[e]);for(;h<r;++h)i.push(s[h]);return i}aJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],n=s[t+1];i.push(this.oJ(h,n))}return e%2==1&&i.push(s[e-1]),i}lJ(t){for(;1<t.length;)t=this.aJ(t);return t[0]}uJ(){return this.Q9(),S.Br(yn),this.fz.r7(this.vN(),yn),yn.length?1===yn.length?yn[0]:this.lJ(yn):[]}J9(){return this.J5()&&0<this.WR()&&this.cJ()}cJ(){if(this.C9()||!this.dN())return!0;for(const t of this.bz)if(t.cJ())return!0;return!1}fJ(){return this.gN()||!this.r9()||0!==this.yN()||this.hz.dJ()}pJ(){if(this.fJ())return!0;for(const t of this.bz)if(t.pJ())return!0;return!1}GE(){return this.D7}x9(t){if(this.y7.D5())return 1;{const s=this.mJ();return s/(s-t)}}gJ(t){const s=this.uf.FN();if(this.y7.D5())return s;{const i=this.mJ(),e=this.bw();return e/Math.abs(i-t)*s}}c9(){this.z7=!0,this.q7=!0,this.U7=!0}yJ(t){return this.z7&&(this.wJ(t,this.b3,0,0,null),this.z7=!1),this.b3}_9(t){return this.bw(t)/this.SJ()}mJ(){return this.k9()?this.uD().F9()[2]:this._9()}bJ(){if(this.k9()){const t=this.uD().F9();return[t[0],t[1],t[2]]}return this.vJ()}vJ(t=0,s=0,h=0){let n=this.uf,i=this.uD(),e=n.MJ(),r=n.xJ(),o=(this.u5()-e)*this.I7+e,a=(this.f5()-r)*this.C7+r,l=(n.nO()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.D5()?this.bw(h):this._9(h),[f,d]=this.A5();if(.5!==f||.5!==d){let t=this.bw(h)/c,s=(f-.5)*n.G9()/t,i=(d-.5)*n.T9()/t,e=this.a5();0!==e&&(Gn.set(s,i),Gn.rotate(e),s=Gn.hl(),i=Gn.rl()),l+=s,u+=i}return[l,u,c]}wJ(t,s,i,e,h){const n=this.uf,r=this.uD();if(this.k9()){_h.T(Mn,r.F9()),_h.T(xn,r._J()),_h.T(_n,r.GJ());const o=n.MJ(),a=n.xJ(),l=xn[0]-Mn[0],u=xn[1]-Mn[1],c=xn[2]-Mn[2];Mn[0]=(Mn[0]-o)*this.I7+o,Mn[1]=(Mn[1]-a)*this.C7+a,Mn[2]*=Math.max(this.I7,this.C7),xn[0]=Mn[0]+l,xn[1]=Mn[1]+u,xn[2]=Mn[2]+c}else{const[f,d,p]=this.vJ(i,e,h),m=(_h.set(Mn,f,d,p),_h.set(xn,f,d,p-100),this.a5());0===m?_h.set(_n,0,1,0):_h.set(_n,Math.sin(m),Math.cos(m),0)}t.Lw(s,Mn,xn,_n,h||n.T9())}TJ(){this.H7=!0,this.q7=!0,this.U7=!0}IJ(t){return this.H7&&(this.CJ(t),this.H7=!1),this.C2}CJ(t){const s=this.uf.Wk(),[i,e]=this.A5();if(this.y7.D5())t.kw(this.C2,s.PJ(),s.RJ());else if(.5===i&&.5===e)xh.T(this.C2,s.EJ());else{const h=s.PJ(),n=s.RJ();t.Ow(this.C2,h/n,i,e)}}JV(t,s=!0,i=0,e=0,h=0){s&&t.PR(this.IJ(t));let n;n=0===i&&0===e&&0===h?this.yJ(t):(this.wJ(t,Sn,i,e,h),Sn),t.DR(n)}AJ(t){this.JV(t),t.vS(this.Fv())}FJ(t){let s=null;if(t.wb()&&this.uf.OJ()){const i=this.uf.Wk().DJ(this);i&&(s=i.pP(),t.WE(s))}return s}kJ(t){if(t.Dw()&&this.uf.OJ()){const s=2*(this.LF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}gM(t,s,i){let e=this.uf.Wk(),h=this.fJ(),n=null,r=this.FJ(t);if(this.kJ(t),h){const o={IM:this.uf.eO(),d2:!0,LJ:!!t.Dw()&&this.uf.NJ()};"low"===e.BJ()&&(o.width=e.PJ(),o.height=e.RJ()),n=this.uf.WJ(o),this.D7=n,t.EE(n),this.dN()&&t.wE(0,0,0,0)}else this.D7=s,t.EE(s);if(this.dN()||t.ic(this.G7),this.y7.jJ(t,this.D7,this.bz,h&&this.dN()),this.kJ(t),this.JV(t),t.vS(this.Fv()),t.vE(this.R9()),this.SJ()>Number.EPSILON){this.Q9();const a=this.Sz()&&0===this.Fv()&&!this.ez;this.k9()?this.VJ(t):a?this.UJ(t):this.HJ(t,this.P9())}t.vS(0),t.xS(0),h&&(t.vE(!1),this.zJ(t,n,s,i)),r&&t.VE(r),this.D7=null}HJ(i,e){let h=this.vN(),n=this.D7,r=this.uD().D5(),o=this.uD().JJ(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).CD();u.J5()&&u.qJ(h,o,r)&&this.$J(l,u,i,n)}}}VJ(e){const h=this.D7,n=this.XJ(),r=Tn,o=In,a=this.P9();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.CD();if(u.J5()&&u.YJ(n)){(!l.KJ()||0<u.ZJ())&&o.push(l);const c=l.CD().nB();r.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.CD();if(d.J5()&&d.YJ(n)){if(d.nB()!==c)break;(f.KJ()?(0<d.ZJ()&&o.push(f),r):o).push(f)}}if(1!==r.length||r[0].QJ()){this.tq(e,r);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.CD();m.sq(!0),this.$J(p,m,e,h),m.sq(!1)}}else{this.$J(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.CD(),w=y.PD();w.$J(g,y,e,h)}}}s=t,S.Br(r),S.Br(o)}else++s}}tq(i,e){const h=this.D7;i.kE();for(let t=0,s=e.length;t<s;++t){const n=e[t],r=n.CD();r.iq(!0),this.eq(n,r,i)}i.LE();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.CD();this.$J(o,a,i,h),a.iq(!1)}i.BE()}UJ(t){let s=this.fz,i=this.gz,e=this.mz,h=this.vN(),n;i.set(s.e7(h._l()),s.h7(h.Gl()),s.e7(h.Tl()),s.h7(h.Il())),this.pz&&i.equals(e)?n=this.dz:(n=this.uJ(),this.pz=!0,e.T(i)),this.HJ(t,n),n!==this.dz&&S.Ur(this.dz,n)}$J(t,s,i,e){s.dJ()?this.hq(t,s,i,e):this.eq(t,s,i)}eq(t,s,i){const e=s.nq();i.hS()!==e&&e.gv(),t.gM(i)}hq(t,s,i,e){this.rq(t,s,i,e,null)&&this.JV(i)}rq(t,s,i,e,h){const n=s.K4().kF();return n.A3(i,e,{F3:t,O3:s.yN(),devicePixelRatio:this.uf.oq(),time:t.aq(),D3:this.uf.lq()*this.SJ(),L3:this.a5(),nF:s.oB(),rF:n.xF()?null:this.uq(s),V3:h&&h.V3,U3:h&&h.U3,H3:h&&h.H3,z3:h&&h.z3}),i.vS(this.Fv()),n.LR()}zJ(t,s,i,e){const h=this.hz.o9(),n=this.uf;0===h.length?(t.EE(i),t.Uw(),e&&0===this.cv&&this.r9()?t.AE(s):(t.yv(this.cv),t.wv(this.P7),t.FE(s)),t.OE(s),n.az(s)):this.kF().A3(t,i,{F3:this,O3:this.yN(),devicePixelRatio:n.oq(),D3:n.lq()*this.SJ(),L3:this.a5(),nF:this.vN(),rF:null,vA:!0})}iN(){return this.k7}sN(t){this.k7!==t&&(this.k7=t,this.y7.cq(),this.c9(),this.uf.DD())}FN(){return this.SJ()*this.uf.FN()}e8(){return this.SJ()*this.uf.e8()}SJ(){return(this.k7*this.y7.r5()-1)*this.O7+1}y9(){if(this.U7){this.U7=!1;let t=this.uf.MJ(),s=this.uf.xJ(),i=(this.u5()-t)*this.I7+t,e=(this.f5()-s)*this.C7+s,h=this.SJ(),n=this.uf.G9()/h,r=this.uf.T9()/h,o=i-n/2,a=e-r/2;this.uf.nO()&&(o=Math.round(o),a=Math.round(a));const l=this.j7,u=(l.set(o,a,o+n,a+r),this.a5()),c=(0!==u&&(mn.T(l),mn.offset(-l.Al(),-l.Fl()),gn.Mu(mn,u),gn._u(mn),mn.offset(l.Al(),l.Fl()),l.T(mn)),this.pv);this.M9(c,this.IP),this.k9()?this.fq(c,this.V7):this.V7.T(this.IP)}}fq(t,s){let i=this.uf.Wk(),e=i.Hk(),h=i.Jk(),[n,r]=this.xN(0,0,t),[o,a]=this.xN(e,0,t),[l,u]=this.xN(e,h,t),[c,f]=this.xN(0,h,t),d=Math.min(n,o,l,c),p=Math.min(r,a,u,f),m=Math.max(n,o,l,c),g=Math.max(r,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}xN(t,s,i=0){return this.pq(t,s,i,this.e8())}PN(t,s,i=0){return this.pq(t,s,i,this.FN()*this.Kk())}pq(t,s,i,e){const h=this.uf,n=h.qb(),r=this.SJ(),o=h.G9()/r,a=h.T9()/r,l=vn,u=(Vh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.IJ(n)),c=this.yJ(n),f=bn,d=S.ny.my(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}mq(t,s){const i=this.k7,e=this.O7,h=this.I7,n=this.C7,r=this.L7,o=(this.k7=1,this.O7=1,this.I7=1,this.C7=1,this.L7=0,this.c9(),this.xN(t,s));return this.k7=i,this.O7=e,this.I7=h,this.C7=n,this.L7=r,this.c9(),o}IN(t,s,i=0){return this.gq(t,s,i,this.e8())}EN(t,s,i=0){return this.gq(t,s,i,this.FN()*this.Kk())}gq(t,s,i,e){const h=this.uf,n=h.qb(),r=this.SJ(),o=h.G9()/r,a=h.T9()/r,l=vn,u=(Vh.set(l,0,0,o,a),this.IJ(n)),c=this.yJ(n),f=bn,d=S.ny.oy(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}yq(t,s){return t*=this.FN()*this.Kk(),0!==s&&(t*=this.x9(s)),t}uq(t){const s=t.oB(),i=t.nB(),e=t.ZJ(),l=i+e,u=s._l(),c=s.Gl(),f=s.Tl(),d=s.Il();if(this.k9()){if(this.wq(u,c,i)||this.wq(f,c,i)||this.wq(f,d,i)||this.wq(u,d,i))return null;if(0<e&&(this.wq(u,c,l)||this.wq(f,c,l)||this.wq(f,d,l)||this.wq(u,d,l)))return null}else if(l>=this._9())return null;let[p,m]=this.EN(u,c,i),[g,y]=this.EN(f,d,i);if(0!==this.a5()||0<e||this.k9()){const[w,S]=this.EN(f,c,i),[b,v]=this.EN(u,d,i);if(0<e){let[t,s]=this.EN(u,c,l),[i,e]=this.EN(f,c,l),[h,n]=this.EN(f,d,l),[r,o]=this.EN(u,d,l),a=Math.min(p,g,w,b,t,i,h,r);g=Math.max(p,g,w,b,t,i,h,r),p=a,a=Math.min(m,y,S,v,s,e,n,o),y=Math.max(m,y,S,v,s,e,n,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return mn.set(p,m,g,y),mn}XJ(){return this.q7&&(this.Sq(),this.q7=!1),this.J7}Sq(){const t=this.uf.qb(),s=this.IJ(t),i=this.yJ(t);this.J7.xy(i,s)}wq(t,s,i){return this.XJ().Gy(t,s,i)}bq(){const t={d:this.e9(),s:this.iN(),a:this.nN(),v:this.U5(),i:this.q5(),html:this.K5(),bc:this.G7.toJSON(),t:this.dN(),sx:this.N7,sy:this.B7,hosp:this.W7,px:this.oN(),py:this.lN(),c:this.dv.toJSON(),sr:this.hN(),fx:this.hz.jv(),cg:this.Z7};return t}vq(t){this.M7=!!t.d,this.k7=t.s,this.L7=t.a,this.x7=!!t.v,this._7=!t.hasOwnProperty("i")||t.i,this.S7=!!t.html,this.G7.Va(t.bc),this.T7=!!t.t,t.hasOwnProperty("sx")&&(this.N7=t.sx),t.hasOwnProperty("sy")&&(this.B7=t.sy),t.hasOwnProperty("hosp")&&(this.W7=!!t.hosp),this.I7=t.px,this.C7=t.py,this.dv.Va(t.c),this.wz(),this.O7=t.sr,S.Ur(this.Z7,t.cg),S.Ur(this.K7,this.X7);let i=new Set(this.Z7),e=0;for(let t=0,s=this.K7.length;t<s;++t)i.has(this.K7[t][2])||(this.K7[e]=this.K7[t],++e);S.Nr(this.K7,e),this.hz.Vv(t.fx),this.uz=!0}Mq(){this.jz(!1),this.OD(),this.c9(),this.TJ()}m5(){return this.yz}$L(t,s=!1){if(this.UH.includes(t))s&&this.UH.sort((t,s)=>{const i=t.CD().xq(),e=s.CD().xq();return i-e});else if(t._q()){const i=[...t.kB()];i.push(t),i.sort((t,s)=>{const i=t.CD().xq(),e=s.CD().xq();return i-e});for(const e of i)if(e.$N())for(const h of e.XN())if(!i.includes(h)){const n=[...h.kB()];n.push(h),n.sort((t,s)=>{const i=t.CD().xq(),e=s.CD().xq();return i-e}),n&&n.length&&i.splice(i.length,0,...n)}for(const r of i)r.EL().aL()&&this.Oz(r,!0)}else if(t.EL().aL()&&this.Oz(t,!0),t.$N())for(const o of t.XN()){const a=[...o.kB()];if(a.push(o),a.sort((t,s)=>{const i=t.CD().xq(),e=s.CD().xq();return i-e}),a&&a.length)for(const l of a)l.EL().aL()&&this.Oz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.AJ(s),I=t)},M=(l,v,self.Ns),e=self.C3Debugger,h=(M.an(M.Rect),M.an(M.Rect),M.an(M.Rect)),x=M.an(M.Ho),t=self.vs,u=t.Ps,a=[],_=[],G=[],T=[],I=null;M.Gq=class extends M.nn{constructor(t,s,i){super(),this.Tq=t,this.uf=t.XD(),this.dn=i[0],this.Iq=i[1],this.Cq=i[2],this.Km=i[1],this.Zm=i[2],this.Pq=!!i[3],this.Rq=!!i[4],this.Eq=i[5],this.Aq=i[6],this.Fq=i[7],this.Oq=null,this.v7=i[8],this.Kg=s,this.N7=0,this.B7=0,this.k7=1,this.L7=0,this.Dq=new Set,this.kq=new Set,this.Lq=new Set,this.Nq=[],this.Bq=[],this.Wq=new Map,this.jq=new Map,this.Vq=[],this.Uq=!1,this.Hq=u.create(),this.zq=u.create(),this.Jq=u.create(),this.qq=[],this.$q=[],this.Xq=new Map,this.Yq=new Map,this.Kq=-1;const h=this.uf.Wk();this.hz=M.an(M.nz,this,i[11]),this.FF=M.an(M.ny.PA,h.rz(),{wA:(t,s)=>{const i=s.GF(),e=i.GE();t.UR(),t.FE(e),t.OE(e),h.az(e)},bA:t=>this.s5().lz(t)}),this.uz=!0,this.Zq=!1,this.D7=null,this.Qq={},this.t$=new Map,this.s$=!0,this.i$=new self.t5(this),this.e$=M.an(M.Event.Uf);for(const e of i[9])this.qq.push(M.g7.vz(this,null,e));this.h$();for(const n of this.w5())n.Mz();for(const r of i[10]){const o=this.uf.xz(r[1]);if(!o)throw new Error("missing nonworld object class");o.Gz()||o.Tz(r),this.Vq.push(r),this._z(o)}}ln(){for(const t of this.$q)t.ln();M.Br(this.$q),this.Lq.clear(),this.Oq=null,this.Tq=null,this.uf=null}XD(){return this.uf}Qc(){return this.dn}i9(){return this.v7}LF(){return this.Kg}s5(){return this.hz}kF(){return this.n9(),this.FF}n9(){const t="low"===this.uf.Wk().BJ();if(this.uz||this.Zq!==t||this.FF.v3()){const s=this.s5().o9();this.FF.M3(s.map(t=>t.b_()),{MA:s.map(t=>t.LF()),_A:t,CA:!0}),this.uz=!1,this.Zq=t}}W6(){this.s5().W6(),this.uz=!0}n$(){let i=this.$q[0].SJ();for(let t=1,s=this.$q.length;t<s;++t){const e=this.$q[t];0===e.oN()&&0===e.lN()||(i=Math.min(i,e.SJ()))}return i}r$(){return.5*this.uf.G9()/this.n$()}o$(){return.5*this.uf.T9()/this.n$()}d9(){return this.a$()?-1/0:this.r$()}p9(){return this.a$()?1/0:this.fm()-this.r$()}m9(){return this.a$()?-1/0:this.o$()}g9(){return this.a$()?1/0:this.Gm()-this.o$()}l5(t){const s=this.d9(),i=this.p9();this.N7!==(t=(t=i<t?i:t)<s?s:t)&&(this.N7=t,this.l$(),this.uf.DD())}u5(){return this.N7}c5(t){const s=this.m9(),i=this.g9();this.B7!==(t=(t=i<t?i:t)<s?s:t)&&(this.B7=t,this.l$(),this.uf.DD())}f5(){return this.B7}a$(){return this.Pq}cq(){this.l5(this.u5()),this.c5(this.f5());for(const t of this.$q)t.f9()&&(t.l5(t.u5()),t.c5(t.f5()))}R5(t,s){this.Eq===t&&this.Aq===s||(this.Eq=t,this.Aq=s,this.u$()&&(this.c$(),this.l$(),this.uf.DD()))}b9(){return this.D5()?.5:this.Eq}v9(){return this.D5()?.5:this.Aq}JJ(){const t=this.b9(),s=this.v9();return t<0||1<t||s<0||1<s}F5(){this.Rq&&(this.Rq=!1,this.c$(),this.l$(),this.uf.DD())}O5(){this.Rq||(this.Rq=!0,this.c$(),this.l$(),this.uf.DD())}D5(){return this.Rq}u$(){return!this.D5()}f$(t){this.Uq!==(t=!!t)&&(this.Uq=t,this.l$(),this.uf.DD())}L9(){return this.Uq}d$(t,s,i,e,h,n,r,o,a){l(this.Hq,t,s,i)&&l(this.zq,e,h,n)&&l(this.Jq,r,o,a)||(u.set(this.Hq,t,s,i),u.set(this.zq,e,h,n),u.set(this.Jq,r,o,a),this.p$())}p$(){this.l$(),this.uf.DD()}F9(){return this.Hq}_J(){return this.zq}GJ(){return this.Jq}r5(){return this.k7}n5(t){this.k7!==t&&(this.k7=t,this.l$(),this.cq(),this.uf.DD())}o5(t){t=M.gn(t),this.L7!==t&&(this.L7=t,this.l$(),this.uf.DD())}a5(){return this.L7}fm(){return this.Km}Mm(t){!isFinite(t)||t<1||(this.Km=t)}Gm(){return this.Zm}pm(t){!isFinite(t)||t<1||(this.Zm=t)}m$(){return this.Oq}s9(){return this.qq}*w5(){for(const t of this.qq)yield*t.V5()}y5(){return this.$q}g$(){return this.$q.length}PD(t){return"number"==typeof t?this.ED(t):this.Yz(t.toString())}ED(t){return t=M.mn(Math.floor(t),0,this.$q.length-1),this.$q[t]}Yz(t){return this.Xq.get(t.toLowerCase())||null}y$(t){return!!this.Yz(t)}w$(t){return this.Yq.get(t)||null}c$(){for(const t of this.$q)t.TJ()}l$(){for(const t of this.$q)t.c9()}M5(t,s,i){if(this.y$(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.L5(),h=M.an(M.g7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),a7:!0});this.S$(h,s,i),this.XD().DD(),this.Qz()}_5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.b$(t),this.S$(t,s,i),this.XD().DD(),this.Qz())}T5(t){if(this.b$(t)){const s=this.uf.pO();s.XL(!0),t.ln(),s.XL(!1),this.XD().DD(),this.Qz()}}C5(){const t=new Set;for(const s of this.w5())s.e9()&&!s.h9()&&t.add(s);if(0!==t.size){const i=this.uf.pO();i.XL(!0);for(const e of t)this.b$(e),e.ln();i.XL(!1),this.XD().DD(),this.Qz()}}S$(s,i,e){if(2<=e)if(i){if(i===s||i.q9(s))throw new Error(`cannot move layer '${s.Qc()}' to sub-layer of itself`);i.V9(s,2===e),s.W9(i)}else 2===e?this.qq.push(s):this.qq.unshift(s),s.W9(null);else{const t=i.L5();if(t){if(i.q9(s))throw new Error(`cannot move layer '${s.Qc()}' to sub-layer of itself`);t.U9(s,i,0===e),s.W9(t)}else{let t=this.qq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.qq.splice(t,0,s),s.W9(null)}}}b$(t){const s=t.L5();if(s)return s.H9(t),!0;if(1<this.qq.length){const i=this.qq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.qq.splice(i,1),!0}return!1}h$(){this.$q=[...this.w5()],this.Xq.clear(),this.Yq.clear();for(let t=0,s=this.$q.length;t<s;++t){const i=this.$q[t];i.Kz(t),this.Xq.set(i.Qc().toLowerCase(),i),this.Yq.set(i.i9(),i)}}v$(){let t=0;for(const s of this.qq){for(const i of s.V5())i.Zz(t);s.K5()&&t++}}M$(){return this.qq.at(-1).Xj()+1}async Qz(){this.h$(),this.v$(),this.Kq=this.M$()}x$(){return this.Kq}_$(){this.Kq=-1}iJ(t){const s=[];for(const i of this.qq){const e=i.Xj();if(e===t)s.push(i);else if(t<e)break}return s}Y9(){return{scrollX:this.u5(),scrollY:this.f5(),scale:this.r5(),angle:this.a5(),vpX:this.b9(),vpY:this.v9()}}K9(t){this.l5(t.scrollX),this.c5(t.scrollY),this.n5(t.scale),this.o5(t.angle),this.R5(t.vpX,t.vpY)}G$(){let t=this.qq.filter(t=>t.J9())[0];for(;t;){if(!t.dN())return x.na(t.wN()),x.ea(1),x;if(t.fJ())return x.Xo(0,0,0,0),x;t=t.W5().filter(t=>t.J9())[0]}return x.Xo(0,0,0,0),x}Rz(){return this.s$}T$(){return[...this.Dq]}_z(t){if(t.$N())for(const s of t.C$().I$())this.Dq.add(s);else this.Dq.add(t)}P$(){return[...this.kq]}R$(t,s){if(t===this||!s)return Promise.resolve();t&&(M.ko(this.kq,t.kq),t.kq.clear());const i=[];for(const e of this.Dq)this.kq.has(e)||(i.push(e.E$(s)),this.kq.add(e));return Promise.all(i)}async A$(t){if(t.$z())throw new Error("cannot load textures for family");const s=this.uf.qb();if(s&&!s.WC()&&!this.kq.has(t)){this.kq.add(t);const i=t.E$(s);this.F$(i),await i,t.O$(),this.uf.DD()}}F$(t){this.Lq.add(t),t.then(()=>this.Lq.delete(t)).catch(()=>this.Lq.delete(t))}D$(){return Promise.all([...this.Lq])}k$(t){if(t.$z()||0<t.zL())throw new Error("cannot unload textures");const s=this.uf.qb();s&&this.kq.has(t)&&(this.kq.delete(t),t.L$(s))}N$(t,s){if(t!==this&&s)for(const i of this.kq)i.Fz()||t.Dq.has(i)||(i.L$(),this.kq.delete(i))}B$(){this.kq.clear()}async W$(t){const s=this.uf,i=this.Tq,e=s.pO(),h=(this.Fq&&(this.Oq=e.j$(this.Fq),this.Oq.V$()),i.U$(this),this.Km=this.Iq,this.Zm=this.Cq,this.N7=s.tO()/2,this.B7=s.iO()/2,this.cq(),this.c$(),this.l$(),this.v$(),await this.uf.Wk().H$(this.M$(),!0),this.z$(t),this.uf.J$(!0),this.q$(),this.s$||this.$$(),this.X$(this.Nq),this.X$(this.Bq),this.Y$(),i.K$(),s.QL(),this.uf.J$(!1),this.uf.Z$());if(await Promise.all(h),M.Br(h),!s.Q$()){for(const n of this.Nq)n.tX();for(const r of this.Bq)r.sX(this.Wq,this.jq);for(const[o,a]of Object.entries(this.Qq)){const l=this.uf.L8(parseInt(o,10));l&&!l.$z()&&l.Ez()&&M.Br(a)}for(const u of this.Nq)u.iX();for(const c of this.Bq)c.iX()}M.Br(this.Nq),M.Br(this.Bq),this.Wq.clear(),this.jq.clear(),await Promise.all([...this.Dq].map(t=>t.eX(this.uf.qb()))),t&&(s.Uf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.hX(new M.Event("beforeprojectstart"))),await this.nX(new M.Event("beforeanylayoutstart")),s.Uf().dispatchEvent(new M.Event("beforelayoutstart")),await this.hX(new M.Event("beforelayoutstart")),s.Q$()||await s._4(M.uX.lX.aX.rX,null,null),s.Uf().dispatchEvent(new M.Event("afterlayoutstart")),await this.hX(new M.Event("afterlayoutstart")),await this.nX(new M.Event("afteranylayoutstart")),t&&(s.Uf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.hX(new M.Event("afterprojectstart"))),e.cX(i),await this.D$(),this.s$=!1}z$(t){for(const s of this.uf.qz())if(!s.$z()&&s.aL())for(const i of s.VL()){const e=i.CD(),h=e.PD(),n=M.mn(h.LF(),0,this.$q.length-1),r=this.$q[n];e.FD(r,!0),r.Dz(i)}if(!t)for(const o of this.$q)o.jz(!1)}q$(){for(const t of this.$q)t.Pz(this.Nq),t.Uz()}$$(){let s=!1;for(const[t,i]of Object.entries(this.Qq)){const e=this.uf.L8(parseInt(t,10));if(e&&!e.$z()&&e.Ez())for(const h of i){let t=null;if(!e.aL()||(t=h.hasOwnProperty("instJson")?this.w$(h.instJson.w.l):this.w$(h.w.l))){const n=this.uf.Az(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?n.Vv(h.instJson):n.Vv(h),s=!0,this.Bq.push(n),h.hasOwnProperty("instJson")&&(this.Wq.set(n,h),this.jq.set(h.index,n))}}}for(const r of this.$q)r.jz(!0),r.OD();s&&(this.uf.QL(),this.uf.fX())}X$(s){for(const i of s)if(i.$N()){const e=i.CD(),t=i.dX();for(const h of i.kN().C$().pX())if(h!==i.kN()){const n=h.VL();if(n.length>t)i.mX(n[t]);else{let t;t=e?this.uf.Az(h,e.PD(),!0,e.Cv(),e.Ev(),!0):this.uf.Az(h,null,!0,0,0,!0),this.uf.QL(),h.gX(),i.mX(t),s.push(t)}}}}Y$(){for(const t of this.Vq){const s=this.uf.xz(t[1]);s.$N()||this.uf.Az(t,null,!0)}}yX(){let i=[],e=this.Vq,h=0;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=this.uf.xz(n[1]);r.Fz()?r.$N()&&r.C$().wX()||i.push(this.uf.Az(n,null,!0)):(e[h]=n,++h)}M.Nr(e,h),this.uf.QL(),this.X$(i)}Jz(t,s,i,e,h,n,r){if(i)return i.Jz(t,s,h,n,e,r);{const o=[];for(const a of this.$q)o.push(a.Jz(t,s,h,n,e,r));return o.flat()}}async SX(){const t=this.Tq;this.uf.Q$()||(await this.nX(new M.Event("beforeanylayoutend")),await this.hX(new M.Event("beforelayoutend")),await this.uf._4(M.uX.lX.aX.bX,null,null),await this.hX(new M.Event("afterlayoutend")),await this.nX(new M.Event("afteranylayoutend"))),t.vX(!0),this.uf.pO().MX(),this.s$||this.xX();for(const s of this.$q)s.zz();for(const i of this.uf.qz())if(!(i.Fz()||i.aL()||i.EL().rL()||i.$z())){for(const e of i.VL())this.uf.UN(e);this.uf.QL()}t.vX(!1),t.rD()===this&&t.U$(null)}_X(t,s){const i=t.kN().i9().toString(),e=(this.Qq.hasOwnProperty(i)||(this.Qq[i]=[]),this.Qq[i]),h={index:s,instJson:t.jv(),sceneGraphJson:{children:[]}};e.push(h),this.t$.set(t,h)}GX(t){const s=this.t$.get(t);for(const i of t.TX()){const e=this.t$.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.CX.IX(i.CD())})}}xX(){this.t$.clear();let t=0;for(const s of this.$q){s.Q9();for(const i of s.AD()){const e=i.kN();!e.Fz()&&e.Ez()&&(this._X(i,t),t++)}}for(const h of this.$q)for(const n of h.AD()){const r=n.kN();!r.Fz()&&r.Ez()&&this.GX(n)}this.t$.clear()}PX(){this.Qq={},this.s$=!0}GE(){return this.D7}fJ(){const t=this.uf,s=t.qb().wb();return"low"===t.Wk().BJ()||s&&t.NJ()||this.hz.dJ()||s&&t.D9()}RX(t){const s=this.uf.Wk();if(this.fJ()){t.EE(null),t.wE(0,0,0,0);const i={IM:this.uf.eO(),d2:t.Dw()||this.uf.NJ()||this.hz.dJ(),LJ:!!t.Dw()&&this.uf.NJ()};"low"===s.BJ()&&(i.width=s.PJ(),i.height=s.RJ()),this.D7=this.uf.WJ(i)}else this.D7=null}EX(t){this.uf.AX(t)&&(t.vE(!1),t.EE(null),t.Uw(),t.AE(this.D7))}FX(t){this.fJ()&&(t.vE(!1),this.OX(t,this.D7))}DX(t){t.EE(this.D7),t.ic(this.G$()),this.uf.D9()&&t.bE();const s=this.iJ(0);this.jJ(t,this.D7,s,!0),t.Dw()&&t.StartMeasuringRenderPassTime(0,1),this.FX(t),this.D7=null}kX(t,s){let i=null;this.uf.AX(t)&&(i=this.D7),t.EE(i),t.wE(0,0,0,0),this.uf.D9()&&t.bE();const e=this.iJ(s);this.jJ(t,i,e,!0),this.EX(t),t.ub(),this.uf.Wk().LX(s)}jJ(t,e,s,h){const n=s.filter(t=>t.J9());for(let s=0,i=n.length;s<i;){const r=n[s];if(r.N9()&&!r.pJ()){a.push(r);for(let t=s+1;t<i;++t){const o=n[t];if(!o.N9()||o.pJ())break;a.push(n[t])}if(2<=a.length||1===a.length&&a[0].z9()){this.NX(t,e,a),s+=a.length,M.Br(a);continue}M.Br(a)}r.gM(t,e,h&&0===s),++s}}OX(t,s){const i=this.hz.o9(),e=this.uf;0===i.length?(t.EE(null),t.Uw(),t.AE(s),t.OE(s),e.az(s)):(h.set(0,0,e.G9(),e.T9()),this.kF().A3(t,null,{F3:this,O3:3,devicePixelRatio:this.uf.oq(),D3:this.uf.lq()*this.r5(),L3:this.a5(),nF:h,rF:null,vA:!0}))}NX(e,h,t){t[0].dN()||(x.na(t[0].wN()),x.ea(1),e.ic(x)),this.uf.Wk(),e.vE(!0);const n=_,r=G,o=T;for(const a of t)a.Q9(),a.A9(n);const s=t[0],i=s.FJ(e);s.kJ(e);for(let s=0,i=n.length;s<i;){const l=n[s],u=l.CD(),c=u.PD();if(u.J5()&&u.YJ(c.XJ())){(!l.KJ()||0<u.ZJ())&&o.push(l);const f=l.CD().nB();r.push(l);let t=s+1;for(;t<i;++t){const d=n[t],p=d.CD();if(p.J5()&&p.YJ(p.PD().XJ())){if(p.nB()!==f)break;(d.KJ()?(0<p.ZJ()&&o.push(d),r):o).push(d)}}if(1!==r.length||r[0].QJ()){this.BX(e,h,r);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.CD(),y=g.PD();g.sq(!0),v(y,e),y.$J(m,g,e,h),g.sq(!1)}}else{v(c,e),c.$J(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.CD(),b=S.PD();v(b,e),b.$J(w,S,e,h)}}}s=t,M.Br(r),M.Br(o)}else++s}i&&e.VE(i),M.Br(n),I=null}BX(i,e,h){i.kE();for(let t=0,s=h.length;t<s;++t){const n=h[t],r=n.CD(),o=r.PD();r.iq(!0),v(o,i),o.eq(n,r,i)}i.LE();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.CD(),u=l.PD();v(u,i),u.$J(a,l,i,e),l.iq(!1)}i.BE()}bq(){const t={sx:this.u5(),sy:this.f5(),s:this.r5(),a:this.a5(),w:this.fm(),h:this.Gm(),ortho:this.D5(),vpX:this.b9(),vpY:this.v9(),fv:this.s$,persist:this.Qq,fx:this.hz.jv(),layers:{},dynamicLayers:[]};for(const s of this.$q)if(s.e9()){const i=s.L5();t.dynamicLayers.push({sid:s.i9(),name:s.Qc(),parentSid:i?i.i9():null,siblingIndex:s.t9(),data:s.bq()})}else t.layers[s.i9().toString()]=s.bq();return t}vq(t){this.N7=t.sx,this.B7=t.sy,this.k7=t.s,this.L7=t.a,this.Km=t.w,this.Zm=t.h,this.Rq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Eq=t.vpX),t.hasOwnProperty("vpY")&&(this.Aq=t.vpY),this.s$=!!t.fv,this.Qq=t.persist,this.hz.Vv(t.fx),this.uz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.w$(e);h&&h.vq(i)}if(t.hasOwnProperty("dynamicLayers")){this.C5(),this.uf.QL();const n=new Map,r=t.dynamicLayers;for(let t=r.length-1;0<=t;--t){const o=r[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.h$(),!this.y$(l)&&!this.w$(a)){let t,s;if(null===u)t=null,s=this.qq;else{if(!(t=this.w$(u)))continue;s=t.W5()}const d=M.an(M.g7,this,t,{name:l,sid:a,a7:!0});s.push(d);let i=n.get(s);i||(i=[],n.set(s,i)),i.push({Z4:d,siblingIndex:c}),d.vq(f)}}for(const[p,m]of n){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.Z4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.Qz(),this.c$(),this.l$()}oD(){return this.i$}uO(){return this.e$}WX(t){t.layout=this.oD();const s=this.uf,i=s.jX()&&!s.pO().KL();i&&e.StartMeasuringScriptTime(),this.e$.dispatchEvent(t),i&&e.AddScriptTime()}hX(t){return t.layout=this.oD(),this.e$.Kf(t)}nX(t){return t.layout=this.oD(),this.uf.hX(t)}VX(){this.UX(this.qq)}UX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Qc()),this.UX(e.W5(),s+1)}}}{const Rn=self.Ns;Rn.HX=class extends Rn.nn{#N8;#zX=[];#JX=new Map;#qX=new Map;#$X=null;#XX=[];#YX=null;#KX=0;#ZX=null;constructor(t){super(),this.#N8=t}ln(){this.#N8=null,this.#$X=null,this.#YX=null,this.#ZX=null,Rn.Br(this.#zX),this.#JX.clear(),this.#qX.clear(),Rn.Br(this.#XX)}vx(t){const s=Rn.an(Rn.Gq,this,this.#zX.length,t);this.#zX.push(s),this.#JX.set(s.Qc().toLowerCase(),s),this.#qX.set(s.i9(),s)}XD(){return this.#N8}QX(t){this.#YX=t}tY(){if(this.#YX)return this.#YX;if(this.#zX.length)return this.#zX[0];throw new Error("no first layout")}sY(t){return this.#JX.get(t.toLowerCase())||null}iY(t){return this.#qX.get(t)||null}eY(t){return t=Rn.mn(Math.floor(t),0,this.#zX.length-1),this.#zX[t]}uD(t){return"number"==typeof t?this.eY(t):this.sY(t.toString())}fD(){return this.#zX}U$(t){this.#$X=t}rD(){return this.#$X}hY(t){if(this.#XX.includes(t))throw new Error("layout already running");this.#XX.push(t)}nY(t){const s=this.#XX.indexOf(t);if(-1===s)throw new Error("layout not running");this.#XX.splice(s,1)}*rY(){this.#$X&&(yield this.#$X),this.#XX.length&&(yield*this.#XX)}aY(t){return this.#$X===t||this.#XX.includes(t)}vX(t){if(t)this.#KX++;else{if(this.#KX<=0)throw new Error("already unset");this.#KX--}}ZL(){return 0<this.#KX}mD(t){this.#ZX=t}K$(){this.#ZX=null}pD(){return!!this.#ZX}lY(){return this.#ZX}uY(){const t=this.rD();t&&t.c$()}cY(){const t=this.rD();t&&t.l$()}}}{const En=self.Ns,An=new RegExp("<(.+?)>","g");En.fY=class extends En.nn{constructor(t){super(),this.uf=t,this.dY=En.an(En.pY),this.mY=null,this.gY=[],this.yY=new Map,this.wY=new Map,this.SY=new Map,this.bY=[],this.vY=[],this.MY=[],this.xY=!1,this._Y=!1,this.GY=!1,this.TY=()=>this.IY(),this.CY=()=>this.PY(),this.RY=()=>this.EY(),this.AY=()=>this.FY(),this.OY=t=>this.DY(t.F6),this.kY=t=>this.LY(),this.NY=t=>this.BY(),this.WY=t=>this.jY(),this.VY=[],this.UY=0}ln(){this.HY(),this.TY=null,this.CY=null,this.RY=null,this.AY=null,this.OY=null,this.NY=null;for(const t of this.gY)t.PW(),t.ln();En.Br(this.gY),this.gY=null,this.dY.ln(),this.dY=null,En.Br(this.bY),this.bY=null,En.Br(this.vY),this.vY=null,En.Br(this.MY),this.MY=null,this.yY.clear(),this.yY=null,this.wY.clear(),this.wY=null,this.SY.clear(),this.SY=null,En.Br(this.VY),this.VY=null,this.uf=null}zY(){const t=this.uf.Uf();t.addEventListener("pretick",this.TY),t.addEventListener("tick2",this.CY),t.addEventListener("beforelayoutchange",this.RY),t.addEventListener("layoutchange",this.AY),t.addEventListener("instancedestroy",this.OY),t.addEventListener("beforeload",this.kY),t.addEventListener("afterload",this.NY),t.addEventListener("afterlayoutstart",this.WY)}HY(){const t=this.uf.Uf();t.removeEventListener("pretick",this.TY),t.removeEventListener("tick2",this.CY),t.removeEventListener("beforelayoutchange",this.RY),t.removeEventListener("layoutchange",this.AY),t.removeEventListener("instancedestroy",this.OY),t.removeEventListener("beforeload",this.kY),t.removeEventListener("afterload",this.NY),t.removeEventListener("afterlayoutstart",this.WY)}vx(t){this.dY.fc(t);const s=En.qY.JY(t,this);this.fc(s),this.$Y(s),this.SY.set(s.Qc(),0)}XY(t){const s=this.YY(),i=t.ZN(),e=s.ei(i),h=En.qY.XY(i+":"+this.SY.get(i),e,this);return this.KY(i),this.fc(h),h}KY(t){this.SY.set(t,this.SY.get(t)+1)}ZY(){for(const t of this.gY)if(!t.QY()){const s=t.ZN();this.KY(s)}}tK(){for(const t of this.SY.keys())this.SY.set(t,0)}fc(t){this.gY.push(t),this.yY.set(t.Qc().toLowerCase(),t)}M0(t){t.sK(),t.QY()||(En.zr(this.gY,t),En.zr(this.bY,t),En.zr(this.vY,t),En.zr(this.MY,t),this.yY.delete(t.Qc().toLowerCase()),this.iK(t),t.TW())||t.ln()}M4(t){this.uf.M4(t,this.mY,null)}XD(){return this.uf}YY(){return this.dY}eK(t){this.mY=t}hK(){return this.mY}*nK(){for(const t of this.gY)yield t}*rK(){for(const t of this.vY)yield t}oK(t,s){this.wY.has(t)||this.wY.set(t,new Set),this.wY.get(t).add(s)}$Y(t){for(const s of t.aK())this.oK(s,t)}iK(t){for(const[s,i]of this.wY.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.wY.delete(s)}lK(t){if(this.wY.has(t))return this.wY.get(t)}uK(t,s){if(s)for(const i of this.gY){const e=s.every(t=>i.cK(t.F6,t.trackId));if(e&&i.Qc().includes(t.Qc()))return i}}fK(t){return this.yY.get(t.toLowerCase())||null}dK(t){for(const s of this.bY)if(s.Qc()===t)return s;for(const i of this.vY)if(i.Qc()===t)return i;return null}*pK(i){if(An.test(i)){An.lastIndex=0;let t,s=new Set;do{if(t=An.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const n of s.values()){const r=this.fK(n);r&&(yield r)}s.clear()}else{const t=this.fK(i);t&&(yield t)}}*mK(t){for(const s of this.gY)s.EW(t)&&(yield s)}gK(t){this.bY.includes(t)||this.bY.push(t),this.yK()}wK(t){En.zr(this.vY,t),this.SK()}bK(t){this.vY.includes(t)?(t.vK(!0),t.MK(!1),t.xK(!1)):(t.vK(!1),t.MK(!0),t.xK(!1),this.bY.includes(t)||this.bY.push(t)),this.yK()}_K(t){t.vK(!1),t.MK(!1),t.GK(),En.zr(this.bY,t),this.SK()}TK(t){t.vK(!1),t.MK(!1),this.vY.includes(t)&&(t.xK(!0),this.MY.push(t),En.zr(this.vY,t)),this.bY.includes(t)&&t.xK(!0)}IK(t){t.vK(!1),t.MK(!1),t.xK(!1),t.BW(1),En.zr(this.vY,t)}CK(t){this.TK(t),t.GK()}IY(){if(!this.XD().Q$()&&this.xY&&!this._Y){for(this.GY=!0;this.bY.length;){const t=this.bY.pop();(t.PK()?(t.RK(),this.MY):(t.EK(),this.vY)).push(t),0!==t.AK()&&(this.UY=1)}const s=this.uf.FK(),i=this.uf.DK(),e=this.uf.jO();for(let t=this.vY.length-1;0<=t;t--){const h=this.vY[t];h&&h.kK(s,e,i)}this.GY=!1,0!==this.UY&&this.XD().DD()}}PY(){if(!this.XD().Q$()&&this.xY&&!this._Y){let i;for(let t=0,s=this.MY.length;t<s;t++){const e=this.MY[t];i=i||new Set,e.sK(),this.LK(e),i.add(e)}if(i){En.$r(this.MY,i);for(let t=this.UY=0,s=this.vY.length;t<s;t++)if(0!==this.vY[t].AK()){this.UY=1;break}}this.SK()}}LK(t){t.TW()||t.NK()&&t.BK()&&t.WK()&&t.jK()}yK(){this.xY||(this.xY=!0)}SK(){this.MY.length||this.vY.length||this.bY.length||this.GY||(this.xY=!1)}EY(){for(this._Y=!0;this.bY.length;)this._K(this.bY.pop());const t=new Set;for(const s of this.vY){const i=s.EY();i&&(s.sK(),t.add(s))}En.$r(this.vY,t),t.clear();for(const e of this.MY){const h=e.EY();h&&(e.sK(),t.add(e))}En.$r(this.MY,t),this.SK();for(const n of this.gY)n.VK()}FY(){this._Y=!1}DY(t){const s=t.kN(),i=this.lK(s);if(i)if(this.uf.Q$())this.VY.push(t);else for(const e of i)e.QY()||(e.TW()?this.M0(e):e.NK()||(this.LK(e),this.M0(e)))}LY(){for(const t of this.bY.map(t=>t))this.LK(t),this.M0(t);for(const s of this.vY.map(t=>t))this.LK(s),this.M0(s)}BY(){for(const t of this.VY)this.DY(t);En.Br(this.VY);for(const s of this.gY)s.BY()}jY(){const t=this.uf.lD(),s=t.rD();if(s)for(const i of this.gY){const e=i.UK();e&&s.Qc()===e&&this.bK(i)}}bq(){return{timelinesJson:this.HK(),scheduledTimelinesJson:this.zK(),playingTimelinesJson:this.JK(),markedForRemovalTimelinesJson:this.qK(),hasRuntimeListeners:this.xY,changingLayout:this._Y,isTickingTimelines:this.GY}}vq(t){t&&(this.tK(),this.$K(t.timelinesJson),this.XK(t.scheduledTimelinesJson),this.YK(t.playingTimelinesJson),this.KK(t.markedForRemovalTimelinesJson),this.xY=!t.hasRuntimeListeners,this._Y=!!t.changingLayout,this.GY=!!t.isTickingTimelines,this.ZY(),this.yK(),this.SK())}HK(){return this.gY.map(t=>t.bq())}$K(t){for(const s of t){let t=this.fK(s.name);if(t)t.vq(s);else{const i=this.ZK(s);if(!i)continue;const e=this.fK(i);(t=this.XY(e)).vq(s)}t.QK()||this.M0(t)}}ZK(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}zK(){return this.tZ(this.bY)}XK(t){this.sZ(t,this.bY)}JK(){return this.tZ(this.vY)}YK(t){this.sZ(t,this.vY)}qK(){return this.tZ(this.MY)}KK(t){this.sZ(t,this.MY)}iZ(t,s){if(s)for(const i of s)if(i===t.Qc())return!0;return!1}tZ(t){return t.map(t=>t.Qc())}sZ(t,s){const i=new Set;for(const e of s)this.iZ(e,t)||i.add(e);if(En.$r(s,i),t)for(const h of t){const n=this.fK(h);if(n){const r=s.find((s=>t=>t.Qc()===s)(h));r||s.push(n)}}}}}{const Fn=self.Ns,On=[0,0],Dn=[0,0],kn=[0,0],Ln=[0,0,0,0,0],Nn=new Array(4),Bn=[{x:0,y:0,t:0,Pt:0},{x:0,y:0,t:0,Pt:0},{x:0,y:0,t:0,Pt:0}],Wn={x:0,y:0,t:0,Pt:0};Fn.eZ=class{constructor(t,s){this.hZ=!1,this.nZ=t,this.rZ=[];let i=null;if(i=s?this.nZ.oZ(s):Fn.first(this.nZ.aZ())){const e=i.hj("offsetX"),h=i.hj("offsetY");if(e&&h){this.lZ=e,this.uZ=h;const n=e.cZ(),r=h.cZ();for(let t=1,s=Math.min(n.length,r.length);t<s;++t){const o=n[t],a=(o.fZ(),o.dZ()),l=r[t],u=(l.fZ(),l.dZ());a&&"cubic-bezier"===a.pZ()&&u&&"cubic-bezier"===u.pZ()?this.rZ.push(Fn.an(Fn.mZ,a,u,o,l,this.rZ.length)):(a&&"line"===a.pZ()&&u&&u.pZ(),this.rZ.push(Fn.an(Fn.gZ,o,l,this.rZ.length)))}this.hZ=!0}}}ln(){for(const t of this.rZ)t.ln();Fn.Br(this.rZ),this.rZ=null,this.nZ=null,this.lZ=null,this.uZ=null}yZ(){return this.hZ}wZ(){return this.rZ}SZ(t){const s="relative"===this.lZ.bZ()?t.Cv():0,i="relative"===this.uZ.bZ()?t.Ev():0;for(const e of this.rZ)e.SZ(s,i)}oy(s,i,t){let e=NaN,h=this.rZ.length;for(let t=0;t<h;t++){const n=this.rZ[t];if("cubic-bezier"===n.x_()){const r=n.oy(s,i);(isNaN(e)||r[3]<e)&&(e=r[3],kn[0]=r[2],kn[1]=n.LF())}}return kn}vZ(s,i,t){const e=t.MZ;Fn.me(e[0])||(e[0]=0),Fn.me(e[1])||(e[1]=1);let h=NaN,n=this.rZ.length;for(let t=0;t<n;t++){const r=this.rZ[t];if("cubic-bezier"===r.x_()){const o=r.xZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],kn[0]=o[2],kn[1]=r.LF())}}return kn}_Z(t,s){return this.rZ[s]._Z(t)}GZ(t,s){return this.rZ[s].GZ(t)}},Fn.mZ=class{constructor(t,s,i,e,h){this.Kg=h;const n=t.TZ("cubic-bezier"),r=i.TZ("cubic-bezier"),o=s.TZ("cubic-bezier"),a=e.TZ("cubic-bezier");this.IZ=t.CZ(),this.PZ=s.CZ(),this.RZ=t.CZ()+n.EZ(),this.AZ=s.CZ()+o.EZ(),this.FZ=i.CZ()+r.OZ(),this.DZ=e.CZ()+a.OZ(),this.kZ=i.CZ(),this.LZ=e.CZ(),this.NZ=0,this.BZ=0,this.WZ=0,this.jZ=0,this.VZ=0,this.UZ=0,this.HZ=0,this.zZ=0,this.JZ=0,this.qZ=0,this.$Z=0,this.XZ=0,this.YZ=0,this.KZ=0,this.ZZ=0,this.QZ=0,this.tQ=0,this.sQ=0,this.iQ=0,this.eQ=0,this.hQ=NaN,this.hZ=!1,this.nQ=100,this.rQ=new Array(this.nQ+1),this.rQ[0]=0,this.oQ=0,this.aQ=[],this.lQ=[];for(let t=0;t<100;t++)this.lQ.push({x:0,y:0,t:0,Pt:0});this.uQ()}ln(){Fn.Br(this.rQ),this.rQ=null,Fn.Br(this.aQ),this.aQ=null,Fn.Br(this.lQ),this.lQ=null}x_(){return"cubic-bezier"}LF(){return this.Kg}cQ(){return Math.floor(this.oQ/25)}fQ(){return 1/this.cQ()}SZ(t,s){this.dQ=t,this.pQ=s,this.rQ=new Array(this.nQ+1),this.rQ[0]=0,this.uQ(),this.NZ=this.IZ+this.dQ,this.BZ=this.PZ+this.pQ,this.WZ=this.RZ+this.dQ,this.jZ=this.AZ+this.pQ,this.VZ=this.FZ+this.dQ,this.UZ=this.DZ+this.pQ,this.HZ=this.kZ+this.dQ,this.zZ=this.LZ+this.pQ,this.JZ=3*(this.WZ-this.NZ),this.qZ=3*(this.jZ-this.BZ),this.$Z=3*(this.VZ-this.WZ),this.XZ=3*(this.UZ-this.jZ),this.YZ=3*(this.HZ-this.VZ),this.KZ=3*(this.zZ-this.UZ),this.ZZ=3*(this.WZ-this.NZ),this.QZ=3*(this.NZ+this.VZ-2*this.WZ),this.tQ=this.HZ-this.NZ+3*(this.WZ-this.VZ),this.sQ=3*(this.jZ-this.BZ),this.iQ=3*(this.BZ+this.UZ-2*this.jZ),this.eQ=this.zZ-this.BZ+3*(this.jZ-this.UZ)}Map(t){if(!this.hZ)return NaN;const s=this.mQ(t);return Dn[0]=this.gQ(s),Dn[1]=this.yQ(s),Dn}oy(t,s){const i=this.wQ(100),e=this.SQ(t,s,i),h=this.bQ(t,s,i,e);return Ln[0]=h.x,Ln[1]=h.y,Ln[2]=h.t,Ln[3]=h.Pt,Ln}xZ(t,s,i){const e=this.wQ(100),h=this.vQ(t,s,e,i),n=this.bQ(t,s,e,h);return Ln[0]=n.x,Ln[1]=n.y,Ln[2]=n.t,Ln[3]=n.Pt,Ln}_Z(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.JZ+e*this.$Z+h*this.YZ,r=i*this.qZ+e*this.XZ+h*this.KZ,o=Math.hypot(n,r);return On[0]=n/o,On[1]=r/o,On}GZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.JZ+e*this.$Z+h*this.YZ,r=i*this.qZ+e*this.XZ+h*this.KZ;return Math.atan2(r,n)}mQ(h){if(this.hZ){let t=h*this.rQ[this.nQ],s=0,i=this.nQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.rQ[e]<t?s=e+1:i=e;this.rQ[e]>t&&e--;const n=this.rQ[e];return n===t?e/this.nQ:(e+(t-n)/(this.rQ[e+1]-n))/this.nQ}}gQ(t){return this.hZ?self.yc.Fc("cubicbezier")(t,this.IZ+this.dQ,this.RZ+this.dQ,this.FZ+this.dQ,this.kZ+this.dQ):NaN}yQ(t){return this.hZ?self.yc.Fc("cubicbezier")(t,this.PZ+this.pQ,this.AZ+this.pQ,this.DZ+this.pQ,this.LZ+this.pQ):NaN}wQ(s){if(!(this.aQ.length>=(s=s||100))){this.aQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,n=this.ZZ*i,r=this.QZ*e,o=this.tQ*h,a=this.sQ*i,l=this.iQ*e,u=this.eQ*h,c=this.NZ+n+r+o,f=this.BZ+a+l+u;this.lQ[t].x=c,this.lQ[t].y=f,this.lQ[t].t=i,this.lQ[t].Pt=0,this.aQ[t]=this.lQ[t]}}return this.aQ}SQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.hQ))for(let t=0;t<100;t++){const r=e[t],o=r.x-s,a=r.y-i;r.Pt=o*o+a*a,r.Pt<h&&(h=r.Pt,n=t)}else{for(let t=this.hQ;t<this.hQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.Pt=u*u+c*c,l.Pt<h&&(h=l.Pt,n=t)}for(let t=this.hQ;t>this.hQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Pt=d*d+p*p,f.Pt<h&&(h=f.Pt,n=t)}}return this.hQ=n}vQ(s,i,e,h,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.hQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.Pt=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.Pt<n&&(n=o.Pt,r=t)}else{for(let t=this.hQ;t<this.hQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.Pt=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.Pt<n&&(n=u.Pt,r=t)}for(let t=this.hQ;t>this.hQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Pt=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Pt<n&&(n=d.Pt,r=t)}}return this.hQ=r}bQ(r,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,n=(h-e)/4;if(n<.001)break;Nn[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*n,d=f**2,p=f**3,m=this.ZZ*f,g=this.QZ*d,y=this.tQ*p,w=this.sQ*f,S=this.iQ*d,b=this.eQ*p,v=this.NZ+m+g+y,M=this.BZ+w+S+b,x=v-r,_=M-o,G=x*x+_*_;if(G<c){c=G,l=t,Wn.x=v,Wn.y=M,Wn.t=f,Wn.Pt=G,u=Wn;break t}const T=Bn[t-1];T.x=v,T.y=M,T.t=f,T.Pt=G,Nn[t]=T}Nn[3]=a[i],a=Nn}while(t++<20);return u}uQ(){this.hZ=!0;let s=this.gQ(0),i=this.yQ(0),e=0;for(let t=1;t<=this.nQ;t++){const h=this.gQ(.01*t),n=this.yQ(.01*t),r=s-h,o=i-n;e+=Math.hypot(r,o),this.rQ[t]=e,s=h,i=n}this.oQ=e}},Fn.gZ=class{constructor(t,s,i){this.Kg=i,this.MQ=t.CZ(),this.xQ=s.CZ(),this.dQ=0,this.pQ=0}ln(){}x_(){return"line"}LF(){return this.Kg}SZ(t,s){this.dQ=t,this.pQ=s}Cv(){return this.MQ+this.dQ}Ev(){return this.xQ+this.pQ}}}{const b=self.Ns;b.qY=class extends b.nn{constructor(t,s,i){super(),this.uf=i.XD(),this._Q=i,this.GQ=s,this.dn=t,this.TQ=[],this.IQ=0,this.CQ=null,this.PQ=0,this.RQ(),this.EQ=null,this.AQ=null,this.FQ=0,this.OQ=0,this.DQ=1,this.kQ=0,this.LQ=1,this.NQ=!1,this.BQ=!1,this.WQ=!1,this.jQ=!0,this.VQ=!1,this.UQ=!1,this.HQ=-1,this.zQ=!1,this.JQ=!1,this.qQ=!1,this.$Q=!1,this.XQ=NaN,this.YQ=[""],this.KQ="",this.ZQ=!1,this.UY=0,this.QQ=0,this.ttt=null}static JY(t,s){const i=s.YY(),e=i.stt(),h=i.ei(t[e]),n=b.an(b.qY,t[e],h,s);return n.itt(!0),n}static XY(t,s,i){return b.an(b.qY,t,s,i)}ln(){if(!this.TW()){const t=this.uf.Uf();this._Q._K(this),this._Q.CK(this);for(const s of this.TQ)s.ln();b.Br(this.TQ),this.TQ=null,this.uf=null,this._Q=null,this.GQ=null,this.VQ=!0,this.EQ=null,this.AQ=null,this.ett(t)}}ett(t){const s=b.an(b.Event,"timelinestatereleased");s.htt=this,t.dispatchEvent(s)}x_(){return 0}RQ(){for(const t of this.GQ.ott().ntt())this.IQ=this.TQ.push(b.att.vx(this,t))}ltt(){return this._Q}XD(){return this.uf}aZ(){return this.TQ}utt(e,h,n,r){if(this.QQ){let i;for(let s=0;s<this.TQ.length;s++){let t=this.TQ[s];if(e===t.ZW()){const o=t.hj(n);o&&h.constructor===o.ctt().constructor&&o.bZ()===r.bZ()&&(i=i||[]).push(o)}}return i}}QK(){return!!this.TQ.length}oZ(t){for(const s of this.TQ)if(b.wh(s.ij(),t))return s;return null}ftt(t){for(const s of this.TQ)if(!s.dtt()&&b.wh(s.Qc(),t))return s;return null}X8(t){this.dn=t}Qc(){return this.dn}ptt(){return this.GQ}ZN(){return this.GQ.Qc()}OW(){return this.GQ.OW()}FW(t){this.GQ.FW(t)}mtt(){return this.GQ.mtt()}gtt(t){this.GQ.gtt(t)}ytt(){return this.GQ.ytt()}wtt(t){this.GQ.wtt(t)}bZ(){return this.GQ.bZ()}Stt(t){this.GQ.bZ(t)}KW(t){for(const s of this.aZ())s.KW(t)}kW(){return this.GQ.kW()}DW(t){return this.GQ.DW(t)}NW(){return this.GQ.NW()}LW(t){return this.GQ.LW(t)}J6(){return this.GQ.J6()}btt(t){return this.GQ.btt(t)}BW(t){return this.DQ=t}WW(){return this.DQ}UK(){return this.GQ.UK()}vtt(){return this.GQ.vtt()}Mtt(){return this.GQ.Mtt()}xtt(){return this.kQ}_tt(){return!this.IsPlaying()||0<this.DQ}VW(){return this.EQ||(this.EQ=new Promise(t=>{this.AQ=t})),this.EQ}GK(){this.EQ&&(this.AQ(),this.EQ=null,this.AQ=null)}Gtt(t){this.YQ=b.qY.Ttt(t),this.ZQ=!0}jW(){return this.YQ}Itt(){return this.ZQ&&(this.KQ=this.YQ.join(" ")),this.ZQ=!1,this.KQ}EW(t){if(!this.YQ)return!1;if(!this.YQ.length)return!1;const s=b.qY.Ttt(t);return!!s&&!!s.length&&s.every(b.qY.Ctt,this)}Ptt(){b.uX.Timeline&&this.constructor===b.qY&&(b.uX.Timeline.aX.PushTriggerTimeline(this),this._Q.M4(b.uX.Timeline.aX.OnTimelineStarted),this._Q.M4(b.uX.Timeline.aX.OnTimelineStartedByName),this._Q.M4(b.uX.Timeline.aX.OnTimelineStartedByTags),this._Q.M4(b.uX.Timeline.aX.OnAnyTimelineStarted),b.uX.Timeline.aX.PopTriggerTimeline())}Rtt(){this.HQ=this.uf.Ett()}jK(){this.qQ||(this.qQ=!0,b.uX.Timeline&&this.constructor===b.qY&&(b.uX.Timeline.aX.PushTriggerTimeline(this),this._Q.M4(b.uX.Timeline.aX.OnTimelineFinished),this._Q.M4(b.uX.Timeline.aX.OnTimelineFinishedByName),this._Q.M4(b.uX.Timeline.aX.OnTimelineFinishedByTags),this._Q.M4(b.uX.Timeline.aX.OnAnyTimelineFinished),b.uX.Timeline.aX.PopTriggerTimeline()))}vK(t){this.NQ=t}Att(){return this.HQ===this.uf.Ett()}IsPlaying(t=!1){return!!this.Att()||!(!this.Ftt()||t)||this.NQ}Ott(){return this.IsPlaying(!0)}HW(){return this.Dtt()}Dtt(){return!(this.TW()||this.Ftt()||this.Ott()||this.BK())}MK(t){this.BQ=t}Ftt(){return this.BQ}ktt(t){this.jQ=t;const s=this.gA();(s<=0||s>=this.OW())&&(this.jQ=!0)}BK(){return this.jQ}TW(){return this.VQ}xK(t){this.UQ=t}PK(){return this.UQ}Ltt(t){this.zQ=t}Ntt(){return this.zQ}itt(t){this.JQ=!!t}QY(){return this.JQ}WK(){return this.WQ}gA(){return this.FQ}AW(t){const s=this.gA();this.Btt(t),this.ktt(!1),this.BK()||this.Ltt(!0),!this.Ott()&&!this.Ftt()&&this.WQ||(this.Ott()||this.Ftt()||this.WQ?this.Ott()?this.PW():this.Ftt()&&(this._Q._K(this),this.Wtt()):this.Wtt()),this.jtt(),this.Vtt(this.gA(),!1,!0,!0,s),this.Utt(),this.UY&&this.XD().DD(),this.Htt()}Btt(t){(t=b.me(t)?t:this.OW())<0?this.FQ=0:t>=this.OW()?this.FQ=this.OW():this.FQ=t}ztt(t){(t=b.me(t)?t:this.OW())<0?this.FQ=0:t>=this.OW()?this.FQ=this.OW():this.FQ=t;for(const s of this.TQ)s.Jtt()}Htt(){b.uX.Timeline&&this.constructor===b.qY&&(b.uX.Timeline.aX.PushTriggerTimeline(this),this._Q.M4(b.uX.Timeline.aX.OnTimeSet),this._Q.M4(b.uX.Timeline.aX.OnTimeSetByName),this._Q.M4(b.uX.Timeline.aX.OnTimeSetByTags),b.uX.Timeline.aX.PopTriggerTimeline())}qtt(){if(!this.kW())if(this.NW()&&1===this.kQ){if(this._tt()){if(this.gA()>=this.OW())return!1}else if(this.gA()<=0)return!1}else if(!this.kW()&&!this.NW())if(this._tt()){if(this.gA()>=this.OW())return!1}else if(this.gA()<=0)return!1;return!0}RW(){this.TW()||this.qtt()&&this.Play(!0)}Play(t=!1){return!this.TW()&&!this.Ftt()&&(this.Ott()&&this.Att()?this.$tt():!this.Ott()&&!!(this.BK()||t||this.Ntt())&&this.Xtt())}$tt(){return this.Ltt(!1),this._Q.wK(this),this._Q.bK(this),this.VW(),!0}Xtt(){return this.Ltt(!1),this._Q.bK(this),this.VW(),!0}PW(t=!1){this.TW()||(this.ktt(t),this._Q.TK(this),this.BK()&&this.GK())}u0(t=!0,s=!1){if(!this.TW()){if(!this.Ott()&&this.Ftt())return this._Q._K(this);if(!this.BK()){this.PW(!0),this._tt()?this.Btt(0):this.Btt(this.OW());const i=this.gA();this.jtt(),s?this.Ytt(i):this.Vtt(i,!1,!1,!0),t&&this.Htt(),this.Utt(),this.UY&&t&&this.XD().DD()}}}Ktt(){this.u0(!1,!0)}Ytt(t){this.Vtt(t,!1,!1,!0,NaN,!1,!0)}EY(){if(!this.TW()){if(!this.XD().Q$()&&this.Ztt())return!1;this._Q.IK(this),this.XD().Q$()||this.Ktt()}return!0}Wtt(){this.EK(!0)}RK(){this.EK(!1,!0),this.vK(!1),this.MK(!1)}EK(t=!1,s=!1){if(!this.PK()||s){if(t){this.qQ=!1,this.WQ=!0,this.$Q=!0,this.jtt();for(const i of this.TQ)i.EK()}else if(this.vK(!0),this.MK(!1),this.Ptt(),this.BK()){this.HQ=-1,0!==this.kQ&&(this.DQ=Math.abs(this.DQ)),this.kQ=0,this.LQ=1,this.jQ=!1,this.qQ=!1,this.WQ=!0,this.$Q=!0,this._tt()?this.Btt(0):this.Btt(this.OW()),this.jtt();for(const e of this.TQ)e.EK()}else{this.$Q=!0,this.qQ=!1,this.jtt();for(const h of this.TQ)h.Qtt()}this.Utt()}}AK(){return this.UY}jtt(){this.QQ=0;for(const t of this.TQ)t.aP()&&(this.QQ=1)}Utt(){this.UY=0;for(const t of this.TQ)t.tst(),0===this.UY&&1===t.AK()&&(this.UY=1),this.CQ||1!==t.sst()||(this.CQ||(this.CQ=[]),this.PQ=this.CQ.push(t))}kK(t,s,i){if(this.Mtt()){if(0===t&&0===this.XQ)return;this.XQ=t,t=i}else{if(0===i&&0===this.XQ)return;t=this.XQ=i,s=1}const e=this.FQ+this.OQ,h=t*s*this.DQ,n=e+h,r=this.GQ.ist;n<0?(this.FQ=0,this.OQ=-n):r<=n?(this.FQ=r,this.OQ=this.FQ-n):(this.FQ=n,this.OQ=0);let o=!1,a=!1,l=this.kW(),u=this.NW();l||u?l&&!u?0<this.DQ?this.FQ>=r&&(this.ztt(0),a=!0):this.FQ<=0&&(this.ztt(r),a=!0):!l&&u?0<this.DQ?this.FQ>=r&&(this.Btt(r),this.BW(-1*this.WW()),a=!0,1===this.kQ?this.LQ<this.J6()?(this.LQ++,this.kQ=0):o=!0:0===this.kQ&&(this.kQ=1)):this.FQ<=0&&(this.Btt(0),this.BW(-1*this.WW()),a=!0,1===this.kQ?this.LQ<this.J6()?(this.LQ++,this.kQ=0):o=!0:0===this.kQ&&(this.kQ=1)):l&&u&&(0<this.DQ?this.FQ>=r&&(this.Btt(r),this.BW(-1*this.WW()),a=!0,this.kQ++,b.wrap(this.kQ,0,2)):this.FQ<=0&&(this.Btt(0),this.BW(-1*this.WW()),a=!0,this.kQ++,b.wrap(this.kQ,0,2))):0<this.DQ?this.FQ>=r&&(this.LQ<this.J6()?(this.LQ++,this.ztt(0),a=!0):(this.Btt(r),o=!0)):this.FQ<=0&&(this.LQ<this.J6()?(this.LQ++,this.ztt(r),a=!0):(this.Btt(0),o=!0));let c,f=this.IQ;if(o){for(c=0;c<f;c++)this.TQ[c].est();this.PW(!0),this.Rtt()}else{const d=this.PQ;for(c=0;c<d;c++)this.CQ[c].hst();if(1===this.QQ)for(c=0;c<f;c++){const p=this.TQ[c],m=p.nst(),g=this.FQ-m,y=e-m;g<0&&0<y?(this.FQ=m<0?0:r<=m?r:m,p.Uc(m,!0,!1,a,this.$Q,!1)):p.Uc(this.FQ,!0,!1,a,this.$Q,!1)}else for(c=0;c<f;c++)this.TQ[c].Uc(this.FQ,!0,!1,a,this.$Q,!1);for(c=0;c<d;c++)this.CQ[c].rst();this.$Q&&(this.$Q=!1)}}Vtt(s,i=!1,e=!1,h=!1,n=NaN,t=!1,r=!1){for(const o of this.TQ)o.hst();for(const a of this.TQ){let t=s;if("number"==typeof n&&!isNaN(n)){const l=this.gA(),u=l-a.nst(),c=n-a.nst();u<0&&0<c&&(t=a.nst(),this.Btt(t))}a.Uc(t,i,e,h,this.$Q,r)}for(const f of this.TQ)f.rst();this.$Q&&t&&(this.$Q=!1)}ost(){const t=this.GQ.ott().ast(),s=b.att.vx(this,t);return this.IQ=this.TQ.push(s),s}sK(){if(!this.TW())for(const t of this.TQ)t.lst()}VK(){for(const t of this.TQ)t.VK()}ust(){for(const t of this.TQ)t.cst()}fst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.TQ[i];return e?(e.dst(s),void this._Q.oK(s.kN(),this)):void 0}for(const h of this.TQ)if(h.dtt())if(t){if(h.ij()===t){h.dst(s),this._Q.oK(s.kN(),this);break}}else if(!h.pst()){h.dst(s),this._Q.oK(s.kN(),this);break}}}cK(t,s){for(const i of this.TQ)if(i.dtt())if(s){if(s===i.ij()&&t===i.ZW())return!0}else if(t===i.ZW())return!0;return!1}NK(){return this.TQ.some(t=>!t.dtt()||t.mst())}Ztt(){return this.TQ.some(t=>{if(t.dtt()){if(!t.mst())return!1;const s=t.kN();return!!s&&s.Fz()}return!1})}hj(t){for(const s of this.aZ())for(const i of s.gst())if(i.yst()===t)return i}wst(t){for(const s of this.TQ)if(t===s.ZW())return s;return null}Sst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.aZ())for(const h of e.bst()){const n=s.every(t=>h.vst(t));if(n)return h}}aK(){const t=[];for(const s of this.aZ())t.push(s.kN());return t.filter(t=>t)}BY(){for(const t of this.aZ())t.BY()}bq(){return{tracksJson:this.Mst(),name:this.dn,playheadTime:this.gA(),playbackRate:this.DQ,pingPongState:this.kQ,currentRepeatCount:this.LQ,isPlaying:this.NQ,isScheduled:this.BQ,initialStateSet:this.WQ,finishedTriggers:this.qQ,complete:this.jQ,released:this.VQ,markedForRemoval:this.UQ,completedTick:this.HQ,implicitPause:this.zQ,isTemplate:this.JQ,tags:this.YQ.join(" "),stringTags:this.KQ,tagsChanged:this.ZQ,firstTick:this.$Q}}vq(t){t&&(this.xst(t.tracksJson),this.dn=t.name,this.FQ=t.playheadTime,this.DQ=t.playbackRate,this.kQ=t.pingPongState,this.LQ=t.currentRepeatCount,this.NQ=!!t.isPlaying,this.BQ=!!t.isScheduled,this.WQ=!!t.initialStateSet,this.qQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.jQ=!!t.complete,this.VQ=!!t.released,this.UQ=!!t.markedForRemoval,this.HQ=t.completedTick,this.zQ=!!t.implicitPause,this.JQ=!!t.isTemplate,this.YQ=t.tags.split(" "),this.KQ=t.stringTags,this.ZQ=!!t.tagsChanged,this.$Q=!!t.firstTick)}Mst(){return this.TQ.map(t=>t.bq())}xst(t){this.ust(),t.forEach((t,s)=>{const i=this.TQ[s];i.vq(t)}),this.TQ.filter(t=>t.mst())}static Ctt(t){const s=this.jW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Ttt(t){if(b.We(t))return t.slice(0);if(b.Ge(t))return t.split(" ");throw new Error("invalid tags")}_st(){return this.ttt||(this.ttt=b.an(self.JW,this)),this.ttt}}}{const jn=self.Ns;jn.att=class extends jn.nn{constructor(t,s){super(),this.nZ=t,this.Gst=s,this.Tst=s.ott(),this.Ist=NaN,this.Cst=NaN,this.Pst=null,this.Rst=null,this.Est=!1,this.iP=0<s.nst(),this.Ast=!1,this.Fst=!1,this.Ost=NaN,this.Dst=null,this.kst=this.Gst.Nst().Lst(),this.Bst=[],this.Wst(),this.jst=0,this.UY=0,this.Vst=0}static vx(t,s){return jn.an(jn.att,t,s)}ln(){this.kst=null;for(const t of this.Bst)t.ln();jn.Br(this.Bst),this.Bst=null,this.nZ=null,this.Pst=null,this.Rst=null,this.Gst=null,this.Dst=null}Wst(){for(const t of this.Gst.Hst().Ust())this.Bst.push(jn.zst.vx(this,t))}lst(){for(const t of this.Bst)t.lst()}VK(){for(const t of this.Bst)t.VK();this.Pst=null,this.Rst=null}Jst(){return this.nZ}XD(){return this.nZ.XD()}bst(){return this.kst||(this.kst=this.Gst.Nst().Lst()),this.kst}gst(){return this.Bst}hj(s){for(let t=0;t<this.Bst.length;t++){const i=this.Bst[t];if(i.yst()===s)return i}}qst(){this.Pst||this.ZW()}$st(){return!!this.Pst&&!this.Pst.i8()}mst(){if(!this.dtt())return!1;const t=this.Xst(),s=this.XD().xD(t);return!!s&&!s.i8()}kN(){if(this.dtt()){const t=this.Yst();if(-1!==t)return this.XD().xz(t)}}Kst(){return this.nZ.aZ().indexOf(this)}cst(){this.Pst=null,this.Ist=NaN,this.Rst=null,this.Cst=NaN,this.Est=!0}pst(){return!!this.Pst}ZW(){if(!this.Est){if(!this.Pst||!this.$st()){const t=this.Xst();this.Pst=this.XD().xD(t)}return this.Pst}}dst(t){if(this.Est=!1,this.Pst!==t){this.VK(),this.Pst=t,this.Cst=t.kN().LF(),this.Ist=t.YN(),this.Rst=t.CD();for(const s of this.Zst()){const i=s.Qst,e=s.tit,h=i.sit();switch(h){case"instance-variable":{e.iit();const n=t.kN(),r=n.eit(s.name),o=n.hit(r),a=n.nit(r);o===s.name&&a===s.type&&e.rit(r);break}case"behavior":{const l=s.R6,u=this.kN(),c=t.kN(),f=e.A6(c);if(l&&f){const d=l.Qc();u.oit(d),c.oit(d),e.iit(),e.ait(f.i9())}break}}}}}*Zst(){for(const t of this.Bst){const s=t.ctt(),i=this.kN(),e={Qst:t,tit:s};switch(t.sit()){case"world-instance":e.property=t.yst();break;case"instance-variable":{const h=s.iit();e.name=i.hit(h),e.type=i.nit(h);break}case"effect":{const n=i.s5(),r=s.lit(n);e.uit=r;break}case"behavior":{const o=s.A6(i);e.R6=o;break}case"plugin":e.RL=i.EL()}yield e}}CD(){if(!this.Rst||!this.$st()){const t=this.ZW();t&&(this.Rst=t.CD())}return this.Rst}cit(){return this.Gst}Xst(){return isNaN(this.Ist)?this.Gst.Xst():this.Ist}fit(t){this.Gst.fit(t)}ytt(){return this.Gst.ytt()}wtt(t){this.Gst.wtt(t)}bZ(){return this.Gst.bZ()}ij(){return this.Gst.ij()}nst(){return this.Gst.nst()}dit(){return this.Gst.dit()}pit(t){this.Gst.pit(t)}Stt(t){this.Gst.Stt(t)}KW(t){for(const s of this.bst())s.KW(t);for(const i of this.gst())i.KW(t)}mit(){return this.Gst.mit()}git(t){this.Gst.git(t)}Yst(){return isNaN(this.Cst)?this.Gst.Yst():this.Cst}yit(t){this.Gst.yit(t)}wit(t){this.Gst.wit(t)}Sit(){const t=this.ZW();if(t){const s=t.M6();if(s.bit())return t.M6().Sit()}return this.Gst.Sit()}vit(t){this.Gst.vit(t)}Mit(){const t=this.ZW();if(t){const s=t.M6();if(s.bit())return t.M6().Mit()}return this.Gst.Mit()}x_(){return this.Gst.x_()}Qc(){return this.Gst.Qc()}dtt(){return 0===this.x_()}xit(){return 1===this.x_()}_it(){return 2===this.x_()}Git(){return this.jst}AK(){return this.UY}sst(){return this.Vst}aP(){return this.iP}Jtt(){for(const t of this.Bst)t.Jtt()}EK(){if(this.qst(),this.$st()||!this.dtt()){const t=this.Jst(),s=t._tt(),i=s?0:this.dit();for(const h of this.Bst)h.EK(i),0===this.jst&&1===h.Git()&&(this.jst=1),0===this.UY&&1===h.AK()&&(this.UY=1);this.Vst=0;const e=this.Bst.some(t=>t.sst());e&&(this.Vst=1),this.Dst=this.Tit(i),this.Ast=!1,this.Fst=!1,this.Uc(i),this.Iit(this.Tit(i))}}Qtt(){if(this.qst(),this.$st()||!this.dtt()){this.nZ._tt();const t=this.nZ.gA()-this.nst();this.Dst=this.Tit(t);for(const s of this.Bst)s.Qtt(t)}}est(){if(!this.Jst().BK()&&(this.qst(),this.$st()||!this.dtt())&&!this.iP){const t=this.nZ.gA(),s=this.nst()+this.dit();s<=t?this.Uc(this.dit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Uc(0,!0,!1,!0,!1,!1,!0)}}tst(){for(let t=0,s=this.Bst.length;t<s;t++){const i=this.Bst[t];i.tst(),0===this.jst&&1===i.Git()&&(this.jst=1),0===this.UY&&1===i.AK()&&(this.UY=1)}}hst(){const s=this.Bst.length;for(let t=0;t<s;t++)this.Bst[t].hst()}Uc(i,t=!1,e=!1,h=!1,s=!1,n=!1,r=!1){this.Pst||this.ZW();const o=this.Pst&&!this.Pst.i8(),a=0===this.Gst.wf;if((o||!a)&&!(n&&a&&this.kN().Fz()||(i-=this.nst())<0)){this.Cit(i,t),this.Pit(i,t,s);for(let t=0,s=this.Bst.length;t<s;t++)this.Bst[t].Uc(i,e,h,r);this.Rit(i,t),0!==this.jst&&(this.Rst||(this.Rst=this.Pst.CD()),this.Rst)&&this.Rst.Q4()}}rst(){const s=this.Bst.length;for(let t=0;t<s;t++)this.Bst[t].rst()}Cit(t,s){if(s&&this.iP&&!this.Ast){const i=this.Jst();if(i._tt()){if(t<0)return}else if(t>this.dit())return;for(const e of this.Bst)e.EK();this.Ast=!0}}Rit(t,s){if(s&&this.iP&&!this.Fst){const i=this.Jst();if(i._tt()){if(t>=this.dit()){for(const e of this.Bst)e.Uc(this.dit(),!1,!0);this.Fst=!0}}else if(t<=0){for(const h of this.Bst)h.Uc(0,!1,!0);this.Fst=!0}}}Pit(t,s,i){if(!i&&s&&jn.uX.Timeline){const e=this.Jst(),h=this.Dst.fZ(),n=this.Dst.gA(),r=h?h.gA():e.OW();if(t<=n||r<=t)if(this.Dst=this.Tst.Eit(t,this.Gst),e._tt())h&&this.Iit(this.Dst);else{const o=this.Dst.fZ();o&&this.Iit(o)}}}Tit(t){const s=this.Tst.Ait(t,this.Gst);return s||this.Tst.Eit(t,this.Gst)}Iit(t){if(jn.uX.Timeline){const s=this.Jst(),i=s.ltt();jn.uX.Timeline.aX.PushTriggerTimeline(s),jn.uX.Timeline.aX.PushTriggerKeyframe(t),i.M4(jn.uX.Timeline.aX.OnAnyKeyframeReached),i.M4(jn.uX.Timeline.aX.Iit),jn.uX.Timeline.aX.PopTriggerTimeline(s),jn.uX.Timeline.aX.PopTriggerKeyframe(t)}}Fit(){const t=this.Gst.Nst(),s=t.Oit();return s}Dit(){const t=this.Gst.Hst(),s=t.kit(),i=jn.zst.vx(this,s);return this.Bst.push(i),i}Lit(t){const s=this.Gst.Nst();s.Nit(t)}Bit(t){for(const s of this.Bst)s.Bit(t)}Wit(){for(const t of this.Bst)t.Wit()}jit(){if(this.qst(),this.$st()||!this.dtt())for(const t of this.Bst)t.jit()}Vit(){if(this.qst(),this.$st()||!this.dtt()){let t=!1;for(const s of this.Bst){const i=s.Vit();!t&&i&&(t=!0)}if(t){const e=this.Fit();e.AW(this.Jst().gA()),e.KW("noease"),e.git(!0),e.Gtt("")}}}BY(){isNaN(this.Ost)||this.Uit(this.Ost),this.Ost=NaN}bq(){const t=this.ZW(),s=t?t.YN():this.Xst();return{propertyTracksJson:this.Hit(),lastKeyframeDataItemJson:this.zit(),initialStateOfNestedSet:this.Ast,endStateOfNestedSet:this.Fst,instanceUid:s,cleared:this.Est}}vq(t){if(t){this.Jit(t.propertyTracksJson),this.qit(t.lastKeyframeDataItemJson),this.Ost=t.instanceUid,this.Ast=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Ast=t.initialStateOfNestedSet),this.Fst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Fst=t.endStateOfNestedSet),this.Est=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Bst)0===this.jst&&1===s.Git()&&(this.jst=1),0===this.UY&&1===s.AK()&&(this.UY=1);this.Vst=0,this.Bst.some(t=>t.sst())&&(this.Vst=1)}}zit(){const t=this.Gst.Nst();return t.$it(this.Dst)}Hit(){return this.Bst.map(t=>t.bq())}Jit(t){t.forEach((t,s)=>{const i=this.Bst[s];i.vq(t)})}Uit(t){if(jn.me(t)){const s=this.XD().xD(t);if(s){const i=this.Jst();i.fst(this.Gst.ij(),s,this.Kst())}}}qit(t){const s=this.Gst.Nst();this.Dst=s.Xit(t)}}}{const Vn=self.Ns;Vn.zst=class extends Vn.nn{constructor(t,s){super(),this.Yit=t,this.Kit=s,this.Zit=s.Hst(),this.jst=0,this.UY=0,this.Vst=0,this.Qit=this.ctt(),this.tet=this.Kit.eet().iet(),this.het=null,this.net=null}static vx(t,s){return Vn.an(Vn.zst,t,s)}ln(){this.Yit=null,this.Qit&&(this.Qit.ln(),this.Qit=null),this.tet=null,this.Kit=null,this.Zit=null}Git(){return this.jst}AK(){return this.UY}sst(){return this.Vst}ret(){return!!this.net}oet(t){this.net=t}aet(){return this.net}let(){return this.Yit}uet(){return this.Kit}Hst(){return this.Zit}Jst(){return this.Yit.Jst()}XD(){return this.Yit.XD()}ZW(){return this.Yit.ZW()}ctt(){if(!this.Qit){let t=this.Kit.sit(),s;switch(t){case"behavior":s=new Vn.zst.cet(this);break;case"effect":s=new Vn.zst.fet(this),this.UY=1;break;case"instance-variable":s=new Vn.zst.det(this);break;case"plugin":s=new Vn.zst.pet(this),this.UY=1;break;case"world-instance":s=new Vn.zst.met(this),this.UY=1,this.jst=1;break;case"value":s=new Vn.zst.yet(this);break;case"audio":s=new Vn.zst.wet(this)}this.Qit=s}return this.Qit}sit(){return this.Kit.sit()}bet(t){this.Kit.bet(t)}vet(){return this.Kit.Met()}xet(t){this.Kit._et(t)}ej(){return this.ctt().Get()}yst(){return this.Kit.Tet()}Iet(t){this.Kit.Cet(t)}Pet(){return this.Kit.x_()}Ret(t){this.Kit.Eet(t)}Aet(){return this.Hst().Fet(this.Kit).x_()}Oet(){return this.Kit.Oet()}Det(t){this.Kit.Det(t)}ket(){return this.Kit.ket()}Let(t){this.Kit.Let(t)}mit(){return this.Kit.mit()}git(t){this.Kit.git(t)}ytt(){return this.Kit.ytt()}wtt(t){this.Kit.wtt(t)}bZ(){return this.Kit.bZ()}Stt(t){this.Kit.Stt(t)}KW(t){for(const s of this.Net())s.KW(t)}Bet(){return this.Kit.Bet()}Net(){return this.tet||(this.tet=this.Kit.eet().iet()),this.tet}cZ(){return this.Kit.eet().cZ()}Wet(t){return this.Zit.Wet(t,this.Kit)}jet(t){return this.Zit.jet(t,this.Kit)}Vet(t){let s=this.Zit.Wet(t,this.Kit),i;return i=s?this.Zit.Uet(t,this.Kit):(s=this.Zit.jet(t,this.Kit),this.Zit.Het(t,this.Kit)),{start:s,end:i}}*zet(){for(const t of this.Net())yield t.CZ()}*Jet(){for(const t of this.Net())yield t.gA()}lst(){this.ctt().lst()}VK(){this.ctt().VK()}qet(){return this.ctt().qet()}Jtt(){this.ctt().Jtt()}EK(t){this.ctt().EK(),this.het=this.$et(t),this.tst()}Qtt(t){this.ctt().Qtt(),this.het=this.$et(t)}tst(){const t=this.let();if(this.Vst=0,t.dtt()){const s=this.Jst(),i=t.ZW(),e=this.ctt(),h=this.yst(),n=e.Xet();if(n){const r=s.utt(i,e,h,this);r&&r.length&&(this.Vst=1)}else this.Vst=0}}$et(t){const s=this.Jst(),i=this.Zit.Wet(t,this.Kit);return i||(s._tt()?this.Zit.jet(t,this.Kit):this.Zit.Het(t,this.Kit))}hst(){this.Qit.hst()}Uc(t,s=!1,i=!1,e=!1){let h,n,r=!1;if(s)h=this.Zit.jet(t,this.Kit);else{if(this.het){const o=this.Jst(),a=this.het.fZ(),l=this.het.gA(),u=a?a.gA():o.OW();(t<=l||u<=t)&&(this.het=this.Zit.jet(t,this.Kit),r=!0)}else this.het=this.Zit.jet(t,this.Kit),r=!0;h=this.het}h&&(n=h.fZ()),this.Qit.Uc(t,h,n,s,i,e,r)}Yet(t){if(this.het){const e=this.Jst(),h=this.het.fZ(),n=this.het.gA(),r=h?h.gA():e.OW();(t<=n||r<=t)&&(this.het=this.Zit.jet(t,this.Kit))}else this.het=this.Zit.jet(t,this.Kit);const s=this.het,i=s.fZ();return this.Qit.Yet(t,s,i)}Ket(t,s,i){return this.Qit.Yet(t,s,i)}rst(){this.Qit.rst()}static Zet(t,s){const i=s.uet(),e=s.Zit;return e.jet(t,i)}static Qet(t,s){const i=s.uet(),e=s.Zit;return e.Het(t,i)}tht(){const t=this.Kit.eet(),s=t.sht();return this.het=null,s}Bit(t){this.het=null;const s=this.Kit.eet();s.iht(t)}Wit(){this.ctt().Wit()}jit(){const t=this.ctt().jit();if(t){const s=this.Zit.Fet(this.Kit),i=this.ctt().qet();s.eht(i)}}Vit(){const t=this.ctt().Vit();return t&&this.hht(),this.ctt().nht(),t}hht(){const t=this.Jst().gA(),s=this.ctt(),i=Vn.zst.Zet(t,this),e=this.tht();e.Eet(i.x_()),e.AW(t),e.KW(i.rht()),e.git(!0),e.oht(s.aht()),e.eht(s.qet())}bq(){return{sourceAdapterJson:this.ctt().bq()}}vq(t){t&&this.ctt().vq(t.sourceAdapterJson)}}}{const Un=self.Ns,Hn=Un.zst;Hn.met=class{constructor(t){this.lht=t,this.uht=null,this.cht()}ln(){this.uht&&(this.uht.ln(),this.uht=null),this.lht=null}Xet(){return this.uht.Xet()}hj(){return this.lht}lst(){this.uht&&this.uht.lst()}VK(){this.uht&&this.uht.VK()}cht(){return this.uht||(this.uht=this.fht()),this.uht}iit(){}LF(){return this.iit()}dht(){}Jtt(){this.cht().Jtt()}EK(){this.cht().EK()}Qtt(){this.cht().Qtt()}hst(){this.uht.pht()}Uc(t,s,i,e,h,n,r){let o=this.lht.Aet(),a;switch(o){case"numeric":a=Hn.mht.Uc(t,s,i,this.lht);break;case"angle":a=Hn.ght.Uc(t,s,i,this.lht);break;case"boolean":a=Hn.yht.Uc(t,s,i,this.lht);break;case"color":a=Hn.wht.Uc(t,s,i,this.lht);break;case"text":a=Hn.Sht.Uc(t,s,i,this.lht)}this.uht.bht(t,a,s,i,e,h,n,r)}Yet(t,s,i){switch(this.lht.Aet()){case"numeric":return Hn.mht.Uc(t,s,i,this.lht);case"angle":return Hn.ght.Uc(t,s,i,this.lht);case"boolean":return Hn.yht.Uc(t,s,i,this.lht);case"color":return Hn.wht.Uc(t,s,i,this.lht);case"text":return Hn.Sht.Uc(t,s,i,this.lht)}}rst(){this.uht.vht()}Wit(){this.cht().Mht()}nht(){this.cht().nht()}qet(){return this.cht().qet()}jit(){return this.cht().jit()}Vit(){return this.cht().Vit()}aht(){const t=this.lht,s=t.let(),i=s.Jst().gA(),e=Hn.Zet(i,t),h=e.fZ(),n=t.Aet();switch(n){case"numeric":return Hn.mht.Uc(i,e,h,t);case"angle":return Hn.ght.Uc(i,e,h,t);case"boolean":return Hn.yht.Uc(i,e,h,t);case"color":return Hn.wht.Uc(i,e,h,t);case"text":return Hn.Sht.Uc(i,e,h,t)}}fht(){const t=this.lht,s=t.Bet()?t.Aet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Hn._ht.xht(this);case"numeric":case"number":case"angle":return new("combo"===this.lht.Pet()?Hn._ht.xht:Hn._ht.Ght)(this);case"color":case"offsetColor":return new Hn._ht.Tht(this);default:return new Hn._ht.Ght(this)}}bq(){return{propertyAdapterJson:this.cht().bq()}}vq(t){t&&this.cht().vq(t.propertyAdapterJson)}}}{const zn=self.Ns;class Jn extends zn.zst.met{constructor(t){super(t),this.Iht=NaN}iit(){return this.lht.uet().Met()[0]}LF(){return this.Iht||super.LF()}dht(){return this.lht.let().ZW()}rit(t){const s=this.lht.uet().Met()[0];s!==t&&(this.Iht=t)}Uc(t,s,i,e,h,n,r){this.cht().Cht(s.Get())&&super.Uc(t,s,i,e,h,n,r)}Yet(t,s,i){if(this.cht().Cht(s.Get()))return super.Yet(t,s,i)}bq(){return Object.assign(super.bq(),{index:this.Iht})}vq(t){t&&(super.vq(t),this.Iht=t.index)}}zn.zst.det=Jn}{const qn=self.Ns;class $n extends qn.zst.met{constructor(t){super(t),this.v7=NaN}iit(){const t=this.lht.uet();return t.Met()[1]}dht(){const t=this.lht.uet(),s=this.lht.let(),i=this.v7||t.Met()[0],e=s.ZW(),h=e.Pht(i),n=e.Rht()[h];return n.M6()}A6(t){const s=this.lht.uet(),i=s.Met()[2];return t.Eht(i)}ait(t){const s=this.lht.uet();s.Met()[0]!==t&&(this.v7=t)}Uc(t,s,i,e,h,n,r){const o=this.lht.let(),a=o.ZW();this.A6(a.kN())&&super.Uc(t,s,i,e,h,n,r)}Yet(t,s,i){const e=this.lht.let(),h=e.ZW();if(this.A6(h.kN()))return super.Yet(t,s,i)}bq(){return Object.assign(super.bq(),{sid:this.v7})}vq(t){t&&(super.vq(t),this.v7=t.sid)}}qn.zst.cet=$n}{const Xn=self.Ns;class Yn extends Xn.zst.met{constructor(t){super(t)}iit(){return this.lht.uet().Met()[1]}dht(){const t=this.lht,s=t.let(),i=s.CD(),e=i.K4(),h=e.s5(),n=this.lit(h),r=n.LF();return e.N6(r)?e.Aht(r):null}lit(t){const s=this.lht,i=s.uet().Met()[0];return t.Fht(i)}Uc(t,s,i,e,h,n,r){this.Oht()&&super.Uc(t,s,i,e,h,n,r)}Yet(t,s,i){if(this.Oht())return super.Yet(t,s,i)}Oht(){const t=this.lht,s=t.let(),i=s.CD(),e=i.K4(),h=e.s5(),n=this.lit(h);if(n){const r=n.LF();return e.N6(r)}}}Xn.zst.fet=Yn}{const Kn=self.Ns;class Zn extends Kn.zst.met{constructor(t){super(t)}iit(){return this.lht.uet().Met()[0]}dht(){return this.lht.let().ZW().M6()}Uc(t,s,i,e,h,n,r){const o=this.lht.let(),a=o.kN().EL(),l=o.ZW().kN().EL();a===l&&super.Uc(t,s,i,e,h,n,r)}Yet(t,s,i){const e=this.lht.let(),h=e.kN().EL(),n=e.ZW().kN().EL();if(h===n)return super.Yet(t,s,i)}Dht(){const t=this.lht.let(),s=t.kN().EL();if(Kn.uX.kht&&s instanceof Kn.uX.kht&&("initial-frame"===this.lht.yst()||"initial-animation"===this.lht.yst()))switch(this.lht.bZ()){case"relative":case"absolute":return null}}}Kn.zst.pet=Zn}{const Qn=self.Ns;class tr extends Qn.zst.met{constructor(t){super(t),this.Lht=0,this.Nht=!1}Xet(){return!1}EK(){let t=this.lht.Hst(),s=this.lht.uet();s=t.Fet(s),this.Lht=s.CZ()}Qtt(){}Get(){return this.Nht||this.lht.Uc(0),this.Lht}Uc(t,s,i,e,h,n,r){this.Lht=Qn.zst.mht.Uc(t,s,i,this.lht),this.Nht=!0}Wit(){}nht(){}qet(){return this.Lht}jit(){return!1}Vit(){return!1}bq(){return{value:this.Lht,init:this.Nht}}vq(t){t&&(this.Lht=t.value,this.Nht=!t.hasOwnProperty("init")||t.init)}}Qn.zst.yet=tr}{const sr=self.Ns;class ir extends sr.zst.met{constructor(t){super(t),this.Bht=!1,this.Wht=null,this.jht=null,this.Vht=null,this.nZ=this.lht.Jst(),this.Yit=this.lht.let(),this.Uht=this.lht.vet(),this.Hht=this.Uht[0],this.zht=this.Uht[1],this.Uht[3]?this.Jht=this.Uht[3]:this.Jht=Math.random().toString(36).slice(2),this.qht=NaN,this.$ht=NaN,this.Xht=NaN,this.Yht=null,this.Kht()}ln(){super.ln(),this.Wht=null,this.jht=null,this.Vht=null,this.nZ=null,this.Yit=null,this.Uht=null,this.Hht=null,this.Yht=null}Kht(){if(self.Ns.uX.Audio){const t=this.lht.XD(),s=t.Zht(self.Ns.uX.Audio);s&&(this.Wht=s.CL().M6()),this.jht=self.Ns.uX.Audio.Qht,this.Vht=self.Ns.uX.Audio.tnt}}snt(){if(!this.Yht){const t=this.lht.let(),s=t.hj("audioSource");s&&(this.Yht=s.ctt())}}int(){const t=this.lht.let(),s=t.hj("volume");return(s?s.ctt():this).$ht}lst(){super.lst(),this.Bht=!1,this.Wht&&(this.Vht&&(this.qht=this.Vht.ent.call(this.Wht,this.Jht),this.$ht=this.Vht.hnt.call(this.Wht,this.Jht)),this.jht)&&this.jht.PW.call(this.Wht,this.Jht)}nnt(){return this.Jht}rnt(){return this.Xht}ont(t){this.Xht=t}EK(){super.EK(),this.qht=NaN,this.Bht=!1}Qtt(){super.Qtt();const t=this.lht.Jst(),s=t.gA();switch(this.qht=s-this.zht,this.lht.yst()){case"audioSource":break;case"volume":this.$ht=this.lht.Yet(s)}this.Bht=!1}Uc(t,s,i,e,h,n,r){if(this.Wht)switch(this.lht.yst()){case"audioSource":{if(!this.nZ._tt())return;if(e)return void(this.jht&&this.jht.PW.call(this.Wht,this.Jht));if(t<this.zht)return void(this.Bht=!1);const o=this.Vht.ant.call(this.Wht,this.Jht),a=this.nZ.WW();if(a!==o&&this.jht.BW.call(this.Wht,this.Jht,a),this.Bht)return;if(!this.lht.Jst().IsPlaying())return;if(this.Bht=!0,isNaN(this.qht)){const l=self.performance.now(),u=t-this.zht,c=this.Wht.lnt();if("suspended"===c)return void(this.Bht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.jht){let t=this.rnt();isNaN(t)?(this.ont(0),t=0):this.ont(t),this.jht.unt.call(this.Wht,this.Hht,t,this.Jht,p)}}else{const m=this.qht,g=(this.qht=NaN,this.int()),y=(this.$ht=NaN,this.Wht.lnt());if("suspended"===y)return void(this.Bht=!1);this.jht&&(this.ont(g),this.jht.unt.call(this.Wht,this.Hht,g,this.Jht,m))}break}case"volume":this.snt(),super.Uc(t,s,i,e,h,n,r)}}Yet(t,s,i){if(this.Wht)switch(this.lht.yst()){case"audioSource":return;case"volume":return this.snt(),super.Yet(t,s,i)}}cnt(t,s){return this.Yht?this.Yht.rnt():0}fnt(t,s,i,e){this.Yht&&this.Yht.ont(this.cnt()+s),this.jht&&this.Yht&&this.jht.ont.call(this.Wht,this.Yht.nnt(),this.Yht.rnt())}dnt(t,s,i){this.Yht&&this.Yht.ont(s),this.jht&&this.Yht&&this.jht.ont.call(this.Wht,this.Yht.nnt(),this.Yht.rnt())}pnt(){return!0}bq(){return{audioPlaybackStarted:this.Bht,audioTag:this.Jht,pauseTime:this.qht,pauseVolume:this.$ht,volume:this.Xht}}vq(t){t&&(this.Bht=t.audioPlaybackStarted,this.Jht=t.audioTag,this.qht=t.pauseTime,this.$ht=t.pauseVolume,this.Xht=t.volume,this.Kht())}}sr.zst.wet=ir}{const er=self.Ns;er.zst._ht=class{constructor(t){this.Qit=t,this.lht=t.hj(),this.Rst=this.lht.let().CD(),this.mnt=this.lht.yst(),this.gnt=!1,this.ynt=null,this.wnt=null}ln(){this.Qit=null,this.lht=null,this.Rst=null,this.ynt=null,this.wnt=null}Xet(){return!1}lst(){}VK(){this.Rst=null,this.ynt=null,this.wnt=null}ctt(){return this.Qit}hj(){return this.lht}CD(){return this.Rst||(this.Rst=this.lht.let().CD()),this.Rst}Snt(t){this.gnt=!!t}bnt(){return this.gnt}Jtt(){}EK(){}Qtt(){}Mht(){this.ynt=this.qet()}nht(){this.ynt=null}qet(){}jit(){}Vit(){}Cht(t){const s=typeof this.vnt(),i=typeof t;return s==i}pht(){}bht(t,s,i,e,h,n,r,o){}vht(){}Mnt(){const t=this.xnt(()=>{const t=this.lht.uet(),s=this.lht.Hst();return s.Fet(t)},()=>{const t=this.lht.uet(),s=this.lht.Hst();return s._nt(t)});return t.Gnt()}Tnt(){const t=this.lht.Jst(),e=t.gA()-this.lht.let().nst(),s=this.xnt(()=>{const t=this.lht.uet(),s=this.lht.Hst();return s.jet(e,t)},()=>{const t=this.lht.uet(),s=this.lht.Hst(),i=s.Het(e,t);return i||s._nt(t)});return s.Gnt()}xnt(t,s){const i=this.lht.Jst();return(i._tt()?t:s)()}Int(t,s){const i=this.lht.bZ();return("relative"===i?t:s)()}Cnt(t,s){return(this.bnt()?(this.Snt(!1),t):s)()}Pnt(t){}Rnt(){return this.Qit.LF()}Ent(){return this.wnt||(this.wnt=this.Qit.dht()),this.wnt}Ant(t,s,i,e,h,n){const r=this.lht.sit();switch(r){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return n()}}bq(){return{firstAbsoluteUpdate:this.gnt,saveState:this.ynt}}vq(t){t&&(this.gnt=t.firstAbsoluteUpdate,this.ynt=t.saveState)}Fnt(t,s=!1){const i=[];for(const e of t){const h=e.let().nst();for(const n of e.Net())(s&&0===n.gA()||!s)&&i.push({time:h+n.gA(),value:n.Gnt()})}return i.sort((t,s)=>t.time-s.time)}Ont(t,s,i){return this.Dnt(s,i)}Dnt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const hr=self.Ns,nr=new Map,rr=[0,0,0];class or extends hr.zst._ht{constructor(t){super(t)}Jtt(){}EK(){}Qtt(){}qet(){const t=this.lht.sit(),s=this.Ent(),i=this.Rnt();switch(t){case"behavior":return this.knt(s.Lnt(i));case"effect":return this.knt(s[i]);case"plugin":return this.knt(s.Lnt(i));case"world-instance":return this.knt(this.vnt())}}jit(){const t=this.Mnt();return!this.Nnt(t,this.vnt())}Vit(){return!hr.we(this.ynt)&&!this.Nnt(this.ynt,this.vnt())}Nnt(t,s){return t=this.Bnt(t),s=this.Bnt(s),t.da(s)}Mnt(){const t=super.Mnt();return this.Bnt(t)}Tnt(){const t=super.Tnt();return this.Bnt(t)}Pnt(t){}knt(t){return(hr.th(t,hr.Ho)?t.toArray():t).slice(0,3)}Bnt(t){return hr.th(t,hr.Ho)?t:new hr.Ho(t[0],t[1],t[2],1)}Cht(t){return!0}Xet(){return!0}pht(){const t=this.lht.Jst(),s=this.lht.ZW(),i=this.lht.ctt(),e=t.utt(s,i,this.mnt,this.lht);if(e&&1<e.length){nr.has(s)||nr.set(s,new Map);const h=nr.get(s),n=this.lht.sit(),r=(h.has(n)||h.set(n,new Map),h.get(n));r.has(this.mnt)||r.set(this.mnt,{Wnt:!1,color:new hr.Ho(0,0,0,1)})}}jnt(t,s,i){const e=nr.get(t).get(s).get(i);return e.Wnt=!0,e.color}bht(t,s,i,e,h,n,r,o){const a=this.lht.Jst(),l=this.lht.let(),u=this.lht.ZW(),c=this.lht.ctt(),f=this.lht.sit(),d=this.mnt,p=a.utt(u,c,d,this.lht);if(p&&1<p.length){const m=this.Fnt(p,!0),g=this.Ont(a,a.gA(),m);if(g){const y=l.nst(),w=g.time-y;if(0==w)this.jnt(u,f,this.mnt).Ko(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.lht.Uc(w,!1,!0),x=hr.Ho.Ja(S,M[0]),_=hr.Ho.Ja(b,M[1]),G=hr.Ho.Ja(v,M[2]);this.jnt(u,f,this.mnt).Ko(x,_,G)}}}else this.Vnt(s[0],s[1],s[2])}vht(){const t=this.lht.ZW();if(nr.has(t)){const s=nr.get(t),i=this.lht.sit();if(s.has(i)){const e=s.get(i);if(e.has(this.mnt)){const h=e.get(this.mnt),n=h.Wnt,r=h.color;n&&this.Vnt(r.ra(),r.oa(),r.aa()),0===e.size&&s.delete(i),0===s.size&&nr.delete(t)}}}}vnt(){const t=this.lht.sit(),s=this.Ent(),i=this.Rnt();switch(t){case"behavior":return this.Bnt(s.Lnt(i));case"effect":return s[i].clone();case"plugin":return this.Bnt(s.Lnt(i));case"world-instance":return this.CD().dB().clone()}}Vnt(t,s,i){const e=this.lht.sit(),h=this.Ent(),n=this.Rnt();switch(e){case"behavior":rr[0]=t,rr[1]=s,rr[2]=i,h.Unt(n,rr);break;case"effect":h[n].Yo(t,s,i);break;case"plugin":rr[0]=t,rr[1]=s,rr[2]=i,h.Unt(n,rr);break;case"world-instance":this.CD().Hnt(t,s,i)}}bq(){}vq(t){}}hr.zst._ht.Tht=or}{const ar=self.Ns,lr=ar.zst;class ur extends ar.zst._ht{constructor(t){super(t)}Jtt(){}EK(){}Qtt(){}qet(){return this.vnt()}jit(){const t=this.Mnt();return t!==this.qet()}Vit(){return!ar.we(this.ynt)&&this.ynt!==this.qet()}Xet(){return!1}bht(t,s,i,e,h,n,r,o){const a=this.lht,l=a.let(),u=a.sit(),c=a.Jst(),f=l.ZW(),d=a.ctt(),p=this.mnt,m=c.utt(f,d,p,a);if(m&&1<m.length){const y=this.Fnt(m),w=t+l.nst(),S=this.Ont(c,w,y);S&&(s=S.value)}const g=a.Aet();switch(g){case"numeric":if(lr.mht.znt(this.Rnt(),this.Ent(),s,u))break;return;case"angle":if(lr.ght.znt(this.Rnt(),this.Ent(),s,u))break;return;case"boolean":if(lr.yht.znt(this.Rnt(),this.Ent(),s,u))break;return;case"color":if(lr.wht.znt(this.Rnt(),this.Ent(),s,u))break;return;case"text":if(!lr.Sht.znt(this.Rnt(),this.Ent(),s,u))return}this.Vnt(s)}vnt(){const t=this.lht.sit(),s=this.Ent(),i=this.Rnt();switch(t){case"behavior":return s.Lnt(i);case"effect":return s[i];case"instance-variable":return s.Jnt(i);case"plugin":return s.Lnt(i)}}Vnt(t){const s=this.lht.sit(),i=this.Ent(),e=this.Rnt();switch(s){case"behavior":i.Unt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.qnt(e,t);break;case"plugin":i.Unt(e,t)}}}ar.zst._ht.xht=ur}{const cr=self.Ns,fr=(cr.zst._ht,new Map),dr=(t,s,i,e,h,n=!1,r=null,o=null)=>{fr.set(t,{$nt:s,Xnt:i,Ynt:e,round:h,Knt:n,init:r,reset:o})};dr("offsetX",(t,s,i,e)=>{"relative"===e.lht.bZ()?t.Znt(s,i.Jst().vtt()):t.Znt(s)},(t,s)=>t.Pv(s),t=>t.Cv(),!0),dr("offsetY",(t,s,i,e)=>{"relative"===e.lht.bZ()?t.Qnt(s,i.Jst().vtt()):t.Qnt(s)},(t,s)=>t.Av(s),t=>t.Ev(),!0),dr("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.lht.bZ(),l=1===i.trt.x_();if((h||l)&&s.jB()&&s.$B()){if(isNaN(i.srt)){let e=[],t=s.IB();for(;t;)e.push(t),t=t.IB();e.reverse();let a=(t,s)=>s.Jst().wst(t.ZW()),h=(t,s)=>{const i=a(t,s);if(i)return i.Sit();const e=t.ZW().M6();return e.bit()?e.Sit():t.ert().irt()},n=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const n=h.hj(i);if(!n)return e;const r=n.uet().eet();if(!r)return e;const o=r._nt();return o?o.Get():e},r;if(l){let t=e[e.length-1];r=t.fm()}else{let s=e[0],t=s.ert().irt(),i=s.ert().hrt();r=t*i,r=(r+=n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).ert().hrt();r=(r=(r*=u)+n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX")}}i.srt=0===r?Number.EPSILON:r}e||s.qm(t/i.srt,!0)}else s.qm(t)}},(t,s)=>t.Mm(s),t=>t.fm(),!0),dr("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.lht.bZ(),a=1===i.trt.x_();if((h||a)&&s.jB()&&s.YB()){if(isNaN(i.srt)){let e=[],t=s.IB();for(;t;)e.push(t),t=t.IB();e.reverse();let h=(t,s)=>{e=t;const i=s.Jst().wst(e.ZW());var e;if(i)return i.Mit();const h=t.ZW().M6();return h.bit()?h.Mit():t.ert().nrt()},n=(t,s,i,e=0)=>{const h=s.Jst().wst(t.ZW());if(!h)return e;const n=h.hj(i);if(!n)return e;const r=n.uet().eet();if(!r)return e;const o=r._nt();return o?o.Get():e},r;if(a){let t=e[e.length-1];r=t.Gm()}else{let s=e[0],t=s.ert().nrt(),i=s.ert().rrt();r=t*i,r=(r+=n(s,o,"offsetHeight"))+h(s,o)*n(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).ert().rrt();r=(r=(r*=l)+n(s,o))+h(s,o)*n(s,o,"offsetScaleY")}}i.srt=0===r?Number.EPSILON:r}e||s.ort(t/i.srt,!0)}else s.ort(t)}},(t,s)=>t.pm(s),t=>t.Gm(),!0),dr("offsetAngle",(t,s,i,e,h)=>{t.art(s)},(t,s)=>t.o5(s),t=>t.a5(),!1,!0),dr("offsetOpacity",(t,s,i,e,h)=>{const n=e.lrt||1,r=(s/=n,t.WR()),o=r+s;if(0===e.urt)1<o?e.urt+=o-1:o<0&&(e.urt+=o),t.crt(s);else{const a=t.WR()+s;0<s&&0<e.urt?1<a&&(e.urt+=a-1):0<s&&e.urt<0?(e.urt+=s,0<e.urt&&(t.crt(e.urt),e.urt=0)):s<0&&0<e.urt?(e.urt+=s,e.urt<0&&(t.crt(e.urt),e.urt=0)):s<0&&e.urt<0&&a<0&&(e.urt+=a)}},(t,s)=>{t.VR(s)},t=>t.WR(),!1,!0,(n,h,r)=>{switch(n.urt=0,n.lht.bZ()){case"relative":{n.lht.Hst();let t=n.lht.uet(),s=t.eet(),i=s.iet(),e=n.CD().WR(),h=e;for(const o of i){const a=o.gA(),l=n.lht.Yet(a);h=e+l,h=cr.mn(h,0,1)}n.frt=e-h,n.frt=Math.round(100*(n.frt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].gA(),c=n.lht.Yet(u);h-=c,h=cr.mn(h,0,1)}n.drt=h,n.drt=Math.round(100*(n.drt+Number.EPSILON))/100;break}}const t="relative"===n.lht.bZ(),s=1===n.trt.x_();if((t||s)&&h.jB()&&h.i6()){let s=[],t=h.IB();for(;t;)s.push(t),t=t.IB();s.reverse();let i=(t,s,i)=>{const e=s.Jst().wst(t.ZW());if(!e)return 0;const h=e.hj(i);if(!h)return 0;const n=h.uet().eet();if(!n)return 0;const r=n._nt();return r?r.Get():0},e=s[0].ert().prt();e+=i(s[0],r,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],r,"offsetOpacity");n.lrt=0===e?1:e}},i=>{switch(i.lht.bZ()){case"relative":{i.urt=0;let t=i.CD(),s=t.WR();s=Math.round(100*(s+Number.EPSILON))/100,i.lht.Jst()._tt()?(t.VR(s+i.frt),i.fG=0):(t.VR(s-i.drt),i.fG=i.ctt().aht());break}}}),dr("offsetOriginX",(t,s)=>t.mrt(s),(t,s)=>t.grt(s),t=>t.lW(),!1),dr("offsetOriginY",(t,s)=>t.yrt(s),(t,s)=>t.wrt(s),t=>t.cW(),!1),dr("offsetZElevation",(t,s)=>t.Srt(s),(t,s)=>t.Ov(s),t=>t.Fv(),!0),dr("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.fm()<0?-1:1;if("relative"===e.lht.bZ()&&t.jB()&&t.$B()){const n=i.Sit()*h*s;isNaN(e.srt)&&fr.get("offsetWidth").$nt(t,1,i,e,!0),t.qm(n/e.srt,!0)}else t.qm(i.Sit()*h*s)}},(t,s,i)=>{t.Mm(i.Sit()*s)},(e,h)=>{const n=e.fm()<0?-1:1;if(e.$B()){let t=e.IB(),s=h.Jst().wst(t.ZW()),i=NaN;if(s)i=t.fm()/s.Sit();else{const r=t.ZW().M6();i=r.bit()?t.fm()/r.Sit():1}return e.fm()*n/(h.Sit()*i)}return e.fm()*n/h.Sit()},!1),dr("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.Gm()<0?-1:1;if("relative"===e.lht.bZ()&&t.jB()&&t.YB()){const n=i.Mit()*h*s;isNaN(e.srt)&&fr.get("offsetHeight").$nt(t,1,i,e,!0),t.ort(n/e.srt,!0)}else t.ort(i.Mit()*h*s)}},(t,s,i)=>{t.pm(i.Mit()*s)},(e,h)=>{const n=e.Gm()<0?-1:1;if(e.YB()){let t=e.IB(),s=h.Jst().wst(t.ZW()),i=NaN;if(s)i=t.Gm()/s.Mit();else{const r=t.ZW().M6();i=r.bit()?t.Gm()/r.Mit():1}return e.Gm()*n/(h.Mit()*i)}return e.Gm()*n/h.Mit()},!1);class pr extends cr.zst._ht{constructor(t){super(t),this.fG=0,this.urt=0,this.frt=0,this.drt=0,this.lrt=NaN,this.srt=NaN,this.brt=void 0,this.vrt=void 0,this.Mrt=null,this.xrt=null,this._rt=null,this.Grt=null,this.Trt=null,this.Irt=null,this.Crt=null,this.Prt=null,this.Rrt=!1,this.Ert=!1,cr.th(this.lht.Jst(),cr.Art)?this.trt=new cr.zst._ht.Frt(this):this.trt=new cr.zst._ht.Ort(this);const s=this.lht.yst();switch(this.lht.sit()){case"world-instance":{const i=fr.get(s);this.Mrt=i.Ynt,this.xrt=i.$nt,this._rt=i.Xnt,this.Rrt=i.round,this.Ert=i.Knt,this.Trt=i.init,this.Grt=i.reset;break}case"audio":this.Irt=t.cnt,this.Crt=t.fnt,this.Prt=t.dnt,this.Rrt=!!t.pnt(),this.Ert=!1}}ln(){this.trt=null,this.Mrt=null,this.xrt=null,this._rt=null,this.Grt=null,this.Trt=null,this.Irt=null,this.Crt=null,this.Prt=null,super.ln()}Xet(){return this.trt.Xet()}Drt(){return this.fG}krt(t){this.fG=t}Jtt(){this.Grt&&this.Grt(this)}EK(){const t=this.trt.EK();if("number"==typeof t&&(this.fG=t),this.Trt){const s=this.CD(),i=this.lht.let();this.Trt(this,s,i)}}Qtt(){const t=this.trt.Qtt();"number"==typeof t&&(this.fG=t)}qet(){return this.vnt()}jit(){const t=this.Mnt();return t!==this.qet()}Vit(){return!cr.we(this.ynt)&&this.ynt!==this.qet()}pht(){this.trt.pht()}bht(t,s,i,e,h,n,r,o){return this.trt.bht(t,s,i,e,h,n,r,o)}vht(){this.trt.vht()}vnt(){const t=this.Ent(),s=this.Rnt(),i=this.CD(),e=this.lht.let(),h=this.lht.sit();switch(h){case"behavior":return t.Lnt(s);case"effect":return t[s];case"instance-variable":return t.Jnt(s);case"plugin":return t.Lnt(s);case"world-instance":return this.Mrt(i,e);case"audio":return this.Irt.call(this.ctt(),i,e)}}Vnt(t,s,i){const e=this.Ent(),h=this.Rnt(),n=this.CD(),r=this.lht.let(),o=this.lht.sit();switch(o){case"behavior":e.Lrt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Nrt(h,t);break;case"plugin":e.Lrt(h,t,this.ctt().Dht());break;case"world-instance":this.xrt(n,t,r,this);break;case"audio":this.Crt.call(this.ctt(),n,t,r,this)}}Brt(t,s,i){let e=this.lht.ytt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.lht.Jst(),u=l.gA(),c=this.lht.Wet(u);if(!c)return}const h=this.Ent(),n=this.Rnt(),r=this.CD(),o=this.lht.let(),a=this.lht.sit();switch(a){case"behavior":h.Unt(n,t);break;case"effect":h[n]=t;break;case"instance-variable":h.qnt(n,t);break;case"plugin":h.Unt(n,t,this.ctt().Dht());break;case"world-instance":this._rt(r,t,o);break;case"audio":this.Prt.call(this.ctt(),r,t,o)}}}Wrt(t,s,i,e,h,n,r,o){this.trt.Wrt(t,s,i,e,h,n,r,o)}jrt(t,s,i,e,h){let n=(t="angle"===this.lht.Pet()?cr.wn(t):t).toString(),r=n.split(".")[1]||"",o=r.length,a=this.vnt(),l;switch(l=0===o?this.Rrt?Math.round(a):this.Ert?"angle"===this.lht.Pet()?cr.yn(Math.round(cr.wn(a))):Number(cr.toFixed(a,2)):a:this.Rrt?Number(cr.toFixed(a,o)):(this.Ert,a),this.Vnt(l-a,s,i),this.lht.yst()){case"offsetWidth":case"offsetScaleX":{const u=this.CD(),c=u.fm(),f=Number(cr.toFixed(c,2));u.qm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.CD(),p=d.Gm(),m=Number(cr.toFixed(p,2));d.ort(m-p);break}}}bq(){return Object.assign(super.bq(),{v:this.fG,a:this.urt,fod:this.frt,bod:this.drt,of:this.lrt,sf:this.srt,armorf:this.brt,armandf:this.vrt})}vq(t){t&&(super.vq(t),this.fG=t.v,this.urt=t.a,this.frt=cr.me(t.fod)?t.fod:0,this.drt=cr.me(t.bod)?t.bod:0,this.lrt=cr.me(t.of)?t.of:NaN,this.srt=cr.me(t.sf)?t.sf:NaN,this.brt=cr.me(t.armorf)?t.armorf:void 0,this.vrt=cr.me(t.armandf)?t.armandf:void 0)}}cr.zst._ht.Ght=pr}{const mr=self.Ns;class gr{constructor(t){this.Vrt=!1,this.Lht=0,this.Urt=!1,this.Hrt=!1,this.Bst=t;for(let t=0,s=this.Bst.length;t<s;t++)this.Bst[t].oet(this)}gst(){return this.Bst}zrt(){this.Vrt=!0}Jrt(){return this.Vrt}oht(t){this.Lht=t}Get(){return this.Lht}qrt(t){this.Urt=t}$rt(){return this.Urt}est(t){this.Hrt=t}Xrt(){return this.Hrt}u0(){this.Vrt=!1,this.Lht=0,this.Urt=!1,this.Hrt=!1}}class yr{constructor(t){this.Yrt=t}ln(){this.Yrt=null}x_(){return 0}EK(){const t=this.Yrt;return this.Yrt.hj(),t.Int(()=>t.xnt(()=>0,()=>t.ctt().aht()),()=>{})}Qtt(){}Xet(){this.Yrt;const t=this.Yrt.hj();switch(t.bZ()){case"relative":return!1;case"absolute":return!0}}pht(){this.Yrt;const t=this.Yrt.hj(),s=t.yst();switch(t.bZ()){case"relative":break;case"absolute":if(t.ret()){const i=t.aet();i.u0()}else{const e=t.Jst(),h=t.ZW(),n=t.ctt(),r=e.utt(h,n,s,t);r&&1<r.length&&new gr(r)}}}bht(t,s,i,e,h,n,r,o){const a=this.Yrt,l=this.Yrt.hj();switch(l.bZ()){case"relative":{const u=a.Drt();a.Vnt(s-u,i,e),n&&this.Wrt(t,i,e,h,u,s),a.krt(s);break}case"absolute":{const c=l.Jst(),f=l.let();if(l.ZW(),l.ctt(),l.ret()){const d=l.aet(),p=d.gst(),m=a.Fnt(p,!0),g=a.Ont(c,c.gA(),m);if(g){const y=f.nst(),w=g.time-y;if(0==w)d.est(r),d.qrt(o),d.zrt(),d.oht(d.Get()+s);else{if(w<0)return;const S=l.Yet(w);d.est(r),d.qrt(o),d.zrt(),d.oht(d.Get()+(s-S))}}}else a.Brt(s,o,r);break}}}vht(){const t=this.Yrt,s=this.Yrt.hj();switch(s.bZ()){case"relative":break;case"absolute":if(s.ret()){const i=s.aet();i.Jrt()&&t.Brt(i.Get(),i.$rt(),i.Xrt())}}}Wrt(t,s,i,e,h,n){const r=this.Yrt;e||(s&&t===s.gA()?r.jrt(s.CZ(),s,i):i&&t===i.gA()?r.jrt(i.CZ(),s,i):n-h==0&&r.jrt(s.CZ(),s,i))}}mr.zst._ht.Ort=yr}{const wr=self.Ns;class Sr{constructor(t){this.Yrt=t}ln(){this.Yrt=null}x_(){return 1}EK(){const t=this.Yrt;return t.Snt(!0),this.Pnt(t.Mnt())}Qtt(){const t=this.Yrt;if(t.Mnt()!==t.Tnt())return t.Snt(!0),this.Pnt(t.Tnt())}Xet(){return!1}pht(){}bht(t,s,i,e,h,n,r,o){const a=this.Yrt,l=a.Drt();switch(a.hj().bZ()){case"relative":a.Vnt(s-l,i,e),n&&this.Wrt(t,i,e,h,l,s,!1,r);break;case"absolute":a.bnt()?(a.Snt(!1),a.Vnt(l,i,e)):0===t&&0===a.hj().Jst().OW()?a.Brt(s,!0,!1):(a.Vnt(s-l,i,e),n&&this.Wrt(t,i,e,h,l,s,this.Krt(),r))}a.krt(s)}vht(){}Pnt(t){const s=this.Yrt;return t-s.qet()}Krt(){let t=this.Yrt,s=t.CD().ZW(),i=t.hj().XD(),e=i.ltt(),h=0;for(const n of e.rK())0===n.x_()?n.cK(s)&&h++:1===n.x_()&&n.ZW()===s&&h++;return h<=1}Wrt(t,s,i,e,h,n,r,o){const a=this.Yrt;e?s&&t===s.gA()?a.jrt(s.CZ(),s,i,r,o):i&&t===i.gA()?a.jrt(i.CZ(),s,i,r,o):i||a.jrt(s.CZ(),s,i,r,o):s&&t===s.gA()?a.jrt(s.CZ(),s,i,r,o):i&&t===i.gA()?a.jrt(i.CZ(),s,i,r,o):n-h==0&&a.jrt(s.CZ(),s,i,r,o)}}wr.zst._ht.Frt=Sr}{const br=self.Ns,vr=self.yc;br.zst.mht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Jnt(t);break;case"plugin":h=s.Lnt(t)}return h!==i}static Uc(n,r,o,a){if(!o){let t=a.uet(),s=a.Hst();return(t=s._nt(t)).CZ()}let l=a.ytt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Pet()?"discrete":l))return r.CZ();if("continuous"===l||"step"===l){const u=a.Jst().mtt();if("step"===l&&0!==u){const g=1/u;n=Math.floor(n*g)/g}const c=r.CZ(),f=o.CZ(),d=r.TZ("cubic-bezier"),p=o.TZ("cubic-bezier"),m=d&&d.Zrt()&&p&&p.Qrt();if(!m&&c===f)return c;let t=r.gA(),s=o.gA(),i=("step"===l&&0!==u&&(n=br.mn(n,t,s)),br.normalize(n,t,s)),e=r.rht(),h;if(m){const y=s-t;h=vr.Fc(e)(y*i,0,1,y),h=vr.Fc("cubicbezier")(h,c,c+d.EZ(),f+p.OZ(),f)}else h=vr.Fc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Pet()?Math.floor(h):h}}}}{const Mr=self.Ns;Mr.zst.ght=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Jnt(t);break;case"plugin":h=s.Lnt(t)}return h!==i}static Uc(t,s,i,e){if(!i){let t=e.uet(),s=e.Hst();return(t=s._nt(t)).CZ()}let h=e.ytt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Pet()?"discrete":h))return s.CZ();if("continuous"===h||"step"===h){const n=e.Jst().mtt();if("step"===h&&0!==n){const c=1/n;t=Math.floor(t*c)/c}const r=s.gA(),o=i.gA(),a=s.CZ(),l=i.CZ(),u=("step"===h&&0!==n&&(t=Mr.mn(t,r,o)),s.TZ("angle"));if(!u){if(a===l)return a;const f=Mr.normalize(t,r,o),d=self.yc.Fc(s.rht());return Mr.Gn(a,l,d(f,0,1,1))}{const p=u.tot();if(a===l&&0===p)return a;const m=Mr.normalize(t,r,o),g=self.yc.Fc(s.rht()),y=g(m,0,1,1);switch(u.sot()){case"closest":return Mr.Gn(a,l,y,p);case"clockwise":return Mr.Tn(a,l,y,p);case"anti-clockwise":return Mr.In(a,l,y,p)}}}}}}{const xr=self.Ns;xr.zst.yht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Jnt(t);break;case"plugin":h=s.Lnt(t)}return!!h!=!!i}static Uc(t,s,i,e){if(i)return s.CZ()?1:0;{let t=e.uet(),s=e.Hst();return(t=s._nt(t)).CZ()?1:0}}}}{const _r=self.Ns,Gr=[0,0,0],Tr=[0,0,0],Ir=[0,0,0];_r.zst.wht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Jnt(t);break;case"plugin":h=s.Lnt(t)}return Array.isArray(i)?(Gr[0]=i[0],Gr[1]=i[1],Gr[2]=i[2]):(Ir.Ra(i),Gr[0]=Math.floor(255*Ir.ra()),Gr[1]=Math.floor(255*Ir.oa()),Gr[2]=Math.floor(255*Ir.aa())),Array.isArray(h)?(Tr[0]=h[0],Tr[1]=h[1],Tr[2]=h[2]):(Ir.Ra(h),Tr[0]=Math.floor(255*Ir.ra()),Tr[1]=Math.floor(255*Ir.oa()),Tr[2]=Math.floor(255*Ir.aa())),Gr[0]!==Tr[0]||Gr[1]!==Tr[1]||Gr[2]!==Tr[2]}static Uc(t,s,i,e){if(!i){let t=e.uet(),s=e.Hst(),i=(t=s._nt(t)).CZ();return Gr[0]=i[0],Gr[1]=i[1],Gr[2]=i[2],Gr}let h=e.ytt();if("discrete"===(h="default"===h?"continuous":h)){const n=s.CZ();return Gr[0]=n[0],Gr[1]=n[1],Gr[2]=n[2],Gr}if("continuous"===h||"step"===h){const r=e.Jst().mtt();if("step"===h&&0!==r){const M=1/r;t=Math.floor(t*M)/M}const o=s.gA(),a=i.gA(),l=s.CZ(),u=i.CZ(),c=("step"===h&&0!==r&&(t=_r.mn(t,o,a)),_r.normalize(t,o,a)),f=s.rht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.yc.Fc(f),b=a-o,v=b*c;return Gr[0]=d===g?d:S(v,d,g-d,b),Gr[1]=p===y?p:S(v,p,y-p,b),Gr[2]=m===w?m:S(v,m,w-m,b),Gr}}}}{const Cr=self.Ns;Cr.zst.Sht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Jnt(t);break;case"plugin":h=s.Lnt(t)}return h!==i}static Uc(t,s,i,e){if(i)return s.CZ();{let t=e.uet(),s=e.Hst();return(t=s._nt(t)).CZ()}}}}{const Pr=self.Ns;Pr.pY=class{constructor(){this.iot=new Map}ln(){for(const t of this.iot.values())t.ln();this.iot.clear(),this.iot=null}fc(t){const s=new Pr.eot(t),i=s.Qc();this.iot.set(i,s)}ei(t){return this.iot.get(t)}stt(){return 0}static hot(t,s,i,e){if(s)for(const h of s)Pr.pY.not("create",h,t,i,e)}static rot(t,s,i,e){if(s)for(const h of s)Pr.pY.not("create-including-disabled",h,t,i,e)}static oot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].vq(t)}):t.forEach(t=>{Pr.pY.not("load",t,i,s,e)})}static not(t,s,i,e,h){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,h);break;case"create":case"create-including-disabled":n=new e(s,h)}else if("object"==typeof e){const r=e.prop,o=s[r],a=e.map.get(o);switch(t){case"load":n=new a(null,h);break;case"create":case"create-including-disabled":n=new a(s,h)}}switch(t){case"load":n.vq(s),i.push(n);break;case"create":if("function"==typeof n.mit&&!n.mit())return n.ln();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const Rr=self.Ns;Rr.eot=class{constructor(t){this.dn="",this.ist=NaN,this.aot=0,this.lot="default",this.uot="default",this.cot=!1,this.fot=!1,this.dot=1,this.Tst=null,this.pot="",this.mot=!1,this.got=!0,t&&(this.dn=t[0],this.ist=t[1],this.aot=t[2],this.lot=t[3],this.uot=t[4],this.cot=!!t[6],this.fot=!!t[7],this.dot=t[8],this.pot=t[9],this.mot=!!t[10],this.got=!!t[11],this.Tst=new Rr.yot(t[5],this))}ln(){this.Tst.ln(),this.Tst=null}ott(){return this.Tst||(this.Tst=new Rr.yot(null,this)),this.Tst}Qc(){return this.dn}X8(t){this.dn=t}OW(){return this.ist}FW(t){this.ist=t}mtt(){return this.aot}gtt(t){this.aot=t}ytt(){return this.lot}wtt(t){this.lot=t}bZ(){return this.uot}Stt(t){this.uot=t}kW(){return this.cot}DW(t){this.cot=t}NW(){return this.fot}LW(t){this.fot=t}J6(){return this.dot}btt(t){this.dot=t}UK(){return this.pot}vtt(){return this.mot}Mtt(){return this.got}bq(){return{trackDataJson:this.Tst.bq(),name:this.dn,totalTime:this.ist,step:this.aot,interpolationMode:this.lot,resultMode:this.uot,loop:this.cot,pingPong:this.fot,repeatCount:this.dot,startOnLayout:this.pot,transformWithSceneGraph:!!this.mot,useSystemTimescale:this.got}}vq(t){t&&(this.ott().vq(t.trackDataJson),this.dn=t.name,this.ist=t.totalTime,this.aot=t.step,this.lot=t.interpolationMode,this.uot=t.resultMode,this.cot=t.loop,this.fot=t.pingPong,this.dot=t.repeatCount,this.pot=t.startOnLayout,this.mot=!!t.transformWithSceneGraph,this.got=!!t.useSystemTimescale)}}}{const Er=self.Ns;class Ar{constructor(t,s){this.Tst=s,this.wot=null,this.Sot=null,this.Ist=NaN,this.Cst=NaN,this.lot="default",this.uot="default",this.Nu=!1,this.bot=null,this.Zit=null,this.ff="",this.vot=null,this.Mot=0,this.xot=this.Tst.ptt().OW(),this.wf=0,this.dn="",t&&(t[0]&&(this.wot=t[0],this.Ist=t[0][2],this.Cst=t[0][1]),this.lot=t[1],this.uot=t[2],this.Nu=!!t[3],t[6]&&(this.ff=t[6]),t[7]&&(this.vot=t[7],this.Mot=t[7][0],this.xot=t[7][1]),t[8]&&(this.Sot=t[8]),t[8]&&(this.Sot=t[8]),t[9]&&(this.wf=t[9]),t[10]&&(this.dn=t[10]),this.bot=new Er._ot(t[4],this),this.Zit=new Er.Got(t[5],this))}ln(){this.wot=null,this.Tst=null,this.bot&&(this.bot.ln(),this.bot=null),this.Zit&&(this.Zit.ln(),this.Zit=null),this.vot=null}ott(){return this.Tst}Nst(){return this.bot||(this.bot=new Er._ot(null,this)),this.bot}Hst(){return this.Zit||(this.Zit=new Er.Got(null,this)),this.Zit}Tot(){return this.wot}Yst(){return this.Cst}yit(t){this.Cst=t}Xst(){return this.Ist}fit(t){this.Ist=t}ytt(){return this.lot}wtt(t){this.lot=t}bZ(){return this.uot}Stt(t){this.uot=t}mit(){return this.Nu}git(t){this.Nu=!!t}ij(){return this.ff}nst(){return this.Mot}dit(){return this.xot}pit(t){this.xot=t}Sit(){return this.Sot[0]}wit(t){this.Sot||(this.Sot=[]),this.Sot[0]=t}Mit(){return this.Sot||(this.Sot=[]),this.Sot[1]}vit(t){this.Sot||(this.Sot=[]),this.Sot[1]=t}x_(){return this.wf}Qc(){return this.dn}bq(){return{keyframeDataJson:this.bot.bq(),propertyTrackDataJson:this.Zit.bq(),instanceData:this.wot,additionalInstanceData:this.Sot,instanceUid:this.Ist,objectClassIndex:this.Cst,interpolationMode:this.lot,resultMode:this.uot,enabled:this.Nu,id:this.ff,nestedData:this.vot,type:this.wf,name:this.dn}}vq(t){t&&(this.wot=t.instanceData,this.Ist=t.instanceUid,this.Cst=t.objectClassIndex,this.lot=t.interpolationMode,this.uot=t.resultMode,this.Nu=t.enabled,this.ff=t.id,this.wf=t.type||0,this.dn=t.name||"",this.xot=this.Tst.ptt().OW(),t.nestedData&&(this.vot=t.nestedData,this.Mot=this.vot[0],this.xot=this.vot[1]),t.additionalInstanceData&&(this.Sot=t.additionalInstanceData),this.Nst().vq(t.keyframeDataJson),this.Hst().vq(t.propertyTrackDataJson))}}Er.yot=class{constructor(t,s){this.GQ=s,this.Iot=[],Er.pY.hot(this.Iot,t,Ar,this)}ln(){this.GQ=null;for(const t of this.Iot)t.ln();Er.Br(this.Iot),this.Iot=null}ptt(){return this.GQ}ast(){const t=new Ar(null,this);return this.Iot.push(t),t}Cot(t){return t.Nst().Lst()[0]}Pot(t){const s=t.Nst().Lst();return s.at(-1)}Ait(s,t){const i=t.Nst().Lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.gA()===s)return h}}Rot(s,t){const i=t.Nst().Lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.gA()>s)return h}}Eot(s,t){const i=t.Nst().Lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.gA()>=s)return h}}Eit(s,t){const i=t.Nst().Lst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.gA()<=s)return e}}*ntt(){for(const t of this.Iot)yield t}bq(){return{trackDataItemsJson:this.Iot.map(t=>t.bq())}}vq(t){t&&Er.pY.oot(this.Iot,t.trackDataItemsJson,Ar,this)}}}{const Fr=self.Ns;class Or{constructor(t,s){this.Zit=s,this.Aot="",this.Fot=null,this.mnt=null,this.wf=null,this.Oot=NaN,this.Dot=NaN,this.lot="default",this.uot="default",this.Nu=!1,this.kot=null,this.Lot=!0,t&&(this.Aot=t[0][0],this.Fot=t[0].slice(1),this.mnt=t[1],this.wf=t[2],this.Oot=t[3],this.Dot=t[4],this.lot=t[5],this.uot=t[6],this.Nu=!!t[7],this.kot=new Fr.Not(t[8],this),this.Lot=t[9])}ln(){this.kot.ln(),this.kot=null,this.Zit=null,this.Fot=null}Hst(){return this.Zit}eet(){return this.kot||(this.kot=new Fr.Not(null,this)),this.kot}sit(){return this.Aot}bet(t){this.Aot=t}Met(){return this.Fot}_et(t){this.Fot=t}Tet(){return this.mnt}Cet(t){this.mnt=t}x_(){return this.wf}Eet(t){this.wf=t}Oet(){return this.Oot}Det(t){this.Oot=t}ket(){return this.Dot}Let(t){this.Dot=t}ytt(){return this.lot}wtt(t){this.lot=t}bZ(){return this.uot}Stt(t){this.uot=t}mit(){return this.Nu}git(t){this.Nu=!!t}Bet(){return!!this.Lot}bq(){return{propertyKeyframeDataJson:this.kot.bq(),sourceAdapterId:this.Aot,sourceAdapterArguments:this.Fot,property:this.mnt,type:this.wf,min:this.Oot,max:this.Dot,interpolationMode:this.lot,resultMode:this.uot,enabled:this.Nu,canHavePropertyKeyframes:this.Lot}}vq(t){t&&(this.Aot=t.sourceAdapterId,this.Fot=t.sourceAdapterArguments,this.mnt=t.property,this.wf=t.type,this.Oot=t.min,this.Dot=t.max,this.lot=t.interpolationMode,this.uot=t.resultMode,this.Nu=t.enabled,this.Lot=t.canHavePropertyKeyframes,this.eet().vq(t.propertyKeyframeDataJson))}}Fr.Got=class{constructor(t,s){this.Gst=s,this.Bot=[],Fr.pY.hot(this.Bot,t,Or,this)}ln(){this.Gst=null;for(const t of this.Bot)t.ln();Fr.Br(this.Bot),this.Bot=null}cit(){return this.Gst}kit(){const t=new Or(null,this);return this.Bot.push(t),t}Fet(t){const s=t.eet();return s.iet()[0]}_nt(t){const s=t.eet(),i=s.iet();return i.at(-1)}Wet(s,t){const i=t.eet(),e=i.iet(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.gA()===s)return n}}Uet(s,t){const i=t.eet(),e=i.iet(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.gA()>s)return n}}Het(s,t){const i=t.eet(),e=i.iet(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.gA()>=s)return n}}jet(s,t){const i=t.eet(),e=i.iet();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.gA()<=s)return h}}*Ust(){for(const t of this.Bot)yield t}bq(){return{propertyTrackDataItemsJson:this.Bot.map(t=>t.bq())}}vq(t){t&&Fr.pY.oot(this.Bot,t.propertyTrackDataItemsJson,Or,this)}}}{const Dr=self.Ns;class kr{constructor(t,s){if(this.bot=s,this.d3=-1,this.Wot="noease",this.jot=!1,this.YQ=null,this.Vot=null,t){this.d3=t[0],this.Wot=t[1],this.jot=!!t[2];const i=t[3];this.YQ=i?i.split(" "):[],this.Vot=new Set(this.YQ.map(t=>t.toLowerCase())),this.Uot=null}}ln(){this.bot=null,Dr.Br(this.YQ),this.YQ=null,this.Vot.clear(),this.Vot=null,this.Uot=null}Nst(){return this.bot}fZ(){return this.Uot}Hot(t){this.Uot=t}gA(){return this.d3}AW(t){this.d3=t,this.bot.zot()}rht(){return this.Wot}KW(t){this.Wot=t}mit(){return this.jot}git(t){this.jot=!!t}jW(){return this.YQ}Gtt(t){this.YQ=t?t.split(" "):[],this.Vot=new Set(this.YQ.map(t=>t.toLowerCase()))}Jot(){return this.Vot}vst(t){return this.Vot.has(t.toLowerCase())}bq(){return{time:this.d3,ease:this.Wot,enable:this.jot,tags:this.YQ}}vq(t){t&&(this.d3=t.time,this.Wot=t.ease,this.jot=t.enable,this.YQ=t.tags,this.Vot=new Set(this.YQ.map(t=>t.toLowerCase())))}}Dr._ot=class{constructor(t,s){this.Gst=s,this.kst=[],Dr.pY.hot(this.kst,t,kr,this),this.zot()}ln(){this.Gst=null;for(const t of this.kst)t.ln();Dr.Br(this.kst),this.kst=null}zot(){this.kst.sort((t,s)=>t.gA()-s.gA());for(let t=0;t<this.kst.length;t++){const s=this.kst[t];s.Hot(this.kst[t+1])}}cit(){return this.Gst}qot(){return this.kst.length}Lst(){return this.kst}Oit(){const t=new kr(null,this);return this.kst.push(t),this.zot(),t}Nit(t){for(const s of this.kst)if(t(s)){const i=this.kst.indexOf(s);-1!==i&&(s.ln(),this.kst.splice(i,1))}this.$ot(),this.zot()}$ot(){this.kst.sort((t,s)=>t.gA()-s.gA())}$it(t){return this.kst.indexOf(t)}Xit(t){return this.kst[t]}*Xot(){for(const t of this.kst)yield t}*Yot(){for(let t=this.kst.length-1;0<=t;t--)yield this.kst[t]}bq(){return{keyframeDataItemsJson:this.kst.map(t=>t.bq())}}vq(t){t&&(Dr.pY.oot(this.kst,t.keyframeDataItemsJson,kr,this),this.zot())}}}{const Lr=self.Ns;class Nr{constructor(t,s){this.kot=s,this.Lht=null,this.Kot=null,this.wf="",this.d3=NaN,this.Wot="noease",this.jot=!1,this.Zot=null,this.Qot=void 0,this.tat="line",t&&(this.Lht=t[0][0],this.Kot=t[0][1],this.wf=t[0][2],this.d3=t[1],this.Wot=t[2],this.jot=!!t[3],this.tat=t[5],this.Zot=null,t[4]&&(this.Zot=new Lr.sat(t[4],this)),this.Uot=null,this.iat=null)}ln(){this.kot=null,this.Zot&&(this.Zot.ln(),this.Zot=null),this.Uot=null,this.iat=null}eat(){return this.Zot}Hot(t){this.Uot=t}fZ(){return this.Uot}hat(t){this.iat=t}dZ(){return this.iat}Get(){return this.Lht}oht(t){"color"===this.wf&&Lr.me(t)?(this.Lht[0]=Lr.Un(t),this.Lht[1]=Lr.Hn(t),this.Lht[2]=Lr.zn(t)):this.Lht=t}Gnt(){return this.Kot}eht(t){"color"===this.wf&&Lr.me(t)?(this.Kot[0]=Lr.Un(t),this.Kot[1]=Lr.Hn(t),this.Kot[2]=Lr.zn(t)):this.Kot=t}CZ(){const t=this.kot.uet().bZ();return"relative"===t?this.Get():"absolute"===t?this.Gnt():void 0}x_(){return this.wf}Eet(t){this.wf=t}gA(){return this.d3}AW(t){this.d3=t,this.kot.nat()}rht(){return this.Wot}KW(t){this.Wot=t}mit(){return this.jot}git(t){this.jot=!!t}pZ(){return this.tat}TZ(s){if(this.Zot){if(!this.Qot&&null!==this.Qot){const i=this.Zot.rat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.ij()===s)return this.Qot=h,this.Qot}}this.Qot=null}return this.Qot}}bq(){const t=this.Zot;return{addonDataJson:t&&t.bq(),value:this.Lht,aValue:this.Kot,type:this.wf,time:this.d3,ease:this.Wot,enable:this.jot}}vq(t){t&&(t.addonDataJson&&this.Zot._SetFromJson(t.addonDataJson),this.Lht=t.value,this.Kot=t.aValue,this.wf=t.type,this.d3=t.time,this.Wot=t.ease,this.jot=t.enable)}}Lr.Not=class{constructor(t,s){this.Kit=s,this.tet=[],this.oat=[],Lr.pY.hot(this.tet,t,Nr,this),Lr.pY.rot(this.oat,t,Nr,this),this.nat()}ln(){this.Kit=null;for(const t of this.tet)t.ln();Lr.Br(this.tet),this.tet=null;for(const s of this.oat)s.ln();Lr.Br(this.oat),this.oat=null}nat(){let s=this.tet;s.sort((t,s)=>t.gA()-s.gA());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Hot(s[t+1]),0<=t-1&&i.hat(s[t-1])}(s=this.oat).sort((t,s)=>t.gA()-s.gA());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Hot(s[t+1]),0<=t-1&&e.hat(s[t-1])}}sht(){const t=new Nr(null,this);return this.tet.push(t),this.nat(),t}iht(t){for(const s of this.tet)if(t(s)){const i=this.tet.indexOf(s);-1!==i&&(s.ln(),this.tet.splice(i,1))}this.aat(),this.nat()}aat(){this.tet.sort((t,s)=>t.gA()-s.gA())}uet(){return this.Kit}lat(){return this.tet.length}_nt(){return this.tet[this.tet.length-1]}iet(){return this.tet}cZ(){return this.oat}*uat(){for(const t of this.tet)yield t}*cat(){for(let t=this.tet.length-1;0<=t;t--)yield this.tet[t]}bq(){const t=this.tet,s=this.oat;return{propertyKeyframeDataItemsJson:t.map(t=>t.bq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.bq())}}vq(t){t&&(Lr.pY.oot(this.tet,t.propertyKeyframeDataItemsJson,Nr,this),Lr.pY.oot(this.oat,t.propertyKeyframeDataItemsIncludingDisabledJson,Nr,this),this.nat())}}}{const Br=self.Ns;class Wr{constructor(t,s){this.Zot=s,this.ff=t[0],this.fat=t[1]}ln(){this.Zot=null,this.fat=null}eat(){return this.Zot}ij(){return this.ff}bq(){return{id:this.ff,data:this.fat}}vq(t){t&&(this.ff=t.id,this.fat=t.data)}}class jr extends Wr{constructor(t,s){super(t,s),this.dat=this.fat[0],this.pat=!!this.fat[1],this.mat=this.fat[2],this.gat=!!this.fat[3]}ln(){super.ln()}EZ(){return this.dat}Zrt(){return this.pat}OZ(){return this.mat}Qrt(){return this.gat}bq(){return Object.assign(super.bq(),{startAnchor:this.dat,startEnable:!!this.pat,endAnchor:this.mat,endEnable:!!this.gat})}vq(t){t&&(super.vq(t),this.dat=t.startAnchor,this.pat=!!t.startEnable,this.mat=t.endAnchor,this.gat=!!t.endEnable)}}class Vr extends Wr{constructor(t,s){super(t,s),this.yat=this.fat[0],this.wat=this.fat[1]}ln(){super.ln()}sot(){return this.yat}tot(){return this.wat}bq(){return Object.assign(super.bq(),{direction:this.yat,revolutions:this.wat})}vq(t){t&&(super.vq(t),this.yat=t.direction,this.wat=t.revolutions)}}Br.sat=class{constructor(t,s){this.Sat=s,this.bat=[],Br.pY.hot(this.bat,t,{prop:0,map:new Map([["cubic-bezier",jr],["angle",Vr]])},this)}ln(){this.Sat=null;for(const t of this.bat)t.ln();Br.Br(this.bat),this.bat=null}vat(){return this.Sat}rat(){return this.bat}*Mat(){for(const t of this.bat)yield t}bq(){return{addonDataItemsJson:this.bat.map(t=>t.bq())}}vq(t){t&&Br.pY.oot(this.bat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",jr],["angle",Vr]])},this)}}}{let m=self.Ns,i=0;m.Art=class extends m.qY{constructor(t,s){super("tween-"+i++,t,s),this.ff="",this.xat=!1,this._at="start-value",this.Pst=null,this.Gat=null,this.Tat=null,this.Yit=null,this.Iat=null}ett(t){const s=m.an(m.Event,"tweenstatereleased");s.Cat=this,t.dispatchEvent(s)}x_(){return 1}RQ(){for(const t of this.GQ.ott().ntt())this.TQ.push(m.Pat.vx(this,t));this.Yit=this.TQ[0]}ost(){const t=this.GQ.ott().ast(),s=m.Pat.vx(this,t);return this.TQ.push(s),this.Rat(),s}Rat(){this.Yit=this.TQ[0]}hj(t){return this.Yit.gst()[0]}Ret(t){this.Eat=t}ZW(){const t=this.aZ();if(t&&t.length){const s=t[0];if(this.Yit=s){const i=s.ZW();return s.$st()?i:void 0}}}Aat(t){this.Tat||(this.Tat=[]),this.Tat.push(t)}Fat(t){this.Gat||(this.Gat=[]),this.Gat.push(t)}Oat(t){if(this.Tat){const s=this.Tat.indexOf(t);-1!==s&&this.Tat.splice(s,1)}}Dat(t){if(this.Gat){const s=this.Gat.indexOf(t);-1!==s&&this.Gat.splice(s,1)}}kat(t,s){for(const i of this.TQ)for(const e of i.Bst)if(e.yst()===s){const h=e.Hst(),n=e.uet(),r=h.Fet(n);r.oht(t),r.eht(t)}}Lat(t){for(const s of this.TQ)for(const i of s.Bst)if(i.yst()===t)return i}Nat(t){for(const s of t){const i=this.Lat(s);this.kat(i.qet(),s)}if(this._tt()){const e=this.OW()-this.gA();this.FW(e);for(const h of this.TQ)h.pit(e);this.Btt(0)}else{const n=this.gA();this.FW(n);for(const r of this.TQ)r.pit(n);this.Btt(n)}this.Wtt()}Bat(t,s){const i=this.Lat(s),e=i.Hst(),h=i.uet(),n=e._nt(h);n.AW(this.OW()),n.oht(t),n.eht(t)}Wat(t){this.ff=t}ij(){return this.ff}jat(t){this._at=t}Vat(){return this._at}sj(t){this.xat=t}tj(){return this.xat}Ptt(){if(this.Tat)for(const t of this.Tat)t(this);if(!this.BK())for(const s of this.TQ)s.Vit()}Rtt(){this.HQ=this.uf.Ett()}jK(){if(!this.qQ&&(this.qQ=!0,this.Gat))for(const t of this.Gat)t(this)}AW(t){this.Uat(),super.AW(t)}ztt(t){(t=m.me(t)?t:this.OW())<0?this.FQ=0:t>=this.OW()?this.FQ=this.OW():this.FQ=t,this.Yit.Jtt()}EK(t){if(!this.WK()&&"current-state"===this.Vat())for(const s of this.TQ)s.jit();super.EK(t)}PW(t=!1){if(super.PW(t),!this.BK())for(const s of this.TQ)s.Wit()}u0(t=!0,s=!1){this.Uat(),super.u0(t,s)}Uat(){for(const t of this.TQ){const s=t=>{const s=t.gA(),i=this.OW();return 0!==s&&s!==i};t.Lit(s),t.Bit(s)}}EY(){if(!this.TW()){const t=this.ZW();if(t&&t.kN().Fz())return!1;this._Q.IK(this),this.Ktt()}return!0}kK(h,t,s){if(this.Pst||(this.Pst=this.ZW()),!this.Pst||this.Pst.i8())this.PW(!0),this.Rtt();else{const i=this.Pst.jO();if(0!==(h=-1!==i?s*i:h)||0!==this.XQ){this.XQ=h;const n=this.FQ+this.OQ,r=h*this.DQ,o=n+r,a=this.GQ.ist;o<0?(this.FQ=0,this.OQ=-o):a<=o?(this.FQ=a,this.OQ=this.FQ-o):(this.FQ=o,this.OQ=0);let t=!1,s=!1,i=this.kW(),e=this.NW();i||e?i&&!e?0<this.DQ?this.FQ>=a&&(this.ztt(0),this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),s=!0):this.FQ<=0&&(this.ztt(a),this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),s=!0):!i&&e?0<this.DQ?this.FQ>=a&&(this.Btt(a),this.BW(-1*this.WW()),s=!0,1===this.kQ?this.LQ<this.J6()?(this.LQ++,this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat),this.kQ=0):(this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat),t=!0):0===this.kQ&&(this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat),this.kQ=1)):this.FQ<=0&&(this.Btt(0),this.BW(-1*this.WW()),s=!0,1===this.kQ?this.LQ<this.J6()?(this.LQ++,this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat),this.kQ=0):(t=!0,this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat)):0===this.kQ&&(this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat),this.kQ=1)):i&&e&&(0<this.DQ?this.FQ>=a&&(this.Btt(a),this.BW(-1*this.WW()),s=!0,0===this.kQ&&(this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat)),1===this.kQ&&(this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat)),this.kQ++,this.kQ=m.wrap(this.kQ,0,2)):this.FQ<=0&&(this.Btt(0),this.BW(-1*this.WW()),s=!0,0===this.kQ&&(this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat)),1===this.kQ&&(this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),this.Hat(m.qat.Jat.aX.Xat),this.Hat(m.qat.Jat.aX.Yat)),this.kQ++,this.kQ=m.wrap(this.kQ,0,2))):0<this.DQ?this.FQ>=a&&(this.LQ<this.J6()?(this.LQ++,this.ztt(0),this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),s=!0):(this.Btt(a),t=!0)):this.FQ<=0&&(this.LQ<this.J6()?(this.LQ++,this.ztt(a),this.Hat(m.qat.Jat.aX.zat),this.Hat(m.qat.Jat.aX.$at),s=!0):(this.Btt(0),t=!0)),t?(this.Yit.est(),this.PW(!0),this.Rtt()):(this.Yit.Uc(this.FQ,!0,!1,s,this.$Q,!1),this.$Q&&(this.$Q=!1))}}}Hat(t){const s=this.ZW(),i=s.Kat(m.qat.Jat);i.Zat(this),this.uf.M4(t,s,i.A6()),i.Qat()}bq(){const t=super.bq(),s=this.ptt();return Object.assign(t,{tweenDataItemJson:s.bq(),id:this.ff,destroyInstanceOnComplete:this.xat,initialValueMode:this._at})}vq(t){if(t){const s=this.ptt();s.vq(t.tweenDataItemJson),super.vq(t),this.ff=t.id,this.xat=t.destroyInstanceOnComplete,this._at=t.initialValueMode,this.Rat()}}static IsPlaying(t){return t.IsPlaying()}static HW(t){return t.HW()}static tlt(t){return!!t.NW()&&0===t.xtt()}static slt(t){return!!t.NW()&&1===t.xtt()}static ilt(t){const s=t.runtime.ltt(),i=new m.eot;if(t.json){i.vq(t.json.tweenDataItemJson);const e=new m.Art(i,s);return e.vq(t.json),e}{const h=new m.Art(i,s),n=(m.We(t.elt)||(t.elt=[t.elt]),h.Wat(t.id),h.Gtt(t.tags),h.jat(t.initialValueMode),h.sj(t.hlt),h.DW(t.loop),h.LW(t.pingPong),h.FW(t.time),h.gtt(0),h.wtt("default"),h.Stt(t.elt[0].resultMode),h.btt(t.repeatCount),h.ost()),r=(n.fit(t.F6.YN()),n.wtt("default"),n.Stt(t.elt[0].resultMode),n.git(!0),n.yit(t.F6.kN().LF()),t.F6.M6()),o=r.bit()?r.Sit():t.F6.CD().fm(),a=r.bit()?r.Mit():t.F6.CD().Gm(),l=(n.wit(o),n.vit(a),n.Fit()),u=(l.AW(0),l.KW("noease"),l.git(!0),l.Gtt(""),n.Fit());u.AW(t.time),u.KW("noease"),u.git(!0),u.Gtt("");for(const c of t.elt){const f=n.Dit(),d=(f.bet(c.nlt),f.xet(c.rlt),f.Iet(c.property),f.Ret(c.type),f.Det(NaN),f.Let(NaN),f.wtt("default"),f.Stt(c.resultMode),f.git(!0),f.tht()),p=(d.Eet(c.valueType),d.AW(0),d.KW(c.ease),d.git(!0),d.oht(c.olt),d.eht(c.olt),f.tht());p.Eet(c.valueType),p.AW(t.time),p.KW(c.ease),p.git(!0),p.oht(c.llt),p.eht(c.llt),f.ctt()}return h}}static fit(t,s){if(!isNaN(s))for(const i of t.aZ())i.fit(s)}ult(t,s){return this.Iat||(this.Iat=m.an(self.qW,this,t,s)),this.Iat}}}{const Ur=self.Ns;Ur.Pat=class extends Ur.att{constructor(t,s){super(t,s),this.clt=null,this.flt=null}static vx(t,s){return Ur.an(Ur.Pat,t,s)}dlt(){1===this.Bst.length?this.clt=this.Bst[0]:(this.clt=this.Bst[0],this.flt=this.Bst[1])}Wst(){for(const t of this.Gst.Hst().Ust())this.Bst.push(Ur.plt.vx(this,t));this.dlt()}Dit(){const t=this.Gst.Hst(),s=t.kit(),i=Ur.plt.vx(this,s);return this.Bst.push(i),this.dlt(),i}EK(){if(this.qst(),this.$st()||!this.dtt()){const t=this.Jst(),s=t._tt(),i=s?0:this.dit();for(const h of this.Bst)h.EK(i),0===this.jst&&1===h.Git()&&(this.jst=1),0===this.UY&&1===h.AK()&&(this.UY=1);this.Vst=0;const e=this.Bst.some(t=>t.sst());e&&(this.Vst=1),this.Dst=this.Tit(i),this.Ast=!1,this.Fst=!1,this.Uc(i)}}hst(){}Uc(t,s=0,i=!1,e=!1,h,n=!1,r=!1){if(this.Pst||this.ZW(),this.Pst){const o=!this.Pst.i8();return o&&(!n||!this.kN().Fz())&&((this.flt?(this.clt.Uc(t,i,e,r),this.flt):this.clt).Uc(t,i,e,r),void(0!==this.clt.Git()&&(this.Rst||(this.Rst=this.Pst.CD()),this.Rst)&&this.Rst.Q4()))}}rst(){}vq(t){super.vq(t),this.dlt()}}}{const Hr=self.Ns;Hr.plt=class extends Hr.zst{constructor(t,s){super(t,s),this.mlt=!1}static vx(t,s){return Hr.an(Hr.plt,t,s)}Uc(t,s=!1,i=!1,e=!1){let h,n;if(this.mlt)h=this.tet[0],n=this.tet[1];else{if(s)h=this.Zit.jet(t,this.Kit);else{if(this.het){const r=this.Jst(),o=this.het.fZ(),a=this.het.gA(),l=o?o.gA():r.OW();(t<=a||l<=t)&&(this.het=this.Zit.jet(t,this.Kit))}else this.het=this.Zit.jet(t,this.Kit);h=this.het}n=h.fZ()}this.Qit.Uc(t,h,n,s,i,e)}tht(){const t=this.Kit.eet(),s=t.sht();return this.het=null,this.mlt=this.Net().length<=2,s}Bit(t){this.het=null;const s=this.Kit.eet();s.iht(t),this.mlt=this.Net().length<=2}bq(){return{sourceAdapterJson:this.ctt().bq(),basic:this.mlt}}vq(t){t&&(this.ctt().vq(t.sourceAdapterJson),this.mlt=t.basic)}}}{const zr=self.Ns,Jr=self.yc;zr.Hc=class extends zr.nn{constructor(t,s=!0){super(),this.dn=t[0],this.glt=t[2],this.ylt=[];for(const i of t[1]){const e=zr.wlt.vx(this,i);this.ylt.push(e)}for(let t=0;t<this.ylt.length;t++){const h=this.ylt[t],n=this.ylt[t+1],r=this.ylt[t-1];h.Hot(n),h.hat(r)}this.Slt=new Map,this.blt=new Map,this.vlt(),s&&Jr.Jc(this.dn,(t,s,i,e)=>this.Uc(t,s,i,e),null,{transition:this})}static vx(t){return zr.an(zr.Hc,t)}ln(){for(const t of this.ylt)t.ln();zr.Br(this.ylt),this.ylt=null,this.Slt.clear(),this.Slt=null,this.blt.clear(),this.blt=null}zc(t){this.glt=!!t}Mlt(t){const s=this.blt.get(t);if(s)return s;for(const i of this.ylt)if(i.xlt()===t)return this.blt.set(t,i),i}_lt(s){for(let t=this.ylt.length-1;0<=t;t--){const i=this.ylt[t],e=i.xlt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.dZ();if(!h)break;if(h.xlt()!==t.xlt())break;t=h}return t}}}}Uc(t,s,i,e){let h=t/e;if(this.glt){const w=this.Mlt(0),S=this.Mlt(1),b=s+(s+i)*w.Glt(),v=(s+i)*S.Glt(),M=v-b;return 0===e?b+M:Jr.$c(t,b,M,e)}0===e&&(h=1);let n=this._lt(h),r=n.fZ();if(!r){const x=n.dZ(),_=n;n=x,r=_}const o=r.xlt()-n.xlt(),a=zr.pn(h,n.xlt(),r.xlt(),0,o);if(n.Tlt()||0==o){const G=s+(s+i)*n.Glt(),T=(s+i)*r.Glt(),I=T-G;return 0==o?1===a?G+I:G:Jr.$c(a,G,I,o)}let l=n.xlt(),u=n.Glt(),c=n.xlt()+n.Ilt(),f=n.Glt()+n.Clt(),d=r.xlt()+r.Plt(),p=r.Glt()+r.Rlt(),m=r.xlt(),g=r.Glt(),y=Jr.Fc("spline")(a,l,u,c,f,d,p,m,g,this.Slt.get(n));return(1-(y+=n.Glt()))*s+y*(s+i)}vlt(){this.Slt.clear();for(let t=0;t<this.ylt.length-1;t++){const s=this.ylt[t];if(s.Zrt()){const i=s,e=this.ylt[t+1];if(e.Qrt()){const h=i.xlt(),n=i.xlt()+i.Ilt(),r=e.xlt()+e.Plt(),o=e.xlt();this.Slt.set(i,Jr.Xc(h,n,r,o))}}}}}}{const qr=self.Ns;qr.wlt=class extends qr.nn{constructor(t,s){super(),this.Elt=t,this.Alt=s[0],this.Flt=s[1],this.Olt=s[2],this.Dlt=s[3],this.klt=s[4],this.Llt=s[5],this.pat=s[6],this.gat=s[7],this.Nlt=s[8],this.Uot=null,this.iat=null}ln(){this.Elt=null}static vx(t,s){return qr.an(qr.wlt,t,s)}Hot(t){this.Uot=t}fZ(){return this.Uot}hat(t){this.iat=t}dZ(){return this.iat}xlt(){return this.Alt}Glt(){return this.Flt}Ilt(){return this.Olt}Clt(){return this.Dlt}Plt(){return this.klt}Rlt(){return this.Llt}Zrt(){return this.pat}Qrt(){return this.gat}Tlt(){return"linear"===this.Nlt}Blt(){return"cubic"===this.Nlt}}}{const $r=self.Ns;$r.Wlt=class extends $r.nn{constructor(t){super(),this.uf=t,this.jlt=[]}ln(){for(const t of this.jlt)t.ln();$r.Br(this.jlt),this.jlt=null}vx(t){this.jlt.push($r.Hc.vx(t))}}}{const Xr=self.Ns;Xr.Vlt=class extends Xr.nn{constructor(t){super(),this.uf=t,this.Ult=null,this.Hlt=null,this.OY=t=>this.DY(t.F6)}ln(){if(this.HY(),this.Ult){for(const t of this.Ult.values())t.clear();this.Ult.clear()}this.Ult=null,this.uf=null}vx(t){if(this.Ult||(this.Ult=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.Ult.has(e)||this.Ult.set(e,new Map),this.Ult.get(e));h.set(i,t)}}zY(){const t=this.uf.Uf();t&&t.addEventListener("instancedestroy",this.OY)}HY(){const t=this.uf.Uf();t&&t.removeEventListener("instancedestroy",this.OY)}zlt(){return!!this.Ult&&0!==this.Ult.size}Jlt(t,s){let i;if(i=t instanceof Xr.qlt?t.LF():t,this.Ult.has(i)){const e=this.Ult.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}$lt(t,s){this.Hlt||(this.Hlt=new WeakMap),this.Hlt.has(t)||this.Hlt.set(t,s)}Xlt(t){if(!this.Hlt)return"";const s=this.Hlt.get(t);return s||""}DY(t){this.Hlt&&this.Hlt.has(t)&&this.Hlt.delete(t)}}}{const Yr=self.Ns;Yr.Ylt=class{constructor(t){this.uf=t,this.Klt=new Yr.Zlt}ln(){this.Klt.ln(),this.Klt=null,this.uf=null}XD(){return this.uf}vx(t){this.Klt.fc(t)}Qlt(t){return this.Klt.ei(t)}tut(){return this.Klt.tut()}}}{const g=self.Ns;g.sut=class{constructor(t,s,i,e,h,n,r){this.uf=h.XD(),this.iut=h,this.eut=t,this.hut=i,this.nut=e,this.Zg=s,this.mY=n,this.rut=r??n.ZW().YN(),this.out(),this.aut=this.uut?.lut()??-1,this.cut=[],this.fut=null,this.dut=NaN,this.mut=null,this.gut=null,this.yut=null,this.wut="",this.Sut=null,this.but="",this.vut="",this.Mut=0,this.xut=!1,this.VQ=!1}ln(){this.VQ||(g.Br(this.cut),this.cut=null,this.uf=null,this.iut=null,this.nut=null,this.mY=null,this.fut=null,this.dut=NaN,this.mut&&this.mut.clear(),this.mut=null,this.gut=null,this.yut=null,this.wut="",this.Sut=null,this.but="",this.vut="",this.VQ=!0)}un(){return this.VQ}_ut(){return this.iut}XD(){return this.uf}Qc(){return this.eut}Gut(){return this.nut}GW(){return this.Zg}hK(){return this.mY||(this.mY=this.uf.xD(this.rut).M6()),this.mY}Tut(){return this.Iut(this.aut)}Cut(){const t=this.Tut();return t?t.GW():""}Put(){const t=this.Tut();return t?t.jW():[]}Rut(t){const s=this.Put();if(!s)return!1;if(!s.length)return!1;const i=g.sut.Ttt(t);return!(!i||!i.length)&&i.every(g.sut.Ctt,s)}Eut(t,s){const i=this.Put();if(!i)return!1;if(!i.length)return!1;const e=g.sut.Ttt(t);return!(!e||!e.length)&&e.every(t=>g.sut.Aut.call(i,t,s))}static Ctt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Ttt(t){return t.trim().split(" ")}static Aut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>g.compare(t.trim(),i,s.trim()))}Fut(t){const s=this.Tut();if(s){if(g.me(t)){const i=s.Out(),e=i?i[t]:void 0;if(g.me(e))return this.Iut(e)}if("string"==typeof t)for(const h of s.Out()){const n=this.Iut(h);if(n.EW(t))return this.Iut(n.lut())}}}Dut(t){const s=this.Fut(t);return s?s.GW():""}kut(t){const s=this.Fut(t);return s?s.jW():""}Lut(t){const s=this.Tut();if(!s)return-1;const i=s.Out();if(!i)return-1;const e=this.Fut(t);return e?i.indexOf(e.lut()):-1}Nut(){const t=this.Tut();if(!t)return 0;const s=t.Out();return s?s.length:0}Iut(t){return this.nut.Iut(t)}u0(){const t=this.But();t.Wut(!0)}Wut(t){if(this.jut()){for(const[s,i]of this.jut().entries())i.Wut(!1);this.jut().clear()}if(this.mut=null,this.fut=null,this.Vut=null,this.gut=null,this.wut="",this.Sut=null,this.but="",this.vut="",this.cut=[],t){this.iut.Uut(this);const e=this.uut.lut();e!==this.aut&&this.Hut(e)}else this.aut=this.uut.lut()}zut(){const t=this.nut.Iut(this.aut);return t?t.qut().Jut():0}$ut(t){const s=this.Xut(t);return s?s.Qc():""}Yut(t){let s;return g.me(t)&&(s=this.Xut(t)),"string"==typeof t&&(s=this.Kut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Get():""}Zut(t){let s;if(g.me(t)&&(s=this.Xut(t)),s="string"==typeof t?this.Kut(t):s){const i=s.Qut();g.me(i)&&(this.cut.push(this.aut),this.Hut(i))}}tct(t){const s=this.nut.sct(t);if(s){const i=this.nut.Iut(s.lut());i&&(this.cut.push(this.aut),this.Hut(i.lut()))}}ict(){const t=this.cut.pop();g.me(t)?this.Hut(t):this.ect()&&(this.iut.Uut(this.ect(),!0,!1,!1),this.ect().Hut(this.hct()),this.But().nct(this.ect()))}rct(t){const s=this.Tut();if(s){s.lut();const i=this.Fut(t);i&&(this.cut.push(this.aut),this.Hut(i.lut()))}}oct(s){if(g.me(s)){const t=this.nut.Iut(this.aut),i=t.qut().lct();return!!i[s]}if("string"==typeof s){const e=this.nut.Iut(this.aut),h=e.qut().lct();for(let t=0;t<h.length;t++)if(h[t].Qc()===s)return!0}return!1}uct(){this.xut=!0}cct(){return 0<this.Mut}fct(){this.Mut++}dct(){this.Mut--,0===this.Mut&&this.xut&&this.iut.pct(this)}Hut(t){const i=this.aut,s=this.hK().ZW();if(this.fct(),this.iut.mct(this),this.uf.M4(g.uX.Flowchart.aX.OnBeforeAnyNodeChange,s),this.uf.M4(g.uX.Flowchart.aX.OnBeforeTaggedNodeChange,s),this.uf.M4(g.uX.Flowchart.aX.OnBeforeAnyNodeChangeInFlowchart,s),this.uf.M4(g.uX.Flowchart.aX.OnBeforeTaggedNodeChangeInFlowchart,s),this.aut=t,this.uf.M4(g.uX.Flowchart.aX.OnAnyNodeChange,s),this.uf.M4(g.uX.Flowchart.aX.OnTaggedNodeChange,s),this.uf.M4(g.uX.Flowchart.aX.OnAnyNodeChangeInFlowchart,s),this.uf.M4(g.uX.Flowchart.aX.OnTaggedNodeChangeInFlowchart,s),this.iut.gct(),this.dct(),!this.un()){const e=this.Iut(this.aut);if("reference"===e.x_()){const h=e.yct();if(this.wct(e)){this.cut.pop();const n=this.Sct(e),r=(this.iut.Uut(n,!0,!0,!1),n.bct(this,i),this.But());r.nct(n)}else{const o=e.vct();if(h){this.cut.pop();let s=e.Mct();if(s){let t=this.iut.xct(s);for(;t;)s=g.K1(s),t=this.iut.xct(s)}else{s=h+"-ref";let t=this.iut.xct(s);for(;t;)s=g.K1(s),t=this.iut.xct(s)}const a=this.iut._ct(h,o,s,this.mY,!0),l=(a.bct(this,i),this.Gct(e,a),this.But());a.Tct(l),l.nct(a)}}}}}Xut(t){const s=this.nut.Iut(this.aut);if(!s)return null;const i=s.qut().lct();if(!i)return null;const e=i[t];return e||null}Kut(t){const s=this.nut.Iut(this.aut);if(!s)return null;const i=s.qut().Ict(t);return i||null}out(s){if("number"==typeof s){let t=this.Iut(s);t=t||this.nut.Cct(),this.uut=t}else{let t=this.nut.sct(this.hut);t=t||this.nut.Cct(),this.uut=t}}bq(){return this.xut?null:{flowchartName:this.eut,flowchartTag:this.Zg,startNodeTag:this.hut,currentNodeId:this.aut,previousNodeIds:this.cut,pluginUID:this.mY.ZW().YN(),reference:{previousFlowchartTag:this.ect()?this.ect().GW():"",previousStartNodeId:g.me(this.hct())?this.hct():NaN,referencesJson:this.Pct(),currentReferenceFlowchartTag:this.Rct()?this.Rct().GW():"",rootFlowchartTag:this.But()?this.But().GW():""}}}Pct(){if(!this.Ect())return null;const t=[];for(const[s,i]of this.jut().entries())t.push({flowchartElementId:s.lut(),flowchartStateTag:i.GW()});return t.length?t:null}vq(t){if(t){if(this.eut=t.flowchartName,this.Zg=t.flowchartTag,this.hut=t.startNodeTag,this.aut=t.currentNodeId,this.cut=t.previousNodeIds,this.rut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.wut=s.previousFlowchartTag,this.dut=s.previousStartNodeId,this.Sut=s.referencesJson,this.but=s.currentReferenceFlowchartTag,this.vut=s.rootFlowchartTag}this.out()}}ect(){return"string"==typeof this.wut&&this.wut&&(this.fut=this.iut.xct(this.wut),this.wut=""),this.fut}hct(){return this.dut}bct(t,s){this.fut=t,this.dut=s}Rct(){return"string"==typeof this.but&&this.but&&(this.gut=this.iut.xct(this.but),this.but=""),this.gut}nct(t){this.gut=t,this.gut===this&&(this.gut=null)}But(){return"string"==typeof this.vut&&this.vut&&(this.yut=this.iut.xct(this.vut),this.vut=""),this.yut||this}Tct(t){this.yut=t}Ect(){return this.Act(),!!this.mut}wct(t){return this.Act(),this.mut&&this.mut.has(t)}Act(){if(this.Sut){this.mut&&this.mut.clear(),this.mut||(this.mut=new Map);for(const t of this.Sut){const s=this.iut.xct(t.flowchartStateTag),i=s.Iut(t.flowchartElementId);this.mut.set(i,s)}this.Sut=null}}jut(){return this.Act(),this.mut}Sct(t){return this.Act(),this.mut.get(t)}Gct(t,s){this.mut||(this.mut=new Map),this.mut.set(t,s)}}}{const Kr=self.Ns;Kr.Fct=class{constructor(t){this.uf=t,this.Oct=new Map,this.Dct=null,this.kct=[],this.Lct=()=>this.BY(),this.Nct=null}ln(){Kr.Br(this.kct),this.kct=null,this.Oct.clear(),this.Oct=null,this.Dct=null,this.uf=null,this.Nct=null}XD(){return this.uf}_ct(t,s,i,e,h,n){const r=this.uf._ut().Qlt(t);if(r){if(!this.Oct.has(i)){const o=new Kr.sut(t,i,s,r,this,e,n);return this.Oct.set(i,o),h&&this.Uut(o,!0),o}{const a=this.Oct.get(i);a&&this.pct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}pct(t){if(t.uct(),!t.cct()){const s=t.GW();this.Oct.delete(s),t.ln(),this.Dct===t&&(this.Dct=null)}}Bct(t){t.u0()}xct(t){return this.Oct.get(t)}mct(t){this.kct.push(t)}gct(){this.kct.pop()}Uut(t,s=!1,i=!1,e=!0){if(e){const h=t.Rct();t=h||t}t!==this.Dct&&(this.Wct(),this.jct(t,s,i))}Vct(t){return"string"==typeof t?this.xct(t):this.kct.length?this.kct[this.kct.length-1]:this.Dct}Wct(){if(this.Dct&&!this.Dct.un()){const t=this.Dct.hK().ZW();this.Dct.fct(),this.mct(this.Dct),this.uf.M4(Kr.uX.Flowchart.aX.OnBeforeFlowchartChange,t),this.gct(),this.Dct.dct()}}jct(t,s=!1,i=!1){if(this.Dct=t,this.Dct&&!this.Dct.un()){const e=this.Dct.hK().ZW();this.Dct.fct(),this.mct(this.Dct),this.uf.M4(Kr.uX.Flowchart.aX.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Dct.out(i),s&&(this.uf.M4(Kr.uX.Flowchart.aX.OnAnyNodeChange,e),this.uf.M4(Kr.uX.Flowchart.aX.OnTaggedNodeChange,e)),this.gct(),this.Dct.dct()}}bq(){return{flowchartJsonObjects:[...this.Oct.values()].map(t=>t.bq()),currentFlowchartTag:this.Dct?this.Dct.GW():null}}vq(t){if(t){this.Nct=t;const s=new Map;for(const i of this.Nct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Oct.has(e)){const h=this.Oct.get(e);h.vq(i),s.set(e,h)}else{const n=this._ct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);n.vq(i),s.set(i.flowchartTag,n)}}for(const[r,o]of this.Oct.entries())s.has(r)||o.ln();this.Oct.clear(),this.Oct=s,this.uf.Q$()?this.uf.Uf().addEventListener("afterload",this.Lct):this.BY()}}BY(){this.uf.Uf().removeEventListener("afterload",this.Lct);const t=this.Oct.get(this.Nct.currentFlowchartTag);t&&this.Uut(t,!0),this.Nct=null}}}{const Zr=self.Ns;Zr.Zlt=class{constructor(){this.Uct=new Map}ln(){for(const t of this.Uct.values())t.ln();this.Uct.clear(),this.Uct=null}fc(t){const s=new Zr.Hct(t),i=s.Qc();this.Uct.set(i,s)}ei(t){return this.Uct.get(t)}tut(){return!!this.Uct.size}static zct(t,s,i,e){if(s)for(const h of s){const n=new i(h,e);t.push(n)}}}}{const Qr=self.Ns;Qr.Hct=class{constructor(t){this.dn=t[0],this.Jct=new Qr.qct(t[1],this)}ln(){this.Jct.ln(),this.Jct=null}$ct(){return this.Jct}Iut(t){return this.Jct.Iut(t)}sct(t){return this.Jct.sct(t)}Cct(){return this.Jct.Cct()}Qc(){return this.dn}}}{const to=self.Ns;class so{constructor(t,s){this.Jct=s,this.wf=t[7],this.Xct=t[0],this.Zg=t[1],this.Zg?this.YQ=this.Zg.trim().split(" ").map(t=>t.trim()):this.YQ=[],this.Yct=t[2],this.Kct=null,this.Zct=null,"dictionary"===this.wf&&(this.Kct=t[3],this.Zct=t[4]),this.Qct=t[6],this.tft=null,this.ift=null,this.eft=null,"reference"===this.wf&&(this.tft=t[8],this.ift=t[9],this.eft=t[10]),this.hft=new to.nft(t[5],this)}ln(){this.Jct=null}$ct(){return this.Jct}qut(){return this.hft}lut(){return this.Xct}GW(){return this.Zg}jW(){return this.YQ}EW(t){if(!this.YQ)return!1;if(!this.YQ.length)return!1;const s=to.sut.Ttt(t);return!(!s||!s.length)&&s.every(to.sut.Ctt,this.YQ)}rft(){return this.Qct}Out(){return this.Yct}oft(){return this.Kct}aft(){return this.Zct}x_(){return this.wf}yct(){return this.tft}vct(){return this.ift}Mct(){return this.eft}}to.qct=class{constructor(t,s){this.nut=s,this.lft=[],this.uft=new Map,this.cft=new Map,this.fft=null,to.Zlt.zct(this.lft,t,so,this);for(const i of this.lft){const e=i.lut(),h=i.GW(),n=i.jW(),r=i.rft();if(this.uft.set(e,i),h)for(const a of n)this.cft.has(a)||this.cft.set(a,new Set),this.cft.get(a).add(i);r&&(this.fft=i);const o=i.qut();for(const l of o.dft()){const u=l.lut();this.uft.set(u,l)}}}ln(){this.nut=null;for(const t of this.lft)t.ln();to.Br(this.lft),this.lft=null}Gut(){return this.nut}Iut(t){return this.uft.get(t)}sct(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.cft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Cct(){return this.fft}*pft(){for(const t of this.lft)yield t}}}{const io=self.Ns;class eo{constructor(t,s){this.hft=s,this.Xct=t[0],this.dn=t[1],this.Lht=t[2],this.mft=t[3]}ln(){this.hft=null}qut(){return this.hft}lut(){return this.Xct}Qc(){return this.dn}Get(){return this.Lht}Qut(){return this.mft}}io.nft=class{constructor(t,s){this.gft=s,this.yft=[],this.wft=new Map,io.Zlt.zct(this.yft,t,eo,this);for(const i of this.yft)this.wft.set(i.Qc(),i)}ln(){this.gft=null;for(const t of this.yft)t.ln();io.Br(this.yft),this.yft=null}Sft(){return this.gft}Jut(){return this.yft.length}lct(){return this.yft}Ict(t){return this.wft.get(t)}*dft(){for(const t of this.yft)yield t}}}{const ho=self.Ns;ho.bft=class extends ho.nn{constructor(t){super(),this.vft=t,this.Mft=[],this.Mft.push(ho.an(ho.xft,this)),this.Kg=0,this._ft=this.Mft[0]}ln(){for(const t of this.Mft)t.ln();ho.Br(this.Mft),this._ft=null,this.vft=null}kN(){return this.vft}UL(){return this._ft}Gft(){return this.Mft[this.Kg-1]}ic(){this.UL().ic()}Tft(){const t=this.Mft,s=++this.Kg;if(s===t.length){const i=ho.an(ho.xft,this);t.push(i),this._ft=i}else{const e=t[s];e.u0(),this._ft=e}}Ift(){const t=this.Mft,s=++this.Kg,i=(s===t.length&&t.push(ho.an(ho.xft,this)),t[s]);i.P0(t[s-1]),this._ft=i}hV(){this._ft=this.Mft[--this.Kg]}Cft(i){const e=this.Mft;for(let t=0,s=e.length;t<s;++t)e[t].Cft(i)}}}{const no=self.Ns;no.xft=class extends no.nn{constructor(t){super(),this.Mft=t,this.vft=this.Mft.kN(),this.Pft=this.vft.XD().IO(),this.Rft=!0,this.UH=[],this.Eft=[]}ln(){this.Aft(),this.Mft=null,this.vft=null,this.Pft=null}Aft(){no.Br(this.UH),no.Br(this.Eft)}kN(){return this.vft}Fft(){return this.Rft}Oft(){return this.Rft?!!this.vft.zL():!!this.UH.length}VL(){return this.Rft?this.vft.VL():this.UH}Dft(){return!!this.Eft.length}kft(){return this.Eft}Lft(){const t=this.VL();return t.length?t:this.Eft}u0(){this.Rft=!0,no.Br(this.Eft)}ic(){this.Rft=!0}P0(t){t.Fft()?this.u0():(this.Rft=!1,no.Ur(this.UH,t.UH),no.Br(this.Eft))}Nft(t){this.UH.push(t)}Bft(t){this.Eft.push(t)}Wft(t){this.Rft=!!t}jft(){return this.UH}Vft(){return this.Eft}Uft(t){this.Rft=!1,no.Br(this.UH),this.UH.push(t)}Hft(t){this.Rft=!1,no.Ur(this.UH,t)}zft(t){this.Rft=!1,no.Br(this.UH);for(const s of t)this.UH.push(s)}Jft(t,s){for(const i of s)t.has(i)||this.Eft.push(i)}qft(t){for(const s of t)this.UH.push(s);no.$r(this.Eft,t)}$ft(){no.Br(this.Eft)}Xft(t){if(t)if(this.Pft.z8().bO().Yft()){this.Fft()&&(no.Br(this.UH),no.Ur(this.Eft,t.kN().VL()),this.Rft=!1);const s=this.Eft.indexOf(t);-1!==s&&(this.UH.push(this.Eft[s]),this.Eft.splice(s,1))}else this.Uft(t)}Cft(t){no.$r(this.UH,t),no.$r(this.Eft,t)}}}{const ro=self.Ns;ro.Kft=class extends ro.nn{constructor(t){super(),this.Zft=t,this.uf=this.Zft.XD(),this.Mft=[],this.Mft.push(ro.an(ro.Qft,this,null)),this.Kg=0,this.t0t=[]}ln(){for(const t of this.Mft)t.ln();ro.Br(this.Mft),ro.Br(this.t0t),this.Zft=null,this.uf=null}pO(){return this.Zft}XD(){return this.uf}z8(){return this.Mft[this.Kg]}s0t(){return this.Mft}i0t(){return this.Kg}J8(t){const s=this.Mft,i=++this.Kg;if(i===s.length){const e=ro.an(ro.Qft,this,t);return s.push(e),e}{const h=s[i];return h.u0(t),h}}hV(){--this.Kg}e0t(t){this.t0t.push(t)}h0t(){this.t0t.pop()}TO(){const t=this.t0t;return 0===t.length?null:t.at(-1)}}}{const oo=self.Ns;oo.Qft=class extends oo.nn{constructor(t,s){super(),this.Mft=t,this.uf=this.Mft.XD(),this.n0t=s,this.r0t=0,this.o0t=0,this.a0t=!1,this.l0t=!1,this.u0t=null,this.c0t=0,this.f0t=0,this.d0t=null}ln(){this.u0(null),this.Mft=null,this.uf=null}u0(t){this.n0t=t,this.r0t=0,this.o0t=0,this.a0t=!1,this.l0t=!1,this.d0t=null}p0t(t,s){this.n0t=t,this.r0t=0,this.o0t=s}m0t(){this.r0t=0,this.o0t=0}bO(){return this.n0t}g0t(t){this.n0t=t}y0t(){return this.r0t}w0t(t){this.r0t=t}S0t(){return this.o0t}b0t(t){this.o0t=t}v0t(t){this.a0t=!!t}M0t(){return this.a0t}x0t(t){this.l0t=!!t}_0t(){return this.l0t}G0t(t){this.u0t=t}T0t(){return this.u0t}I0t(t,s){this.c0t=t,this.f0t=s}CO(){return this.c0t}PO(t){this.f0t=t}C0t(){return this.f0t}P0t(){const t=this.n0t;return!!t.R0t()||this.r0t<t.E0t()-1&&!!t.H8().length}A0t(t){this.d0t=t}F0t(){return this.d0t}}}{const ao=self.Ns;ao.O0t=class extends ao.nn{constructor(t){super(),this.Zft=t,this.uf=this.Zft.XD(),this.Mft=[],this.Kg=-1,this._ft=null,this.D0t=[]}ln(){ao.Br(this.Mft),this.Zft=null,this.uf=null}k0t(t){this.D0t=t;const s=this.D0t.slice(0);this.Mft.push(s),this.Kg=0,this._ft=s}pO(){return this.Zft}XD(){return this.uf}L0t(){return this._ft}J8(){const t=++this.Kg,s=this.Mft;t===s.length?s.push(this.D0t.slice(0)):ao.Ur(s[t],this.D0t),this._ft=s[t]}hV(){this._ft=this.Mft[--this.Kg]}}}{const lo=self.Ns;lo.N0t=class extends lo.nn{constructor(t){super(),this.Zft=t,this.uf=this.Zft.XD(),this.Mft=[],this.Kg=-1}ln(){lo.Br(this.Mft),this.Zft=null,this.uf=null}pO(){return this.Zft}XD(){return this.uf}B0t(){return 0<=this.Kg}L0t(){return this.Mft[this.Kg]}J8(){if(++this.Kg,this.Kg===this.Mft.length){const t=lo.an(lo.W0t,this);return this.Mft.push(t),t}{const s=this.Mft[this.Kg];return s.u0(),s}}hV(){--this.Kg}j0t(s){const i=this.Mft;for(let t=this.Kg;0<=t;--t){const e=i[t];if(e.Qc()===s)return e}return null}V0t(){return this.Mft.slice(0,this.Kg+1)}}}{const uo=self.Ns;uo.W0t=class extends uo.nn{constructor(t){super(),this.U0t=t,this.dn="",this.Kg=0,this.H0t=!1,this.z0t=NaN}u0(){this.dn="",this.Kg=0,this.H0t=!1,this.z0t=NaN}X8(t){this.dn=t}Qc(){return this.dn}sV(t){this.Kg=t}LF(){return this.Kg}PW(){this.H0t=!0}eV(){return this.H0t}J0t(t){this.z0t=t}q0t(){return this.z0t}}}{const co=self.Ns;co.$0t=class extends co.nn{constructor(){super(),this.Mft=[],this.Kg=-1}ln(){co.Br(this.Mft)}L0t(){return this.Mft[this.Kg]}J8(){if(++this.Kg,this.Kg!==this.Mft.length)return this.Mft[this.Kg];{const t=[];return this.Mft.push(t),t}}hV(){--this.Kg}}}{let t=function(t,s){return t.LF()-s.LF()},n=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,n;const fo=self.Ns;fo.X0t=class extends fo.nn{constructor(t){super(),this.uf=t,this.Y0t=[],this.K0t=new Map,this.Z0t=[],this.Q0t=new Map,this.tdt=new Map,this.sdt=new Map,this.idt=new Map,this.edt=new Map,this.hdt=new Map,this.ndt=0,this.rdt=[],this.odt=[],this.adt=[],this.ldt=new Map,this.udt=new Map,this.Pft=fo.an(fo.Kft,this),this.cdt=fo.an(fo.O0t,this),this.U0t=fo.an(fo.N0t,this),this.fdt=[],this.ddt=[],this.pdt=[],this.mdt=0,this.gdt=0,this.ydt=0,this.wdt=[],this.Sdt=[],this.bdt=[],this.vdt=new Map,this.Mdt=new Map,self.c3_callFunction=(t,s)=>this.xdt(t,s)}ln(){this.MX(),this.Pft.ln(),this.Pft=null,this.cdt.ln(),this.cdt=null,fo.Br(this.ddt),fo.Br(this.pdt),this.uf=null,fo.Br(this.Y0t),this.K0t.clear()}vx(t){const s=fo.an(fo._dt,this,t);this.Y0t.push(s),this.K0t.set(s.Qc().toLowerCase(),s)}Gdt(t){this.fdt.push(t)}Tdt(){for(const t of this.udt.values())t.Idt();for(const s of this.ldt.values())s.Tdt();for(const i of this.udt.values())i.Tdt();for(const e of this.Y0t)e.Tdt();for(const h of this.Y0t)h.V$();for(const n of this.fdt)n.Tdt(!1);fo.Br(this.fdt),this.cdt.k0t(this.adt)}XD(){return this.uf}j$(t){return this.K0t.get(t.toLowerCase())||null}Cdt(t){this.Z0t.push(t),this.Q0t.set(t.Pdt(),t)}Rdt(t){this.tdt.set(t.i9(),t)}Edt(t){this.sdt.set(t.i9(),t)}Adt(t){this.idt.set(t.i9(),t)}Fdt(t){switch(t.Odt()){case 0:this.ldt.set(t.Ddt().toLowerCase(),t);break;case 1:this.udt.set(t.Ddt().toLowerCase(),t)}}kdt(t){this.hdt.set(t.i9(),t),(t.Fz()?this.rdt:this.odt).push(t)}Ldt(i){2<=i.length&&i.sort(t);let e=this.edt.get(i.length);e||(e=[],this.edt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(n(i,h))return h}return e.push(i),i}Ndt(t){return this.adt.push(t.Bdt()),this.ndt++}IO(){return this.Pft}Wdt(){return this.IO().z8()}bO(){return this.Wdt().bO()}jdt(){const t=this.Wdt(),s=t.bO();return s.Vdt(t.y0t())}Udt(){const t=this.Wdt(),s=t.bO();return s.Hdt(t.S0t())}zdt(){return this.cdt}q8(){return this.U0t}Jdt(t){const s=[];for(t=t.qdt();t;)fo.$h(s,t.$dt()),t=t.qdt();return s}Xdt(t){const s={};for(const i of this.Jdt(t))s[i.Ydt()]=i.Kdt();return Object.create(Object.prototype,s)}Zdt(t){return this.hdt.get(t)||null}Qdt(t){return this.tdt.get(t)||null}t1t(t){return this.sdt.get(t)||null}s1t(t){return this.idt.get(t)||null}mO(t){return this.ldt.get(t.toLowerCase())||null}i1t(t,s){let i=this.udt.get((t.Qc()+"."+s).toLowerCase());if(i)return i;if(!t.$z())for(const e of t.e1t())if(i=this.udt.get((e.Qc()+"."+s).toLowerCase()))return i;return null}h1t(){return this.rdt}n1t(){return this.odt}r1t(t){for(const s of this.rdt)s.o1t();if(t)for(const i of this.odt)i.u2()&&i.o1t()}a1t(t){return this.Q0t.get(t.toLowerCase())||null}l1t(t){const s=this.tdt.get(t);return s&&s.u1t()?s:null}c1t(){return this.Z0t}f1t(){for(const t of this.Z0t)t.d1t()}p1t(){for(const t of this.Y0t)t.m1t()}g1t(t){this.p1t(),this.mdt++;for(const s of t.rY()){const i=s.m$();i&&(this.uf.y1t(s),i.jT(),this.uf.w1t())}this.mdt--}async S1t(t){this.p1t(),this.mdt++;for(const s of this.b1t(t))await this.uf.v1t(s);this.mdt--}*b1t(t){for(const s of t.rY()){const i=s.m$();i&&(this.uf.y1t(s),yield*i.M1t(),this.uf.w1t())}}x1t(t,s,i,e){let h=!1;if(!t.rD())return this._1t(s,i,e);this.gdt++;for(const n of t.rY()){const r=n.m$();if(r){this.uf.y1t(n);for(const a of r.G1t()){const l=a.x1t(s,i,e);h=h||l}const o=r.x1t(s,i,e);h=h||o,this.uf.w1t()}}return this.gdt--,h}*T1t(t,s,i,e){let h=!1;if(!t.rD())return this._1t(s,i,e);this.gdt++;for(const n of t.rY()){const r=n.m$();if(r){this.uf.y1t(n);for(const a of r.G1t()){const l=yield*a.T1t(s,i,e);h=h||l}const o=yield*r.T1t(s,i,e);h=h||o,this.uf.w1t()}}return this.gdt--,h}_1t(t,s,i){return this.ddt.push([t,s,i]),!1}I1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.pdt.push([t,s,i,e]),h}*C1t(){if(this.uf.P1t())throw new Error("should not be in breakpoint");const t=this.uf.lD();for(;this.pdt.length;){const[s,i,e,h]=this.pdt.shift(),n=yield*this.T1t(t,s,i,e);h(n)}}async R1t(){for(const t of this.C1t())await this.uf.v1t(t)}E1t(t,i,e,h){let n=!1,s=t.rD(),r=s.m$();if(r){this.gdt++,this.uf.y1t(s);const o=r.G1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].E1t(i,e,h);n=n||l}const a=r.E1t(i,e,h);return n=n||a,this.uf.w1t(),this.gdt--,n}}*A1t(t,i,e,h){let n=!1,s=t.rD(),r=s.m$();if(r){this.gdt++,this.uf.y1t(s);const o=r.G1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].A1t(i,e,h);n=n||l}const a=yield*r.A1t(i,e,h);return n=n||a,this.uf.w1t(),this.gdt--,n}}F1t(){return this.gdt}O1t(){return 0<this.F1t()}D1t(){return++this.gdt}k1t(){--this.gdt}L1t(){return 0<this.mdt}KL(){return this.L1t()||this.O1t()}cX(t){for(const[s,i,e]of this.ddt)this.x1t(t,s,i,e);fo.Br(this.ddt)}XL(t){t?this.ydt++:this.ydt--}HN(){return 0<this.ydt}N1t(i){for(let t=0,s=i.length;t<s;++t)i[t].B1t().ic()}W1t(i){for(let t=0,s=i.length;t<s;++t)i[t].B1t().Tft()}Z8(i){for(let t=0,s=i.length;t<s;++t)i[t].B1t().Ift()}tV(i){for(let t=0,s=i.length;t<s;++t)i[t].B1t().hV()}vO(s){const i=new Set,e=this.Pft.s0t(),h=this.Pft.i0t();for(let t=0;t<=h;++t){const n=e[t].F0t();if(n)for(const r of n)s&&s.has(r)||i.add(r)}return i}j1t(t){const s=new Set([...t]),i=this.vO(s);if(0<i.size){for(const e of i)e.B1t().Tft();return[...i]}return null}V1t(){const t=fo.an(fo.U1t,this);return this.wdt.push(t),t}H1t(){return this.wdt}z1t(){if(this.wdt.length){let i=this.Wdt(),e=!1;this.mdt++;for(let t=0,s=this.wdt.length;t<s;++t){const h=this.wdt[t];h.J1t()&&h.q1t(i),h.$1t()&&(e=!0)}e&&(this.X1t(),i.u0(null)),this.mdt--}}async Y1t(){if(this.wdt.length){let i=this.Wdt(),e=!1;this.mdt++;for(let t=0,s=this.wdt.length;t<s;++t){const h=this.wdt[t];h.J1t()&&await h.K1t(i),h.$1t()&&(e=!0)}e&&(this.X1t(),i.u0(null)),this.mdt--}}X1t(){const t=fo.qr(this.wdt,t=>t.$1t());for(const s of t)s.ln()}MX(){for(const t of this.wdt)t.ln();fo.Br(this.wdt)}Z1t(t){for(const s of this.wdt)s.Cft(t);for(const i of t){const e=this.Mdt.get(i);if(this.Mdt.delete(i),e)for(const{resolve:h}of e.Q1t.values())h(!0)}}tpt(t){this.Sdt.push({promise:t,spt:this.F1t()})}ipt(){fo.Br(this.Sdt)}ept(){const s=this.F1t();this.Sdt=this.Sdt.filter(t=>t.spt<=s)}hpt(){const t=Promise.all(this.Sdt.map(t=>t.promise));return this.Sdt=[],t}RO(t){const s=t.toLowerCase();this.bdt.push(s),this.uf.M4(fo.uX.lX.aX.npt,null),this.bdt.pop();for(const e of this.uf.pO().H1t())e.rpt()&&e.opt()===s&&e.apt();const i=this.vdt.get(s);i&&(i.resolve(),this.vdt.delete(s))}AO(t){const i=t.toLowerCase(),s=this.vdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.vdt.set(i,{promise:t,resolve:s}),t}}lpt(){if(0===this.bdt.length)throw new Error("not in a signal");return this.bdt.at(-1)}upt(t){let s=this.Mdt.get(t);return s||(s={cpt:[],Q1t:new Map},this.Mdt.set(t,s)),s}o4(t,s){const i=this.upt(t),e=s.toLowerCase();i.cpt.push(e),this.uf.M4(t.EL().dpt().aX.fpt,t),i.cpt.pop();for(const n of this.uf.pO().H1t())n.ppt()&&n.opt()===e&&n.mpt(t);const h=i.Q1t.get(e);h&&(h.resolve(!1),i.Q1t.delete(e)),0===i.cpt.length&&0===i.Q1t.size&&this.Mdt.delete(t)}a4(t,s){const i=this.upt(t),e=s.toLowerCase(),h=i.Q1t.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.Q1t.set(e,{promise:t,resolve:s}),t}}gpt(t){const s=this.upt(t);if(s&&0!==s.cpt.length)return s.cpt.at(-1);throw new Error("not in a signal")}bq(){return{groups:this.ypt(),cnds:this.wpt(),acts:this.Spt(),vars:this.bpt(),waits:this.vpt()}}vq(t){this.Mpt(t.groups),this.xpt(t.cnds),this._pt(t.acts),this.Gpt(t.vars),this.Tpt(t.waits)}ypt(){const t={};for(const s of this.c1t())t[s.i9().toString()]=s.Ipt();return t}Mpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.l1t(e);h&&h.Cpt(i)}}wpt(){const t={};for(const[s,i]of this.sdt){const e=i.bq();e&&(t[s.toString()]=e)}return t}xpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.sdt)n.vq(s.get(h)||null)}Spt(){const t={};for(const[s,i]of this.idt){const e=i.bq();e&&(t[s.toString()]=e)}return t}_pt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.idt)n.vq(s.get(h)||null)}bpt(){const t={};for(const[s,i]of this.hdt)i.Ppt()||!i.Fz()&&!i.u2()||(t[s.toString()]=i.Get());return t}Gpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.Zdt(e);h&&h.oht(i)}}vpt(){return this.wdt.filter(t=>!t.Rpt()).map(t=>t.bq())}Tpt(t){this.MX();for(const s of t){const i=fo.U1t.Ept(this,s);i&&this.wdt.push(i)}}Apt(){return[...this.uf.lD().rY()].map(t=>t.m$()).filter(t=>t).map(t=>t.Fpt())}Opt(t){for(;t;){const s=t.qdt();if(s instanceof fo.Dpt)return s;t=s}return null}xdt(t,s){Array.isArray(s)||(s=[]);const i=this.mO(t.toLowerCase());if(!i)return null;if(!i.Zu())return i.gO();const e=i.kpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Bdt()),s.length<e.length;);const h=i.wO();return h.MO(h.SO(),!1,i._O(),i.gO(),...s)}}}{const po=self.Ns;po._dt=class extends po.nn{constructor(t,s){super(),this.Zft=t,this.uf=t.XD(),this.dn=s[0],this.Lpt=[],this.Npt=new Map,this.Bpt=new Map,this.Wpt=new Map,this.jpt=!1,this.Vpt=[],this.Upt=[],this.Hpt=new Set;for(const i of s[1])this.zpt(i,null,this.Lpt);this.Jpt=this.uf.jX()?{type:"sheet",name:this.dn,qpt:0,children:[]}:null}ln(){this.Zft=null,this.uf=null}zpt(t,s,i){switch(t[0]){case 0:case 3:this.$pt(t,s,i);break;case 1:this.Xpt(t,s,i);break;case 2:this.Ypt(t,s,i);break;case 4:this.Kpt(t,s);break;case 5:this.Zpt(t,s,i);break;case 6:this.Qpt(t,s);break;default:throw new Error("invalid event type")}}$pt(t,s,i){const e=po.tmt.vx(this,s,t);if(e.Yft()){i.push(e);const h=e.smt();for(let t=0,s=h.length;t<s;++t)h[t].imt()&&this.emt(e,t)}else e.imt()?this.emt(e,0):i.push(e)}Kpt(t,s){const i=po.Dpt.hmt(this,s,t);this.Zft.Fdt(i)}Qpt(t,s){const i=po.Dpt.nmt(this,s,t);this.Zft.Fdt(i)}Xpt(t,s,i){const e=po.rmt.vx(this,s,t);i.push(e)}Ypt(t,s,i){const e=po.omt.vx(this,s,t);i.push(e)}Zpt(t,s,i){const e=po.amt.vx(this,s,t);i.push(e)}emt(h,n){h.Yft()||this.Zft.Gdt(h);const r=h.Vdt(n),o=r.lmt(),a=r.kN();if(r.umt()){let t=this.Bpt.get(a),s=(t||(t=new Map,this.Bpt.set(a,t)),r.cmt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,n])}else{let t=this.Npt.get(a),s=(t||(t={fmt:new Map,dmt:new Map},this.Npt.set(a,t)),r.A6()),i,e=(s?(i=t.dmt.get(s))||(i=new Map,t.dmt.set(s,i)):i=t.fmt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,n])}}Tdt(){const i=this.Lpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof po.tmt&&i[t+1].pmt();i[t].Tdt(e)}}mmt(t){this.Vpt.push(t)}V$(){po.Br(this.Upt),this.gmt(this),this.Hpt.clear()}gmt(t){const s=t.Upt,i=t.Hpt;for(const e of this.Vpt){const h=e.ymt();e.wmt()&&t!==h&&!i.has(h)&&(i.add(h),h.gmt(t),s.push(h))}}G1t(){return this.Upt}pO(){return this.Zft}XD(){return this.uf}Qc(){return this.dn}Smt(t,s){this.Wpt.set(s,t)}bmt(t){return this.Wpt.get(t)||null}m1t(){this.jpt=!1}jT(){if(!this.jpt){const t=this.uf,s=t.vmt(),i=s?performance.now():0,e=(this.jpt=!0,this.pO()),h=e.Wdt();for(const n of this.Lpt)n.jT(h),e.N1t(n.H8()),e.ipt(),t.QL();h.u0(null),s&&(this.Jpt.qpt+=performance.now()-i)}}*M1t(){if(!this.jpt){this.jpt=!0;const t=this.uf,s=this.pO(),i=s.Wdt();for(const e of this.Lpt)yield*e.M1t(i),s.N1t(e.H8()),s.ipt(),t.QL();i.u0(null)}}x1t(e,h,n){if(!h)return this.Mmt(e,h,null,null);{let t=h.kN(),s=!1,i=this.Mmt(e,h,t,n);s=s||i;for(const r of t.e1t())i=this.Mmt(e,h,r,n),s=s||i}}Mmt(t,s,i,e){const h=this.Npt.get(i);if(!h)return!1;const n=e?h.dmt.get(e):h.fmt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){const u=this.xmt(s,a,l);o=o||u}return o}*T1t(e,h,n){if(!h)return yield*this._mt(e,h,null,null);{let t=h.kN(),s=!1,i=yield*this._mt(e,h,t,n);s=s||i;for(const r of t.e1t())i=yield*this._mt(e,h,r,n),s=s||i}}*_mt(t,s,i,e){const h=this.Npt.get(i);if(!h)return!1;const n=e?h.dmt.get(e):h.fmt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){let t;t=a.Gmt()?this.xmt(s,a,l):yield*this.Tmt(s,a,l),o=o||t}return o}E1t(t,s,i){const e=s.kN(),h=this.Bpt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const a=r[t],l=this.xmt(null,a[0],a[1]);o=o||l}return o}*A1t(t,s,i){const e=s.kN(),h=this.Bpt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let h=0,t=r.length;h<t;++h){let t=r[h],s=t[0],i=t[1],e;e=s.Gmt()?this.xmt(null,s,i):yield*this.Tmt(null,s,i),o=o||e}return o}xmt(t,s,i){let e=this.uf,h=this.Zft,n=h.bO(),r=h.IO(),o=h.F1t(),a=!1;n&&h.W1t(n.SO()),h.W1t(s.SO());const l=1<o,u=(l&&h.zdt().J8(),r.J8(s));if(t){const f=s.smt()[i].kN(),d=f.UL();d.Uft(t),t.$N()&&t.Imt()}let c=!0;if(s.IB()){const p=s.Cmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Pmt(u)){c=!1;break}}return c&&(s.Yft()?s.Rmt(u,i):s.jT(u),a=u.M0t()),r.hV(),l&&h.zdt().hV(),h.tV(s.SO()),n&&h.tV(n.SO()),n||1!==o||(h.ipt(),h.HN())||e.QL(),a}*Tmt(t,s,i){let e=this.uf,h=this.Zft,n=h.bO(),r=h.IO(),o=h.F1t(),a=!1;n&&h.W1t(n.SO()),h.W1t(s.SO());const l=1<o,u=(l&&h.zdt().J8(),r.J8(s));if(t){const f=s.smt()[i].kN(),d=f.UL();d.Uft(t),t.$N()&&t.Imt()}let c=!0;if(s.IB()){const p=s.Cmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Emt(u))){c=!1;break}}return c&&(s.Yft()?yield*s.Amt(u,i):yield*s.M1t(u),a=u.M0t()),r.hV(),l&&h.zdt().hV(),h.tV(s.SO()),n&&h.tV(n.SO()),n||1!==o||(h.ipt(),h.HN())||e.QL(),a}Fpt(){return this.Jpt}}}{let u=function(t,s){return!0};u;const mo=self.Ns,go=[];function*W(t,s){return!0}mo.tmt=class extends mo.nn{constructor(t,s,i){super(),this.Oq=t,this.uf=t.XD(),this.Fmt=s,this.Omt=null,this.Pft=this.uf.pO().IO(),this.Dmt=[],this.kmt=[],this.Lmt=!1,this.Nmt=!1,this.Bmt=!1,this.Wmt=!1,this.jmt=!!i[2],this.Vmt=!1,this.Umt=null,this.Hmt=[],this.jht=[],this.zmt=[],this.Jmt=u,this.qmt=W,this.$mt=!1,this.Xmt=!1,this.Ymt="",this.Kmt=!1,this.Zmt=null,this.Jpt=null,this.v7=i[4],this.Qmt=i[5],this.Oq.Smt(this,this.Qmt),this.tgt=this.uf.jX()?{sgt:i[3][0],igt:i[3][1],egt:!1,hgt:!1,ngt:!1,rgt:!1}:null,this.pO().Rdt(this),3===i[0]&&this.ogt(i[1]);let e=0;for(const h of i[6]){const n=mo.agt.vx(this,h,e++);this.Hmt.push(n),this.lgt(n.kN())}e=0;for(const r of i[7]){const o=mo.ugt.vx(this,r,e++);this.jht.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.Oq.zpt(l,this,this.zmt)}this.Hmt.length&&(this.Vmt=null===this.Hmt[0].kN()&&this.Hmt[0].lmt()===mo.uX.lX.aX.cgt),0===this.Hmt.length&&(this.Hmt=go),0===this.jht.length&&(this.jht=go),0===this.zmt.length&&(this.zmt=go)}static vx(t,s,i){return mo.an(mo.tmt,t,s,i)}ogt(t){this.$mt=!0,this.Xmt=!!t[0],this.Kmt=this.Xmt,this.Ymt=t[1].toLowerCase(),this.Zmt=[],this.pO().Cdt(this),this.uf.jX()&&(this.Jpt={type:"group",name:t[1],qpt:0,children:[]})}fgt(t){this.Zmt.push(t)}dgt(t,s){for(const i of t.C$().pX())s.includes(i)||s.push(i)}pgt(t,s){if(t)if(s.includes(t)||s.push(t),t.$z())for(const i of t.mgt())i.$N()&&this.dgt(i,s);else t.$N()&&this.dgt(t,s)}lgt(t){this.pgt(t,this.Dmt)}ggt(t){this.pgt(t,this.kmt)}ygt(){this.Dmt=this.uf.qz()}Tdt(t){this.Wmt=!!t,this.wgt(),this.Sgt();for(const s of this.Hmt)s.Tdt();if(0<this.jht.length){let t=!1;for(const e of this.jht)e.Tdt(),e.bgt()&&(t=!0);t?(this.Jmt=this.vgt,this.qmt=this.Mgt):(this.Jmt=this.xgt,this.qmt=this._gt)}const i=this.zmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof mo.tmt&&i[t+1].pmt();i[t].Tdt(h)}this.tgt&&this.Ggt(),this.Jpt&&this.Tgt().Fpt().children.push(this.Jpt)}Fpt(){return this.Jpt}Tgt(){let t=this.IB();for(;t;){if(t.u1t())return t;t=t.IB()}return this.Oq}Ggt(){const t=this.tgt;t.egt=this.Hmt.every(t=>t.Gmt()),t.hgt=this.jht.every(t=>t.Gmt()),t.ngt=this.zmt.every(t=>t.Gmt()),t.rgt=t.egt&&t.hgt&&t.ngt}Igt(){let t=this;for(;t.Ggt(),t=t.IB(););}wgt(){if(this.u1t()){let t=this.IB();for(this.Bmt=!0;t;){if(!t.u1t()){this.Bmt=!1;break}t=t.IB()}}}Cgt(){const t=this.uf.qz();if(this.Dmt===t)this.kmt=t;else{this.kmt=mo.Kr(this.Dmt);let t=this.IB();for(;t;){for(const i of t.Dmt)this.ggt(i);t=t.IB()}const s=this.pO();this.Dmt=s.Ldt(this.Dmt),this.kmt=s.Ldt(this.kmt)}}Sgt(){if(this.Pgt()){this.Umt=[];let t=this.IB();for(;t;)this.Umt.push(t),t=t.IB();this.Umt.reverse()}}Rgt(){this.Nmt=!0,this.Fmt&&this.Fmt.Rgt()}R0t(){return this.Nmt}H8(){return this.Dmt}SO(){return this.Lmt||(this.Lmt=!0,this.Cgt()),this.kmt}Egt(t){return this.Dmt.includes(t)}Cmt(){return this.Umt}m$(){return this.Oq}pO(){return this.Oq.pO()}XD(){return this.uf}IB(){return this.Fmt}Agt(t){this.Omt=t}qdt(){return this.Omt||this.Fmt}Fgt(){return this.Qmt}Ogt(){return this.tgt&&this.tgt.igt}Dgt(){return this.Ogt()&&this.tgt.sgt}kgt(t){this.tgt.sgt=!!t,this.Igt()}u1t(){return this.$mt}Lgt(){return this.Bmt}pmt(){return this.Vmt}Ngt(){return this.Wmt}Pdt(){return this.Ymt}Ipt(){return this.Kmt}d1t(){this.Cpt(this.Xmt)}Cpt(t){if(t=!!t,!this.$mt)throw new Error("not a group");if(this.Kmt!==t){this.Kmt=t;for(const s of this.Zmt)s.Bgt();if(this.Zmt.length){const i=this.uf.TD(),e=i.m$();e&&e.V$()}}}i9(){return this.v7}Yft(){return this.jmt}imt(){return this.Hmt.length&&this.Hmt[0].imt()}Wgt(){return this.Omt&&this.Omt instanceof mo.Dpt}Pgt(){return this.Wgt()||this.Hmt.some(t=>t.imt())}smt(){return this.Hmt}E0t(){return this.Hmt.length}Vdt(t){if((t=Math.floor(t))<0||t>=this.Hmt.length)throw new RangeError("invalid condition index");return this.Hmt[t]}jgt(t){return this.Vdt(t)}Vgt(t){let s=t.LF();if(0!==s){--s;const i=t.Ugt()?t.Hgt():t.kN();for(;0<=s;--s){const e=this.Hmt[s];if(i===e.kN()||e.Ugt()&&e.Hgt()===i)return!1}}return!0}zgt(){return this.jht}Jgt(){return this.jht.length}Hdt(t){if((t=Math.floor(t))<0||t>=this.jht.length)throw new RangeError("invalid action index");return this.jht[t]}qgt(s){s=Math.floor(s);const t=this.jht.find(t=>t.$gt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Xgt(t){return 0<=(t=Math.floor(t))&&t<this.jht.length}Ygt(){return this.zmt}$dt(){return this.zmt.filter(t=>t instanceof mo.rmt)}Pmt(i){i.g0t(this);let e=this.Hmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.w0t(t),n.z6())throw new Error("trigger cannot be used as sub-event to a loop");if(n.jT())h=!0;else if(!this.jmt)return!1}return!this.jmt||h}Rmt(t,s){t.g0t(this),t.w0t(s),this.Hmt[s].jT()&&(this.Jmt(t,0)&&this.Kgt(t),t.v0t(!0))}*Emt(i){i.g0t(this);let e=this.Hmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.w0t(t),n.z6())throw new Error("trigger cannot be used as sub-event to a loop");if(n.Gmt()?n.jT():yield*n.M1t())h=!0;else if(!this.jmt)return!1}return!this.jmt||h}*Amt(t,s){t.g0t(this),t.w0t(s);let i=this.Hmt[s];if(i.Gmt()?i.jT():yield*i.M1t())(this.Zgt()?this.Jmt(t,0):yield*this.qmt(t,0))&&(this.Qgt()?this.Kgt():yield*this.tyt()),t.v0t(!0)}jT(t){t.g0t(this),this.Vmt||t.x0t(!1),this.jmt?this.syt(t):this.iyt(t)}*M1t(t){(this.Dgt()||this.uf.eyt())&&(yield this),t.g0t(this),this.Vmt||t.x0t(!1),this.jmt?yield*this.hyt(t):yield*this.nyt(t)}syt(i){let e=this.Hmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(!n.imt()){i.w0t(t);const r=n.jT();h=h||r}}i.v0t(h),h&&(this.Jmt(i,0)&&this.Kgt(i),this.Wmt)&&i.x0t(!0)}*hyt(i){let e=this.Hmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const n=e[s];if(!n.imt()){i.w0t(s);let t;t=n.Gmt()?n.jT():yield*n.M1t(),h=h||t}}if(i.v0t(h),h)(this.Zgt()?this.Jmt(i,0):yield*this.qmt(i,0))&&(this.Qgt()?this.Kgt():yield*this.tyt()),this.Wmt&&i.x0t(!0)}iyt(i){const e=this.Hmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=(i.w0t(t),h.jT());if(!n)return void i.v0t(!1)}i.v0t(!0),this.Jmt(i,0)&&this.Kgt(i),i.M0t()&&this.Wmt&&i.x0t(!0)}*nyt(i){const e=this.Hmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.w0t(t);if(!(h.Gmt()?h.jT():yield*h.M1t()))return void i.v0t(!1)}i.v0t(!0);(this.Zgt()?this.Jmt(i,0):yield*this.qmt(i,0))&&(this.Qgt()?this.Kgt():yield*this.tyt()),i.M0t()&&this.Wmt&&i.x0t(!0)}xgt(i,e){const h=this.jht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.b0t(t),n.jT()}return!0}*_gt(i,e){const h=this.jht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.b0t(t),n.Gmt()?n.jT():yield*n.M1t()}return!0}vgt(i,e){const h=this.pO(),n=this.jht;for(let t=e,s=n.length;t<s;++t){const r=n[t],o=(i.b0t(t),r.jT());if(r.ryt()&&!0===o)return!1;r.oyt()&&o instanceof Promise&&h.tpt(o)}return!0}*Mgt(i,e){const h=this.pO(),n=this.jht;for(let s=e,t=n.length;s<t;++s){const r=n[s];i.b0t(s);let t;if(t=r.Gmt()?r.jT():yield*r.M1t(),r.ryt()&&!0===t)return!1;r.oyt()&&t instanceof Promise&&h.tpt(t)}return!0}ayt(t){this.Jmt(t,t.S0t())&&this.Kgt()}*lyt(t){(yield*this.qmt(t,t.S0t()))&&(yield*this.tyt())}Kgt(){if(this.zmt.length){const t=this.u1t()&&this.uf.vmt(),s=t?performance.now():0,i=this.Pft,e=i.J8(this);this.Nmt?this.uyt(e):this.cyt(e),i.hV(),t&&(this.Jpt.qpt+=performance.now()-s)}}uyt(e){const h=this.$mt,n=this.Bmt,r=this.pO(),o=this.zmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.H8(),u=!n||!h&&t<i;u&&r.Z8(l),a.jT(e),u?r.tV(l):r.N1t(l)}}cyt(i){const e=this.zmt;for(let t=0,s=e.length;t<s;++t)e[t].jT(i)}*tyt(){if(this.zmt.length){const t=this.Pft,s=t.J8(this);this.Nmt?yield*this.fyt(s):yield*this.dyt(s),t.hV()}}*fyt(e){const h=this.$mt,n=this.Bmt,r=this.pO(),o=this.zmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.H8(),u=!n||!h&&t<i;u&&r.Z8(l),yield*a.M1t(e),u?r.tV(l):r.N1t(l)}}*dyt(i){const e=this.zmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].M1t(i)}Q8(i,e){e.m0t();const h=this.Hmt;if(!this.Yft())for(let t=i.y0t()+1,s=h.length;t<s;++t){const n=h[t],r=(e.w0t(t),n.jT());if(!r)return!1}return this.Jmt(e,0)&&this.Kgt(e),!0}*pyt(i,e){e.m0t();const h=this.Hmt;if(!this.Yft())for(let t=i.y0t()+1,s=h.length;t<s;++t){const n=h[t];e.w0t(t);if(!(n.Gmt()?n.jT():yield*n.M1t()))return!1}return(this.Zgt()?this.Jmt(e,0):yield*this.qmt(e,0))&&(this.Qgt()?this.Kgt():yield*this.tyt()),!0}Gmt(){return!this.Dgt()&&!this.uf.eyt()&&this.tgt.rgt}Zgt(){return!this.uf.eyt()&&this.tgt.hgt}Qgt(){return!this.uf.eyt()&&this.tgt.ngt}myt(i){if(this.IB()){const e=this.Cmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Pmt(i))return!1}return!0}*gyt(i){if(this.IB()){const e=this.Cmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Emt(i)))return!1}return!0}yyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ei(0));t.zdt().J8(),this.Omt.wyt(e)}else this.Omt.Syt(s);else i&&t.zdt().J8()}byt(t,s,i,e){let h,n,r=0<t.length,o=null,a=this.uf,l=this.Pft,u=a.pO(),c=this.Omt,f=c.oyt(),d=u.D1t(),p=1<d;if(this.yyt(u,s,p),r&&(i?u.Z8(t):u.W1t(t)),null!==e){if(e.vyt){const g=i?e.vyt.UL():e.vyt.B1t().Gft(),y=e.Myt.UL();y.Hft(g.VL()),y.$ft(),i||e.Myt.xyt()}else if(e._yt){const w=e._yt.UL();w.Hft(e.Gyt),w.$ft()}e.Tyt&&(o=u.j1t(t))}const m=l.J8(this);return i&&m.A0t(t),this.myt(m)&&(m.g0t(this),f&&([n,h]=c.Iyt()),this.iyt(m),f)&&c.Cyt(n),l.hV(),p&&u.zdt().hV(),null!==o&&u.tV(o),r&&u.tV(t),u.k1t(),f||u.ept(),h}*Pyt(t,s,i,e){let h,n,r=((this.Dgt()||this.uf.eyt())&&(yield this),0<t.length),o=null,a=this.uf,l=this.Pft,u=a.pO(),c=this.Omt,f=c.oyt(),d=u.D1t(),p=1<d;if(this.yyt(u,s,p),r&&(i?u.Z8(t):u.W1t(t)),null!==e){if(e.vyt){const g=i?e.vyt.UL():e.vyt.B1t().Gft(),y=e.Myt.UL();y.Hft(g.VL()),y.$ft(),i||e.Myt.xyt()}else if(e._yt){const w=e._yt.UL();w.Hft(e.Gyt),w.$ft()}e.Tyt&&(o=u.j1t(t))}const m=l.J8(this);return i&&m.A0t(t),(yield*this.gyt(m))&&(m.g0t(this),f&&([n,h]=c.Iyt()),yield*this.nyt(m),f)&&c.Cyt(n),l.hV(),p&&u.zdt().hV(),null!==o&&u.tV(o),r&&u.tV(t),u.k1t(),f||u.ept(),h}Ryt(t,s){const i=this.SO(),e=0<i.length,h=this.uf,n=this.Pft,r=h.pO(),o=r.D1t(),a=1<o,l=(a&&r.zdt().J8(),this.Omt.wyt(t),e&&(s?r.Z8(i):r.W1t(i)),n.J8(this));this.myt(l)&&(l.g0t(this),this.iyt(l)),n.hV(),a&&r.zdt().hV(),e&&r.tV(i),r.k1t(),r.ept()}*Eyt(t,s){(this.Dgt()||this.uf.eyt())&&(yield this);const i=this.SO(),e=0<i.length,h=this.uf,n=this.Pft,r=h.pO(),o=r.D1t(),a=1<o,l=(a&&r.zdt().J8(),this.Omt.wyt(t),e&&(s?r.Z8(i):r.W1t(i)),n.J8(this));(yield*this.gyt(l))&&(l.g0t(this),yield*this.nyt(l)),n.hV(),a&&r.zdt().hV(),e&&r.tV(i),r.k1t(),r.ept()}MO(t,s,i,e,...h){let n,r,o=0<t.length,a=this.uf,l=this.Pft,u=a.pO(),c=this.Omt,f=c.oyt(),d=u.D1t(),p=1<d,m=(p&&u.zdt().J8(),0<h.length&&this.Omt.wyt(h),o&&(s?u.Z8(t):u.W1t(t)),l.J8(this));return m.I0t(i,e),l.e0t(m),a.Y8(!1),this.myt(m)&&(m.g0t(this),f&&([r,n]=c.Iyt()),this.iyt(m),f)&&c.Cyt(r),a.Y8(!0),l.hV(),l.h0t(),p&&u.zdt().hV(),o&&u.tV(t),u.k1t(),f||u.ept(),n||m.C0t()}}}{let e=self.Ns,t=[],s=!1;e.amt=class extends e.nn{constructor(t,s,i){super();const e=t.XD(),h=t.pO(),n=(this.Oq=t,this.Zft=h,this.uf=t.XD(),this.Fmt=s,e.Ayt(i[1]));this.Fyt=n,this.Qmt=i[2],this.Oq.Smt(this,this.Qmt),this.tgt=e.jX()?{sgt:i[3][0],igt:i[3][1]}:null}static vx(t,s,i){return e.an(e.amt,t,s,i)}Tdt(){const t=this.Fyt,s=this.uf.pO().Xdt(this);this.Fyt=t.bind(null,this.uf.hL(),s)}IB(){return this.Fmt}qdt(){return this.Fmt}m$(){return this.Oq}Fgt(){return this.Qmt}Ogt(){return this.tgt&&this.tgt.igt}Dgt(){return this.Ogt()&&this.tgt.sgt}kgt(t){this.tgt.sgt=!!t}pmt(){return!1}H8(){return t}SO(){return this.Fmt?this.Fmt.SO():t}jT(t){t.g0t(this),this.Zft.tpt(this.Oyt())}async Oyt(){try{await this.Fyt()}catch(t){console.error(`Unhandled exception running script %c${this.m$().Qc()}, event ${this.Fgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*M1t(t){t.g0t(this),(this.Dgt()||this.uf.eyt())&&(yield this),this.jT(t)}Gmt(){return!this.Dgt()&&!this.uf.eyt()}static Dyt(){return s}static kyt(){s=!0}}}{const yo=self.Ns;yo.Dpt=class extends yo.nn{constructor(t,s,i){super(),this.Oq=t,this.uf=t.XD(),this.Fmt=s,this.Lyt=0,this.Nyt="",this.Byt=0,this.Wyt=[],this.jyt=!0,this.Vyt="",this.vft=null,this.Uyt=!1,this.Hyt=[],this.zyt=!1,this.Jyt=!1,this.qyt=0,this.$yt=-1,this.Xyt=new Map,this.Yyt=yo.tmt.vx(t,s,i),this.Yyt.Agt(this)}Kyt(t){this.Lyt=0,this.Nyt=t[0],this.Byt=t[1],this.Wyt=t[2].map(t=>yo.rmt.vx(this.Oq,this,t)),this.jyt=t[3],this.Jyt=t[4],this.zyt=t[5]}Zyt(t){this.Lyt=1,this.Vyt=t[1],this.vft=this.uf.xz(t[2]),this.Yyt.lgt(this.vft),this.Nyt=this.vft.Qc()+"."+this.Vyt,this.Byt=t[3],this.Wyt=t[4].map(t=>yo.rmt.vx(this.Oq,this,t)),this.jyt=t[5],this.Jyt=t[6],this.zyt=t[7],this.vft.Qyt(this)}static hmt(t,s,i){const e=yo.an(yo.Dpt,t,s,i),h=i[1];return e.Kyt(h),e}static nmt(t,s,i){const e=yo.an(yo.Dpt,t,s,i),h=i[1];return e.Zyt(h),e}Idt(){if(this.vft&&this.vft.$z())for(const t of this.vft.mgt())if(t.twt(this.Vyt)){this.Uyt=!0;break}}Tdt(){for(const t of this.Wyt)t.Tdt();this.Yyt.Tdt(!1)}Odt(){return this.Lyt}$dt(){return this.Wyt}kpt(){return this.Wyt}yO(){return this.Wyt.length}swt(t){this.Hyt.push(t)}iwt(){return this.Hyt}Syt(i){const e=this.Wyt;for(let t=0,s=e.length;t<s;++t)e[t].oht(i[t].ei(0))}wyt(i){const e=this.Wyt;for(let t=0,s=e.length;t<s;++t)e[t].oht(i[t])}ewt(){return this.Wyt.map(t=>t.Get())}IB(){return this.Fmt}qdt(){return this.Fmt}Ddt(){return this.Nyt}hwt(){return this.Vyt}nwt(){return this.Uyt}_O(){return this.Byt}kN(){return this.vft}Zu(){return this.jyt}gO(){switch(this.Byt){case 0:return null;case 2:return"";default:return 0}}wO(){return this.Yyt}xO(){return this.zyt}oyt(){return this.Jyt}Iyt(){const t=this.qyt++;this.$yt=t;let s,i=new Promise(t=>s=t);return this.Xyt.set(t,{resolve:s,rwt:0}),[t,i]}Cyt(t){const s=this.Xyt.get(t);0===s.rwt&&(s.resolve(),this.Xyt.delete(t)),this.$yt=-1}owt(){const t=this.Xyt.get(this.$yt);return t.rwt++,this.$yt}awt(t){this.$yt=t;const s=this.Xyt.get(t);s.rwt--}lwt(t,s){const i=new Map,e=[];for(const h of this.vft.UL().VL()){const n=h.kN();if(n.twt(this.Vyt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&this.Yyt.byt(t,s,this.zyt,{_yt:this.vft,Gyt:e}),0<i.size)for(const[o,a]of i){const l=o.uwt(this.Vyt).wO(),u=[...new Set([...t,...l.H8()])];l.byt(u,s,this.zyt,{_yt:o,Gyt:a})}}*cwt(t,s){const i=new Map,e=[];for(const h of this.vft.UL().VL()){const n=h.kN();if(n.twt(this.Vyt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&(yield*this.Yyt.Pyt(t,s,this.zyt,{_yt:this.vft,Gyt:e})),0<i.size)for(const[o,a]of i){const l=o.uwt(this.Vyt).wO(),u=[...new Set([...t,...l.H8()])];yield*l.Pyt(u,s,this.zyt,{_yt:o,Gyt:a})}}}}{const wo=self.Ns,So=[];wo.rmt=class extends wo.nn{constructor(t,s,i){super();const e=t.pO();this.Oq=t,this.Zft=e,this.uf=t.XD(),this.Fmt=s,this.cdt=e.zdt(),this.dn=i[1],this.wf=i[2],this.fwt=i[3],this.DM=!!i[4],this.dwt=!!i[5],this.pwt=s instanceof wo.Dpt,this.v7=i[6],this.mwt=this.uf.Ydt(i[8]),this.gwt=t=>this.oht(t),this.ywt=()=>this.Get(),this.wwt=!this.Fmt||this.DM||this.dwt,this.Lht=this.fwt,this.Swt=-1,this.bwt()&&(this.Lht=this.Lht?1:0),!this.vwt()||this.u2()||this.Ppt()||(this.Swt=e.Ndt(this)),e.kdt(this)}static vx(t,s,i){return wo.an(wo.rmt,t,s,i)}Tdt(){if(this.vwt()&&!this.u2()&&!this.Ppt()&&!this.Mwt()){const t=this.Zft.Opt(this);t&&t.swt(this)}}Qc(){return this.dn}Ydt(){return this.mwt}IB(){return this.Fmt}qdt(){return this.IB()}Fz(){return!this.IB()}vwt(){return!this.Fz()}Mwt(){return this.pwt}u2(){return this.DM}Ppt(){return this.dwt}pe(){return 0===this.wf}Ge(){return 1===this.wf}bwt(){return 2===this.wf}pmt(){return!1}i9(){return this.v7}Bdt(){return this.fwt}H8(){return So}jT(t){!this.vwt()||this.u2()||this.Ppt()||this.oht(this.Bdt())}Gmt(){return!0}*M1t(t){this.jT(t)}oht(t){this.pe()?"number"!=typeof t&&(t=parseFloat(t)):this.Ge()?"string"!=typeof t&&(t=t.toString()):this.bwt()&&(t=t?1:0),this.wwt?this.Lht=t:this.cdt.L0t()[this.Swt]=t}Get(){return this.wwt?this.Lht:this.cdt.L0t()[this.Swt]}xwt(){let t=this.Get();return this.bwt()?!!t:t}o1t(){this.Lht=this.fwt}Kdt(){return{configurable:!1,enumerable:!0,get:this.ywt,set:this.gwt}}}}{const bo=self.Ns,vo=[];bo.omt=class extends bo.nn{constructor(t,s,i){super();const e=t.pO();this.Oq=t,this.Zft=e,this.uf=t.XD(),this.Fmt=s,this._wt=null,this.Gwt=i[1],this.l0=!0}static vx(t,s,i){return bo.an(bo.omt,t,s,i)}Tdt(){this._wt=this.Zft.j$(this.Gwt),this.Oq.mmt(this);let t=this.IB();for(;t;)t instanceof bo.tmt&&t.u1t()&&t.fgt(this),t=t.IB();this.Bgt(),this.uf.jX()&&this.Oq.Fpt().children.push(this._wt.Fpt())}IB(){return this.Fmt}H8(){return vo}ymt(){return this._wt}jT(t){const s=!!this.IB(),i=this.uf.qz();s&&this.Zft.W1t(i),this._wt.jT(),s&&this.Zft.tV(i)}*M1t(t){const s=!!this.IB(),i=this.uf.qz();s&&this.Zft.W1t(i),yield*this._wt.M1t(),s&&this.Zft.tV(i)}Gmt(){return!1}wmt(){return this.l0}Bgt(){let t=this.IB();for(;t;){if(t instanceof bo.tmt&&t.u1t()&&!t.Ipt())return void(this.l0=!1);t=t.IB()}this.l0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const Mo=self.Ns;Mo.Twt=class extends Mo.nn{constructor(t){super(),this.Xv=t,this.uf=t.XD()}Tdt(){}static Iwt(t,s){const i=s[0],e=[Io,Go,To,Co,xo,_o];return Mo.an(e[i],t,s)}};class xo extends Mo.Twt{constructor(t,s){super(t),this.Cwt=this.uf.Pwt(),this.Fyt=this.uf.Ayt(s[1]),this.Fyt!==Mo.uX.lX.tnt.random&&this.Fyt!==Mo.uX.lX.tnt.Rwt||this.Xv.Ewt()}Awt(){return this.Cwt.Fwt(this.Fyt,this.Cwt)}}class _o extends Mo.Twt{constructor(t,s){super(t),this.Owt=null,this.Nyt=s[1],this.Xv.Ewt()}Tdt(){const t=this.uf.pO(),s=(this.Owt=t.mO(this.Nyt),this.Nyt=null,this.Xv.wO()),i=this.Owt.wO();this.Dwt=[...new Set([...s.SO(),...i.SO()])],this.Dwt=t.Ldt(this.Dwt)}Awt(){const t=this.Owt;if(t.Zu()){const s=t.wO();return Mo.tmt.prototype.MO.bind(s,this.Dwt,t.xO(),t._O(),t.gO())}{const i=t.gO();return()=>i}}}class Go extends Mo.Twt{constructor(t,s){super(t),this.vft=this.uf.xz(s[1]),this.Fyt=this.uf.Ayt(s[2]),this.kwt=!!s[3],this.Pft=this.uf.pO().IO(),this.Xv.Lwt(this.vft)}Awt(){return this.vft.EL().Fwt(this.Fyt,this.vft.CL().M6())}Nwt(...t){const s=this.vft,i=s.UL().Lft(),e=i.length;if(0===e)return this.kwt?"":0;const h=a(this.Xv.Bwt(),e);return this.Pft.z8().G0t(s),this.Fyt.apply(i[h].M6(),t)}Wwt(t,...s){const i=this.vft,e=i.VL(),h=e.length;if(0===h)return this.kwt?"":0;const n=a(t,h);return this.Pft.z8().G0t(i),this.Fyt.apply(e[n].M6(),s)}}class To extends Mo.Twt{constructor(t,s){super(t),this.vft=this.uf.xz(s[1]),this.jwt=s[3],this.kwt=!!s[2],this.Xv.Lwt(this.vft)}Vwt(){const t=this.vft.UL().Lft(),s=t.length;if(0===s)return this.kwt?"":0;const i=a(this.Xv.Bwt(),s);return t[i].Uwt(this.jwt)}Hwt(){const t=this.vft,s=t.UL().Lft(),i=s.length;if(0===i)return this.kwt?"":0;const e=a(this.Xv.Bwt(),i),h=s[e],n=h.kN().zwt(t.Jwt());return h.Uwt(this.jwt+n)}qwt(t){const s=this.vft,i=s.VL(),e=i.length;if(0===e)return this.kwt?"":0;let h=a(t,e),n=i[h],r=0;return s.$z()&&(r=n.kN().zwt(s.Jwt())),n.Uwt(this.jwt+r)}}class Io extends Mo.Twt{constructor(t,s){super(t),this.vft=this.uf.xz(s[1]),this.$wt=this.vft.Eht(s[2]),this.Xwt=this.vft.oit(s[2]),this.Fyt=this.uf.Ayt(s[3]),this.kwt=!!s[4],this.Pft=this.uf.pO().IO(),this.Xv.Lwt(this.vft)}Ywt(...t){const s=this.vft,i=s.UL().Lft(),e=i.length;if(0===e)return this.kwt?"":0;let h=a(this.Xv.Bwt(),e),n=(this.Pft.z8().G0t(s),i[h]),r=0;return s.$z()&&(r=n.kN().Kwt(s.Jwt())),this.Fyt.apply(n.Rht()[this.Xwt+r].M6(),t)}Zwt(t,...s){const i=this.vft,e=i.VL(),h=e.length;if(0===h)return this.kwt?"":0;let n=a(t,h),r=(this.Pft.z8().G0t(i),e[n]),o=0;return i.$z()&&(o=r.kN().Kwt(i.Jwt())),this.Fyt.apply(r.Rht()[this.Xwt+o].M6(),s)}}class Co extends Mo.Twt{constructor(t,s){super(t),this.Qwt=null,this.tSt=s[1]}Tdt(){this.Qwt=this.uf.pO().Zdt(this.tSt)}sSt(){return this.Qwt}}}{let n=function(t){const s=self.iSt[t];if(s)return s;throw new Error("invalid expression number")};n;const Po=self.Ns;Po.eSt=class extends Po.nn{constructor(t,s,i){super(),this.Xv=t,this.Kg=i,this.wf=s,this.ei=null,this.hSt=!1,this.dwt=!1}static vx(t,s,i){const e=s[0],h=[Ro,Eo,No,Fo,Do,Ao,ko,Ro,Fo,Fo,Bo,Wo,No,Vo,Eo,Lo,Oo,jo,Uo,Ho,zo,Jo];return Po.an(h[e],t,e,i,s)}Tdt(){}Ewt(){this.hSt=!0}Lwt(t){this.hSt||!t||t.EL().rL()||(this.hSt=!0)}nSt(){return this.hSt}LF(){return this.Kg}XD(){return this.Xv.XD()}wO(){return this.Xv.wO()}Ppt(){return this.dwt}rSt(){return 4===this.wf}};class Ro extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.oSt=0;const h=e[1];this.aSt=h[0],this.lSt=[],this.uSt=null;for(let t=1,s=h.length;t<s;++t)this.lSt.push(Po.Twt.Iwt(this,h[t]));this.lSt.length?this.ei=this.cSt:(this.ei=n(this.aSt),this.dwt=!0)}fSt(t){if(t<0||t>=this.lSt.length)throw new RangeError("invalid numbered node");return this.lSt[t]}Tdt(){for(const s of this.lSt)s.Tdt();const t=n(this.aSt);this.lSt.length?this.uSt=t(this):this.uSt=t}Bwt(){return this.oSt}cSt(t){return this.oSt=t,this.uSt()}}class Eo extends Ro{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.dSt,14===s&&(this.wO().ygt(),this.Xv instanceof Po.ugt)&&this.wO().Rgt()}dSt(t){this.oSt=t;const s=this.uSt();return"string"==typeof s?s:""}pSt(){return n(this.aSt)()}}class Ao extends Ro{constructor(t,s,i,e){super(t,s,i,e),2<=t.mSt()?this.ei=this.m5:this.ei=this.PD,this.dwt=!1}PD(t){this.oSt=t;const s=this.uSt(),i=this.XD().TD();return i.PD(s)}m5(t){const s=this.PD(t);return s?s.m5():null}}class Fo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.gSt=e[1],this.ei=this.ySt,this.dwt=!0}ySt(){return this.gSt}}class Oo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.wSt=e[1],this.ei=this.SSt,this.dwt=!0}SSt(){return this.wSt}}class Do extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.vft=this.XD().xz(e[1]),2<=t.mSt()?this.ei=this.GL:this.ei=this.kN;const h=this.wO();h.lgt(this.vft),this.Xv instanceof Po.ugt?h.Rgt():h.IB()&&h.IB().Rgt(),this.dwt=!0}kN(){return this.vft}GL(){return this.vft?this.vft.GL():null}}class ko extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.y7=this.XD().lD().sY(e[1]),2<=t.mSt()?this.ei=this.oD:this.ei=this.uD,this.dwt=!0}uD(){return this.y7}oD(){return this.y7?this.y7.oD():null}}class Lo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.nZ=this.XD().ltt().fK(e[1]),2<=t.mSt()?this.ei=this._st:this.ei=this.Jst,this.dwt=!0}Jst(){return this.nZ}_st(){return this.nZ?this.nZ._st():null}}class No extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.bSt=e[1],this.ei=this.vSt,this.dwt=!0}vSt(){return this.bSt}}class Bo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.MSt=e[1];const h=this.Xv.kN();this.Xv instanceof Po.agt&&this.Xv.u2()||!h||!h.$z()?(this.ei=this.xSt,this.dwt=!0):(this.ei=this._St,this.Ewt())}xSt(){return this.MSt}_St(t){t=t||0;let s=this.Xv.kN(),i=s.UL(),e=i.VL(),h=null;if(e.length)h=e[t%e.length].kN();else if(i.Dft()){const n=i.kft();h=n[t%n.length].kN()}else{if(!(0<s.zL()))return 0;{const r=s.VL();h=r[t%r.length].kN()}}return this.MSt+h.zwt(s.Jwt())}}class Wo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.tSt=e[1],this.Qwt=null,2<=t.mSt()?this.ei=this.GSt:this.ei=this.TSt,this.dwt=!0}Tdt(){this.Qwt=this.XD().pO().Zdt(this.tSt)}TSt(){return this.Qwt}GSt(){return null}}class jo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.ISt=e[1],this.Owt=null,2<=t.mSt()?this.ei=this.CSt:this.ei=this.PSt,this.dwt=!0}Tdt(){this.Owt=this.XD().pO().mO(this.ISt),this.ISt=null}PSt(){return this.Owt}CSt(){return null}}class Vo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.RSt=[],this.ESt=[],this.dwt=!0;for(let t=1,s=e.length;t<s;++t){const h=Po.eSt.vx(this.Xv,e[t],0);this.RSt.push(h),this.ESt.push(0),h.Ppt()||(this.dwt=!1)}this.ei=this.ASt}Tdt(){for(const t of this.RSt)t.Tdt()}ASt(){const i=this.RSt,e=this.ESt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0);return e}}class Uo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.FSt=e[1],this.ei=this.rht,this.dwt=!0}rht(){return this.FSt}}class Ho extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.OSt=e[1],this.ei=this.DSt,this.dwt=!0}DSt(){return this.OSt}}class zo extends Ro{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.ZN,this.dwt=!1}ZN(){return this.uSt()}}class Jo extends Po.eSt{constructor(t,s,i,e){super(t,s,i),this.nut=this.XD()._ut().Qlt(e[1]),this.ei=this.kSt,this.dwt=!0}kSt(){return this.nut.Qc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};e;const qo=self.Ns,$o=[],Xo=function(){};qo.agt=class extends qo.nn{constructor(t,i,s){if(super(),this.Yyt=t,this.uf=t.XD(),this.Kg=s,this.Fyt=this.uf.Ayt(i[1]),this.LSt=0<i[3],this.NSt=2===i[3],this.BSt=!!i[4],this.WSt=!!i[5],this.DM=!!i[6],this.v7=i[7],this.jSt=this.Yyt.Yft(),this.vft=null,this.$wt=null,this.Xwt=-1,this.Cwt=null,this.jT=Xo,this.M1t=Xo,this.Ks=[],this.VSt=[],this.USt=!1,this.HSt=null,this.zSt=null,this.tgt=this.uf.jX()?{sgt:i[8][0],JSt:i[8][1]}:null,-1===i[0]?this.Cwt=this.uf.Pwt():(this.vft=this.uf.xz(i[0]),i[2]&&(this.$wt=this.vft.Eht(i[2]),this.Xwt=this.vft.oit(i[2])),this.Yyt.IB()&&this.Yyt.IB().Rgt()),10===i.length){let s=i[9];for(let t of s)this.Ks.push(qo.eSt.vx(this,t,this.Ks.length)),this.VSt.push(0)}0===this.Ks.length&&(this.Ks=$o,this.VSt=$o),this.Yyt.pO().Edt(this)}static vx(t,s,i){return qo.an(qo.agt,t,s,i)}Tdt(){for(const t of this.Ks)t.Tdt(),t.nSt()&&(this.USt=!0);this.NSt?(this.jT=this.qSt,this.M1t=this.$St):this.Cwt?(this.XSt(),this.M1t=this.YSt):this.vft.EL().rL()?(this.KSt(),this.M1t=this.ZSt):this.DM?(this.jT=this.QSt,this.M1t=this.tbt):(this.jT=this.sbt,this.M1t=this.ibt)}XSt(){const t=this.Cwt,s=this.Cwt;this.ebt(t,s,this.hbt)}KSt(){const t=this.vft.EL(),s=this.vft.CL().M6();this.ebt(t,s,this.nbt)}ebt(t,s,i){const e=this.Fyt,h=this.WSt,n=this.Ks;if(0===n.length){const r=t.Fwt(e,s);h?this.jT=function(){return qo.xor(r(),h)}:this.jT=r}else if(1===n.length){const o=n[0];if(!h&&o.Ppt())this.jT=t.rbt(e,s,o.ei(0));else{const a=t.Fwt(e,s);this.jT=function(){return qo.xor(a(o.ei(0)),h)}}}else if(2===n.length){const l=n[0],u=n[1];if(!h&&l.Ppt()&&u.Ppt())this.jT=t.obt(e,s,l.ei(0),u.ei(0));else{const c=t.Fwt(e,s);this.jT=function(){return qo.xor(c(l.ei(0),u.ei(0)),h)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!h&&f.Ppt()&&d.Ppt()&&p.Ppt())this.jT=t.abt(e,s,f.ei(0),d.ei(0),p.ei(0));else{const m=t.Fwt(e,s);this.jT=function(){return qo.xor(m(f.ei(0),d.ei(0),p.ei(0)),h)}}}else this.jT=i}i9(){return this.v7}lmt(){return this.Fyt}kN(){return this.vft}A6(){return this.$wt}lbt(){return this.$wt?this.$wt.P6():this.vft?this.vft.EL():null}mSt(){const t=this.lbt();return t?t.ubt():1}wO(){return this.Yyt}XD(){return this.uf}LF(){return this.Kg}$gt(){return this.LF()}imt(){return this.LSt}umt(){return this.NSt}cbt(){return this.WSt}z6(){return this.BSt}u2(){return this.DM}fbt(){return this.tgt.sgt}dbt(){return!!this.Cwt}Ugt(){return this.dbt()||this.vft.EL().rL()}Hgt(){for(const t of this.Ks)if(t.rSt())return t.kN();return null}pbt(t){this.tgt.sgt=!!t,this.Yyt.Igt()}mbt(){return this.tgt.JSt}Gmt(){return!this.fbt()&&!this.uf.eyt()&&!this.mbt()}gbt(){return this.HSt||(this.HSt=new Map),this.HSt}ybt(){return this.zSt||(this.zSt=new Map),this.zSt}hbt(){const t=this.VSt;return e(this.Ks,t),qo.xor(this.Fyt.apply(this.Cwt,t),this.WSt)}*YSt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const s=this.VSt;e(this.Ks,s);let t=this.Fyt.apply(this.Cwt,s);return qo.Vo(t)&&(t=yield*t),qo.xor(t,this.WSt)}return this.jT()}nbt(){const t=this.VSt,s=(e(this.Ks,t),this.vft.CL().M6());return qo.xor(this.Fyt.apply(s,t),this.WSt)}*ZSt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){let t=this.VSt,s=(e(this.Ks,t),this.vft.CL().M6()),i=this.Fyt.apply(s,t);return qo.Vo(i)&&(i=yield*i),qo.xor(i,this.WSt)}return this.jT()}qSt(){return!0}*$St(){return(this.fbt()||this.uf.eyt())&&(yield this),!0}wbt(){if(this.$wt){if(2<=this.$wt.P6().ubt())throw new Error("not yet implemented");return this.$wt}return 2<=this.vft.EL().ubt()?this.vft.GL():this.vft}QSt(){const t=this.VSt,s=(e(this.Ks,t),this.Fyt.apply(this.wbt(),t));return this.vft.xyt(),s}*tbt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const s=this.VSt;e(this.Ks,s);let t=this.Fyt.apply(this.wbt(),s);return qo.Vo(t)&&(t=yield*t),this.vft.xyt(),t}return this.jT()}sbt(){const i=this.Ks,e=this.VSt,t=this.vft.UL();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.nSt()||(e[t]=h.ei(0))}return t.Fft()?this.Sbt(t):this.bbt(t)}*ibt(){return(this.fbt()||this.uf.eyt())&&(yield this),this.sbt()}vbt(i){const e=this.Ks,h=this.VSt;for(let t=0,s=e.length;t<s;++t){const n=e[t];n.nSt()&&(h[t]=n.ei(i))}}Sbt(i){const t=this.vft,e=t.$z(),h=t.Jwt(),n=this.Xwt,r=0<=n,o=t.VL(),a=this.USt,l=this.VSt,u=this.Fyt,c=this.WSt,f=this.jSt&&!this.LSt;i.Aft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.vbt(s);let t;if(r){const p=e?d.kN().Kwt(h):0;t=u.apply(d.Rht()[n+p].M6(),l)}else t=u.apply(d.M6(),l);qo.xor(t,c)?i.Nft(d):f&&i.Bft(d)}return t.Mbt(!0),i.Wft(!1),t.xyt(),i.Oft()}bbt(t){let s=this.vft,i=s.$z(),e=s.Jwt(),h=s.$N(),n=this.Xwt,r=0<=n,o=this.USt,a=this.VSt,l=this.Fyt,u=this.WSt,c=this.jSt&&!this.LSt,f=t.jft(),d=t.Vft(),p=c&&!this.Yyt.Vgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.vbt(s);let t;if(r){const b=i?S.kN().Kwt(e):0;t=l.apply(S.Rht()[n+b].M6(),a)}else t=l.apply(S.M6(),a);qo.xor(t,u)?(y=!0,p?(f.push(S),h&&S.xbt()):(m[g]=S,h&&S._bt(g),++g)):p?(m[g]=S,h&&S.Gbt(g),++g):c&&(d.push(S),h)&&S.Tbt()}qo.Nr(m,g),h&&s.Ibt(p,g);const w=y;return p&&!y&&(y=this.Cbt(f)),s.Mbt(w||c),c?y:t.Oft()}Cbt(i){const t=this.vft,e=t.$z(),h=t.Jwt(),n=this.USt,r=this.Xwt,o=0<=r,a=this.VSt,l=this.Fyt,u=this.WSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];n&&this.vbt(s);let t;if(o){const f=e?c.kN().Kwt(h):0;t=l.apply(c.Rht()[r+f].M6(),a)}else t=l.apply(c.M6(),a);if(qo.xor(t,u))return!0}return!1}Pbt(t,s){return this.Ks[t].ei(s)}cmt(){const t=this.Ks;if(t.length)return t[0].pSt();throw new Error("no parameters")}bq(){if(!this.HSt||!this.HSt.size)return null;const s={};for(const[i,e]of this.HSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].YN(),t[1].YN(),t[2]])),s[i]=t}return{ex:s}}vq(t){if(this.HSt&&(this.HSt.clear(),this.HSt=null),t){const s=this.uf,i=t.ex;if(i){const e=this.gbt();e.clear();for(const[h,n]of Object.entries(i)){let t=n;"collmemory"===h&&(t=qo.an(qo.Qu,n.map(t=>[s.xD(t[0]),s.xD(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};h;const Yo=self.Ns,Ko=[],Zo=function(){},Qo=function*(){};Yo.ugt=class extends Yo.nn{constructor(t,s,i){super();const e=(this.Yyt=t).XD(),h=(this.uf=e,this.Kg=i,this.v7=4<=s.length?s[3]:-1,this.Rbt=5<=s.length?255&s[4]:0,this.Ebt=5<=s.length?s[4]>>8:0,this.Fyt=null,this.vft=null,this.$wt=null,this.Xwt=-1,this.Cwt=null,this.Abt="",this.Fbt=null,this.Obt=null,this.jT=Zo,this.M1t=Zo,this.Ks=[],this.VSt=[],this.USt=!1,this.HSt=null,this.zSt=null,-3===s[0]),n=h?s[2]:s[5];if(this.tgt=e.jX()||h?{sgt:n[0],JSt:n[1],index:n[2]}:null,-1===s[0])this.Cwt=e.Pwt(),this.Fyt=e.Ayt(s[1]);else if(-2===s[0])this.Abt=s[1];else if(h){const r=e.Ayt(s[1]);this.Fyt=r,this.jT=this.Dbt,this.M1t=this.kbt,this.Ebt|=8}else this.vft=e.xz(s[0]),4&this.Ebt?(this.Abt=s[1],this.Fbt=e.xz(s[2])):(s[2]&&(this.$wt=this.vft.Eht(s[2]),this.Xwt=this.vft.oit(s[2])),this.Fyt=e.Ayt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Ks.push(Yo.eSt.vx(this,a,this.Ks.length)),this.VSt.push(0)}0===this.Ks.length&&(this.Ks=Ko,this.VSt=Ko),this.Lbt()&&(this.Yyt.ygt(),this.Yyt.Rgt()),this.Yyt.pO().Adt(this)}static vx(t,s,i){return Yo.an(Yo.ugt,t,s,i)}Tdt(){for(const t of this.Ks)t.Tdt(),t.nSt()&&(this.USt=!0);if(this.Cwt)this.XSt(),this.M1t=this.YSt;else if(this.Abt)4&this.Ebt?this.Nbt():this.Bbt(),this.Abt="",this.Fbt=null;else if(this.jT===this.Dbt){const s=this.Fyt,i=this.uf.pO().Xdt(this.Yyt);this.Fyt=s.bind(null,this.uf.hL(),i)}else this.$wt?this.oyt()?(this.jT=this.Wbt,this.M1t=this.jbt):(this.jT=this.Vbt,this.M1t=this.Ubt):this.vft.EL().rL()?(this.KSt(),this.M1t=this.ZSt):this.u2()?(this.jT=this.Hbt,this.M1t=this.zbt):this.oyt()?(this.jT=this.Jbt,this.M1t=this.qbt):this.$bt()?(this.jT=this.Xbt,this.M1t=this.Ybt):this.Ks.length?this.Ks.every(t=>t.nSt())?(this.jT=this.Kbt,this.M1t=this.Zbt):this.USt?(this.jT=this.Qbt,this.M1t=this.tvt):this.Ks.every(t=>t.Ppt())?(h(this.Ks,this.VSt),this.jT=this.svt,this.M1t=this.ivt):(this.jT=this.evt,this.M1t=this.hvt):(this.jT=this.svt,this.M1t=this.ivt)}XSt(){const t=this.Cwt,s=this.Cwt;this.ebt(t,s,this.hbt)}KSt(){const t=this.vft.EL(),s=this.vft.CL().M6();this.ebt(t,s,this.nbt)}Bbt(){const t=this.Yyt.pO(),i=t.mO(this.Abt);if(i.Zu()){const e=0!=(2&this.Ebt);this.Obt=i.wO();let s=[...new Set([...this.Yyt.SO(),...this.Obt.SO()])];s=t.Ldt(s);const h=!i.xO()&&this.nvt()?{Tyt:!0}:null;if(this.jT=Yo.tmt.prototype.byt.bind(this.Obt,s,this.Ks,e,h),this.uf.jX()){const n=this;this.M1t=function*(){(n.fbt()||n.uf.eyt())&&(yield n);const t=yield*n.Obt.Pyt(s,n.Ks,e,h);return t}}else this.M1t=Qo}else this.jT=Zo,this.M1t=Qo}Nbt(){const n=this.Yyt.pO(),r=n.i1t(this.Fbt,this.Abt);if(r.Zu()){const o=0!=(2&this.Ebt);this.Obt=r.wO();let s=[...new Set([...this.Yyt.SO(),...this.Obt.SO(),this.vft,r.kN()])],t=(s=n.Ldt(s),!this.vft.$z()&&!r.kN().$z()),i=!this.vft.$z()&&r.kN().$z(),e=this.vft.$z(),h=null;if(!r.xO()&&this.nvt()&&((h=h||{}).Tyt=!0),!i&&o||((h=h||{}).vyt=this.vft,h.Myt=r.kN()),t||i||e&&!r.nwt()?this.jT=Yo.tmt.prototype.byt.bind(this.Obt,s,this.Ks,o,h):e&&(this.jT=Yo.Dpt.prototype.lwt.bind(r,s,this.Ks)),this.uf.jX()){const a=this;t||i||e&&!r.nwt()?this.M1t=function*(){(a.fbt()||a.uf.eyt())&&(yield a);const t=yield*a.Obt.Pyt(s,a.Ks,o,h);return t}:e&&(this.M1t=function*(){(a.fbt()||a.uf.eyt())&&(yield a);const t=yield*r.cwt(s,a.Ks);return t})}else this.M1t=Qo}else this.jT=Zo,this.M1t=Qo}ebt(t,s,i){const e=this.Fyt,h=this.Ks;if(0===h.length)this.jT=t.Fwt(e,s);else if(1===h.length){const n=h[0];if(n.Ppt())this.jT=t.rbt(e,s,n.ei(0));else{const r=t.Fwt(e,s);this.jT=function(){return r(n.ei(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Ppt()&&a.Ppt())this.jT=t.obt(e,s,o.ei(0),a.ei(0));else{const l=t.Fwt(e,s);this.jT=function(){return l(o.ei(0),a.ei(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.Ppt()&&c.Ppt()&&f.Ppt())this.jT=t.abt(e,s,u.ei(0),c.ei(0),f.ei(0));else{const d=t.Fwt(e,s);this.jT=function(){return d(u.ei(0),c.ei(0),f.ei(0))}}}else this.jT=i}i9(){return this.v7}oyt(){return 0!=(8&this.Ebt)}ryt(){return 0!=(16&this.Ebt)}$bt(){return 1===this.Rbt}u2(){return 2===this.Rbt}Lbt(){return 0!=(1&this.Ebt)}bgt(){return this.oyt()||this.ryt()}kN(){return this.vft}lbt(){return this.$wt?this.$wt.P6():this.vft?this.vft.EL():null}mSt(){const t=this.lbt();return t?t.ubt():1}wO(){return this.Yyt}nvt(){let t=this.Yyt;do{if(t instanceof Yo.Dpt&&t.xO())return!0}while(t=t.qdt());return!1}XD(){return this.uf}LF(){return this.Kg}$gt(){return this.tgt.index}fbt(){return this.tgt.sgt}pbt(t){this.tgt.sgt=!!t,this.Yyt.Igt()}mbt(){return this.tgt.JSt}Gmt(){return!this.fbt()&&!this.uf.eyt()&&!this.mbt()}gbt(){return this.HSt||(this.HSt=new Map),this.HSt}ybt(){return this.zSt||(this.zSt=new Map),this.zSt}hbt(){const t=this.VSt;return h(this.Ks,t),this.Fyt.apply(this.Cwt,t)}*YSt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const t=this.VSt,s=(h(this.Ks,t),yield*this.Fyt.apply(this.Cwt,t));return s}return this.jT()}nbt(){const t=this.VSt;return h(this.Ks,t),this.Fyt.apply(this.vft.CL().M6(),t)}*ZSt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const t=this.VSt,s=(h(this.Ks,t),yield*this.Fyt.apply(this.vft.CL().M6(),t));return s}return this.jT()}svt(){const i=this.VSt,e=this.vft.UL().VL();for(let t=0,s=e.length;t<s;++t)this.Fyt.apply(e[t].M6(),i)}*ivt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const i=this.VSt,e=this.vft.UL().VL();for(let t=0,s=e.length;t<s;++t)yield*this.Fyt.apply(e[t].M6(),i)}else this.svt()}evt(){const i=this.VSt,e=(h(this.Ks,i),this.vft.UL().VL());for(let t=0,s=e.length;t<s;++t)this.Fyt.apply(e[t].M6(),i)}*hvt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const i=this.VSt,e=(h(this.Ks,i),this.vft.UL().VL());for(let t=0,s=e.length;t<s;++t)yield*this.Fyt.apply(e[t].M6(),i)}else this.evt()}Kbt(){const e=this.Ks,h=this.VSt,s=this.Fyt,n=this.vft.UL().VL();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);s.apply(r.M6(),h)}}*Zbt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const e=this.Ks,h=this.VSt,s=this.Fyt,n=this.vft.UL().VL();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);yield*s.apply(r.M6(),h)}}else this.Kbt()}Qbt(){const e=this.Ks,h=this.VSt,s=this.Fyt,n=this.vft.UL().VL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.nSt()||(h[t]=i.ei(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.nSt()&&(h[t]=o.ei(i))}s.apply(r.M6(),h)}}*tvt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const e=this.Ks,h=this.VSt,s=this.Fyt,n=this.vft.UL().VL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.nSt()||(h[t]=i.ei(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.nSt()&&(h[t]=o.ei(i))}yield*s.apply(r.M6(),h)}}else this.Qbt()}Xbt(){const e=this.Ks,h=this.VSt,s=this.Fyt,t=this.vft,i=t.rvt(),n=t.UL().VL();i.ovt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);s.apply(r.M6(),h)}i.avt(s)}*Ybt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const e=this.Ks,h=this.VSt,s=this.Fyt,t=this.vft,i=t.rvt(),n=t.UL().VL();i.ovt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);yield*s.apply(r.M6(),h)}i.avt(s)}else this.Xbt()}Hbt(){const t=this.VSt;return h(this.Ks,t),this.Fyt.apply(this.$wt||this.vft,t)}*zbt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const s=this.VSt;h(this.Ks,s);let t=this.Fyt.apply(this.$wt||this.vft,s);return Yo.Vo(t)?yield*t:t}return this.Hbt()}Vbt(){const t=this.vft,s=t.$z(),e=t.Jwt(),h=this.Ks,n=this.USt,r=this.VSt,o=this.Fyt,a=this.Xwt,l=t.UL().VL();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.nSt()||(r[t]=i.ei(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.nSt()&&(r[t]=f.ei(i))}const c=s?u.kN().Kwt(e):0;o.apply(u.Rht()[a+c].M6(),r)}}*Ubt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const t=this.vft,s=t.$z(),e=t.Jwt(),h=this.Ks,n=this.USt,r=this.VSt,o=this.Fyt,a=this.Xwt,l=t.UL().VL();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.nSt()||(r[t]=i.ei(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.nSt()&&(r[t]=f.ei(i))}const c=s?u.kN().Kwt(e):0;yield*o.apply(u.Rht()[a+c].M6(),r)}}else this.Vbt()}Jbt(){const e=this.Ks,h=this.VSt,s=this.Fyt,n=this.vft.UL().VL(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);r.push(s.apply(o.M6(),h))}return Promise.all(r)}*qbt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const e=this.Ks,h=this.VSt,s=this.Fyt,n=this.vft.UL().VL(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);r.push(yield*s.apply(o.M6(),h))}return Promise.all(r)}return this.Jbt()}Wbt(){const t=this.vft,s=t.$z(),e=t.Jwt(),h=this.Ks,n=this.VSt,r=this.Fyt,o=this.Xwt,a=t.UL().VL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].ei(i);const c=s?u.kN().Kwt(e):0;l.push(r.apply(u.Rht()[o+c].M6(),n))}return Promise.all(l)}*jbt(){if((this.fbt()||this.uf.eyt())&&(yield this),this.mbt()){const t=this.vft,s=t.$z(),e=t.Jwt(),h=this.Ks,n=this.VSt,r=this.Fyt,o=this.Xwt,a=t.UL().VL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].ei(i);const c=s?u.kN().Kwt(e):0;l.push(yield*r.apply(u.Rht()[o+c].M6(),n))}return Promise.all(l)}return this.Wbt()}async Dbt(){try{await this.Fyt()}catch(t){console.error(`Unhandled exception running script %c${this.Yyt.m$().Qc()}, event ${this.Yyt.Fgt()}, action ${this.$gt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Yo.amt.Dyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Yo.amt.kyt())}}*kbt(){return(this.fbt()||this.uf.eyt())&&(yield this),this.Dbt()}bq(){return this.HSt&&this.HSt.size?{ex:Yo.Bo(this.HSt)}:null}vq(t){if(this.HSt&&(this.HSt.clear(),this.HSt=null),t){const s=t.ex;s&&(this.HSt=Yo.Wo(s))}}}}{let d=function(t){return t instanceof r?w.v5(t):t.ZW()},u=function(t){return d(t).CD()},h=function(t){return w.v5(t)},C=function(t,s,i,e){const h=s.YN(),n=i.YN();h<n?t.Set(s,i,e):t.Set(i,s,e)},P=function(t,s,i){const e=s.YN(),h=i.YN();e<h?t.hc(s,i):t.hc(i,s)},R=function(t,s){t.nc(s)},E=function(t,s,i){const e=s.YN(),h=i.YN();return e<h?t.ei(s,i):t.ei(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,n=t.CD(),r=w.HF(),o=w.jdt(),a=o.wO().Yft(),l=o.kN(),u=o.cbt(),c=s.UL(),f=l!==s;T=s,G=f&&!u;let d,p=0,m=0,g=I=!1;c.Fft()?(S.T(n.oB()),S.offset(i,e),r.lvt(n.PD(),s,S,b),d=b):!a||w.uvt()&&!c.Vft().length&&c.jft().length?d=c.jft():(d=c.Vft(),I=!0),h&&(p=n.Cv(),m=n.Ev(),n.eB(i,e),n.Q4());for(const y of d)if(r.Sk(t,y)){if(g=!0,u)break;f&&O.add(y)}return h&&(n.tB(p,m),n.Q4()),A.Br(b),g},i=function(t){const s=w.bO().Yft(),i=T.UL(),e=i.jft(),h=i.Vft();i.Fft()?(i.zft(O),s&&(A.Br(h),i.Jft(O,T.VL()))):s?I?i.qft(O):(i.Jft(O,e),i.zft(O)):i.zft(O),T.xyt()},v=function(t,s){G&&(s&&i(),O.clear(),T=null,G=!1)},s=function(t,s){const i=w.xD(s);if(i){const e=t.UL();if(e.Fft()||e.jft().includes(i))if(t.$z()){if(i.kN().cvt(t))return e.Xft(i),t.xyt(),!0}else if(i.kN()===t)return e.Xft(i),t.xyt(),!0}return!1},n=function(t,h){const n=t.UL();if(n.Fft()){n.Wft(!1),n.Aft();const i=t.VL();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.YN()===h?n.Bft(e):n.Nft(e)}return t.xyt(),!!n.jft().length}{let i=n.jft(),e=0;for(let t=0,s=i.length;t<s;++t){const r=i[t];(i[e]=r).YN()===h?n.Bft(r):++e}return A.Nr(i,e),t.xyt(),!!i.length}},A=(d,u,h,C,P,R,E,e,i,v,s,n,self.Ns),l=new A.Ho,M={},x={},_={},w=null,r=(A.fvt=function(t){w=t},self.ON),S=(x.dvt=function(t,s){return A.compare(this.CD().Cv(),t,s)},_.dvt=function(t,s){return A.compare(this.x,t,s)},x.pvt=function(t,s){return A.compare(this.CD().Ev(),t,s)},_.pvt=function(t,s){return A.compare(this.y,t,s)},x.mvt=function(){return this.CD().cB()},_.mvt=function(){return this.uB()},M.gvt=function(){const t=u(this),s=t.uD(),i=t.oB();return i.Tl()<0||i.Il()<0||i._l()>s.fm()||i.Gl()>s.Gm()},M.yvt=function(i,e,h){const t=this.UL(),n=t.VL();if(!n.length)return!1;let r=n[0],o=r.CD(),a=r,l=A.bn(o.Cv(),o.Ev(),e,h);for(let t=1,s=n.length;t<s;++t){r=n[t],o=r.CD();const u=A.bn(o.Cv(),o.Ev(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=r)}return t.Xft(a),!0},x.Pv=function(t){const s=this.CD();s.Cv()!==t&&(s.Pv(t),s.Q4())},_.Pv=function(t){this.x=+t},x.Av=function(t){const s=this.CD();s.Ev()!==t&&(s.Av(t),s.Q4())},_.Av=function(t){this.y=+t},x.wvt=function(t,s){const i=this.CD();i.Svt(t,s)||(i.tB(t,s),i.Q4())},_.wvt=function(t,s){this.setPosition(t,s)},M.bvt=function(t,s){if(t){const i=d(this),e=t.WL(i);if(e){const[h,n]=e.vvt(s),r=i.CD();r.Cv()===h&&r.Ev()===n||(r.tB(h,n),r.Q4())}}},M.Mvt=function(t){if(0!==t){const s=u(this);s.eB(s.xvt()*t,s._vt()*t),s.Q4()}},x.Gvt=function(t,s){if(0!==s){const i=this.CD();t=A.yn(t),i.eB(Math.cos(t)*s,Math.sin(t)*s),i.Q4()}},_.Gvt=function(t,s){0!==s&&(t=A.yn(t),this.iB(Math.cos(t)*s,Math.sin(t)*s))},x.Cv=function(){return this.CD().Cv()},_.Cv=function(){return this.x},x.Ev=function(){return this.CD().Ev()},_.Ev=function(){return this.y},M.DO=function(){return w.DO(d(this))},x.Tvt=function(t,s){return A.compare(this.CD().fm(),t,s)},_.Tvt=function(t,s){return A.compare(this.width,t,s)},x.Ivt=function(t,s){return A.compare(this.CD().Gm(),t,s)},_.Ivt=function(t,s){return A.compare(this.height,t,s)},x.Mm=function(t){const s=this.CD();s.fm()!==t&&(s.Mm(t),s.Q4())},_.Mm=function(t){this.width=t},x.pm=function(t){const s=this.CD();s.Gm()!==t&&(s.pm(t),s.Q4())},_.pm=function(t){this.height=t},x.cC=function(t,s){const i=u(this);i.fm()===t&&i.Gm()===s||(i.cC(t,s),i.Q4())},_.cC=function(t,s){this.h5(t,s)},x.fm=function(){return this.CD().fm()},_.fm=function(){return this.width},x.Gm=function(){return this.CD().Gm()},_.Gm=function(){return this.height},M.Cvt=function(){return u(this).oB()._l()},M.Pvt=function(){return u(this).oB().Gl()},M.Rvt=function(){return u(this).oB().Tl()},M.Evt=function(){return u(this).oB().Il()},M.Avt=function(){const t=u(this).oB();return(t._l()+t.Tl())/2},M.Fvt=function(){const t=u(this).oB();return(t.Gl()+t.Il())/2},M.Ovt=function(t,s){return A.Mn(u(this).a5(),A.yn(s))<=A.yn(t)},M.Dvt=function(t){return A._n(u(this).a5(),A.yn(t))},M.kvt=function(t,s){const i=A.yn(t),e=A.yn(s),h=u(this).a5(),n=!A._n(e,i);return n?!(!A._n(h,i)&&A._n(h,e)):A._n(h,i)&&!A._n(h,e)},x.o5=function(t){const s=this.CD(),i=A.gn(A.yn(t));isNaN(i)||s.a5()===i||(s.o5(i),s.Q4())},_.o5=function(t){this.rB=t},M.Lvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.o5(s.a5()+A.yn(t)),s.Q4()}},M.Nvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.o5(s.a5()-A.yn(t)),s.Q4()}},M.Bvt=function(t,s){const i=u(this),e=i.a5(),h=A.xn(e,A.yn(s),A.yn(t));isNaN(h)||e===h||(i.o5(h),i.Q4())},M.Wvt=function(t,s,i){const e=u(this),h=e.a5(),n=s-e.Cv(),r=i-e.Ev(),o=Math.atan2(r,n),a=A.xn(h,o,A.yn(t));isNaN(a)||h===a||(e.o5(a),e.Q4())},M.jvt=function(t,s){const i=u(this),e=i.a5(),h=t-i.Cv(),n=s-i.Ev(),r=Math.atan2(n,h);isNaN(r)||e===r||(i.o5(r),i.Q4())},x.a5=function(){return A.wn(this.CD().a5())},_.a5=function(){return this.rB},M.Vvt=function(t,s){return A.compare(A.Nn(100*u(this).WR(),6),t,s)},x.J5=function(){return this.CD().J5()},_.J5=function(){return this.isVisible},M.H5=function(t){const s=u(this);t=2===t?!s.J5():0!==t,s.J5()!==t&&(s.H5(t),w.DD())},M.VR=function(t){const s=A.mn(t/100,0,1),i=u(this);if(i.i6()){if(i.ert().Uvt()===s)return}else if(i.WR()===s)return;i.VR(s),w.DD()},M.Hvt=function(t){l.xa(t);const s=u(this);s.dB().da(l)||(s.pB(l),w.DD())},M.HR=function(){const t=u(this).dB();return A.jn(t.ra(),t.oa(),t.aa(),t.la())},M.WR=function(){return A.Nn(100*u(this).WR(),6)},M.zvt=function(t){return!!t&&u(this).PD()===t},M.Jvt=function(i){const t=this.UL(),e=t.VL();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const n=e[t],r=n.CD(),o=h.CD(),a=r.PD().LF(),l=o.PD().LF();0===i?(l<a||a===l&&r.RD()>o.RD())&&(h=n):(a<l||a===l&&r.RD()<o.RD())&&(h=n)}return t.Xft(h),!0},x.qvt=function(t,s,i){const e=this.CD(),h=0===t?e.Fv():e.nB();return A.compare(h,s,i)},_.qvt=function(t,s,i){const e=0===t?this.uN:this.hB;return A.compare(e,s,i)},x.$vt=function(){this.CD().gB()},_.$vt=function(){this.mB()},x.Xvt=function(){this.CD().wB()},_.Xvt=function(){this.yB()},M.Yvt=function(t){t&&u(this).bB(t)},M.Kvt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.Zvt(e);h&&e.CD().MB(h,i)}},x.Ov=function(t){const s=this.CD();s.Fv()!==t&&(s.Ov(t),w.DD())},_.Ov=function(t){this.uN=t},M.Qvt=function(){return u(this).PD().LF()},M.tMt=function(){return u(this).PD().Qc()},x.sMt=function(){return this.CD().RD()},_.sMt=function(){return this.zIndex},x.iMt=function(){return this.CD().Fv()},_.iMt=function(){return this.uN},x.eMt=function(){return this.CD().nB()},_.eMt=function(){return this.hB},M.hMt=function(t){const s=d(this),i=s.kN().s5().Fht(t);if(i){const e=i.LF(),h=s.CD().K4();return h.N6(e)}},M.nMt=function(t,s){const i=d(this),e=i.kN().s5().Fht(s);if(e){const h=e.LF(),n=1===t,r=i.CD().K4();r.N6(h)!==n&&(r.B6(h,n),r.W6(),w.DD())}},M.rMt=function(t,s,i){const e=d(this),h=e.kN().s5().Fht(t);if(h){s=Math.floor(s);const n=h.b_().M_(s);if(n){"color"===n?(l.xa(i),i=l):"percent"===n&&(i/=100);const r=h.LF(),o=e.CD().K4(),a=o.V6(r,s,i);a&&o.N6(r)&&w.DD()}}},A.an(A.Rect)),F=[],b=[],G=!1,T=null,I=!1,O=new Set;M.oMt=function(w){if(this.uf.aMt())return function*(w){if(w){let t=this.uf,s=t.HF(),e=t.pO(),i=e.IO(),h=e.jdt(),n=h.kN(),r=h.gbt(),o=h.ybt(),a=i.z8(),l=t.Ett(),u=l-1,c=a.bO(),f=i.J8(c),d=r.get("collmemory"),p=(d||(d=A.an(A.Qu),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Uf().addEventListener("instancedestroy",t=>R(d,t.F6))),n.UL()),m=w.UL(),g=p.VL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Fft()?(s.lvt(S.CD().PD(),w,S.CD().oB(),F),y=F,s.lMt(S,w,y)):y=m.VL();for(let t=0;t<y.length;++t){const b=y[t];if(s.Sk(S,b)||s.uMt(S,b)){let t=E(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.H8(),x=(e.Z8(M),n.UL()),_=w.UL();if(x.Wft(!1),_.Wft(!1),n===w){const G=x.jft();A.Br(G),G.push(S),G.push(b),n.xyt()}else{const T=x.jft(),I=_.jft();A.Br(T),A.Br(I),T.push(S),I.push(b),n.xyt(),w.xyt()}yield*c.pyt(a,f),e.tV(M)}}else P(d,S,b)}A.Br(F)}i.hV()}return!1}.call(this,w);if(w){let t=this.uf,s=t.HF(),e=t.pO(),i=e.IO(),h=e.jdt(),n=h.kN(),r=h.gbt(),o=h.ybt(),a=i.z8(),l=t.Ett(),u=l-1,c=a.bO(),f=i.J8(c),d=r.get("collmemory"),p=(d||(d=A.an(A.Qu),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Uf().addEventListener("instancedestroy",t=>R(d,t.F6))),n.UL()),m=w.UL(),g=p.VL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Fft()?(s.lvt(S.CD().PD(),w,S.CD().oB(),F),y=F,s.lMt(S,w,y)):y=m.VL();for(let t=0;t<y.length;++t){const b=y[t];if(s.Sk(S,b)||s.uMt(S,b)){let t=E(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.H8(),x=(e.Z8(M),n.UL()),_=w.UL();if(x.Wft(!1),_.Wft(!1),n===w){const G=x.jft();A.Br(G),G.push(S),G.push(b),n.xyt()}else{const T=x.jft(),I=_.jft();A.Br(T),A.Br(I),T.push(S),I.push(b),n.xyt(),w.xyt()}c.Q8(a,f),e.tV(M)}}else P(d,S,b)}A.Br(F)}i.hV()}return!1},M.cMt=function(t){return e(d(this),t,0,0)},M.fMt=function(t,s,i){return e(d(this),t,s,i)},M.jB=function(){return u(this).jB()},M._q=function(){return u(this)._q()},M.dMt=function(i,e){const t=this.UL(),h=t.VL();if(0===h.length)return!1;let s=i.UL(),n=s.VL();if(s.Fft()){const a=[...this.uf.pMt(i)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const r=s.Fft()?null:new Set(n),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];if(1===e)for(const u of l.RB())u.mMt(i)&&(null===r||r.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.IB()))continue}else t=l.PB();t.mMt(i)&&(null===r||r.has(t))&&o.add(t)}}return 0!==o.size&&(s.zft(o),i.xyt(),!0)},M.gMt=function(i,e){const t=this.UL(),h=t.VL();if(0===h.length)return!1;let s=i.UL(),n=s.VL();if(s.Fft()){const a=[...this.uf.pMt(i)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const r=s.Fft()?null:new Set(n),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];2!==e||l._q()||!l.mMt(i)||null!==r&&!r.has(l)||o.add(l);for(const u of 0===e?l.children():l.kB())2===e&&u._q()||u.mMt(i)&&(null===r||r.has(u))&&o.add(u)}return 0!==o.size&&(s.zft(o),i.xyt(),!0)},M.yMt=function(i,e,h){const t=this.UL(),n=t.VL();if(0===n.length)return!1;let s=i.UL(),r=s.VL();if(s.Fft()){const l=[...this.uf.pMt(i)];0<l.length&&(r=r.concat(l))}if(0===r.length)return!1;const o=s.Fft()?null:new Set(r),a=[];for(let t=0,s=n.length;t<s;++t){const u=n[t];if(0===e){const c=u.DB(h);null!==c&&c.mMt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.mMt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.Hft(a),i.xyt(),!0)},M.wMt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.AB(),s,i);case 1:return A.compare(e.SMt(),s,i)}},M.NB=function(t,s,i,e,h,n,r,o,a,l){const u=d(this),c=w.Udt().kN();for(const f of t.bMt(u,c)){if(!f.EL().wL())return;u.NB(f,{UB:s,zB:i,qB:e,XB:h,KB:n,s6:r,QB:o,e6:a,n6:l})}},M.BB=function(t){const s=d(this),i=w.Udt().kN();for(const e of t.bMt(s,i))s.BB(e)},M.vMt=function(){const t=d(this);if(t.jB()){const s=t.IB();s.BB(t)}},M.MMt=function(){return d(this).AB()},M.xMt=function(){return d(this).SMt()},M._Mt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.u6(),i.Q4()):i.a6(t,s)},M.f6=function(t,s,i,e,h,n,r,o){const a=u(this),l=a.f6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,uN:n,u:r,v:o});l&&a.Q4()},M.GMt=function(){const t=u(this);return t.p6()?t.m6().eM():0},M.TMt=function(){const t=u(this);return t.p6()?t.m6().hM():0},M.IMt=function(t){const s=u(this);t=2===t?!s.J5():0!==t,s.J5()!==t&&s.H5(t)},M.T6=function(t,s){this instanceof self.ON?this.o8(t,s):this.T6(t,s)},M.CMt=function(t,s){this instanceof self.ON?this.a8(t,""+s):this.CMt(t,""+s)},M.PMt=function(t){this instanceof self.ON?this.l8(t):this.PMt(t)},M.RMt=function(){this instanceof self.ON?this.h8():this.x6()},M.EMt=function(){this instanceof self.ON?this.n8():this._6()},M.AMt=function(){return this instanceof self.ON?this.r8():this.AMt()},M.FMt=function(t){this instanceof self.ON?this._setEnabled(0!==t):this.OMt(0!==t)},M.DMt=function(){return this instanceof self.ON?this.jyt():this.kMt()},x.LMt=function(t,s,i){return A.compare(this.ZW().Jnt(t),s,i)},_.LMt=function(t,s,i){return A.compare(h(this).Jnt(t),s,i)},x.NMt=function(t){return!!this.ZW().Jnt(t)},_.NMt=function(t){return!!h(this).Jnt(t)},M.BMt=function(i,e){const t=this.UL(),h=t.VL();if(!h.length)return!1;let n=this.$z(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=n?a.kN().zwt(this.Jwt()):0,u=a.Jnt(l+e);(null===r||0===i&&u<o||1===i&&u>o)&&(o=u,r=a)}return t.Xft(r),!0},M.WMt=function(t){return(this.uf.jdt().cbt()?n:s)(this,t)},M.EW=function(t){const s=new Set(A.eo(t)),i=d(this).e4();return s.isSubsetOf(i)},M.jMt=function(){return d(this).VMt()},M.UMt=function(){return d(this).e4().size},M.HMt=function(t){return d(this).zMt(t)},M.JMt=function(t,s){const i=A.eo(s);if(0!==i.length){const e=d(this),h=new Set(e.e4());if(0===t)for(const n of i)h.add(n);else if(1===t)for(const r of i)h.delete(r);e.n4(h)}},M.qMt=function(){w.UN(d(this))},M.$Mt=function(){return!0},M.XMt=function(){return!0},x.YMt=function(t,s){this.ZW().qnt(t,s)},_.YMt=function(t,s){h(this).qnt(t,s)},x.KMt=function(t,s){const i=this.ZW(),e=i.Jnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.qnt(t,e+s)},_.KMt=function(t,s){const i=h(this),e=i.Jnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.qnt(t,e+s)},x.ZMt=function(t,s){const i=this.ZW(),e=i.Jnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.qnt(t,e-s))},_.ZMt=function(t,s){const i=h(this),e=i.Jnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.qnt(t,e-s))},x.QMt=function(t,s){this.ZW().qnt(t,s?1:0)},_.QMt=function(t,s){h(this).qnt(t,s?1:0)},x.t2t=function(t){const s=this.ZW();s.qnt(t,0===s.Jnt(t)?1:0)},_.t2t=function(t){const s=h(this);s.qnt(t,0===s.Jnt(t)?1:0)},M.s2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.i2t(),i.LY("state"),i.Vv(s,"state"),w.e2t("state",{h2t:!0})},M.n2t=function(){return JSON.stringify(d(this).jv("state"))},M.r2t=function(){return d(this).kN().Qc()},M.o2t=function(){let t=w.Wdt().T0t(),s=t.zL();for(const i of w.pMt(t))++s;return s},M.a2t=function(){return w.Wdt().T0t().UL().VL().length},x.dX=function(){return this.ZW().dX()},_.dX=function(){return h(this).dX()},x.YN=function(){return this.ZW().YN()},_.YN=function(){return h(this).YN()},M.fpt=function(t){const s=d(this);return t.toLowerCase()===w.pO().gpt(s)},M.o4=function(t){const s=d(this);w.pO().o4(s,t)},M.l2t=function(t){return w.pO().V1t().u2t(this.UL().VL(),t),!0},M.c2t=function(){return d(this).ZN()},A.f2t=function(t,s,i){const e=t[1],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.aX,w=s.Qht,S=s.tnt,b=Object.assign({},M,2<=i?_:x);h&&(y.dvt=b.dvt,y.pvt=b.pvt,y.mvt=b.mvt,y.gvt=b.gvt,y.yvt=b.yvt,w.Pv=b.Pv,w.Av=b.Av,w.wvt=b.wvt,w.bvt=b.bvt,w.Mvt=b.Mvt,w.Gvt=b.Gvt,S.d2t=b.Cv,S.p2t=b.Ev,S.dt=b.DO),n&&(y.Tvt=b.Tvt,y.Ivt=b.Ivt,w.Mm=b.Mm,w.pm=b.pm,w.cC=b.cC,S.m2t=b.fm,S.g2t=b.Gm,S.y2t=b.Cvt,S.w2t=b.Pvt,S.S2t=b.Rvt,S.b2t=b.Evt,S.v2t=b.Avt,S.M2t=b.Fvt),r&&(y.x2t=b.Ovt,y._2t=b.Dvt,y.kvt=b.kvt,w.o5=b.o5,w.Lvt=b.Lvt,w.Nvt=b.Nvt,w.Bvt=b.Bvt,w.Wvt=b.Wvt,w.jvt=b.jvt,S.G2t=b.a5),o&&(y.J5=b.J5,y.Vvt=b.Vvt,w.H5=b.H5,w.VR=b.VR,w.Hvt=b.Hvt,S.Opacity=b.WR,S.T2t=b.HR),a&&(y.zvt=b.zvt,y.Jvt=b.Jvt,y.qvt=b.qvt,w.$vt=b.$vt,w.Xvt=b.Xvt,w.Yvt=b.Yvt,w.Kvt=b.Kvt,w.Ov=b.Ov,S.Qvt=b.Qvt,S.tMt=b.tMt,S.sMt=b.sMt,S.iMt=b.iMt,S.eMt=b.eMt),l&&(y.hMt=b.hMt,w.nMt=b.nMt,w.rMt=b.rMt),d&&(y.jB=b.jB,y._q=b._q,y.dMt=b.dMt,y.gMt=b.gMt,y.yMt=b.yMt,y.wMt=b.wMt,w.NB=b.NB,w.BB=b.BB,w.vMt=b.vMt,S.MMt=b.MMt,S.xMt=b.xMt),p&&(w._Mt=b._Mt,w.f6=b.f6,S.GMt=b.GMt,S.TMt=b.TMt),u&&(y.J5=b.J5,w.H5=b.IMt,w.I2t=b.T6,w.C2t=b.CMt,w.P2t=b.PMt),c&&(y.R2t=b.AMt,w.E2t=b.RMt,w.A2t=b.EMt),f&&(y.Zu=b.DMt,w.F2t=b.FMt),m&&(y.oMt=b.oMt,y.cMt=b.cMt,y.fMt=b.fMt,s.O2t=v),e||(y.LMt=b.LMt,y.NMt=b.NMt,y.BMt=b.BMt,y.WMt=b.WMt,y.EW=b.EW,w.YMt=b.YMt,w.KMt=b.KMt,w.ZMt=b.ZMt,w.QMt=b.QMt,w.t2t=b.t2t,w.JMt=b.JMt,y.$Mt=b.$Mt,y.XMt=b.XMt,w.qMt=b.qMt,w.s2t||(w.s2t=b.s2t),S.n2t||(S.n2t=b.n2t),S.o2t=b.o2t,S.a2t=b.a2t,S.D2t=b.dX,S.k2t=b.YN,S.r2t=b.r2t,S.jMt=b.jMt,S.UMt=b.UMt,S.HMt=b.HMt,y.fpt=b.fpt,w.o4=b.o4,w.l2t=b.l2t),g&&(S.c2t=b.c2t)}}{const ta=self.Ns;ta.U1t=class extends ta.nn{constructor(t){super(),this.Zft=t,this.wf="",this.d3=-1,this.L2t="",this.N2t=!1,this.B2t=null,this.o0t=0,this.Dmt=[],this.d0t=null,this.W2t=new Map,this.j2t=null,this.V2t=null,this.U2t=-1,this.Wyt=null,this.H2t=null,this.z2t=!1}ln(){this.wf="",this.d3=-1,this.L2t="",this.B2t=null,this.V2t=null,this.Wyt=null,this.H2t=null,this.U2t=-1,ta.Br(this.Dmt),this.d0t&&(this.d0t.clear(),this.d0t=null);for(const t of this.W2t.values())t.ln();this.W2t.clear(),this.j2t=null}Iv(){const t=this.Zft,s=t.XD().qz(),i=t.Wdt(),e=(this.B2t=i.bO(),this.o0t=i.S0t()+1,t.Opt(this.B2t));e&&(this.V2t=e,this.Wyt=e.ewt(),this.H2t=e.iwt().map(t=>t.Get()),e.oyt())&&(this.U2t=e.owt());for(const n of s){const r=n.UL();r.Fft()&&!this.B2t.Egt(n)||(this.Dmt.push(n),this.W2t.set(n,ta.an(ta.J2t,r)))}const h=t.vO();this.d0t=0<h.size?h:null}q2t(t){this.wf="timer",this.Iv(),this.d3=this.Zft.XD().NO()+t}$2t(t){this.wf="signal",this.Iv(),this.L2t=t.toLowerCase()}u2t(t,s){this.wf="instance-signals",this.Iv(),this.L2t=s.toLowerCase(),this.j2t=new Set(t)}X2t(t){this.wf="promise",this.Iv(),t.then(()=>this.apt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.apt()})}Y2t(){return"timer"===this.wf}rpt(){return"signal"===this.wf}ppt(){return"instance-signals"===this.wf}Rpt(){return"promise"===this.wf}opt(){return this.L2t}K2t(){return this.N2t}apt(){this.N2t=!0}mpt(t){this.j2t.delete(t),0===this.j2t.size&&this.apt()}J1t(){return this.Y2t()?this.d3<=this.Zft.XD().NO():this.K2t()}Z2t(t){t.p0t(this.B2t,this.o0t);for(const[i,e]of this.W2t.entries()){const h=i.UL();e.p0t(h)}this.d0t&&t.A0t([...this.d0t]);const s=this.V2t;s&&(s.wyt(this.Wyt),s.iwt().map((t,s)=>t.oht(this.H2t[s])),s.oyt())&&s.awt(this.U2t)}q1t(t){this.Z2t(t),this.B2t.ayt(t),this.V2t&&this.V2t.oyt()&&this.V2t.Cyt(this.U2t),this.Zft.N1t(this.Dmt),this.z2t=!0}async K1t(t){this.Z2t(t);for(const s of this.B2t.lyt(t))await this.Zft.XD().v1t(s);this.V2t&&this.V2t.oyt()&&this.V2t.Cyt(this.U2t),this.Zft.N1t(this.Dmt),this.z2t=!0}$1t(){return this.z2t}Cft(t){for(const s of this.W2t.values())s.Cft(t);if("instance-signals"===this.wf){for(const i of t)this.j2t.delete(i);0===this.j2t.size&&this.apt()}}bq(){const t={},s={wt:this.wf,t:this.d3,st:this.L2t,s:this.N2t,ev:this.B2t.i9(),sm:this.Dmt.map(t=>t.i9()),dsm:this.d0t?[...this.d0t].map(t=>t.i9()):null,sols:t};this.B2t.Xgt(this.o0t)&&(s.act=this.B2t.Hdt(this.o0t).i9());for(const[i,e]of this.W2t)t[i.i9().toString()]=e.bq();return"instance-signals"===this.wf&&(s.pi=[...this.j2t].map(t=>t.YN())),s}static Ept(t,s){const i=t.XD(),e=t.Qdt(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const r=t.s1t(s.act);if(!r)return null;h=r.LF()}const n=ta.an(ta.U1t,t);n.d3=s.t,s.hasOwnProperty("wt")?n.wf=s.wt:n.wf=-1===n.d3?"signal":"timer",n.L2t=s.st,n.N2t=s.s,n.B2t=e,n.o0t=h;for(const o of s.sm){const a=i.L8(o);a&&n.Dmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.L8(l);u&&(n.d0t||(n.d0t=new Set),n.d0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.L8(d);if(p){const m=ta.an(ta.J2t,null);m.vq(t,f),n.W2t.set(p,m)}}if("instance-signals"===n.wf){n.j2t=new Set;for(const g of s.pi){const y=i.xD(g);y&&n.j2t.add(y)}}return n}}}{const sa=self.Ns;sa.J2t=class extends sa.nn{constructor(t){super(),this.vft=null,this.Q2t=!0,this.UH=[],t&&(this.vft=t.kN(),this.Q2t=t.Fft(),sa.Ur(this.UH,t.jft()))}ln(){this.vft=null,sa.Br(this.UH)}p0t(t){t.Wft(this.Q2t),sa.Ur(t.jft(),this.UH)}Cft(t){sa.$r(this.UH,t)}bq(){return{sa:this.Q2t,insts:this.UH.map(t=>t.YN())}}vq(t,s){const i=t.XD();this.Q2t=!!s.sa,sa.Br(this.UH);for(const e of s.insts){const h=i.xD(e);h&&this.UH.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ia=self.Ns;ia.txt=class extends ia.nn{constructor(t){super(),this.uf=t.runtime,this.sxt=!!t.nL,this.ixt=!!t.hxt,this.nxt=!!t.cL,this.rxt=!!t.oxt,this.axt=!!t.dL,this.lxt=!!t.uxt,this.cxt=!!t.SL,this.fxt=!!t.lL,this.dxt=!!t.mL,this.pxt=t.mxt,this.gxt=null,this.yxt=new Map,this.wxt=new Map,this.Sxt=new Map,this.bxt=new Map,this.vxt=t.Mxt,this.xxt=null}ln(){this.uf=null}XD(){return this.uf}_xt(){}dpt(){return(2<=this.ubt()?this.xxt:this).constructor}ubt(){return this.pxt}Gxt(t=!1){let s=this.vxt;return t&&"function"!=typeof s&&2<=this.ubt()?globalThis.nj:s}rL(){return this.sxt}aL(){return this.ixt}uL(){return this.fxt}gL(){return this.dxt}fL(){return this.nxt}Zb(){return this.rxt}pL(){return this.axt}wL(){return this.lxt}bL(){return this.cxt}Fwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.yxt.get(t);return i||(i=t.bind(s),this.yxt.set(t,i)),i}rbt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.wxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}obt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Sxt,t),n=l(h,i),r=n.get(e);return r||(r=t.bind(s,i,e),n.set(e,r)),r}abt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let n=l(this.bxt,t),r=l(n,i),o=l(r,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Txt(t){if(!this.rL())throw new Error("must be single-global plugin");this.gxt=t}TL(){if(this.rL())return this.gxt;throw new Error("must be single-global plugin")}CL(){if(this.rL())return this.gxt.CL();throw new Error("must be single-global plugin")}Ixt(){const t=this.ubt(),s=(ia.eL.Cxt(this,t),this.Gxt(!0));if(s){if(this.xxt=new s,!(this.xxt instanceof self.tL))throw new TypeError("plugin class must derive from IPlugin")}else this.xxt=new self.tL;ia.eL.Pxt(t)}xL(){return this.xxt}}}{const ea=self.Ns;ea.Rxt=class extends ea.txt{constructor(t,s){super(t),this.Ext=s,this.Axt=0,this.Fxt=new Map,this.Oxt("elem-focused",t=>t.Dxt()),this.Oxt("elem-blurred",t=>{t&&t.kxt()})}ln(){super.ln()}Lxt(t){const s=this.Axt++;return this.Fxt.set(s,t),s}Nxt(t){this.Fxt.delete(t)}Oxt(t,i){this.uf.T4(this.Ext,t,t=>{const s=this.Fxt.get(t.elementId);i(s,t)})}}}{const ha=self.Ns;ha.Bxt=class extends ha.nn{constructor(t){super(),this.vft=t,this.uf=t.XD(),this.Wxt=t.EL()}ln(){this.vft=null,this.uf=null,this.Wxt=null}kN(){return this.vft}XD(){return this.uf}EL(){return this.Wxt}rW(){return this.vft.rW()}_xt(){}Mbt(t){}ovt(t){}avt(t){}E$(t){}L$(){}O$(){}eX(t){}jxt(){}Gxt(){return null}Vxt(t,s,i){const e=ha.an(ha.Event,t,s);e.Uxt=this,i&&Object.assign(e,i),this.kN().WX(e)}}}{const na=self.Ns;na.Hxt=class extends na.nn{constructor(t,s){super(),this.Gi=t,this.Ext=s,this.zxt=null,this.uf=t.XD(),this.vft=this.Gi.kN(),this.Jxt=this.vft.rvt(),this.TY=null,this.CY=null,this.A4=!1,this.O4=!1,this.v0=null,this.kI=!1}ln(){this.kI=!0,this.qxt(),this.$xt(),this.TY=null,this.CY=null,this.v0&&(this.v0.ln(),this.v0=null),this.Gi=null,this.uf=null,this.vft=null,this.Jxt=null}un(){return this.kI}ZW(){return this.Gi}XD(){return this.uf}kN(){return this.vft}EL(){return this.Jxt.EL()}rvt(){return this.Jxt}Xxt(){return this.Gi._D()}M4(t){return this.uf.M4(t,this.Gi,null)}Yxt(t){return this.uf.Yxt(t,this.Gi,null)}_4(t){return this.uf._4(t,this.Gi,null)}Kxt(t,s){return this.uf.Kxt(t,this.Gi,s)}Zxt(t,s){return this.uf.Zxt(t,this.Gi,s)}Qxt(t){return this.uf.Qxt(t)}t_t(t,s){this.uf.T4(this.Ext,t,s)}s_t(t){for(const[s,i]of t)this.t_t(s,i)}i_t(t,s){this.uf.df(this.Ext,t,s)}e_t(t,s){return this.uf.LD(this.Ext,t,s)}h_t(t,s){if(!this.uf.ZF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Ext,handler:t,data:s,responseId:null});this.i_t(t,s)}n_t(t){if(!t)throw new Error("cannot set empty component id");this.zxt=t}r_t(){if(this.zxt)return this.uf.W4(this.zxt);throw new Error("wrapper extension component id not set")}V4(t,s){if(!this.zxt)throw new Error("wrapper extension component id not set");this.uf.V4(this.zxt,t,s)}o_t(t){for(const[s,i]of t)this.V4(s,i)}T8(t,s){if(!this.zxt)throw new Error("wrapper extension component id not set");this.uf.T8(this.zxt,t,s)}I8(t,s){if(this.zxt)return this.uf.I8(this.zxt,t,s);throw new Error("wrapper extension component id not set")}kK(){}a_t(){}l_t(){this.A4||(this.TY||(this.TY=()=>this.kK()),this.uf.Uf().addEventListener("tick",this.TY),this.A4=!0)}qxt(){this.A4&&(this.uf.Uf().removeEventListener("tick",this.TY),this.A4=!1)}u_t(){return this.A4}c_t(){this.O4||(this.CY||(this.CY=()=>this.a_t()),this.uf.Uf().addEventListener("tick2",this.CY),this.O4=!0)}$xt(){this.O4&&(this.uf.Uf().removeEventListener("tick2",this.CY),this.O4=!1)}f_t(){return this.O4}d_t(){return[]}jv(){return null}Vv(t){}Lnt(t){}Unt(t,s){}Lrt(t,s,i){if(0!==s){const e=this.Lnt(t);if("number"!=typeof e)throw new Error("expected number");this.Unt(t,e+s,i)}}p_t(t,s,i,e){}m_t(t,...s){t.call(this,...s)}g_t(t,...s){return t.call(this,...s)}Gxt(){return null}Vxt(t,s,i){if(this.Gi.y_t()){const e=this.Xxt(),h=na.an(na.Event,t,s);h.F6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}Zb(){return!1}}}{const ra=self.Ns;ra.w_t=class extends ra.Hxt{constructor(t,s){super(t,s),this.Rst=t.CD(),this.S_t=null,this.b_t=null}ln(){if(this.S_t){const t=this.uf.Uf();t.removeEventListener("renderercontextlost",this.S_t),t.removeEventListener("renderercontextrestored",this.b_t),this.S_t=null,this.b_t=null}this.Rst=null,super.ln()}v_t(){this.M_t()}x_t(){}__t(){}M_t(){if(!this.S_t){this.S_t=()=>this.DH(),this.b_t=()=>this.G_t();const t=this.uf.Uf();t.addEventListener("renderercontextlost",this.S_t),t.addEventListener("renderercontextrestored",this.b_t)}}DH(){this.x_t()}G_t(){this.__t()}CD(){return this.Rst}bit(){return!1}Sit(){if(!this.bit())throw new Error("original size not known");const t=this.T_t();if(t)return t.fm()}Mit(){if(!this.bit())throw new Error("original size not known");const t=this.T_t();if(t)return t.Gm()}T_t(){return null}I_t(){const t=this.T_t();if(t){const s=t.z2();if(s)return[s.fm(),s.Gm()]}return[100,100]}C_t(){const t=this.T_t();return t?t.VC():null}P_t(){const t=this.T_t();return t?t.R_t():null}E_t(){const t=this.T_t();return!!t&&t.A_t()}vvt(t){const s=this.Gi.CD();return[s.Cv(),s.Ev(),s.nB()]}jxt(t,s,i){}F_t(t,s){}KJ(){return!0}}}{const oa=self.Ns,aa=oa.an(oa.Rect);oa.O_t=class extends oa.w_t{constructor(t,s){super(t,s),this.D_t=this.EL().Lxt(this),this.k_t=!0,this.L_t=!1,this.N_t=!1,this.B_t=-.2,this.W_t=oa.an(oa.Rect,0,0,-1,-1);const i=this.uf.Wk();this.j_t=i.Vj(),this.V_t=i.Uj(),this.U_t=-1,this.H_t=-1,this.z_t=!1,this.l_t()}ln(){this.EL().Nxt(this.D_t),this.J_t("destroy"),this.D_t=-1,super.ln()}v6(){if(this.uf.ZF())throw new Error("not valid in worker mode");return this.q_t("get-element")}J_t(t,s){(s=s||{}).elementId=this.D_t,this.i_t(t,s)}q_t(t,s){return(s=s||{}).elementId=this.D_t,this.h_t(t,s)}$_t(t,s){return(s=s||{}).elementId=this.D_t,this.e_t(t,s)}X_t(t){t=t||{};const s=this.CD();t.elementId=this.D_t,t.isVisible=s.J5(),t.htmlIndex=s.PD().Xj(),t.htmlZIndex=s.Yj(),Object.assign(t,this.Y_t()),this.k_t=!!t.isVisible,this.h_t("create",t),this.K_t(!0)}IMt(t){this.k_t!==(t=!!t)&&(this.k_t=t,this.J_t("set-visible",{isVisible:t}))}kK(){this.K_t(!1)}Z_t(){const t=this.uf.Wk().s8();return"Android"===oa.li.ci&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}K_t(u){if(!this.ZW().i8()){let t=this.CD(),s=t.PD(),i=t.oB(),[e,h]=s.IN(i._l(),i.Gl()),[n,r]=s.IN(i.Tl(),i.Il()),o=this.uf.Wk(),a=o.Hk(),l=o.Jk();if(t.J5()&&s.J5())if(!this.Z_t()&&(n<=0||r<=0||a<=e||l<=h))this.IMt(!1);else{aa.set(e,h,n,r);const c=o.Vj(),f=o.Uj(),d=s.Xj(),p=t.Yj();if(!u&&aa.equals(this.W_t)&&this.j_t===c&&this.V_t===f&&this.U_t===d&&this.H_t===p)this.IMt(!0);else{this.W_t.T(aa),this.j_t=c,this.V_t=f,this.U_t=d,this.H_t=p,this.IMt(!0);let t=null;this.N_t&&(t=s.e8()+this.B_t),this.J_t("update-position",{left:Math.round(this.W_t._l()),top:Math.round(this.W_t.Gl()),width:Math.round(this.W_t.width()),height:Math.round(this.W_t.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.IMt(!1)}}x6(){this.q_t("focus",{focus:!0})}_6(){this.q_t("focus",{focus:!1})}Dxt(){this.L_t=!0}kxt(){this.L_t=!1}AMt(){return this.L_t}T6(t,s){this.J_t("set-css-style",{prop:oa.jo(t),val:s})}CMt(t,s){this.J_t("set-attribute",{name:t,val:s})}PMt(t){this.J_t("remove-attribute",{name:t})}Q_t(){this.z_t||(this.z_t=!0,Promise.resolve().then(()=>{this.z_t=!1,this.J_t("update-state",this.Y_t())}))}Y_t(){}tGt(){return this.D_t}}}{const la=self.Ns,ua=self.k6;la.sGt=class extends la.nn{constructor(t){super(),this.uf=t.runtime,this.iGt=la.an(la.ac),this.eGt=la.an(la.ac),this.pxt=t.mxt,this.vxt=t.Mxt,this.hGt=null}ln(){this.eGt.ln(),this.iGt.ln(),this.uf=null}XD(){return this.uf}_xt(){}ubt(){return this.pxt}Gxt(t=!1){let s=this.vxt;return t&&"function"!=typeof s&&2<=this.ubt()?globalThis.f8:s}nGt(t){this.iGt.fc(t)}aK(){return this.iGt.dc()}Oz(t){this.eGt.fc(t)}Lz(t){this.eGt.hc(t)}VL(){return this.eGt.dc()}Ixt(){const t=this.ubt(),s=(la.eL.Cxt(this,t),this.Gxt(!0));if(s){if(this.hGt=new s,!(this.hGt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.hGt=new ua;la.eL.Pxt(t)}C6(){return this.hGt}}}{const ca=self.Ns;ca.rGt=class extends ca.nn{constructor(t){super(),this.uf=t.XD(),this.$wt=t,this.vft=t.kN(),this.oGt=t.P6(),this.oGt.nGt(this.vft)}ln(){this.uf=null,this.$wt=null,this.vft=null,this.oGt=null}_xt(){}A6(){return this.$wt}kN(){return this.vft}XD(){return this.uf}P6(){return this.oGt}}}{const fa=self.Ns;fa.aGt=class extends fa.nn{constructor(t,s){super(),this.lGt=t,this.Ext=s,this.Gi=t.O6(),this.uf=t.XD(),this.$wt=t.A6(),this.Jxt=this.$wt.rvt(),this.A4=!1,this.O4=!1,this._8=!1,this.v0=null}ln(){this.qxt(),this.$xt(),this.uGt(),this.v0&&(this.v0.ln(),this.v0=null),this.lGt=null,this.Gi=null,this.uf=null,this.$wt=null,this.Jxt=null}P6(){return this.$wt.P6()}cGt(){return this.lGt}O6(){return this.Gi}kN(){return this.Gi.kN()}CD(){return this.Gi.CD()}XD(){return this.uf}A6(){return this.$wt}rvt(){return this.Jxt}Xxt(){return this.lGt.Xxt()}M4(t){return this.uf.M4(t,this.Gi,this.$wt)}Yxt(t){return this.uf.Yxt(t,this.Gi,this.$wt)}_4(t){return this.uf._4(t,this.Gi,this.$wt)}fGt(){}kK(){}a_t(){}dGt(){}l_t(){this.A4||(this.uf.w8(this),this.A4=!0)}qxt(){this.A4&&(this.uf.S8(this),this.A4=!1)}u_t(){return this.A4}c_t(){this.O4||(this.uf.b8(this),this.O4=!0)}$xt(){this.O4&&(this.uf.v8(this),this.O4=!1)}f_t(){return this.O4}pGt(){this._8||(this.uf.M8(this),this._8=!0)}uGt(){this._8&&(this.uf.x8(this),this._8=!1)}mGt(){return this._8}d_t(){return[]}t_t(t,s){this.uf.T4(this.Ext,t,s)}gGt(t,s){}jv(){return null}Vv(t){}Lnt(t){}Unt(t,s){}Lrt(t,s){if(0!==s){const i=this.Lnt(t);if("number"!=typeof i)throw new Error("expected number");this.Unt(t,i+s)}}p_t(t,s,i,e){}m_t(t,...s){t.call(this,...s)}g_t(t,...s){return t.call(this,...s)}Gxt(){return null}Vxt(t,s,i){if(this.lGt.y_t()){const e=this.Xxt(),h=fa.an(fa.Event,t,s);h.yGt=e,h.F6=e.F6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},n=(s,self.Ns),i=(n.uX={},n.qat={},n.Bs()),e=[],h=[],r=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;n.eL=class extends n.nn{constructor(t,s){super(),this.uf=t,this.wGt=[],this.Cwt=null,this.SGt=[],this.bGt=new Map,this.vGt=null,this.MGt=null,this.xGt=new Set(s)}_Gt(t){const s=t[19],i=this.uf.Ayt(t[0]);if(!i)throw new Error("missing plugin");n.f2t(t,i,s);const e=2<=s?n.txt:i,h=n.an(e,{runtime:this.uf,nL:t[1],hxt:t[2],cL:t[5],dL:t[8],oxt:t[9],uxt:t[13],SL:t[14],lL:t[17],mL:t[18],mxt:s,Mxt:2<=s?i:null});h._xt(),this.wGt.push(h),u.set(i,h)}GGt(){this.Cwt=n.an(n.uX.lX,{runtime:this.uf,nL:!0}),this.Cwt._xt()}TGt(t){const i=t[1],e=this.uf.Ayt(t[0]);if(!e)throw new Error("missing behavior");this.bGt.set(e,()=>{const t=2<=i?n.sGt:e,s=n.an(t,{runtime:this.uf,mxt:i,Mxt:2<=i?e:null});s._xt(),this.SGt.push(s),c.set(e,s),!this.vGt&&n.qat.solid&&s instanceof n.qat.solid?this.vGt=s:!this.MGt&&n.qat.jumpthru&&s instanceof n.qat.jumpthru&&(this.MGt=s),s.Ixt()})}IGt(t){const s=this.bGt.get(t);s&&(s(),this.bGt.delete(t))}static Cxt(t,s=1){if(n.eL.Cxt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Pxt(t=1){if(n.eL.Pxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static WN(){if(n.eL.WN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static iL(t){if(n.eL.iL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static CGt(t){r.push(t)}static PGt(){r.pop()}static b4(){if(0===r.length)throw new Error("no init properties set");return r.at(-1)}RGt(){for(const t of this.wGt)t.Ixt()}static ML(t){return u.get(t)||null}static L6(t){return c.get(t)||null}Pwt(){return this.Cwt}EGt(){return this.vGt}AGt(){return this.MGt}W4(t){return this.xGt.has(t)}},o=n.eL.Cxt,a=n.eL.Pxt,t=n.eL.WN,l=n.eL.iL}{const da=self.Ns,pa=new Set;da.FGt=class extends da.nn{constructor(){super(),this.OGt=0,this._H="",this.GH=0,this.DGt=0,this.kGt=0,this.Km=0,this.Zm=0,this.LGt=!1,this.NGt=!1,this.BGt=null,this.WGt="",this.RI=da.an(da.Rect),this.jGt=da.an(da.tu),this.VGt="",this.UGt=new self.qD(this),pa.add(this)}ln(){this.FI(),this.BGt&&0===this.BGt.NH()&&this.BGt.ln(),this.BGt=null,pa.delete(this),this.HGt()}static DH(){for(const t of pa)t.WGt="",t.RI.set(0,0,0,0),t.jGt.vu(t.RI)}zGt(t){this._H=t[0],this.GH=t[1],this.DGt=t[2],this.kGt=t[3],this.Km=t[4],this.Zm=t[5],this.LGt=t[6],this.NGt=!0}JGt(t,s){if(this.BGt)throw new Error("already loaded asset");this._H=s;const i={};return da.So(s)&&(i.sH="remote"),this.$D(t,i),this.BGt.hH()}qGt(t,s){if(this.BGt)throw new Error("already loaded asset");this._H="",this.GH=s.size,this.BGt=da.an(da.iH,t.jF(),{blob:s,size:this.GH,sH:"local"})}$Gt(t){if(t===this)throw new Error("cannot replace with self");this.OGt++,this.FI(),this._H=t._H,this.GH=t.GH,this.DGt=t.DGt,this.kGt=t.kGt,this.Km=t.Km,this.Zm=t.Zm,this.LGt=t.LGt,this.NGt=t.NGt,this.BGt=t.BGt,this.WGt=t.WGt,this.RI=t.RI,this.jGt=t.jGt,this.HGt()}eH(){return this._H}rc(){return this.GH}XGt(){return this.DGt}YGt(){return this.kGt}A_t(){return this.LGt}fm(){return this.Km}Gm(){return this.Zm}KGt(){return this.BGt.fm()}ZGt(){return this.BGt.Gm()}$D(t,s){if(this.BGt)throw new Error("already got asset");s=Object.assign({},s,{url:this.eH(),size:this.rc()}),this.BGt=t.tH(s)}PH(){return this.BGt&&this.BGt.PH()}async kV(t,s){if(!this.BGt)throw new Error("no asset");if(this.WGt)throw new Error("already loaded texture");const i=this.OGt,e=(this.WGt="loading",await this.BGt.kV(t,s));if(this.OGt!==i)return null;if(!e)return this.WGt="",null;this.WGt="loaded",this.NGt||(this.Km=e.fm(),this.Zm=e.Gm(),this.NGt=!0);const h=this.LGt?this.Zm:this.Km,n=this.LGt?this.Km:this.Zm;return this.RI.set(this.DGt,this.kGt,this.DGt+h,this.kGt+n),this.RI.It(e.fm(),e.Gm()),this.jGt.vu(this.RI),this.LGt&&this.jGt.Iu(),e}FI(){this.WGt&&(this.BGt&&this.BGt.FI(),this.WGt="",this.RI.set(0,0,0,0),this.jGt.vu(this.RI))}z2(){return this.BGt&&"loaded"===this.WGt?this.BGt.z2():null}VC(){return this.RI}R_t(){return this.jGt}wj(){return this.UGt}QGt(){return this.BGt}async tTt(t){t=t||await this.BGt.BH();const s=da.Ao(this.Km,this.Zm),i=s.getContext("2d");return this.LGt?(i.rotate(Math.PI/-2),i.translate(-this.Zm,0),i.drawImage(t,this.DGt,this.kGt,this.Zm,this.Km,0,0,this.Zm,this.Km)):i.drawImage(t,this.DGt,this.kGt,this.Km,this.Zm,0,0,this.Km,this.Zm),s}async sTt(t){if(!this.VGt){const s=await this.tTt(t),i=await da.Fo(s);this.VGt=URL.createObjectURL(i)}return this.VGt}HGt(){this.VGt&&(URL.revokeObjectURL(this.VGt),this.VGt="")}}}{const ma=self.Ns;ma.iTt=class extends ma.nn{constructor(t){super(),this.dn=t[0],this.eTt=t[1],this.BSt=!!t[2],this.dot=t[3],this.hTt=t[4],this.nTt=!!t[5],this.v7=t[6],this.rTt=t[7].map(t=>ma.an(ma.oTt,t)),this.aTt=new self.U6(this)}static lTt(t,s){const i=ma.an(ma.iTt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.rTt.push(ma.oTt.lTt(t)),i}ln(){for(const t of this.rTt)t.ln();ma.Br(this.rTt)}uTt(t){for(const s of this.rTt)s.rW().$D(t)}cTt(s,i){return Promise.all(this.rTt.map(t=>t.rW().kV(s,i)))}fTt(){for(const t of this.rTt)t.rW().FI()}Qc(){return this.dn}i9(){return this.v7}Z6(){return this.rTt.length}tW(){return this.rTt}dTt(t){if((t=Math.floor(t))<0||t>=this.rTt.length)throw new RangeError("invalid frame");return this.rTt[t]}pTt(t,s){(s=Math.floor(s))<0?this.rTt.unshift(t):s>=this.rTt.length?this.rTt.push(t):this.rTt.splice(s,0,t)}mTt(t){if((t=Math.floor(t))<0||t>=this.rTt.length)throw new RangeError("invalid frame");this.rTt[t].ln(),this.rTt.splice(t,1)}gTt(i){for(let t=0,s=this.rTt.length;t<s;++t)if(ma.wh(this.rTt[t].GW(),i))return t;return-1}yTt(t){if("string"!=typeof t)return t;{const s=this.gTt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}H6(){return this.eTt}z6(){return this.BSt}J6(){return this.dot}X6(){return this.hTt}K6(){return this.nTt}wTt(){return this.aTt}}}{const ga=self.Ns,ya=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ga.oTt=class extends ga.nn{constructor(t){super(),this.STt=ga.an(ga.FGt),this.STt.zGt(t),this.bTt=t[7],this.vTt=ga.an(ga.Za,t[8],t[9]),this.MTt=t[10].map(t=>ga.an(ga.xTt,this,t)),this._Tt=new Map;for(const i of this.MTt)this._Tt.set(i.Qc().toLowerCase(),i);this.GTt=null;const s=t[11];6<=s.length&&(this.GTt=ga.an(ga.Ou,s)),this.Zg=t[12]||"",this.TTt=new self.nW(this)}static lTt(t){const s=ga.an(ga.oTt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.STt.qGt(t,ya),s}ln(){this.GTt&&(this.GTt.ln(),this.GTt=null),this.STt.ln(),this.STt=null}rW(){return this.STt}oW(){return this.bTt}lW(){return this.vTt.hl()}cW(){return this.vTt.rl()}vW(){return this.GTt}SW(t){return this._Tt.get(t.toLowerCase())||null}wW(t){return(t=Math.floor(t))<0||t>=this.MTt.length?null:this.MTt[t]}pW(){return this.MTt.length}GW(){return this.Zg}sW(){return this.TTt}}}{const wa=self.Ns;wa.xTt=class extends wa.nn{constructor(t,s){super(),this.ITt=t,this.dn=s[0],this.CTt=wa.an(wa.Za,s[1],s[2])}ln(){}Qc(){return this.dn}Cv(){return this.CTt.hl()}Ev(){return this.CTt.rl()}PTt(){return this.CTt}}}{const v=self.Ns,Sa=self.C3Debugger,ba=self.PL;v.qlt=class extends v.nn{constructor(s,t,i){super();const e=s.Ayt(i[1]),[h,n]=(this.uf=s,this.Wxt=v.eL.ML(e),this.Jxt=null,this.RTt=e.Instance,this.Kg=t,this.v7=i[11],this.dn=i[0],this.mwt=this.uf.Ydt(i[14]),this.ETt=!!i[9],this.ATt=!!i[2],this.FTt=!!i[10],this.OTt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],DTt:s.Ydt(t[3])})),this.kTt=i[4],this.LTt=i[5],this.ixt=this.Wxt.aL(),this.NTt=v.an(v.Event.Uf),this.hz=null,s.HF().Tk());if(this.BTt=v.an(v.WTt,h,n),this.jTt=!0,this.VTt=null,this.UTt=null,this.HTt=-1,this.zTt=null,this.JTt=null,this.qTt=null,this.$Tt=null,this.XTt=null,this.YTt=!1,this.KTt=null,this.ZTt=i[8].map(t=>v.QTt.vx(this,t)),this.tIt=[],this.sIt=new Map,this.iIt=new Map,this.eIt=new Set,this.hIt=new Map,this.nIt=v.an(v.bft,this),this.rIt=null,this.oIt=0,this.aIt=!1,this.KTt=null,this.STt=null,this.lIt=null,this.uIt=null,this.cIt=null,this.fIt=0,this.HSt=new Map,this.zSt=new Map,this.UH=[],this.dIt=new Map,this.pIt=!0,this.Wxt.pL()&&(this.hz=v.an(v.nz,this,i[12])),i[6]&&(this.STt=v.an(v.FGt),this.STt.zGt(i[6])),i[7]){this.lIt=i[7].map(t=>v.an(v.iTt,t)),this.uIt=new Map,this.cIt=new Map;for(const a of this.lIt)this.uIt.set(a.Qc().toLowerCase(),a),this.cIt.set(a.i9(),a)}this.ATt?(this.VTt=[],this.UTt=new Set,this.HTt=this.uf.mIt()):(this.zTt=[],this.JTt=new Set,this.qTt=[],this.$Tt=[],this.XTt=[]);const r=this.Wxt.ubt();if(r<2&&(this.Jxt=v.an(e.gIt,this,i[15]),!(this.Jxt instanceof v.Bxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.yIt=null,this.wIt=null,this.e$=v.an(v.Event.Uf),v.eL.Cxt(this,r);let o;if(o=2<=r?(o=e.gIt)||globalThis.mj:this.Jxt.Gxt()){if(this.yIt=new o(r<2?this:null),r<2&&!(this.yIt instanceof ba))throw new TypeError("script interface class must derive from IObjectClass");if(2<=r&&!(this.yIt instanceof globalThis.mj))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.yIt=new ba;if(v.eL.Pxt(r),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.Jxt.jxt(u,c,f)}}this.uf.SIt()&&!this.ATt&&!this.FTt&&this.ixt||this._xt(),this.Wxt.rL()&&(this.Wxt.Txt(this),this.bIt(i)),this.vIt=null}static vx(t,s,i){return v.an(v.qlt,t,s,i)}ln(){if(this.NTt.ln(),this.NTt=null,this.STt&&(this.STt.ln(),this.STt=null),this.lIt){for(const t of this.lIt)t.ln();v.Br(this.lIt),this.uIt.clear(),this.cIt.clear()}this.vIt=null,this.nIt.ln(),this.nIt=null,this.HSt.clear(),this.zSt.clear(),this.KTt=null,this.uf=null}MIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.uf.xz(i[t]);this.VTt.push(e),this.UTt.add(e),e.zTt.push(this),e.JTt.add(this)}}xIt(t){this.YTt=!0,this.KTt=t}$N(){return this.YTt}C$(){return this.KTt}_It(){let t=0;if(!this.ATt)for(const s of this.zTt)for(const i of s.GIt()){const e=i.Qc().toLowerCase();this.sIt.set(e,i),this.iIt.set(e,t),this.tIt.push(i),++t}for(const h of this.GIt()){const n=h.Qc().toLowerCase();this.sIt.set(n,h),this.iIt.set(n,t),this.tIt.push(h),++t}for(const r of this.tIt)this.eIt.add(r.P6().constructor);if(!this.ATt&&this.zTt.length){let t=this.uf.TIt(),s=(v.jr(this.qTt,t,0),v.jr(this.$Tt,t,0),v.jr(this.XTt,t,0),[]),i=0,e=0,h=0;for(const o of this.zTt){const a=o.Jwt(),l=(this.qTt[a]=i,i+=o.IIt(),this.$Tt[a]=e,e+=o.CIt(),this.XTt[a]=h,h+=o.PIt(),o.s5());if(l&&this.hz)for(const u of l.i5())s.push(u.RIt(this.hz))}this.hz&&this.hz.EIt(s)}}bIt(t){const s=this.uf.AIt(),i=v.an(v.Instance,{runtime:this.uf,DN:this,uid:s});i.FIt(t[16],[]),this.uf.OIt(s,i),this.UH.push(i)}rvt(){return this.Jxt}DIt(){return this.FTt}Uf(){return this.NTt}_xt(){this.ATt||(this.Jxt?this.Jxt._xt():this.yIt.gj())}kIt(){return 0<this.fIt}async E$(t){this.ATt||(this.fIt++,1===this.fIt&&(this.Jxt?await this.Jxt.E$(t):await this.yIt.Sj(this.uf.Wk().LIt())))}L$(){if(!this.ATt){if(this.fIt--,this.fIt<0)throw new Error("released textures too many times");0===this.fIt&&(this.Jxt?this.Jxt.L$():this.yIt.bj(this.uf.Wk().LIt()))}}O$(){if(this.ATt)throw new Error("not applicable to family");this.Jxt?this.Jxt.O$():this.yIt.vj()}async eX(t){this.ATt||(this.Jxt?await this.Jxt.eX(t):await this.yIt.Mj(this.uf.Wk().LIt()))}XD(){return this.uf}EL(){return this.Wxt}NIt(){return this.RTt}Qc(){return this.dn}Ydt(){return this.mwt}LF(){return this.Kg}i9(){return this.v7}$z(){return this.ATt}Fz(){return this.ETt}aL(){return this.ixt}Jwt(){return this.HTt}GIt(){return this.ZTt}CIt(){return this.kTt}BIt(t){return t&&this.eIt.has(t)}IIt(){return this.OTt.length}WIt(){return this.OTt.map(t=>t.sid)}jIt(s){return this.OTt.findIndex(t=>t.sid===s)}eit(s){return this.OTt.findIndex(t=>t.name===s)}VIt(){return this.OTt.map(t=>t.name)}UIt(){return this.OTt.map(t=>t.DTt)}nit(t){if((t=Math.floor(t))<0||t>=this.OTt.length)throw new RangeError("invalid instance variable index");return this.OTt[t].type}hit(t){if((t=Math.floor(t))<0||t>=this.OTt.length)throw new RangeError("invalid instance variable index");return this.OTt[t].name}PIt(){return this.LTt}HIt(){return this.tIt}Eht(t){return this.sIt.get(t.toLowerCase())||null}oit(t){const s=this.iIt.get(t.toLowerCase());return void 0===s?-1:s}s5(){return this.hz}pL(){return this.Wxt.pL()}zIt(){return this.hz&&this.hz.JIt()}B1t(){return this.nIt}UL(){return this.nIt.UL()}rW(){return this.STt}Tz(t){this.rIt=t}Gz(){return this.rIt}Iz(t){this.oIt=t}qIt(){return this.oIt}$It(){return this.lIt}XIt(){return this.lIt.length}e1t(){return this.zTt}cvt(t){return this.JTt.has(t)}mgt(){return this.VTt}Xz(t){return this.UTt.has(t)}Kwt(t){return this.$Tt[t]}zwt(t){return this.qTt[t]}Qyt(t){this.hIt.set(t.hwt().toLowerCase(),t)}twt(t){return!!this.uwt(t)}uwt(t){const s=this.hIt.get(t.toLowerCase());return s&&s.Zu()?s:null}YIt(){return this.lIt}KIt(t){if(this.lIt)return this.uIt.get(t.toLowerCase())||null;throw new Error("no animations")}ZIt(t){if(this.lIt)return this.cIt.get(t)||null;throw new Error("no animations")}QIt(t){if(this.KIt(t))throw new Error(`animation name '${t}' already exists`);const s=v.iTt.lTt(this.XD(),t);return this.lIt.push(s),this.uIt.set(s.Qc().toLowerCase(),s),this.cIt.set(s.i9(),s),s}tCt(t){const s=this.KIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.lIt.length)throw new Error("cannot remove last animation");const i=this.lIt.indexOf(s);this.lIt.splice(i,1),this.uIt.delete(s.Qc().toLowerCase()),this.cIt.delete(s.i9()),s.ln()}sCt(){if(this.lIt)return this.lIt[0];throw new Error("no animations")}iCt(){return this.sCt().dTt(0)}eCt(){if(this.lIt){const t=this.iCt().rW();return[t.fm(),t.Gm()]}return this.STt?[this.STt.fm(),this.STt.Gm()]:[100,100]}CL(){if(this.Wxt.rL())return this.UH[0];throw new Error("not a single-global plugin")}VL(){return this.UH}*instances(){yield*this.UH}*jL(){yield*this.UH,yield*this.uf.pMt(this)}zL(){return this.UH.length}Oz(t){this.UH.push(t)}hCt(){this.pIt=!0}gX(){if(this.pIt&&!this.ATt){let s=this.UH,i=0;for(let t=s.length;i<t;++i)s[i].nCt(i);const t=this.uf.rCt();for(const e of t)e.kN()===this&&e.nCt(i++);this.pIt=!1}}oCt(t){const s=this.UH;if(t<s.length)return s[t];t-=s.length;const i=this.uf.rCt();for(const e of i)if(e.kN()===this){if(0===t)return e;--t}return null}Zvt(t){if(t&&t.$N()&&t.kN()!==this)for(const i of t.XN())if(i.kN()===this)return i;const s=this.UL().VL();return s.length?s[0]:null}WL(t){const s=this.UL().VL();return 0<s.length?s[t.dX()%s.length]:null}*bMt(t,s){let i=this.UL().VL(),e=i.length,h=s.UL(),n=s.UL().VL(),r=n.length,o=t.dX(),a=(!s.$z()&&h.Fft()||(o=n.indexOf(t)),Math.ceil(e/r)),l=e%r,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}Mbt(t){this.Jxt?.Mbt(t)}xyt(){if(this.YTt&&!this.ATt){this.gX();const t=this.UL(),s=t.jft(),i=t.Fft(),e=this.uf.Wdt(),h=e&&e.bO()&&e.bO().Yft();for(const n of this.KTt.pX())if(n!==this){n.gX();const r=n.UL();if(r.Wft(i),!i){const o=r.jft();v.Br(o);for(const a of s)o.push(n.oCt(a.dX()));if(h){const l=t.Vft(),u=r.Vft();v.Br(u);for(const c of l)u.push(n.oCt(c.dX()))}}}}}Ibt(t,s){for(const i of this.C$().pX()){const e=i.UL();t?v.Nr(e.Vft(),s):v.Nr(e.jft(),s)}}aCt(){return this.BTt}lCt(t){this.jTt=!!t}uCt(){if(this.jTt&&this.ixt){for(const t of this.UH)t.CD().cCt();for(const s of this.uf.rCt())s.kN()===this&&s.CD().cCt();this.jTt=!1}}fCt(s,t,i){if(t){const e=this.dIt.get(t);e&&(e.delete(s),0===e.size)&&this.dIt.delete(t)}if(i){let t=this.dIt.get(i);t||(t=new Set,this.dIt.set(i,t)),t.add(s)}}dCt(){if(this.$z()){const t=new Set;for(const s of this.VTt)for(const i of s.dCt())t.add(i);return t.values()}return this.dIt.keys()}gbt(){return this.HSt||(this.HSt=new Map),this.HSt}ybt(){return this.zSt||(this.zSt=new Map),this.zSt}pCt(){return this.BIt(v.qat.solid)}mCt(){return this.BIt(v.qat.jumpthru)}gCt(){return this.BIt(v.qat.NoSave)}Ez(){return this.BIt(v.qat.Persist)}bq(){const t={instances:this.UH.map(t=>t.jv())};return this.HSt&&this.HSt.size&&(t.ex=v.Bo(this.HSt)),t}vq(t,e){this.HSt&&(this.HSt.clear(),this.HSt=null);const s=t.ex,h=(s&&(this.HSt=v.Wo(s)),this.UH),n=t.instances;for(let t=0,s=Math.min(h.length,n.length);t<s;++t)h[t].Vv(n[t]);for(let t=n.length,s=h.length;t<s;++t)this.uf.UN(h[t]);for(let i=h.length,t=n.length;i<t;++i){let t=n[i],s=null;if(!this.aL()||(s=this.uf.rD().w$(t.w.l))){const r=this.uf.Az(this.rIt||this,s,!1,0,0,!0);r.Vv(t),e&&e.add(r)}}this.vIt=n,this.hCt()}yCt(){return this.vIt}wCt(){this.vIt=null}SCt(){for(let t=0,s=this.UH;t<s;++t)this.UH[t].SCt()}GL(){return this.yIt}uO(){return this.e$}bCt(){return this.wIt}JL(t){this.wIt=t}WX(t){const s=this.uf,i=s.jX()&&!s.pO().KL();i&&Sa.StartMeasuringScriptTime(),this.e$.dispatchEvent(t),i&&Sa.AddScriptTime()}}}{const va=self.Ns;va.vCt=class extends va.nn{constructor(t,s){super(),this.uf=t,this.MCt=s;for(const i of this.MCt)i.xIt(this)}ln(){this.uf=null}XD(){return this.uf}I$(){return this.MCt}pX(){return this.MCt}wX(){return this.MCt.some(t=>t.aL())}}}{let S=self.Ns,h=self.C3Debugger,r=S.eL,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.nn{constructor(t){if(S.eL!==r)throw new Error("invalid addon manager");super(),this.uf=t.runtime,this.xCt=t.DN,this.Rst=null,this._Ct=null,this.GCt=null,this.TCt=0,this.ICt=t.uid,this.CCt=a++,this.Ebt=0,this.PCt=null;const s=S.eo(t.tags),i=(0<s.length&&(this.PCt=new Set(s)),this.RCt=o,this.ECt=o,this.xCt.HIt()),e=(0<i.length&&(this.ECt=i.map((t,s)=>S.an(S.ACt,{runtime:this.uf,R6:t,F6:this,index:s}))),this.FCt=this.xCt.$N()?[]:null,this.OCt=-1,this.NTt=null,this.EL());if(e.Zb()&&(this.Ebt|=4),e.aL())if(this.Rst=S.an(S.DCt,this,t.Z4),t.kCt)this.Rst.LCt(t.kCt);else{this.Rst.NCt();const[h,n]=this.xCt.eCt();this.Rst.cC(h,n),this.kN().zIt()&&this.Rst.K4().BCt()}t.WCt?this.jCt(t.WCt):this.VCt()}ln(){if(this.GCt&&(this.GCt.jN(),this.GCt=null),0<this.ECt.length){for(const i of this.ECt)i.ln();S.Br(this.ECt)}this._Ct&&(this._Ct.ln(),this._Ct=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.FCt&&S.Br(this.FCt),this.NTt&&(this.NTt.ln(),this.NTt=null),this.PCt&&this.PCt.clear(),this.PCt=null,this.uf=null,this.xCt=null,0<this.RCt.length&&S.Br(this.RCt),this.Rst&&(this.Rst.ln(),this.Rst=null)}jCt(t){0<t.length&&(this.RCt=[],S.Ur(this.RCt,t))}VCt(){const s=this.xCt.IIt();if(0!==s){this.RCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.RCt.push(i[this.xCt.nit(t)])}}FIt(t,i){if(this._Ct)throw new Error("already got sdk instance");for(let t=0,s=this.ECt.length;t<s;++t){const e=this.ECt[t];e.FIt(i?i[t]:null)}const s=this.EL().ubt();if(s<2){if(this._Ct=S.an(this.xCt.NIt(),this,t),!(this._Ct instanceof S.Hxt))throw new Error("sdk type must derive from SDKInstanceBase");!this.EL().aL()&&this.xCt.bCt()&&this._D()}else{const h=this.EL().Gxt();this.UCt(h.Instance,t)}}M6(){return this._Ct??this.GCt}CD(){return this.Rst}XD(){return this.uf}jO(){return this.OCt}QN(){const t=this.OCt;return-1===t?this.XD().jO():t}VO(t){((t=+t)<0||!isFinite(t))&&(t=0),this.OCt=t,this.kN().zIt()&&this.uf.HCt(this,!0)}s4(){this.OCt=-1,this.kN().zIt()&&this.uf.HCt(this,!1)}aq(){return this.uf.zCt(this)}Uf(){return this.NTt||(this.NTt=S.an(S.Event.Uf)),this.NTt}gM(t){this._Ct?this._Ct.gM(t):this.GCt.Pj(this.uf.Wk().LIt())}_xt(t){this._Ct._xt(t)}JCt(){this.Ebt|=2}qCt(){return 0!=(2&this.Ebt)}$Ct(){this.Ebt|=1}i8(){return 0!=(1&this.Ebt)}Zb(){return 0!=(4&this.Ebt)||this._Ct.Zb()}XCt(){this.Ebt|=32}QJ(){return 0!=(32&this.Ebt)}YCt(){return 0!=(8&this.Ebt)}KCt(t){t?this.Ebt|=8:this.Ebt&=-9}ZCt(){return 0!=(16&this.Ebt)}QCt(t){t?this.Ebt|=16:this.Ebt&=-17}tPt(){return 0!=(64&this.Ebt)}sPt(t){t?this.Ebt|=64:this.Ebt&=-65}iPt(t,s){t<<=16,s?this.Ebt|=t:this.Ebt&=~t}ePt(t){return 0!=(this.Ebt&t<<16)}T_t(){return this._Ct.T_t()}I_t(){return this._Ct.I_t()}C_t(){return this._Ct.C_t()}P_t(){return this._Ct.P_t()}E_t(){return this._Ct.E_t()}vvt(t){return this._Ct.vvt(t)}kN(){return this.xCt}KJ(){return this._Ct.KJ()}mMt(t){return t.$z()?t.Xz(this.kN()):this.kN()===t}hPt(h,t,s){const i=(t,s)=>{const i=s||t.kN(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.$N())for(const e of this.XN())i(e);if(s)for(const n of this.kB())i(n)}nPt(){if(!this.EL().wL())throw new Error("object does not support scene graph")}jB(){return null!==this.IB()}IB(){const t=this.CD();if(!t)return null;const s=t.IB();return s?s.ZW():null}PB(){const t=this.CD();if(!t)return null;const s=t.PB();return s?s.ZW():null}*RB(){const t=this.CD();if(t)for(const s of t.RB())yield s.ZW()}rPt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}_q(){const t=this.CD();return!!t&&t._q()}oPt(t){const s=this.CD();if(!s)return[];const i=t.Qc();return s.TX().map(t=>t.ZW()).filter(t=>t.kN().Qc()===i)}TX(){const t=this.CD();return t?t.TX().map(t=>t.ZW()):[]}*children(){const t=this.CD();if(t)for(const s of t.children())yield s.ZW()}*kB(){const t=this.CD();if(t)for(const s of t.kB())yield s.ZW()}AB(){const t=this.CD();return t?t.AB():0}aPt(){return[...this.RB()].length}SMt(){const t=this.CD();return t?t.SMt():0}DB(t){const s=this.CD();if(!s)return null;const i=s.DB(t);return i?i.ZW():null}lPt(){const t=this.CD();if(!t)return NaN;const s=t.IB();return s?s.uPt(t):NaN}cPt(t){for(const s of this.CD().TX())if(s.ZW().YN()===t)return!0;return!1}NB(t,s){this.nPt(),t.nPt(),this.CD().NB(t.CD(),s||{})}BB(t){const s=this.CD();s&&s.BB(t.CD())}r6(){const t=this.CD();return!!t&&t.r6()}tX(){const t=this.CD();if(t){const s=t.fPt();if(s)for(const i of s){const e=this.uf.xD(i[2]);if(e){const h=i[3];this.NB(e,{UB:!!(h>>0&1),zB:!!(h>>1&1),qB:!!(h>>2&1),XB:!!(h>>3&1),KB:!!(h>>4&1),n6:!!(h>>5&1),QB:!!(h>>6&1),s6:!!(h>>7&1),e6:!!(h>>8&1)})}}}}sX(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const n=e.flags;this.NB(h,{UB:!!(n>>0&1),zB:!!(n>>1&1),qB:!!(n>>2&1),XB:!!(n>>3&1),KB:!!(n>>4&1),n6:!!(n>>5&1),QB:!!(n>>6&1),s6:!!(n>>7&1),e6:!!(n>>8&1)})}}}ZN(){const t=this.uf.dPt();return t?t.Xlt(this):""}$N(){return null!==this.FCt}mX(t){this.FCt.push(t)}JN(){return this.FCt}pPt(t){return!!this.mPt(t)}mPt(t){const s=this.XN();if(null===s||0===s.length)return!1;for(const i of s)if(i.kN()===t)return i;return null}XN(){return this.FCt}Imt(){for(const t of this.XN())t.kN().UL().Uft(t)}xbt(){for(const t of this.XN())t.kN().UL().Nft(t)}_bt(t){for(const s of this.XN())s.kN().UL().jft()[t]=s}Tbt(){for(const t of this.XN())t.kN().UL().Bft(t)}Gbt(t){for(const s of this.XN())s.kN().UL().Vft()[t]=s}EL(){return this.xCt.EL()}nCt(t){this.TCt=t}dX(){return this.xCt.gX(),this.TCt}YN(){return this.ICt}gPt(){return this.CCt}yPt(t){t?this.n4(new Set(t)):this.PCt=null}n4(t){if(0===t.size)this.PCt=null;else{this.PCt?this.PCt.clear():this.PCt=new Set;for(const s of t)this.PCt.add(s)}}e4(){return this.PCt??new Set}VMt(){return Array.from(this.e4()).join(" ")}zMt(t){t=Math.floor(t);for(const s of this.e4()){if(0===t)return s;--t}return""}Rht(){return this.ECt}wPt(t){if(t)for(const s of this.ECt)if(s.P6()instanceof t)return s;return null}Kat(t){if(!t)return null;const s=this.wPt(t);return s?s.M6():null}Pht(i){const e=this.ECt;for(let t=0,s=e.length;t<s;++t)if(e[t].A6().i9()===i)return t;return-1}SPt(){return this.RCt}VIt(){return this.xCt.VIt()}bPt(){return this.RCt.length}Jnt(t){const s=this.RCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}Uwt(t){return this.RCt[t]}vPt(t){const s=this.RCt[t];return 0===this.xCt.nit(t)?!!s:s}qnt(t,s){const i=this.RCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.xCt.nit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Nrt(t,s){if(0!==s){const i=this.RCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}gbt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}ybt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}MPt(t){const s=this.kN();if(s.uO().$f(t))return!0;for(const i of s.e1t())if(i.uO().$f(t))return!0;return!!this.uf.uO().$f(t)}YL(){const t=new Set,s=(t.add(this),this.CD());if(s&&s._q())for(const i of this.kB())if(t.add(i),i.$N())for(const e of i.XN())t.add(e);if(this.$N())for(const h of this.XN())t.add(h);for(const n of t.values())n.iX()}xPt(){this.xCt.bCt()&&this._D();for(const t of this.ECt)t.fGt()}_Pt(){this.xPt()}iX(){if(this.xPt(),this.MPt("instancecreate")){const t=this.kN(),s=new S.Event("instancecreate");s.F6=this._D(),t.WX(s);for(const i of t.e1t())i.WX(s);this.uf.WX(s)}this.uf.M4(this.EL().dpt().aX.$Mt,this,null)}GPt(){this.uf.M4(this.EL().dpt().aX.XMt,this,null)}TPt(t){if(this.GCt){const s=new S.Event("destroy");s.IPt=t,this.WX(s)}if(this.MPt("instancedestroy")){const i=this.kN(),e=new S.Event("instancedestroy");e.F6=this._D(),e.IPt=t,i.WX(e);for(const h of i.e1t())h.WX(e);this.uf.WX(e)}}CPt(){return this._Ct?this._Ct.d_t():this.GCt.D4()}jv(t="full",s=null){const i={},e=("full"===t?i.uid=this.YN():i.c3=!0,this.e4());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const n=b.get(this);if(n&&n.size&&(i.ex=S.Bo(n)),-1!==this.jO()&&(i.mts=this.jO()),0<this.xCt.IIt()){const r={},o=this.xCt.WIt();for(let t=0,s=this.RCt.length;t<s;++t)r[o[t].toString()]=this.RCt[t];i.ivs=r}if(this.ECt.length){const a={};for(const l of this.ECt){const u=l.jv(t);u&&(a[l.A6().i9().toString()]=u)}i.behs=a}}this.Rst&&(i.w=this.Rst.bq(t,s));const h=this._Ct?this._Ct.jv():this.GCt.L4();return h&&(i.data=h),i}LY(t="full",s){this.Rst&&this.Rst.LY(t)}BY(t,s="full",i=null){this.Rst&&this.Rst.BY(t,s,i)}PPt(t,s="full",i=null){this.Rst&&this.Rst.PPt(t,s,i)}SCt(){this.EL().aL()&&this.Rst.SCt()}Vv(s,t="full",i){if("full"===t)this.ICt=s.uid;else if(!s.c3)return;if(this.yPt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,n=(h&&(t=S.Wo(h),b.set(this,t)),this.OCt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(n)for(const[r,o]of Object.entries(n)){const a=parseInt(r,10),l=this.xCt.jIt(a);if(!(l<0||l>=this.RCt.length)){let t=o;null===t&&(t=NaN),this.RCt[l]=t}}}if(this.EL().aL()){const u=s.w;if(u){const c=u.l;if(this.Rst.PD().i9()!==c){const f=this.Rst.PD(),d=f.uD().w$(c);d?(this.Rst.FD(d),f.Lz(this,!0),d.Oz(this,!0),d.OD(this),this.Rst.Q4()):"full"===t&&this.uf.UN(this)}this.Rst.vq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.Pht(y);w<0||w>=this.ECt.length||this.ECt[w].Vv(g,t)}}const e=s.data;e&&(this._Ct?this._Ct.Vv(e,t):this.GCt.N4(e))}_D(){return this.GCt||this.UCt()}y_t(){return!!this.GCt}UCt(t,s){const i=this.Rst?t?self.xj:self.y6:t?self.l4:self.ON,e=t||this._Ct.Gxt(),h=this.xCt.bCt(),n=h||e||i,r=this.EL().ubt();if(S.eL.Cxt(this,r),S.eL.CGt(s),this.GCt=new n,S.eL.PGt(),S.eL.Pxt(r),e&&!(this.GCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.GCt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.GCt}LN(t){if(0!==this.RCt.length){const i={},e=this.xCt.UIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.vPt.bind(this,t),set:S.Instance.prototype.qnt.bind(this,t)};const s=Object.create(Object.prototype,i);t.RPt={value:s,writable:!1}}}NN(t){const s=this.ECt;if(0!==s.length){const i={};for(const h of s)i[h.A6().Ydt()]={value:h.Xxt(),writable:!1};const e=Object.create(Object.prototype,i);t.dmt={value:e,writable:!1}}}WX(t){if(this.y_t()){const s=this._D(),i=(t.F6=s,this.uf),e=i.jX()&&!i.pO().KL();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ma=self.Ns;Ma.CX=class extends Ma.nn{constructor(e){super(),this.Xv=e,this.Fmt=null,this.EPt=[],this.APt=e.fm(),this.FPt=e.Gm(),this.OPt=1,this.DPt=1,this.kPt=0,this.LPt=1,this.NPt=e.WR(),this.BPt=null,this.WPt=null,this.jPt=NaN,this.VPt=!1,this.Iq=NaN,this.Cq=NaN,this.UPt=t=>{if(t.F6===this.Fmt.ZW()){const s=e.XD(),i=(s.Uf().removeEventListener("instancecreate",this.UPt),this.Fmt.ZW().M6());this.VPt=!!i.bit(),this.Iq=this.VPt?i.Sit():NaN,this.Cq=this.VPt?i.Mit():NaN}}}ln(){this.Fmt=null,this.BPt=null,this.WPt=null,this.jPt=NaN,this.VPt=!1,this.Iq=NaN,this.Cq=NaN,Ma.Br(this.EPt)}HPt(t){if(this.LPt=this.Xv.WR(),this.NPt=this.LPt,this.Fmt=t,this.kPt=t?t.a5():0,this.Fmt){const s=this.Xv,i=s.XD(),e=this.Fmt.ZW().EL().ubt();if(e<2){const h=this.Fmt.ZW().M6();h?(this.VPt=!!h.bit(),this.Iq=this.VPt?h.Sit():NaN,this.Cq=this.VPt?h.Mit():NaN):this.Fmt.ZW().i8()||i.Uf().addEventListener("instancecreate",this.UPt)}else this.VPt=!1,this.Iq=NaN,this.Cq=NaN}else this.VPt=!1,this.Iq=NaN,this.Cq=NaN}IB(){return this.Fmt}_q(){return 0<this.EPt.length}TX(){return this.EPt}zPt(){this._q()&&1!==this.EPt.length&&(this.WPt?this.EPt.sort((t,s)=>{const i=this.WPt.get(t.ZW()),e=this.WPt.get(s.ZW());return Ma.me(i)&&Ma.me(e)?i-e:0}):this.EPt.sort((t,s)=>{const i=t.ert().JPt(),e=s.ert().JPt();return Ma.me(i)&&Ma.me(e)?i-e:0}))}JPt(){return this.jPt}hrt(){return this.OPt}qPt(t){this.OPt=t}rrt(){return this.DPt}$Pt(t){this.DPt=t}prt(){return this.NPt}Uvt(){return this.LPt}XPt(t){this.LPt=t}irt(){return 0===this.APt?Number.EPSILON:this.APt}nrt(){return 0===this.FPt?Number.EPSILON:this.FPt}YPt(){if(this.Xv.$B()){let t=this.Fmt,s=t.fm(),i=t.ert().irt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.VPt?1+s/this.Iq:s/i}return 1}KPt(){if(this.Xv.YB()){let t=this.Fmt,s=t.Gm(),i=t.ert().nrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.VPt?1+s/this.Cq:s/i}return 1}ZPt(){return 0}QPt(){return{sw:this.APt,sh:this.FPt,sx:this.OPt,sy:this.DPt,psa:this.kPt,oo:this.LPt,so:this.NPt,pi:this.Xv.ZW().lPt()}}bq(t,s=null){const i=this.QPt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.tRt(t),c:this.sRt(t)})}iRt(t){let s="";return t.HB()&&(s+="x"),t.JB()&&(s+="y"),t.$B()&&(s+="w"),t.YB()&&(s+="h"),t.ZB()&&(s+="a"),t.t6()&&(s+="z"),t.r6()&&(s+="d"),t.i6()&&(s+="o"),t.h6()&&(s+="v"),s}tRt(t){return this.Fmt&&this.Fmt.ZW()&&!this.Fmt.ZW().i8()?this.eRt(this.Fmt,this.Xv,t):null}sRt(s){return this.EPt.map(t=>this.eRt(t,t,s)).filter(t=>t)}eRt(t,s,i){const e=t.ZW();if(e&&e.i8())return null;const h={};return h.uid=e.YN(),h.f=this.iRt(s),h.offsets=s.hRt(),h.data=Ma.CX.nRt(e),h.oci=e.kN().LF(),"state"===i?(h.inst=e.jv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.kN().VL().indexOf(e),h.inst=null),h}vq(t){this.APt=t.sw,this.FPt=t.sh,this.OPt=t.sx,this.DPt=t.sy,this.kPt=t.psa,this.LPt=t.oo,this.NPt=t.so,this.jPt=Ma.me(t.pi)?t.pi:NaN}rRt(t,s){if(!t&&!s&&this.BPt)for(const i of this.BPt)i.i8()||i.jB()||i.XD().UN(i);this.BPt=t,this.WPt=s}BY(t,s){const i=this.Xv,e=i.XD(),h=new Set;if(t.p&&!this.Fmt){const o=t.p.uid,a=e.xD(o);if(s?.h2t,a){const l=a.CD();if(a.rPt(i.ZW()))this.Fmt=l;else{a.cPt(i.ZW().YN())?e.UN(i.ZW()):a.NB(i.ZW(),this.oRt(t.p.f)),h.has(i)||(i.aRt(t.p.offsets),this.lRt(a,t.p,s)),h.add(i);const u=a.CD();u.ert().zPt()}}else if(Ma.me(t.p.oci)){const c=e.xz(t.p.oci),f=(e.Pwt(),e.qL(c,i.PD(),0,0,!0));if(s?.h2t,f){const d=this.uRt(t.p,e),p=(d&&f.Vv(d),f.CD()),m=(p.PD().$L(f),f.NB(i.ZW(),this.oRt(t.p.f)),f.CD());m.ert().zPt()}}}const n=[];for(const g of t.c){const y=g.uid,w=e.xD(y);w&&n.push(w)}let r=0;for(const S of t.c){const b=S.uid,v=e.xD(b);if(s?.h2t,v){if(this.BPt){if(this.BPt.includes(v)){const G=v;if(G.kN()!==v.kN()){r++;continue}if(G.i8()){r++;continue}const T=t.c[r];if(!s?.h2t&&this.cRt(G,n,i)){this.fRt(r,T,i,h,s),r++;continue}if(G.jB()&&G.IB()!==i.ZW()){const I=this.dRt(T,s);this.pRt(I,T,h,s),r++;continue}this.pRt(G.CD(),T,h,s,!0),r++;continue}if(this.BPt[r]){const C=this.BPt[r];if(C.kN()!==v.kN()){r++;continue}if(C.i8()){r++;continue}const P=t.c[r];if(!s?.h2t&&this.cRt(C,n,i)){this.fRt(r,P,i,h,s),r++;continue}if(C.jB()&&C.IB()!==i.ZW()){const R=this.dRt(P,s);this.pRt(R,P,h,s),r++;continue}this.pRt(C.CD(),P,h,s,!0),r++;continue}}const M=v.kN(),x=this.mRt(n,M),_=i.ZW().oPt(M).length;if(x===_){const E=i.ZW().DB(r);if(E){const A=E.CD();A&&(h.has(A)||(A.aRt(S.offsets),this.lRt(E,S,s)),h.add(A))}r++;continue}if(v.jB()&&v.IB()!==i.ZW()){const F=this.dRt(S,s);this.pRt(F,S,h,s),r++;continue}this.pRt(v.CD(),S,h,s)}else if(this.BPt&&this.BPt[r]){const O=this.BPt[r],k=e.xz(this.gRt(S));if(O.kN()!==k){r++;continue}if(O.i8()){r++;continue}const D=t.c[r];if(!s?.h2t&&this.cRt(O,n,i)){this.fRt(r,D,i,h,s),r++;continue}if(O.jB()&&O.IB()!==i.ZW()){const L=this.dRt(D,s);this.pRt(L,D,h,s),r++;continue}this.pRt(O.CD(),D,h,s)}else{const N=this.dRt(S,s);this.pRt(N,S,h,s)}r++}}cRt(t,s,i){const e=t.kN(),h=this.mRt(s,e),n=i.ZW().oPt(e).length;return h===n}fRt(t,s,i,e,h){const n=i.ZW().DB(t,s);if(n){const r=n.CD();r&&(e.has(r)||(r.aRt(s.offsets),this.lRt(n,s,h)),e.add(r))}}oRt(t){const s={};return s.UB=t.includes("x"),s.zB=t.includes("y"),s.qB=t.includes("w"),s.XB=t.includes("h"),s.KB=t.includes("a"),s.QB=t.includes("z"),s.n6=t.includes("d"),s.s6=t.includes("o"),s.e6=t.includes("v"),s}gRt(t){return Ma.me(t.oci)?t.oci:t[1]}dRt(e,h){if(Ma.me(e.oci)){let t=this.Xv,s=t.XD(),i;if(e.data)i=s.Az(e.data,t.PD(),!1,0,0,!1,!0);else{const n=s.xz(e.oci);i=s.qL(n,t.PD(),0,0,!0)}if(h?.h2t,i){const r=this.uRt(e,s),o=(r&&i.Vv(r),i.CD());return o.PD().$L(i,!0),o}}}pRt(t,s,i,e,h=!0){const n=this.Xv,r=n.NB(t,this.oRt(s.f));r&&h&&(i.has(t)||(t.aRt(s.offsets),this.lRt(t.ZW(),s,e)),i.add(t)),this.zPt()}lRt(t,s,i){let e=this.uRt(s,this.Xv.XD());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.Vv(e))}mRt(t,s){return t.filter(t=>t.kN().Qc()===s.Qc()).length}uRt(t,s){if(Ma.me(t.instIndex)){const i=s.xz(t.oci),e=i.yCt();return e?e[t.instIndex]:null}return Ma.Ge(t.inst)?JSON.parse(t.inst):t.inst||void 0}static nRt(t){let s=t.CD().PD().Cz(t.YN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.TX()]){const h=e.CD();i.push([h.uD().i9(),h.PD().LF(),e.YN(),Ma.CX.IX(h),e.kN().$N()?1:0,h.RD(),Ma.CX.nRt(e)])}return Ma.We(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ma.CX.yRt(),s[0][14][1]=i,s[0][14][2]=t.CD().RD()),s}static IX(t){let s=0;return(s|=Number(t.h6())<<8)|Number(t.i6())<<7|Number(t.t6())<<6|Number(t.r6())<<5|Number(t.ZB())<<4|Number(t.YB())<<3|Number(t.$B())<<2|Number(t.JB())<<1|Number(t.HB())<<0}static yRt(t){let s=0;return s,511}}}{let d=self.Ns,t=self.vs,n=(t.Ps,d.an(d.Rect)),r=d.an(d.tu),s=d.an(d.Event,"bboxchange",!1),f=d.an(d.Ho,0,0,0,0),u=d.an(d.Ou),i=d.an(d.Ho,1,1,1,1),o=d.an(d.Rect,0,0,-1,-1),h=d.an(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.DCt=class extends d.nn{constructor(t,s){super(),this.Gi=t,this.vft=t.kN(),this.uf=t.XD(),this.wRt=s,this.vft.fCt(this,null,s),this.SRt=-1,this.bRt=-1,this.Ebt=196635,this.vft.EL().fL()&&(this.Ebt|=128),this.Qa=NaN,this.sl=NaN,this.pv=NaN,this.vRt=NaN,this.MRt=NaN,this.G2=NaN,this.$o=NaN,this.xRt=NaN,this._Rt=NaN,this.GRt=NaN,this.TRt=NaN,this.IRt=d.an(d.Rect),this.CRt=d.an(d.tu),this.PRt=h,this.RRt=o,this.ERt=null,this.ARt=null,this.FRt=null,this.dv=i,this.ORt=i,this.DRt=null,this.kRt=null,this.Gi.kN().zIt()&&(this.kRt=d.an(d.LRt,this.Gi,this)),this.NRt=null,this.BPt=null,this.WPt=null,this.BRt=-1,this.WRt=null}$Ct(){this.Ebt|=256}ln(){if(this.vft.fCt(this,this.wRt,null),this.DRt&&(this.uf.qb().lS(this.DRt),this.DRt=null),this.ERt=null,this.ARt&&(this.ARt.jRt.ln(),this.ARt=null),this.FRt&&(this.FRt.clear(),this.FRt=null),this.u6(),this.kRt&&this.kRt.ln(),this.jB()&&this.IB().BB(this),this._q()){const t=[...this.TX()];for(const s of t)this.BB(s)}this.VRt(),this.URt(),g.delete(this),a.delete(this),this.Gi=null,this.vft=null,this.uf=null,this.wRt=null}LCt(t){if(m=!1,this.tB(t[0],t[1]),this.Ov(t[2]),this.cC(t[3],t[4]),this.G2=0,this.fL()?this.o5(t[6]):this.$o=0,f.Va(t[7]),this.HRt(f),this.grt(t[8]),this.wrt(t[9]),this.yv(t[10]),this.kRt&&this.kRt.zRt(t[12]),t[14]&&g.set(this,{JRt:t[14][1],qRt:t[14][2]}),t[15]){const s=t[15],e=(this.a6(s[0],s[1]),this.m6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const n=h[i];for(let t=0,s=n.length;t<s;++t){const r=n[t],o=e.pM(t,i);o.Pv(r[0]),o.Av(r[1]),o.Ov(r[2]),o.kv(r[3]),o.Nv(r[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.uf.dPt();l&&c&&c.$lt(this.ZW(),a),u&&c&&c.$lt(this.ZW(),i)}m=!0,this.$Rt()}NCt(){this.Qa=0,this.sl=0,this.pv=0,this.vRt=0,this.MRt=0,this.G2=0,this.$o=0,this.xRt=0,this._Rt=1,this.GRt=0,this.TRt=0,this.$Rt()}XD(){return this.uf}kN(){return this.vft}ZW(){return this.Gi}XRt(){return this.ZB()?this.YRt(this.IB().KRt()-this.NRt.ZPt()):0}Pv(t){if(t=+t,this.HB()){const s=this.NRt,i=t-this.Cv(),e=-this.XRt();0==e?this.Qa+=i/s.YPt():(this.Qa+=Math.cos(e)*i/s.YPt(),this.JB()&&(this.sl+=Math.sin(e)*i/s.KPt()))}else this.Qa=t}Znt(t,s=!1){t=+t,!s&&this.HB()?this.Pv(this.Cv()+t):this.Qa+=t}Cv(){if(this.HB()){let t=this.Qa,s=this.NRt,i=this.IB(),e=this.XRt();return 0===e?t*=s.YPt():(t=t*s.YPt()*Math.cos(e),this.JB()&&(t-=this.sl*s.KPt()*Math.sin(e))),i.Cv()+t}return this.Qa}Av(t){if(t=+t,this.JB()){const s=this.NRt,i=t-this.Ev(),e=-this.XRt();0==e?this.sl+=i/s.KPt():(this.HB()&&(this.Qa-=Math.sin(e)*i/s.YPt()),this.sl+=Math.cos(e)*i/s.KPt())}else this.sl=t}Qnt(t,s=!1){t=+t,!s&&this.JB()?this.Av(this.Ev()+t):this.sl+=t}Ev(){if(this.JB()){let t=this.sl,s=this.NRt,i=this.IB(),e=this.XRt();return 0===e?t*=s.KPt():(t=t*s.KPt()*Math.cos(e),this.HB()&&(t+=this.Qa*s.YPt()*Math.sin(e))),i.Ev()+t}return this.sl}tB(t,s){if(t=+t,s=+s,this.ZRt()){const i=this.HB(),e=this.JB(),h=this.NRt,n=t-this.Cv(),r=s-this.Ev(),o=-this.XRt();if(0==o)i?this.Qa+=n/h.YPt():this.Qa=t,e?this.sl+=r/h.KPt():this.sl=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Qa+=e?(l*n-a*r)/h.YPt():l*n/h.YPt():this.Qa=t,e?this.sl+=i?(a*n+l*r)/h.KPt():l*r/h.KPt():this.sl=s}}else this.Qa=t,this.sl=s}QRt(){return[this.Cv(),this.Ev()]}eB(t,s){t=+t,s=+s,this.ZRt()?this.tB(this.Cv()+t,this.Ev()+s):(this.Qa+=t,this.sl+=s)}Svt(t,s){return this.Cv()===t&&this.Ev()===s}Ov(t){if(t=+t,this.t6()&&(t-=this.IB().Fv()),this.pv!==t){this.pv=t,this.tEt();const s=this.PD();0!==this.pv&&s.Wz(),s.OD(this)}}tEt(){if(this.$Rt(),this._q()){const i=this.TX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.t6()&&e.tEt()}}}Srt(t){this.Ov(this.Fv()+t)}Fv(){return this.t6()?this.IB().Fv()+this.pv:this.pv}nB(){return this.PD().Fv()+this.Fv()}bit(){const t=this.ZW().EL().ubt();return t<2&&this.ZW().M6().bit()}Mm(t){if(t=+t,this.$B()){const s=this.fm();0===s?this.vRt=Number.EPSILON:this.vRt*=t/s}else this.vRt=t;this.sEt()}qm(t,s){t=+t,!s&&this.$B()?this.Mm(this.fm()+t):this.vRt+=t,this.sEt()}fm(){if(this.$B()){const t=this.IB(),s=t.fm(),i=t.ert().irt();return i===Number.EPSILON?(this.ert().irt()+s)*this.vRt:s*this.vRt}return this.vRt}pm(t){if(t=+t,this.YB()){const s=this.Gm();0===s?this.MRt=Number.EPSILON:this.MRt*=t/s}else this.MRt=t;this.sEt()}ort(t,s){t=+t,!s&&this.YB()?this.pm(this.Gm()+t):this.MRt+=t,this.sEt()}Gm(){if(this.YB()){const t=this.IB(),s=t.Gm(),i=t.ert().nrt();return i===Number.EPSILON?(this.ert().nrt()+s)*this.MRt:s*this.MRt}return this.MRt}cC(t,s){if(t=+t,s=+s,this.$B()){const i=this.fm();0===i?this.vRt=Number.EPSILON:this.vRt*=t/i}else this.vRt=t;if(this.YB()){const e=this.Gm();0===e?this.MRt=Number.EPSILON:this.MRt*=s/e}else this.MRt=s;this.sEt()}rc(){return[this.fm(),this.Gm()]}ZJ(){return this.G2}iEt(t){if(t<0)throw new RangeError("invalid depth");this.G2=t}eEt(){if(this.jB()){const t=this.NRt;return Math.min(t.YPt(),t.KPt())}return 1}fL(){return 0!=(128&this.Ebt)}o5(t){t=+t,this.fL()&&(this.ZB()&&(t-=this.IB().a5()),t=d.gn(t),this.$o!==t)&&(this.$o=t,this.sEt())}art(t){0!=(t=+t)&&this.fL()&&(this.$o=d.gn(this.$o+t),this.sEt())}sEt(){if(this.Ebt|=1<<18,this._q()){const i=this.TX();for(let t=0,s=i.length;t<s;t++)i[t].sEt()}}a5(){return this.ZB()&&this.fL()?this.YRt(d.gn(this.IB().KRt()+this.$o)):this.$o}KRt(){return this.ZB()&&this.fL()?d.gn(this.IB().KRt()+this.$o):this.$o}YRt(t){return this.$B()&&this.PB().fm()<0&&(t=d.gn(d.Cn(t,this.PB().a5()+Math.PI))),this.YB()&&this.PB().Gm()<0?d.Cn(t,this.PB().a5()):t}hEt(){const t=this.IB();return!!(this.$B()&&t.fm()<0)||!!(this.YB()&&t.Gm()<0)}nEt(){const t=this.IB();return!!(this.$B()&&t.fm()<0&&this.YB()&&t.Gm()<0)}rEt(){const t=this.Ebt;if(0!=(t&1<<18)){const s=this.a5();this.xRt=Math.sin(s),this._Rt=Math.cos(s),this.Ebt=-262145&t}}_vt(){return this.rEt(),this.xRt}xvt(){return this.rEt(),this._Rt}grt(t){this.GRt=+t}mrt(t){this.GRt+=+t}lW(){return this.GRt}wrt(t){this.TRt=+t}yrt(t){this.TRt+=+t}cW(){return this.TRt}HRt(t){this.dv.equals(t)||(this.dv===i?(this.dv=d.an(d.Ho,t),this.ORt=d.an(d.Ho,t),this.ORt.ba()):t.ga(1,1,1,1)?(this.dv=i,this.ORt=i):(this.dv.set(t),this.ORt.set(t),this.ORt.ba()),this.$Rt())}VR(t){if(t=d.mn(+t,0,1),this.i6()){if(this.ert().Uvt()===t)return;this.ert().XPt(t),t=this.WR()}else if(this.dv.a===t)return;this.oEt(t)}aEt(){if(this._q()){const i=this.TX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.oEt(e.WR())}}}oEt(t){f.na(this.dv),f.a=t,this.HRt(f),this.aEt()}crt(t){this.i6()?this.VR(this.ert().Uvt()+t):this.VR(this.WR()+t)}WR(){return this.i6()?this.IB().WR()*this.ert().Uvt():this.dv.a}pB(t){this.dv.da(t)||(f.na(t),f.a=this.WR(),this.HRt(f))}Hnt(t,s,i){f.Yo(t,s,i),this.pB(f)}lEt(t,s,i){0===t&&0===s&&0===i||(f.na(this.dv),f.r+=t,f.g+=s,f.b+=i,this.pB(f))}dB(){return this.dv}oz(){return this.ORt}r6(){return 0!=(512&this.Ebt)}uEt(t){this.cEt(512,t)}HB(){return 0!=(1024&this.Ebt)}fEt(t){this.cEt(1024,t)}JB(){return 0!=(2048&this.Ebt)}ZRt(){return 0!=(3072&this.Ebt)}dEt(t){this.cEt(2048,t)}$B(){return 0!=(4096&this.Ebt)}pEt(t){this.cEt(4096,t)}YB(){return 0!=(8192&this.Ebt)}mEt(t){this.cEt(8192,t)}ZB(){return 0!=(16384&this.Ebt)}gEt(t){this.cEt(16384,t)}t6(){return 0!=(32768&this.Ebt)}yEt(t){this.cEt(32768,t)}i6(){return 0!=(this.Ebt&1<<22)}wEt(t){this.cEt(1<<22,t)}h6(){return 0!=(this.Ebt&1<<23)}SEt(t){this.cEt(1<<23,t)}bEt(){this.Ebt&=-12647937}NB(t,s){if(t===this)return!1;if(t.jB())return!1;if(this.vEt(t))return!1;if(this.MEt(t))return!1;const i=t.Cv(),e=t.Ev(),h=t.fm(),n=t.Gm(),r=t.a5(),o=t.Fv(),a=t.WR(),l=(t.xEt(this),t.fEt(s.UB),t.dEt(s.zB),t.pEt(s.qB),t.mEt(s.XB),t.gEt(s.KB),t.yEt(s.QB),t.wEt(s.s6),t.SEt(s.e6),t.uEt(s.n6),i-this.Cv()),u=e-this.Ev(),c=-this.a5(),f=Math.cos(c),d=Math.sin(c);if(s.UB&&(s.KB?t.Qa=l*f-u*d:t.Qa=l,s.qB)){const p=this.fm()/this.NRt.irt();0!=p&&(t.Qa/=p)}if(s.zB&&(s.KB?t.sl=l*d+u*f:t.sl=u,s.XB)){const m=this.Gm()/this.NRt.nrt();0!=m&&(t.sl/=m)}if(s.qB){const g=this.fm();0===g||g===Number.EPSILON?(t.vRt=1,t.NRt.qPt(1)):(t.vRt=h/this.fm(),t.NRt.qPt(t.vRt))}if(s.XB){const y=this.Gm();0===y||y===Number.EPSILON?(t.MRt=1,t.NRt.$Pt(1)):(t.MRt=n/this.Gm(),t.NRt.$Pt(t.MRt))}return s.KB&&(t.$o=r-this.a5()),s.QB&&(t.pv=o-this.Fv()),s.s6&&t.NRt.XPt(a),s.e6&&t.H5(this.J5()),this._Et(t),this.Q4(),this.aEt(),!0}BB(t){if(t.IB()===this){const s=t.Cv(),i=t.Ev(),e=t.fm(),h=t.Gm(),n=t.a5(),r=t.Fv(),o=t.WR();t.xEt(null),t.bEt(),t.tB(s,i),t.cC(e,h),t.o5(n),t.Ov(r),t.VR(o),this.GEt(t),this.Q4()}}TEt(){return this.BRt}IEt(){this.CEt();const t=[...this.children()];for(const i of t)this.BB(i);const s=this.IB();s&&s.BB(this),this.bEt()}CEt(){if(this.PEt(),!this.BPt){const s=[...this.children()];s.length&&(this.BPt=[],this.WPt=new WeakMap);let t=0;for(const i of s){const e=i.ZW();this.BPt.push(e),this.WPt.set(e,t),t++}}const t=this.IB();t&&t.CEt()}PEt(){if(-1===this.BRt){const t=[...this.RB()];this.BRt=t.length;for(const i of t)i.PEt();const s=[...this.children()];for(const e of s)e.PEt()}}URt(){this.BPt&&(this.BPt.length=0),this.BPt=null,this.WPt=null;const t=this.IB();t&&t.URt(),this.BRt=-1}jB(){return null!==this.IB()}IB(){const t=this.NRt;return null!==t?t.IB():null}PB(){let t=this;for(;t.jB();)t=t.IB();return t}*RB(){let t=this.IB();for(;t;)yield t,t=t.IB()}rPt(t){return this.TX().includes(t)}_q(){const t=this.NRt;return null!==t&&t._q()}TX(){const t=this.NRt;return null!==t?t.TX():e}children(){return this.TX()}*kB(){for(const t of this.children())yield t,yield*t.kB()}AB(){return this.TX().length}SMt(){return[...this.kB()].length}DB(t){const s=this.TX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}uPt(s){if(s){const i=this.TX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}REt(t){this.NRt||(this.NRt=d.an(d.CX,this)),t&&this.NRt.HPt(t)}ert(){return this.NRt}VRt(){this.NRt&&(this.NRt.ln(),this.NRt=null)}xEt(t){t?(t.REt(null),this.REt(t)):(this.NRt&&this.NRt.HPt(null),this._q()||this.VRt())}MEt(t){if(!this.jB())return!1;const s=this.IB();return s===t||s.MEt(t)}vEt(t){if(this.rPt(t))return!0;for(const s of this.TX())if(s.vEt(t))return!0;return!1}_Et(t){this.NRt.TX().push(t)}GEt(t){const s=this.NRt.TX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.jB()||this.VRt(),t._q()||t.VRt()}fPt(){const t=g.get(this);return t?t.JRt:null}EEt(){const t=g.get(this);return t?t.qRt:NaN}xq(){const t=a.get(this);return d.me(t)?t:NaN}AEt(t){a.set(this,t)}FEt(){this.cEt(1<<19,!0),this.$Rt()}$Rt(){if(m){const s=this.uf.qb();this.DRt&&s.lS(this.DRt);let t;t=0!=(this.Ebt&1<<19)?s.zw()||"<point>":s.Vw()||"<default>",this.DRt=s.nS(t,this.yN(),this.ORt,this.Fv())}}nq(){return this.DRt}r9(){return this.dv===i}yv(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.yN()!==t&&(this.Ebt=this.Ebt&~(31<<26)|t<<26,this.$Rt())}yN(){return(this.Ebt&31<<26)>>26}FD(t,s){const i=s&&this.wRt!==t;i&&this.Nz(),this.vft.fCt(this,this.wRt,t),this.wRt=t,i&&this.OEt(),0!==this.Fv()&&this.wRt.Wz()}PD(){return this.wRt}uD(){return this.PD().uD()}Vz(t){this.SRt=0|t}RD(){return this.wRt.Q9(),this.SRt}eJ(t){this.bRt=0|t}Yj(){return this.wRt.sJ(),this.bRt}WH(){return this.SRt}cEt(t,s){s?this.Ebt|=t:this.Ebt&=~t}J5(){return 0!=(1&this.Ebt)}H5(t){if(this.cEt(1,t),this._q())for(const s of this.TX())s.h6()&&s.H5(t)}_B(){return 0!=(8&this.Ebt)}GB(t){t=!!t,this._B()!==t&&(this.cEt(8,t),t?this.Q4():this.DEt())}kEt(t,s){if(this.cEt(32,t),this.FRt&&this.FRt.clear(),s.trim()){this.FRt||(this.FRt=new Set);for(const i of s.split(" "))i&&this.FRt.add(i.toLowerCase())}else this.FRt=null}LEt(t){const s=0!=(32&this.Ebt),i=this.FRt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}Q4(){if(this.Ebt|=65554,this.vft.lCt(!0),this.uf.DD(),this.wRt.Sz()&&(this.NEt(this.IRt,this.CRt,!0),this.Ebt&=-3,this.OEt()),0!=(4&this.Ebt)&&this.Gi.Uf().dispatchEvent(s),null!==this.NRt){const i=this.NRt.TX();for(let t=0,s=i.length;t<s;++t)i[t].Q4()}}NEt(t,s,i){const e=this.Cv(),h=this.Ev(),n=this.fm(),r=this.Gm(),o=this.a5();t.gl(e-this.GRt*n,h-this.TRt*r,n,r),i&&this.p6()&&this.BEt(t),0===o?s.vu(t):(t.offset(-e,-h),s.xu(t,this._vt(),this.xvt()),s.offset(e,h),s._u(t)),t.normalize()}WEt(){const t=this.Ebt;0!=(2&t)&&(this.NEt(this.IRt,this.CRt,!0),this.Ebt=-3&t)}oB(){return this.WEt(),this.IRt}lB(){return this.WEt(),this.CRt}jEt(t){const s=this.Cv(),i=this.Ev(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(r.T(t),r.offset(e,h),r)}VEt(t){this.IRt.T(t),this.CRt.vu(this.IRt),this.Ebt&=-3,this.cCt(),this.OEt()}UEt(t){this.cEt(4,t)}HEt(){return 0!=(4&this.Ebt)}qJ(t,s,i){return s&&0!==this.ZJ()?this.YJ(this.PD().XJ()):0===this.Fv()||i?t.$l(this.oB()):this.zEt()}zEt(){const t=this.PD(),s=this.nB();return!(s>=t._9())&&(t.M9(s,n),n.$l(this.oB()))}YJ(t){const s=this.oB(),i=s._l(),e=s.Tl(),h=s.Gl(),n=s.Il(),r=this.nB(),o=r+this.ZJ();return t._y(i,h,r,e,n,o)}cB(){const t=this.PD();if(t.k9())return this.YJ(t.XJ());{const s=t.uD();return this.qJ(t.vN(),s.JJ(),s.D5())}}iq(t){this.cEt(1<<20,t)}sq(t){this.cEt(1<<21,t)}JEt(){return 0!=(this.Ebt&1<<20)}qEt(){return 0!=(this.Ebt&1<<21)}$Et(t){this.ERt=t,this.XEt(),this.p6()&&(this.WRt.YEt=null)}KEt(){return this.ERt}ZEt(){return null!==this.ERt||this.p6()}QEt(){return this.tAt(this.fm(),this.Gm(),this.a5(),this._vt(),this.xvt())}sAt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.tAt(t,s,i,e,h)}tAt(h,n,t,r,o){let s=this.ARt;null===s&&(s={jRt:d.an(d.Ou),width:NaN,height:NaN,angle:NaN},this.ARt=s);const a=s.jRt;if(s.width!==h||s.height!==n||s.angle!==t){const l=this.ERt;if(this.p6()){let t=this.lW(),s=this.cW(),i=this.m6(),e=this.WRt.YEt;e||(l?(u.T(l),u.offset(t,s)):u.Vu(),e=i.wM(u),this.WRt.YEt=e),i.SM(e,a),a.offset(-t,-s),a.Ju(h,n,r,o)}else l?(a.T(l),a.Ju(h,n,r,o)):a.zu(this.lB(),-this.Cv(),-this.Ev());s.width=h,s.height=n,s.angle=t}return a}XEt(){this.iAt(!0);const t=this.ARt;null!==t&&(t.width=NaN)}a6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.ZW().EL().bL())throw new Error("object does not support mesh");this.u6(),this.WRt={eAt:d.an(d.ny.Jv,t,s),hAt:d.an(d.ny.Jv,t,s),YEt:null}}p6(){return null!==this.WRt}m6(){if(this.p6())return this.WRt.eAt;throw new Error("no mesh")}nAt(){if(this.p6())return this.WRt.hAt;throw new Error("no mesh")}rAt(t){this.cEt(65536,t)}oAt(){return 0!=(65536&this.Ebt)}iAt(t){this.cEt(1<<17,t)}aAt(){return 0!=(this.Ebt&1<<17)}BEt(t){const s=this.WRt.eAt,i=Math.min(s.aM(),0),e=Math.min(s.lM(),0),h=Math.max(s.uM(),1),n=Math.max(s.cM(),1),r=t.width(),o=t.height();t.offsetLeft(i*r),t.offsetTop(e*o),t.Ol((h-1)*r),t.Dl((n-1)*o),this.G2=s.fM()}u6(){this.WRt&&(this.WRt.eAt.ln(),this.WRt.hAt.ln(),this.WRt=null,this.XEt())}f6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,n=i.x,r=i.y,o=i.uN,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.p6())return!1;const u=this.m6(),c=u.pM(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.Fv()!==o&&(c.Ov(o),f=!0),h&&(n+=t/(u.eM()-1),r+=s/(u.hM()-1)),a=-1!==a||h?(h&&(a+=t/(u.eM()-1)),d.mn(a,0,1)):c.Dv(),l=-1!==l||h?(h&&(l+=s/(u.hM()-1)),d.mn(l,0,1)):c.Lv(),c.Cv()===n&&c.Ev()===r&&c.Dv()===a&&c.Lv()===l?f:(c.Pv(n),c.Av(r),c.kv(a),c.Nv(l),this.XEt(),!0)}qCt(){return this.Gi.qCt()}TB(t,s){return!!this.oB().Yl(t,s)&&!!this.lB().Yl(t,s)&&(this.qCt()?this.Gi.M6().F_t(t,s):!this.ZEt()||this.QEt().Yl(t-this.Cv(),s-this.Ev()))}lAt(){return 0!=(16&this.Ebt)}cCt(){if(this.lAt()&&this._B()&&0==(256&this.Ebt)){const t=this.oB(),s=this.vft.aCt(),i=this.PRt;if(n.set(s.e7(t._l()),s.h7(t.Gl()),s.e7(t.Tl()),s.h7(t.Il())),!i.equals(n)){const e=this.Gi;i===h?(s.n7(e,null,n),this.PRt=d.an(d.Rect,n)):(s.n7(e,i,n),i.T(n)),this.Ebt&=-17}}}uAt(){this.Ebt|=16}DEt(){const t=this.PRt;t!==h&&(this.vft.aCt().n7(this.Gi,t,null),this.PRt=h)}OEt(){const t=this.PD();if(t.Sz()&&0==(256&this.Ebt)){const s=t.a9(),i=this.oB(),e=this.RRt;if(n.set(s.e7(i._l()),s.h7(i.Gl()),s.e7(i.Tl()),s.h7(i.Il())),!e.equals(n)){const h=this.Gi;e===o?(s.n7(h,null,n),this.RRt=d.an(d.Rect,n)):(s.n7(h,e,n),e.T(n)),t.l9()}}}Nz(){const t=this.RRt;t!==o&&(this.PD().a9().n7(this.Gi,t,null),this.RRt=o)}tJ(){return this.RRt}gB(){const t=this.Gi,s=this.wRt,i=s.AD();i.length&&i.at(-1)===t||(s.Lz(t,!1),s.Oz(t,!1),this.uf.DD())}wB(){const t=this.Gi,s=this.wRt,i=s.AD();i.length&&i[0]===t||(s.Lz(t,!1),s.kz(t,!1),this.uf.DD())}bB(t){const s=this.Gi,i=this.wRt;if(i.uD()!==t.uD())throw new Error("layer from different layout");t!==i&&(i.Lz(s,!0),this.FD(t),t.Oz(s,!0),this.uf.DD())}MB(t,s){let i=this.Gi,e=!1,h=this.wRt;if(t.YN()!==i.YN()){const n=t.CD();if(!n)throw new Error("expected world instance");const r=n.PD(),o=(h.LF()!==r.LF()&&(h.Lz(i,!0),this.FD(r),r.Oz(i,!0),e=!0),r.rJ(i,t,!!s));(e||o)&&this.uf.DD()}}K4(){return this.kRt}cAt(t){this.cEt(64,t)}dJ(){return 0!=(64&this.Ebt)}bq(t,s=null){const i={x:this.Cv(),y:this.Ev(),w:this.fm(),h:this.Gm(),l:this.PD().i9(),zi:this.RD()},e=(0!==this.Fv()&&(i.ze=this.Fv()),0!==this.a5()&&(i.a=this.KRt()),this.r9()||(i.c=this.dv.toJSON()),.5!==this.lW()&&(i.oX=this.lW()),.5!==this.cW()&&(i.oY=this.cW()),0!==this.yN()&&(i.bm=this.yN()),this.J5()||(i.v=this.J5()),this._B()||(i.ce=this._B()),this.HEt()&&(i.be=this.HEt()),this.kRt&&(i.fx=this.kRt.bq()),0!=(32&this.Ebt));return e&&(i.sfi=e),this.FRt&&(i.sft=[...this.FRt].join(" ")),this.NRt&&"visual-state"!==t&&(i.sgi=this.NRt.bq(t,s),g.has(this))&&(i.sgcd=g.get(this).JRt,i.sgzid=g.get(this).qRt),this.p6()&&(i.mesh=this.m6().jv()),i}hRt(){return{x:this.Qa,y:this.sl,z:this.pv,w:this.vRt,h:this.MRt,a:this.$o,sgi:this.ert()?this.ert().QPt():null}}aRt(t){t&&(this.Qa=t.x,this.sl=t.y,this.pv=t.z,this.vRt=t.w,this.MRt=t.h,this.$o=t.a,t.sgi&&this.ert()&&this.ert().vq(t.sgi),this.sEt(),this.Q4())}SCt(){this.URt(),this.IEt(),this.REt(null),this.NRt&&this.NRt.rRt(this.BPt,this.WPt)}LY(t){"visual-state"!==t&&this.IEt()}BY(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ebt)&&this.NRt.BY(t.sgi,i)}PPt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ebt)&&(this.NRt.rRt(null,null),this.URt(),this.Q4())}vq(t,s){if(m=!1,this.Pv(t.x),this.Av(t.y),this.Mm(t.w),this.pm(t.h),this.Vz(t.zi),this.Ov(t.hasOwnProperty("ze")?t.ze:0),this.o5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Va(t.c):t.hasOwnProperty("o")?(f.na(this.dv),f.a=t.o):f.Xo(1,1,1,1),this.HRt(f),this.grt(t.hasOwnProperty("oX")?t.oX:.5),this.wrt(t.hasOwnProperty("oY")?t.oY:.5),this.yv(t.hasOwnProperty("bm")?t.bm:0),this.H5(!t.hasOwnProperty("v")||t.v),this.GB(!t.hasOwnProperty("ce")||t.ce),this.UEt(!!t.hasOwnProperty("be")&&t.be),this.kEt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.kRt&&t.hasOwnProperty("fx")&&this.kRt.vq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.BPt)for(const i of this.BPt)i.i8()||this.uf.UN(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.REt(null);const e=this.NRt,h=t.sgi;e.vq(h),e.rRt(this.BPt,this.WPt),t.sgcd&&d.me(t.sgzid)&&g.set(this,{JRt:t.sgcd,qRt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.a6(n.cols,n.rows),this.m6().Vv(n)}else this.u6();this.Q4(),m=!0,this.$Rt(),"visual-state"!==s&&this.uf.fAt(this.ZW(),t)}}}{const xa=self.Ns;xa.QTt=class extends xa.nn{constructor(t,s){super();const i=t.XD(),e=i.Ayt(s[1]),h=(i.dAt().IGt(e),this.uf=i,this.vft=t,this.oGt=xa.eL.L6(e),this.Jxt=null,this.pAt=null,this.RTt=e.Instance,this.v7=s[2],this.dn=s[0],this.mwt=this.uf.Ydt(s[3]),this.oGt.ubt());if(h<2&&(this.Jxt=xa.an(e.gIt,this),!(this.Jxt instanceof xa.rGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(xa.eL.Cxt(this,h),2<=h){const n=e.gIt??globalThis.d8;if(this.pAt=new n,!(this.pAt instanceof globalThis.d8))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.pAt=new globalThis.D6;xa.eL.Pxt(h),this._xt()}static vx(t,s){return xa.an(xa.QTt,t,s)}ln(){this.uf=null,this.oGt=null,this.Jxt&&(this.Jxt.ln(),this.Jxt=null),this.RTt=null}rvt(){return this.Jxt}_xt(){this.Jxt?this.Jxt._xt():this.pAt&&this.pAt.gj()}XD(){return this.uf}kN(){return this.vft}P6(){return this.oGt}NIt(){return this.RTt}Qc(){return this.dn}i9(){return this.v7}E6(){return this.pAt}Ydt(){return this.mwt}}}{const _a=self.Ns,Ga=self.I6;_a.ACt=class extends _a.nn{constructor(t){super(),this.uf=t.runtime,this.$wt=t.R6,this.oGt=this.$wt.P6(),this.Gi=t.F6,this.Kg=t.index,this._Ct=null,this.GCt=null,this.oGt.Oz(this.Gi)}ln(){this.GCt&&(this.GCt.jN(),this.GCt=null),this.oGt.Lz(this.Gi),this._Ct&&(this._Ct.ln(),this._Ct=null),this.uf=null,this.$wt=null,this.oGt=null,this.Gi=null}FIt(t){if(this._Ct)throw new Error("already got sdk instance");const s=this.P6().ubt();if(s<2){if(this._Ct=_a.an(this.$wt.NIt(),this,t),!(this._Ct instanceof _a.aGt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.P6().Gxt();this.Ixt(i.Instance,t)}}M6(){return this._Ct??this.GCt}O6(){return this.Gi}XD(){return this.uf}A6(){return this.$wt}P6(){return this.oGt}Rnt(){return this.Kg}fGt(){this._Ct?this._Ct.fGt():this.GCt.y8()}gGt(t,s){this._Ct&&this._Ct.gGt(t,s)}CPt(){return this._Ct?this._Ct.d_t():this.GCt.D4()}jv(t="full"){return this._Ct?this._Ct.jv(t):this.GCt.L4(t)}Vv(t,s="full"){if(this._Ct)return this._Ct.Vv(t,s);this.GCt.N4(t,s)}static mAt(t,s,i){let e=globalThis.p8,h,n;h=s instanceof e?t.v5(s):s.cGt(),n=i instanceof e?t.v5(i):i.cGt();const r=h.O6(),o=n.O6(),a=r.kN().LF(),l=o.kN().LF();if(a!==l)return a-l;const u=r.gPt(),c=o.gPt();return u!==c?u-c:h.Rnt()-n.Rnt()}Ixt(t,s){const i=Ga,e=t??this._Ct.Gxt(),h=e||i,n=this.P6().ubt();if(_a.eL.Cxt(this,n),_a.eL.CGt(s),this.GCt=new h,_a.eL.PGt(),_a.eL.Pxt(n),!e||this.GCt instanceof i)return this.GCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}Xxt(){return this.GCt||this.Ixt()}y_t(){return!!this.GCt}}}{const Ta=self.Ns;Ta.nz=class extends Ta.nn{constructor(t,s){super(),this.Xv=t,this.gAt=[],this.yAt=[],this.wAt=new Map,this.SAt=[],this.bAt=[],this.vAt=new Set,this.Db=!0;for(const i of s){const e=Ta.an(Ta.MAt,this,i,this.gAt.length);this.gAt.push(e),this.wAt.set(e.Qc().toLowerCase(),e),3<=i.length&&this.SAt.push(this.xAt(e,i[2]))}this.XD()._At(this)}ln(){this.XD().GAt(this);for(const t of this.bAt)t.ln();Ta.Br(this.bAt),Ta.Br(this.gAt),Ta.Br(this.yAt),this.wAt.clear(),Ta.Br(this.SAt),this.Xv=null}TAt(t){this.vAt.add(t)}IAt(t){this.vAt.delete(t)}CAt(t){t.Dw()&&(this.bAt=this.gAt.map(t=>{const s=t.b_();return 0<s.GetCustomParametersByteSize()?Ta.an(Ta.ny.WebGPUEffectCustomParamsBuffer,s):null}),this.PAt());for(const s of this.vAt)s.CAt(t)}EIt(t){if(t.length){this.gAt=t.concat(this.gAt);for(const s of t)this.wAt.set(s.Qc().toLowerCase(),s);for(let t=0,s=this.gAt.length;t<s;++t)this.gAt[t].Kz(t)}}xAt(t,s){t.RAt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ta.an(Ta.Ho);h.Va(e),i[t]=h}}return i}nM(){return this.Xv}XD(){return this.Xv.XD()}W6(){Ta.Br(this.yAt);let t=!0;for(const s of this.gAt)s.wmt()&&(this.yAt.push(s),s.b_().Qb()||(t=!1));this.Db=t}i5(){return this.gAt}JIt(){return 0<this.gAt.length}Fht(t){return this.wAt.get(t.toLowerCase())||null}EAt(t){if((t=Math.floor(+t))<0||t>=this.gAt.length)throw new RangeError("invalid effect type index");return this.gAt[t]}N6(t){return this.EAt(t).wmt()}B6(t,s){this.EAt(t).RAt(s)}o9(){return this.yAt}dJ(){return 0<this.yAt.length}Qb(){return this.Db}Aht(t){return this.SAt[t]}lz(t){return(t<this.bAt.length?this.bAt:this.SAt)[t]}j6(t,s){if(t<0||t>=this.SAt.length)return null;const i=this.SAt[t];return s<0||s>=i.length?null:i[s]}V6(t,s,i){if(t<0||t>=this.SAt.length)return!1;const e=this.SAt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ta.Ho){if(h.da(i))return!1;h.na(i)}else{if(h===i)return!1;e[s]=i}return t<this.bAt.length&&this.bAt[t].SetParameterValue(s,i),!0}PAt(){const i=this.SAt,e=this.bAt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}static AAt(t){return t&&t instanceof Ta.Ho?{t:"color",v:t.toJSON()}:t}static FAt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ta.an(Ta.Ho);return i.Va(t.v),i}}}static OAt(t){return t.map(Ta.nz.AAt)}static DAt(t){return t.map(Ta.nz.FAt)}jv(){return this.gAt.map(t=>({name:t.Qc(),active:t.wmt(),params:Ta.nz.OAt(this.SAt[t.LF()])}))}Vv(t){for(const s of t){const i=this.Fht(s.name);i&&(i.RAt(s.active),this.SAt[i.LF()]=Ta.nz.DAt(s.params))}this.W6(),this.PAt()}}}{const Ia=self.Ns;Ia.MAt=class extends Ia.nn{constructor(t,s,i){super(),this.hz=t,this.ff=s[0],this.dn=s[1],this.Kg=i,this.lv=null,this.l0=!0}ln(){this.hz=null,this.lv=null}RIt(t){const s=Ia.an(Ia.MAt,t,[this.ff,this.dn],-1);return s.lv=this.lv,s.l0=this.l0,s}CAt(t){const s=t.jw(this.ff);if(!s)throw new Error("failed to find shader program '"+this.ff+"'");this.lv=s}s5(){return this.hz}Qc(){return this.dn}Kz(t){this.Kg=t}LF(){return this.Kg}nM(){return this.hz.nM()}XD(){return this.hz.XD()}RAt(t){this.l0=!!t}wmt(){return this.l0}b_(){return this.lv}kAt(){const i=[];for(let t=0,s=this.lv.v_();t<s;++t){const e=this.lv.M_(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.an(Ia.Ho,1,1,1,1))}}return i}}}{const Ca=self.Ns;Ca.LRt=class extends Ca.nn{constructor(t,s){super(),this.Gi=t,this.LAt=s,this.hz=t.kN().s5(),this.NAt=!0,this.cz=!0,this.BAt=!1,this.WAt=!1,this.jAt=!1,this.VAt=!1,this.FF=Ca.an(Ca.ny.PA,t.XD().Wk().rz(),{wA:(t,s)=>{const i=s.GF(),e=i.CD();t.wv(e.oz()),t.xS(e.nB()),i.gM(t),t.xS(0)},SA:t=>{const s=t.C_t(),[i,e]=t.I_t();return{wF:s,SF:i,bF:e}},bA:t=>this.lz(t)}),this.UAt=[],this.yAt=[],this.Db=!0,this.SAt=[],this.bAt=[],this.CAt(t.XD().qb());for(let t=0,s=this.hz.i5().length;t<s;++t)this.UAt.push(!0);this.W6(),this.hz.TAt(this)}ln(){this.hz.IAt(this);for(const t of this.bAt)t&&t.ln();Ca.Br(this.bAt),this.FF.ln(),this.FF=null,Ca.Br(this.UAt),Ca.Br(this.yAt),Ca.Br(this.SAt),this.Gi=null,this.hz=null}CAt(t){t.Dw()&&(this.bAt=this.hz.i5().map(t=>{const s=t.b_();return 0<s.GetCustomParametersByteSize()?Ca.an(Ca.ny.WebGPUEffectCustomParamsBuffer,s):null}))}zRt(t){let s=0;for(const i of t)this.SAt.push(this.xAt(s,i)),++s;this.PAt(),this.W6()}xAt(t,s){this.UAt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.an(Ca.Ho);h.Va(e),i[t]=h}}return i}BCt(){for(const t of this.hz.i5())this.SAt.push(t.kAt());this.PAt()}nM(){return this.Xv}s5(){return this.hz}kF(){return this.n9(),this.FF}XD(){return this.Gi.XD()}W6(){Ca.Br(this.yAt);let t=this.LAt,i=this.hz.i5(),e=this.yAt,h=this.UAt,n=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const r=i[t];e.push(r),r.b_().Qb()||(n=!1)}this.Db=n,t.cAt(!!e.length),this.NAt=!0}n9(){const t=this.Gi,s=this.LAt,i=s.r9(),e=t.EL().gL(),h=0!==s.a5()||0!==s.PD().a5()||s.fm()<0||s.Gm()<0,n=t.E_t(),r=t.Zb();(this.NAt||i!==this.cz||e!==this.BAt||h!==this.WAt||n!==this.jAt||r!==this.VAt||this.FF.v3())&&(this.FF.M3(this.yAt.map(t=>t.b_()),{MA:this.yAt.map(t=>t.LF()),xA:!i||r,GA:e,TA:n,IA:h}),this.NAt=!1,this.cz=i,this.BAt=e,this.WAt=h,this.jAt=n,this.VAt=r)}o9(){return this.yAt}Aht(t){return this.SAt[t]}lz(t){return(t<this.bAt.length?this.bAt:this.SAt)[t]}j6(t,s){if(t<0||t>=this.SAt.length)return null;const i=this.SAt[t];return s<0||s>=i.length?null:i[s]}V6(t,s,i){if(t<0||t>=this.SAt.length)return!1;const e=this.SAt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.Ho){if(h.da(i))return!1;h.na(i)}else{if(h===i)return!1;e[s]=i}return t<this.bAt.length&&this.bAt[t].SetParameterValue(s,i),!0}PAt(){const i=this.SAt,e=this.bAt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}Qb(){return this.Db}HAt(){return this.yAt.some(t=>t.b_().hv())}N6(t){return this.UAt[t]}B6(t,s){this.UAt[t]=!!s}i5(){return this.hz.i5()}bq(){return this.hz.i5().map(t=>({name:t.Qc(),active:this.UAt[t.LF()],params:Ca.nz.OAt(this.SAt[t.LF()])}))}vq(t){for(const s of t){const i=this.hz.Fht(s.name);i&&(this.UAt[i.LF()]=s.active,this.SAt[i.LF()]=Ca.nz.DAt(s.params))}this.W6(),this.PAt()}}}{let T=self.Ns,n=[],b=[],r=[],v=T.an(T.Ou),w=T.an(T.Ou),M=T.an(T.tu),d=T.an(T.Rect),p=T.an(T.Rect),m=null,g=null,y=null;T.zAt=class extends T.nn{constructor(t){super(),this.uf=t,this.JAt=0,this.qAt=0,this.$At=[],this.XAt=0,this.YAt=0,this.KAt=0,this.ZAt=0,this.QAt=new self.yk(this)}ln(){this.uf=null}XD(){return this.uf}UF(){return this.QAt}t3t(){this.YAt=this.XAt,this.XAt=0,this.ZAt=this.KAt,this.KAt=0}s3t(){return this.YAt}i3t(){return this.ZAt}e3t(t,s){const i=t.CD(),e=s.CD();i&&e&&i._B()&&e._B()&&this.$At.push([t,s])}lMt(s,i,e){for(const[h,n]of this.$At){let t=null;if(s===h)t=n;else{if(s!==n)continue;t=h}t.mMt(i)&&!e.includes(t)&&e.push(t)}}uMt(t,s){if(this.$At.length)for(const[i,e]of this.$At)if(t===i&&s===e||t===e&&s===i)return!0;return!1}h3t(){T.Br(this.$At)}Sk(t,s){if(!t||!s||t===s)return!1;const i=t.CD(),e=s.CD();if(!i._B()||!e._B())return!1;this.XAt++;const h=i.PD(),n=e.PD(),r=h.X9(n);return r?this.n3t(i,e):this.r3t(i,e)}n3t(t,s){if(!t.oB().$l(s.oB()))return!1;if(this.KAt++,!t.lB().Tu(s.lB()))return!1;if(t.qCt()&&s.qCt())return!1;if(t.qCt())return this.o3t(t,s);if(s.qCt())return this.o3t(s,t);if(!t.ZEt()&&!s.ZEt())return!0;const i=t.QEt(),e=s.QEt();return i.qu(e,s.Cv()-t.Cv(),s.Ev()-t.Ev())}r3t(i,e){const t=i.qCt(),s=e.qCt();if(t&&!s)return this.a3t(i,e);if(s&&!t)return this.a3t(e,i);if(s||t)return!1;{const h=i.PD(),n=e.PD(),r=(v.T(i.QEt()),w.T(e.QEt()),v.Bu());for(let t=0,s=r.length;t<s;t+=2){const a=t+1,l=r[t],u=r[a],[c,f]=h.IN(l+i.Cv(),u+i.Ev());r[t]=c,r[a]=f}const o=w.Bu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=n.IN(p+e.Cv(),m+e.Ev());o[t]=g,o[d]=y}return v.Uu(),w.Uu(),this.KAt++,v.qu(w,0,0)}}a3t(t,s){const i=t.PD(),e=s.PD(),h=(m=m||T.an(T.Ou),g=g||T.an(T.Rect),y=y||T.an(T.tu),s.Cv()),n=s.Ev(),[r,o]=e.IN(h,n),[a,l]=i.xN(r,o),u=a-h,c=l-n;if(g.T(s.oB()),g.offset(u,c),!t.oB().$l(g))return!1;if(y.T(s.lB()),y.offset(u,c),this.KAt++,!t.lB().Tu(y))return!1;m.T(s.QEt());const f=m.Bu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Uu(),this.o3t(t,s,a,l,m,g,y)}o3t(t,e,s,i,h,n,r){const o=void 0!==n?n:e.oB(),a=t.Cv(),l=t.Ev(),u=t.ZW().M6(),c=void 0!==s?s:e.Cv(),f=void 0!==i?i:e.Ev(),d=e.ZEt(),p=void 0!==r?r:e.lB(),m=b;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.XAt++,o.Xl(y,a,l)&&(M.vu(y),M.offset(a,l),M.Tu(p)))if(d){let t=void 0!==h?h:e.QEt(),s=c,i=f;void 0!==h&&(s=e.Cv(),i=e.Ev());const w=g.GetPoly();if(w){if(this.KAt++,w.qu(t,s-(a+y._l()),i-(l+y.Gl())))return T.Br(m),!0}else if(v.zu(M,0,0),v.qu(t,s,i))return T.Br(m),!0}else{const S=g.GetPoly();if(!S)return T.Br(m),!0;if(v.zu(p,0,0),S.qu(v,-(a+y._l()),-(l+y.Gl())))return T.Br(m),!0}}return T.Br(m),!1}l3t(t,o,a){const l=t.UL(),s=this.uf.bO();if(!s)throw new Error("cannot call outside event");const u=s.Yft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.tN(),i.set(t,s)),s};if(l.Fft()){a||(l.Wft(!1),T.Br(l.jft())),u&&T.Br(l.Vft());for(const e of t.VL()){let h=e.CD(),n=h.PD();if(!(!c(n)||!h.cB())&&o.some(([t,s])=>{const[i,e]=n.xN(t,s,h.nB());return h.TB(i,e)})){if(a)return!1;l.Nft(e)}else u&&l.Bft(e)}}else{let i,e=!1,r=(!u||s.Vgt(this.uf.jdt())||this.uf.uvt()&&!l.Vft().length&&l.jft().length?i=l.jft():(i=l.Vft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.CD(),n=h.PD();if(!(!c(n)||!h.cB())&&o.some(([t,s])=>{const[i,e]=n.xN(t,s,h.nB());return h.TB(i,e)})){if(a)return!1;e?l.Nft(t):i[r++]=t}else e?i[r++]=t:u&&l.Bft(t)}a||(i.length=r)}return t.xyt(),i.clear(),!!a||l.Oft()}u3t(t,s){if(t)for(const i of s.dCt())if(!t.X9(i))return!1;return!0}lvt(t,s,i,e){if(s.$z())for(const h of s.mgt())this.u3t(t,h)?(h.uCt(),h.aCt().r7(i,e)):T.$h(e,h.VL());else this.u3t(t,s)?(s.uCt(),s.aCt().r7(i,e)):T.$h(e,s.VL())}Pk(t,s,i,e){for(const h of s)this.lvt(t,h,i,e)}c3t(t,s,i){const e=this.uf.EGt();e&&this.Pk(t,e.aK(),s,i)}f3t(t,s,i){const e=this.uf.AGt();e&&this.Pk(t,e.aK(),s,i)}LEt(t,s){return t.YCt()&&(!s||s.CD().LEt(t.gbt().get("solidTags")))}Mk(t){const s=t.CD();this.c3t(s.PD(),s.oB(),n);for(const i of n)if(this.LEt(i,t)&&this.Sk(t,i))return T.Br(n),i;return T.Br(n),null}d3t(t,s){this.c3t(null,t,n);for(const i of n)if(this.LEt(i,s)&&this.p3t(t,i))return T.Br(n),i;return T.Br(n),null}m3t(t,s){let i=null;s&&(i=r,T.Br(i));const e=t.CD();this.f3t(e.PD(),e.oB(),n);for(const h of n)if(h.ZCt()&&this.Sk(t,h)){if(!s)return T.Br(n),h;i.push(h)}return T.Br(n),i}g3t(s,i,e,h,n){h=h||50;const r=s.CD(),o=r.Cv(),a=r.Ev();for(let t=0;t<h;++t)if(r.tB(o+i*t,a+e*t),r.Q4(),!this.Sk(s,n))return!0;return r.tB(o,a),r.Q4(),!1}y3t(s,i,e,h,n,r){h=h||50;let o=s.CD(),a=o.Cv(),l=o.Ev(),u=null,c=null;for(let t=0;t<h;++t)if(o.tB(a+i*t,l+e*t),o.Q4(),!this.Sk(s,u))if(u=this.Mk(s))c=u;else if(n&&(u=r?this.Sk(s,r)?r:null:this.m3t(s))&&(c=u),!u)return c&&this.w3t(s,i,e,c,16,!0),!0;return o.tB(a,l),o.Q4(),!1}S3t(i,e,h,t){t=t||50;let n=i.CD(),r=n.Cv(),o=n.Ev(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(n.tB(r+e*s*u,o+h*s*u),n.Q4(),!this.Sk(i,a)){if(!(a=this.Mk(i)))return l&&this.w3t(i,e*u,h*u,l,16,!0),!0;l=a}}return n.tB(r,o),n.Q4(),!1}w3t(t,s,i,e,h,n){let r=2,o=!1,a=!1,l=t.CD(),u=l.Cv(),c=l.Ev();for(;r<=h;){const f=1/r;r*=2,l.eB(s*f*(o?1:-1),i*f*(o?1:-1)),l.Q4(),this.Sk(t,e)||n&&this.Mk(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.Cv(),c=l.Ev())}a&&(l.tB(u,c),l.Q4())}b3t(i,t=100){let e=0,h=i.CD(),n=h.Cv(),r=h.Ev(),o=0,a=this.Mk(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.tB(Math.floor(n+t*e),Math.floor(r+s*e)),h.Q4(),!this.Sk(i,a)&&!(a=this.Mk(i)))return!0}return h.tB(n,r),h.Q4(),!1}v3t(t,s,i,e){const h=t.CD(),n=h.Cv(),r=h.Ev(),o=Math.max(10,T.Sn(s,i,n,r)),a=T.vn(s,i,n,r),l=e||this.Mk(t);if(!l)return T.gn(a+Math.PI);let u=l,c=0,f=0,d=T.yn(5),p;for(p=1;p<36;++p){const _=a-p*d;if(h.tB(s+Math.cos(_)*o,i+Math.sin(_)*o),h.Q4(),!this.Sk(t,u)&&!(u=e?null:this.Mk(t))){c=_;break}}for(36===p&&(c=T.gn(a+Math.PI)),u=l,p=1;p<36;++p){const G=a+p*d;if(h.tB(s+Math.cos(G)*o,i+Math.sin(G)*o),h.Q4(),!this.Sk(t,u)&&!(u=e?null:this.Mk(t))){f=G;break}}if(36===p&&(f=T.gn(a+Math.PI)),h.tB(n,r),h.Q4(),f===c)return f;let m=T.Mn(f,c)/2,g;g=T._n(f,c)?T.gn(c+m+Math.PI):T.gn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return T.vn(0,0,M,x)}M3t(t,s,i,e,h){if(!h)return!1;const n=h.CD();if(!n._B())return!1;if(this.XAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!n.oB().$l(d))return!1;if(h.qCt())return this.x3t(t,s,i,e,h,n);if(this.KAt++,!n.lB().Gu(t,s,i,e))return!1;if(!n.ZEt())return!0;const r=n.QEt();return r.Gu(n.Cv(),n.Ev(),t,s,i,e)}x3t(i,e,h,n,t,s){const r=s.Cv(),o=s.Ev(),a=t.M6(),l=b;p.set(i,e,h,n),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.XAt++,d.Xl(c,r,o)&&(M.vu(c),M.offset(r,o),M.Gu(i,e,h,n))){const f=u.GetPoly();if(!f)return T.Br(l),!0;if(this.KAt++,f.Gu(r+c._l(),o+c.Gl(),i,e,h,n))return T.Br(l),!0}}return T.Br(l),!1}p3t(t,s){if(!s)return!1;const i=s.CD();if(!i._B())return!1;if(this.XAt++,!i.oB().$l(t))return!1;if(s.qCt())return this._3t(t,s,i);if(this.KAt++,M.vu(t),!i.lB().Tu(M))return!1;if(!i.ZEt())return!0;const e=v,h=(e.vu(t,i.Cv(),i.Ev()),i.QEt());return e.qu(h,0,0)}_3t(i,t,s){const e=s.Cv(),h=s.Ev(),n=t.M6(),r=b;n.GetCollisionRectCandidates(i,r);for(let t=0,s=r.length;t<s;++t){const o=r[t],a=o.GetRect();if(this.XAt++,i.Xl(a,e,h)){const l=o.GetPoly();if(!l)return T.Br(r),!0;if(this.KAt++,v.vu(i,0,0),l.qu(v,-(e+a._l()),-(h+a.Gl())))return T.Br(r),!0}}return T.Br(r),!1}G3t(t,s){if(t){const i=t.CD();i._B()&&(this.XAt++,i.oB().$l(s.rect))&&(t.qCt()?this.T3t(t,i,s):(this.KAt++,i.ZEt()?s.I3t(t,i.Cv(),i.Ev(),i.QEt()):s.C3t(t,i.lB())))}}T3t(i,e,h){const n=e.Cv(),r=e.Ev(),o=b;i.M6().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.XAt++,h.rect.Xl(l,n,r)){const u=a.GetPoly();this.KAt++,u?h.I3t(i,n+l._l(),r+l.Gl(),u):h.P3t(i,e.Cv(),e.Ev(),l)}}T.Br(o)}_k(t,s){if(t!==this.JAt||s!==this.qAt){this.JAt=t,this.qAt=s;const i=this.uf.qz();for(const e of i)if(e.aL()){for(const h of e.jL())h.CD().DEt();e.aCt().R3t(t,s),e.lCt();for(const n of e.jL()){const r=n.CD();r.uAt(),r.cCt()}}}}Tk(){return[this.JAt,this.qAt]}E3t(t,s){this.JAt=t,this.qAt=s}}}{const Pa=self.Ns;Pa.WTt=class extends Pa.nn{constructor(t,s){super(),this.QH=t,this.t7=s,this.s7=Pa.an(Pa.Qu)}ln(){this.s7.ln(),this.s7=null}R3t(t,s){if(!this.s7.ec())throw new Error("grid not empty");this.QH=t,this.t7=s}i7(t,s,i){let e=this.s7.ei(t,s);return e||(i?(e=Pa.an(Pa.A3t,this,t,s),this.s7.Set(t,s,e),e):null)}e7(t){const s=Math.floor(t/this.QH);return isFinite(s)?s:0}h7(t){const s=Math.floor(t/this.t7);return isFinite(s)?s:0}n7(e,h,n){if(h)for(let i=h._l(),t=h.Tl();i<=t;++i)for(let t=h.Gl(),s=h.Il();t<=s;++t)if(!n||!n.Yl(i,t)){const r=this.i7(i,t,!1);r&&(r.M0(e),r.ec())&&this.s7.hc(i,t)}if(n)for(let i=n._l(),t=n.Tl();i<=t;++i)for(let t=n.Gl(),s=n.Il();t<=s;++t)h&&h.Yl(i,t)||this.i7(i,t,!0).XH(e)}r7(t,s){let i=this.e7(t._l()),e=this.h7(t.Gl()),h=this.e7(t.Tl()),n=this.h7(t.Il());if(isFinite(h)&&isFinite(n))for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.i7(i,t,!1);r&&r.KH(s)}}}}{const Ra=self.Ns;Ra.A3t=class extends Ra.nn{constructor(t,s,i){super(),this.VH=t,this.Qa=s,this.sl=i,this.UH=Ra.an(Ra.ac)}ln(){this.UH.ln(),this.UH=null,this.VH=null}ec(){return this.UH.ec()}XH(t){this.UH.fc(t)}M0(t){this.UH.hc(t)}KH(t){Ra.$h(t,this.UH.dc())}}}{const Ea=self.Ns;Ea.F3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ea.Rect,this.O3t=2,this.D3t=null,this.k3t=0,this.L3t=0,this.N3t=0,this.B3t=0,this.W3t=0,this.Pt=0,this.j3t=1,this.V3t=0,this.U3t=1,this.H3t=0}z3t(){return this.O3t<1+1e-6}u0(){this.O3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.O3t=2,this.D3t=null,this.k3t=0,this.L3t=0,this.N3t=0,this.B3t=0,this.W3t=0,this.Pt=0,this.j3t=1,this.V3t=0,this.U3t=1,this.H3t=0,this}J3t(){if(!1!==this.z3t()){const t=this.dx*this.O3t,s=this.dy*this.O3t,i=Math.hypot(t,s),e=t/i,h=s/i,n=(this.Pt=i-1e-6,this.B3t=this.x1+e*this.Pt,this.W3t=this.y1+h*this.Pt,this.k3t=Math.atan2(this.N3t,this.L3t)+Math.PI/2,this.j3t=Math.cos(this.k3t),this.V3t=Math.sin(this.k3t),e*this.j3t+h*this.V3t);if(this.U3t=e-2*this.j3t*n,this.H3t=h-2*this.V3t*n,0<n){const r=Math.PI;this.k3t=Ea.gn(this.k3t+r),this.j3t=-this.j3t,this.V3t=-this.V3t}}}q3t(t,s,i,e,h){const n=Ea.ur(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=n&&n<this.O3t&&(this.O3t=n,this.D3t=t.YN(),this.L3t=s-e,this.N3t=i-h)}P3t(t,s,i,e){const h=s+e._l(),n=s+e.Tl(),r=i+e.Gl(),o=i+e.Il();this.q3t(t,h,r,n,r),this.q3t(t,n,r,n,o),this.q3t(t,n,o,h,o),this.q3t(t,h,o,h,r)}C3t(t,s){const i=s.Zn(),e=s.Qn(),h=s.tr(),n=s.ir(),r=s.er(),o=s.hr(),a=s.nr(),l=s.rr();this.q3t(t,i,e,h,n),this.q3t(t,h,n,r,o),this.q3t(t,r,o,a,l),this.q3t(t,a,l,i,e)}I3t(i,e,h,t){const n=t.Bu();for(let t=0,s=n.length;t<s;t+=2){const r=(t+2)%s,o=n[t]+e,a=n[t+1]+h,l=n[r]+e,u=n[1+r]+h;this.q3t(i,o,a,l,u)}}}}{const M=self.Ns,Aa=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Fa=new Set(["high","low"]),Oa=self.vs,xh=Oa.Gs,_h=Oa.Ps,Da=xh.create(),ka=M.an(M.tu),x=M.an(M.Rect);M.$3t=class extends M.nn{constructor(t){super(),this.uf=t,this.X3t=[],this.Y3t=!1,this.K3t=null,this.Z3t=null,this.Q3t=null,this.tFt="high-performance",this.sFt=!1,this.iFt=0,this.eFt=0,this.hFt="",this.nFt=0,this.rFt=0,this.oFt=0,this.aFt=0,this.lFt=0,this.uFt=0,this.Fy="normalized",this.cFt=0,this.fFt=1,this.dFt=1e4,this.dw=!0,this.pFt=0,this.t3=0,this.s3=0,this.mFt="letterbox-scale",this.gFt="letterbox-scale",this.yFt=0,this.wFt=0,this.SFt=xh.create(),this.bFt="high",this.vFt=this.bFt,this.MFt=!1,this.xFt=[],this._Ft=new Set,this.GFt=self.C3_Shaders,this.TFt=M.an(M.ny.hA,{tA:()=>[this.PJ(),this.RJ()],sA:()=>this.IFt(),iA:t=>this.CFt(t),getTime:()=>this.XD().NO(),eA:()=>this.XD().DD()}),this.PFt=0,this.RFt=0,this.EFt=NaN,this.AFt=null,this.FFt=new Map,this.OFt=NaN,this.DFt=new Map,this.kFt="",this.LFt=1,this.NFt=M.an(M.Rect),this.BFt="",this.WFt=null,this.jFt=null,this.VFt=0,this.UFt=0,this.HFt=-1,this.zFt=0,this.JFt=t=>this.zFt=t.progress,this.qFt=null,this.$Ft={XFt:null,YFt:null,KFt:null},this.ZFt=0,this.QFt=0,this.tOt=0,this.sOt="fade-in",this.iOt=null,this.eOt=new Promise(t=>this.iOt=t)}hOt(t){this.tFt=t}nOt(t){this.Y3t=!!t}rOt(t){this.Fy=t}oOt(){return this.Fy}aOt(t){this.cFt=t}lOt(t,s){this.fFt=t,this.dFt=s}uOt(t){this.sFt=!!t}async Ao(t){let s=t.canvas,i=(this.X3t.push({canvas:s,cOt:null}),this.uf.T4("runtime","window-resize",t=>this.fOt(t)),this.uf.T4("runtime","fullscreenchange",t=>this.dOt(t)),this.uf.T4("runtime","fullscreenerror",t=>this.pOt(t)),s.addEventListener("webglcontextlost",t=>this.mOt(t)),s.addEventListener("webglcontextrestored",t=>this.gOt(t)),this.MFt=!!t.isFullscreen,this.hFt=t.cssDisplayMode,navigator.gpu&&this.Y3t),e=!1;if(i)try{await this.yOt(!0)}catch(t){this.wOt("WebGPU",t),this.Z3t=null}if(!this.qb())try{await this.SOt(!0)}catch(t){this.wOt("WebGL",t),this.K3t=null}if(this.qb()||(e=!0),!this.qb()&&i)try{await this.yOt(!1)}catch(t){this.wOt("WebGPU",t),this.Z3t=null}if(!this.qb())try{await this.SOt(!1)}catch(t){this.wOt("WebGL",t),this.K3t=null}const h=this.qb();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.gb(e),this.Z3t&&(this.Z3t.bOt=()=>this.vOt(),this.Z3t.MOt=()=>this.xOt()),"normalized"===this.Fy?h.Ew():(h.Aw(),h.Pw(this.cFt)),this.cC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.CAt()}wOt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async yOt(t){const s={Ty:this.fFt,Iy:this.dFt},i={powerPreference:this.tFt,depth:this.uf.D9(),failIfMajorPerformanceCaveat:t,_Ot:this.uf.NJ(),GOt:this.uf.TOt(),bP:this.uf.IOt()};this.Z3t=M.an(M.ny.WebGPURenderer,s),await this.Z3t.vx(this.X3t[0].canvas,i)}async SOt(t){const s={alpha:!0,powerPreference:this.tFt,SP:"xbox-uwp-webview2"!==this.uf.kk(),depth:this.uf.D9(),bP:this.uf.IOt(),failIfMajorPerformanceCaveat:t,Ty:this.fFt,Iy:this.dFt};this.sFt&&(s.vP=1),this.K3t=M.an(M.ny._P,this.X3t[0].canvas,s),await this.K3t.ww()}async COt(){if(this.GFt){const t=[];for(const[s,i]of Object.entries(this.GFt)){i.src=i.POt;const e=M.ny.WebGPUShaderProgram.W_();t.push(this.Z3t.TR(Object.assign({wx:e,name:s},i)))}await Promise.all(t)}}async ROt(){if(this.GFt){const s=[];for(const[i,e]of Object.entries(this.GFt)){let t;if(e.EOt&&2<=this.K3t.JM())e.src=e.EOt,t=M.ny.gx.j_();else{if(!e.AOt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.AOt,t=M.ny.gx.W_()}s.push(this.K3t.TR(Object.assign({wx:t,name:i},e)))}await Promise.all(s),this.K3t.IR(),this.K3t.Uw()}this.K3t.jE()&&(this.AFt=M.an(M.ny.lP,this.K3t))}async CAt(){this.Z3t?await this.COt():this.K3t&&await this.ROt();const t=this.qb();t.pb(this.dw),t.jE()&&(this.EFt=0);for(const s of this.uf.FOt()){for(const i of s.i5())i.CAt(t);s.CAt(t),s.W6()}this.Q3t=new self.nV(this.uf,t)}ln(){this.uf=null,this.K3t=null,this.X3t.length=0}ZF(){return this.uf.ZF()}fOt(t){const s=this.uf;if(!s.OOt()){const i=t.devicePixelRatio,e=(this.ZF()&&(self.devicePixelRatio=i),s.DOt(i),this.MFt=!!t.isFullscreen,this.hFt=t.cssDisplayMode,this.cC(t.innerWidth,t.innerHeight),s.DD(),new M.Event("window-resize")),h=(e.data=t,s.Uf().Qf(e),new M.Event("resize"));h.kOt=this.Hk(),h.LOt=this.Jk(),h.NOt=this.$k(),h.BOt=this.Yk(),s.WX(h),s.jX()&&(s.P1t()||self.C3Debugger.IsDebuggerPaused())&&s.A3()}}dOt(t){this.MFt=!!t.isFullscreen,this.cC(t.innerWidth,t.innerHeight,!0),this.uf.DD()}pOt(t){this.MFt=!!t.isFullscreen,this.cC(t.innerWidth,t.innerHeight,!0),this.uf.DD()}cC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.iFt!==t||this.eFt!==s||i){this.iFt=t,this.eFt=s;const e=this.WOt();"letterbox-scale"===e?this.jOt(t,s):"letterbox-integer-scale"===e?this.VOt(t,s):"off"===e?this.UOt(t,s):this.HOt(t,s),this.zOt(e);for(const{canvas:r}of this.X3t)r.width=this.oFt,r.height=this.aFt;this.uf.df("canvas","update-size",{marginLeft:this.lFt,marginTop:this.uFt,styleWidth:this.nFt,styleHeight:this.rFt,displayScale:this.e8()});const h=this.qb();h.cC(this.oFt,this.aFt,!0);for(const o of this.xFt)h.DE(o);M.Br(this.xFt),this.JOt();const n=this.uf.lD();n.uY(),n.cY()}}JOt(){this.qb().Ow(this.SFt,this.PJ()/this.RJ())}EJ(){return this.SFt}jOt(t,s){const i=this.uf.Kk(),e=this.uf.tO(),h=this.uf.iO(),n=e/h,r=t/s;if(n<r){const o=s*n;this.nFt=Math.round(o),this.rFt=s,this.lFt=Math.floor((t-this.nFt)/2),this.uFt=0}else{const a=t/n;this.nFt=t,this.rFt=Math.round(a),this.lFt=0,this.uFt=Math.floor((s-this.rFt)/2)}this.oFt=Math.round(this.nFt*i),this.aFt=Math.round(this.rFt*i),this.uf.qOt(e,h)}VOt(t,s){let i=this.uf.Kk(),e=(1!==i&&(t+=1,s+=1),this.uf.tO()),h=this.uf.iO(),n=e/h,r=t/s,o;if(n<r){const a=s*n;o=a*i/e}else{const l=t/n;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.oFt=Math.round(e*o),this.aFt=Math.round(h*o),this.nFt=this.oFt/i,this.rFt=this.aFt/i,this.lFt=Math.max(Math.floor((t-this.nFt)/2),0),this.uFt=Math.max(Math.floor((s-this.rFt)/2),0),this.uf.qOt(e,h)}HOt(t,s){const i=this.uf.Kk(),e=(this.nFt=t,this.rFt=s,this.oFt=Math.round(this.nFt*i),this.aFt=Math.round(this.rFt*i),this.lFt=0,this.uFt=0,this.e8());this.uf.qOt(this.nFt/e,this.rFt/e)}UOt(t,s){const i=this.uf.Kk();this.nFt=this.uf.G9(),this.rFt=this.uf.T9(),this.oFt=Math.round(this.nFt*i),this.aFt=Math.round(this.rFt*i),this.$Ot()?(this.lFt=Math.floor((t-this.nFt)/2),this.uFt=Math.floor((s-this.rFt)/2)):(this.lFt=0,this.uFt=0),this.uf.qOt(this.uf.G9(),this.uf.T9())}zOt(i){if("high"===this.bFt)this.t3=this.oFt,this.s3=this.aFt,this.vFt="high";else{let t,s;if(s="off"===this.WOt()?(t=this.uf.G9(),this.uf.T9()):(t=this.uf.tO(),this.uf.iO()),this.oFt<t||this.aFt<s)this.t3=this.oFt,this.s3=this.aFt,this.vFt="high";else if(this.t3=t,this.s3=s,this.vFt="low","scale-inner"===i){const e=t/s,h=this.iFt/this.eFt;h<e?this.t3=this.s3*h:e<h&&(this.s3=this.t3/h)}else if("scale-outer"===i){const n=t/s,r=this.iFt/this.eFt;n<r?this.t3=this.s3*r:r<n&&(this.s3=this.t3/r)}}}XD(){return this.uf}XOt(){return this.X3t[0].canvas}rz(){return this.TFt}$Ot(){return this.MFt}YOt(){return this.hFt}KOt(t){if(!Aa.has(t))throw new Error("invalid fullscreen mode");this.mFt=t;const s=this.uf.lD();s.uY(),s.cY()}s8(){return this.mFt}ZOt(t){if(!Aa.has(t))throw new Error("invalid fullscreen mode");this.gFt=t;const s=this.uf.lD();s.uY(),s.cY()}QOt(){return this.gFt}WOt(){return this.$Ot()?this.QOt():this.s8()}tDt(t){if(!Fa.has(t))throw new Error("invalid fullscreen scaling quality");this.bFt=t,this.uf.lD().uY()}sDt(){return this.bFt}BJ(){return this.vFt}static iDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Vj(){return this.iFt}Uj(){return this.eFt}PJ(){return this.t3}RJ(){return this.s3}pb(t){this.dw=!!t}eDt(t){this.pFt=t}kH(){return this.pFt}hDt(){return this.qb().WC()}mOt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.xFt=[],this._Ft.clear(),this.TFt.Sv(),this.K3t.Sv(),this.uf.B$()}vOt(){console.log("[Construct] WebGPU device lost"),this.xFt=[],this._Ft.clear(),this.TFt.Sv(),this.uf.B$()}async gOt(t){await this.K3t.bv(),await this.CAt(),await this.uf.nDt(),console.log("[Construct] WebGL context restored")}async xOt(){await this.CAt(),await this.uf.nDt(),console.log("[Construct] WebGPU device restored")}rDt(){return this.K3t}oDt(){return this.Z3t}qb(){return this.Z3t||this.K3t}LIt(){return this.Q3t}Bk(){let t="";return t=this.uf.oDt()?"webgpu":"webgl"+this.uf.rDt().JM(),this.uf.qb().yb()&&(t+="-software"),t}Vk(){return this.uf.oDt()?this.uf.oDt().GetAdapterInfoString():this.uf.rDt().YE()}FN(){return"low"===this.vFt?1/this.uf.Kk():this.e8()}e8(){const t=this.WOt();if("off"===t||"crop"===t)return 1;const s=this.uf.tO(),i=this.uf.iO(),e=s/i,h=this.oFt/this.aFt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.rFt/i:this.nFt/s}lq(){return"low"===this.BJ()?1:this.e8()}oq(){return"low"===this.BJ()?1:this.uf.Kk()}aDt(t,s){this.yFt=t,this.wFt=s}HV(s,i,e,t=!0){i=i||this.t3,e=e||this.s3;const h=i/2+this.yFt,n=e/2+this.wFt;if(t){let t=this.EJ();i===this.t3&&e===this.s3||(s.Ow(Da,i/e),t=Da),s.PR(t)}const r=s.Nw(h,n,s.bw(e),h,n,0,e);s.DR(r)}lDt(t,s=!0){const i=this.Hk(),e=this.Jk(),h=i/2,n=e/2,r=(s&&t.PR(this.EJ()),t.Nw(h,n,t.bw(e),h,n,0,e));t.DR(r)}$k(){return this.oFt}Yk(){return this.aFt}Hk(){return this.nFt}Jk(){return this.rFt}_N(){return this.lFt}GN(){return this.uFt}M$(){return this.X3t.length}uDt(){return"undefined"!=typeof OffscreenCanvas&&this.XOt()instanceof OffscreenCanvas&&("Chromium"!==M.li.yi||124<=M.li.gi)}async H$(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.X3t.length!==e){let t=this.uf.lD().rD(),s={count:e,layersDomState:t.s9().filter(t=>t.K5()).map(t=>t.nJ()),immediate:h,marginLeft:this.lFt,marginTop:this.uFt,styleWidth:this.nFt,styleHeight:this.rFt},i;if(i=this.ZF()?await this.uf.LD("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.X3t.length)this.X3t.length=e;else for(const n of i.addedCanvases){n.width=this.oFt,n.height=this.aFt;const r=this.uDt()?"bitmaprenderer":"2d",o=n.getContext(r);if(!o)throw new Error(`failed to acquire '${r}' canvas context`);this.X3t.push({canvas:n,cOt:o})}this.uf.DD()}}LX(t){if(!(t>=this.X3t.length)){const s=this.XOt(),i=this.X3t[t].cOt;this.uDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}WJ(s){s.depth=this.uf.D9();let t=this.xFt,i=t.findIndex(t=>t.ix(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.qb().RE(s),this._Ft.add(e),e}az(t){if(!this._Ft.has(t))throw new Error("render target not in use");this._Ft.delete(t),this.xFt.push(t)}IFt(){const t={IM:this.uf.eO()};return"low"===this.BJ()&&(t.width=this.PJ(),t.height=this.RJ()),this.WJ(t)}CFt(t){this.az(t)}*cDt(){for(const t of this.uf.lD().rY())for(const s of t.y5()){const i=this.FFt.get(s);i&&(yield i)}}DJ(t){if(!this.qb().jE())return null;let s=this.FFt.get(t);return s||(s={Z4:t,name:t.Qc(),fDt:M.an(M.ny.lP,this.K3t),dDt:0,pDt:0,mDt:0},this.FFt.set(t,s)),s.fDt}gDt(){const t=this.qb();if(t.jE()&&0===this.RFt){this.RFt=t.cb(),this.OFt=NaN;for(const s of this.cDt())s.dDt=NaN}}yDt(){this.K3t&&this.K3t.jE()&&this.wDt(),this.Z3t&&this.Z3t.jE()&&this.SDt()}wDt(){if(isNaN(this.OFt)&&(this.OFt=this.AFt.gP(this.PFt,this.RFt),!isNaN(this.OFt))){if(this.uf.jX())for(const t of this.cDt())if(t.dDt=t.fDt.gP(this.PFt,this.RFt),isNaN(t.dDt))return;if(this.AFt.yP(this.RFt),this.EFt=Math.min(this.OFt,1),this.uf.jX()){const i=new Map;for(const h of this.cDt())h.fDt.yP(this.RFt),h.pDt=Math.min(h.dDt,1),i.set(h.Z4,h.pDt);for(const n of this.cDt()){const r=n.Z4,o=i.get(r)||0,a=o-r.W5().reduce((t,s)=>t+(i.get(s)||0),0);n.mDt=M.mn(a,0,1)}const s=this.uf.rD(),e=this.EFt-s.s9().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.mn(e,0,1),this.EFt,[...this.cDt()])}this.PFt=this.RFt,this.RFt=0}}bDt(){return this.AFt}SDt(){if(0!==this.RFt){for(let t=this.PFt;t<this.RFt;++t){const i=this.DFt.get(t);if(i&&!i.ZC())return}let t=this.uf.rD(),r=M.Uo(t.g$()+1,0),s=0;for(let t=this.PFt;t<this.RFt;++t){const o=this.DFt.get(t);if(o){let i=o.QC(),e=BigInt(0),h=BigInt(0),n=BigInt(0);for(let t=0,s=Math.min(r.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==n&&(e===n||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;r[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.EFt=M.mn(s,0,1),this.uf.jX()){const e=t.y5(),h=new Map;for(let t=0,s=Math.min(e.length,r.length-1);t<s;++t){const g=r[t+1];h.set(e[t],g)}const n=[],p=new Map;for(const[y,w]of h){const S=[...y.V5()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,S),n.push({name:y.Qc(),mDt:M.mn(w,0,1),pDt:M.mn(S,0,1)})}const m=this.EFt-t.s9().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.mn(m,0,1),this.EFt,n)}for(let t=this.PFt;t<this.RFt;++t)this.DFt.delete(t);this.PFt=this.RFt,this.RFt=0}}vDt(t){this.DFt.set(this.Z3t.cb(),t)}XO(){return this.EFt}MDt(t,s,i,e,h,n){return this.kFt=t,this.LFt=s,this.NFt.gl(i,e,h,n),this.WFt||(this.WFt=new Promise(t=>{this.jFt=t})),this.WFt}xDt(){if(this.kFt){let t=this.XOt(),s=this.NFt,i=M.mn(Math.floor(s._l()),0,t.width),e=M.mn(Math.floor(s.Gl()),0,t.height),h=s.width(),n=(h=0===h?t.width-i:M.mn(Math.floor(h),0,t.width-i),s.height());if(n=0===n?t.height-e:M.mn(Math.floor(n),0,t.height-e),(0!==i||0!==e||h!==t.width||n!==t.height)&&0<h&&0<n){const r=M.Ao(h,n),o=r.getContext("2d");o.drawImage(t,i,e,h,n,0,0,h,n),t=r}M.Fo(t,this.kFt,this.LFt).then(t=>{this.BFt&&URL.revokeObjectURL(this.BFt),this.BFt=URL.createObjectURL(t),this.WFt=null,this.jFt(this.BFt)}),this.kFt="",this.LFt=1}}_Dt(){return this.BFt}GDt(t){t?this.VFt++:this.VFt--}TDt(){return 0<this.VFt}IDt(t){const s=this.qb();if(2===t)this.qFt=M.an(M.ny._b,this.qb()),this.qFt.jI("Arial"),this.qFt.VI(16),this.qFt.iC("center"),this.qFt.hC("center"),this.qFt.cC(300,200);else if(0===t){const i=this.uf.CDt();i&&i.kV(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.PDt("splash-images/splash-logo.svg").then(t=>{"done"===this.sOt?s.B2(t):this.$Ft.XFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.RDt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.sOt?s.B2(t):this.$Ft.YFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.RDt("splash-images/splash-website-512.png").then(t=>{"done"===this.sOt?s.B2(t):this.$Ft.KFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async PDt(t){t=new URL(t,this.uf.EDt()).toString();const s=await M.Go(t),i=await this.uf.ADt(s,2048,2048);return this.qb().PE(i,{EM:"high"})}async RDt(t){t=new URL(t,this.uf.EDt()).toString();const s=await M.Go(t);return this.qb().PE(s,{EM:"high"})}FDt(){this.uf.df("runtime","hide-cordova-splash")}ODt(){this.UFt=Date.now(),this.uf.Uf().addEventListener("loadingprogress",this.JFt),this.HFt=requestAnimationFrame(()=>this.DDt());const t=this.uf.kDt();3!==t&&this.FDt()}async LDt(){const t=this.qb(),s=(this.zFt=1,this.uf.kDt());4===s&&await this.eOt,this.iOt=null,this.eOt=null,-1!==this.HFt&&(cancelAnimationFrame(this.HFt),this.HFt=-1),this.uf.Uf().removeEventListener("loadingprogress",this.JFt),this.JFt=null,this.qFt&&(this.qFt.ln(),this.qFt=null),this.uf.NDt(),t.SE(),this.$Ft.XFt&&(t.B2(this.$Ft.XFt),this.$Ft.XFt=null),this.$Ft.YFt&&(t.B2(this.$Ft.YFt),this.$Ft.YFt=null),this.$Ft.KFt&&(t.B2(this.$Ft.KFt),this.$Ft.KFt=null),t.wE(0,0,0,0),t.lb(),this.sOt="done",this.PFt=t.cb(),3===s&&this.FDt()}DDt(){if(-1!==this.HFt){const t=this.qb(),s=(t.SE(),this.HFt=-1,this.uf.jF().lH()),i=this.uf.kDt();if(3!==i&&(this.lDt(t),t.wE(0,0,0,0),t.UR(),t.Uw(),t.zR(null)),0===i)this.BDt(s);else if(1===i)this.WDt(s,120,0);else if(2===i)this.jDt(s);else if(3===i)M.Dr();else{if(4!==i)throw new Error("invalid loader style");this.VDt(s)}t.lb(),this.HFt=requestAnimationFrame(()=>this.DDt())}}jDt(t){t?this.qFt.sC(1,0,0):this.qFt.sC(.6,.6,.6),this.qFt.pf(Math.round(100*this.zFt)+"%");const s=this.nFt/2,i=this.rFt/2,e=(ka.lu(s-150,i-100,150+s,100+i),this.qb());e.zR(this.qFt.z2()),e.OS(ka,this.qFt.VC())}WDt(t,s,i){const e=this.qb(),h=(e.Xw(),t?e.jR(1,0,0,1):e.jR(.118,.565,1,1),this.nFt/2),n=this.rFt/2,r=s/2;x.gl(h-r,n-4+i,Math.floor(s*this.zFt),8),e.Rect(x),x.gl(h-r,n-4+i,s,8),x.offset(-.5,-.5),x.Ll(.5,.5),e.jR(0,0,0,1),e.BS(x),x.Ll(1,1),e.jR(1,1,1,1),e.BS(x)}BDt(t){const s=this.qb(),i=this.uf.CDt();if(i){const e=i.z2();if(e){const h=e.fm(),n=e.Gm(),r=this.nFt/2,o=this.rFt/2,a=h/2,l=n/2;ka.lu(r-a,o-l,r+a,o+l),s.zR(e),s.tu(ka),this.WDt(t,h,16+l)}else this.WDt(t,120,0)}else this.WDt(t,120,0)}VDt(t){let s=this.qb(),i=this.$Ft.XFt,e=this.$Ft.YFt,h=this.$Ft.KFt,n=Date.now(),r=(0===this.ZFt&&(this.UFt=n),this.uf.UDt()||this.uf.HDt()&&!this.uf.zDt()),o=r?0:200,a=r?0:3e3,l=1,u=("fade-in"===this.sOt?l=Math.min((n-this.UFt)/300,1):"fade-out"===this.sOt&&(l=Math.max(1-(n-this.tOt)/300,0)),s.Xw(),s.jR(.231*l,.251*l,.271*l,l),x.set(0,0,this.nFt,this.rFt),s.Rect(x),Math.ceil(this.nFt)),c=Math.ceil(this.rFt),f,d;256<this.rFt?(s.jR(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),x.gl(0,.8*c-d/2,f,d),s.Rect(x),t?s.jR(l,0,0,l):s.jR(.161*l,.953*l,.816*l,l),f=u*this.zFt,x.gl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(x),s.jR(l,l,l,l),s.Uw(),e&&(f=1.5*M.mn(.22*c,105,.6*u),d=f/8,x.gl(.5*u-f/2,.2*c-d/2,f,d),s.zR(e),s.Rect(x)),i&&(f=Math.min(.395*c,.95*u),d=f,x.gl(.5*u-f/2,.485*c-d/2,f,d),s.zR(i),s.Rect(x)),h&&(f=1.5*M.mn(.22*c,105,.6*u),d=f/8,x.gl(.5*u-f/2,.868*c-d/2,f,d),s.zR(h),s.Rect(x))):(s.jR(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),x.gl(0,.85*c-d/2,f,d),s.Rect(x),t?s.jR(l,0,0,l):s.jR(.161*l,.953*l,.816*l,l),f=u*this.zFt,x.gl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(x),s.jR(l,l,l,l),s.Uw(),i&&(f=.55*c,d=f,x.gl(.5*u-f/2,.45*c-d/2,f,d),s.zR(i),s.Rect(x))),this.ZFt++,"fade-in"===this.sOt&&300<=n-this.UFt&&2<=this.ZFt&&(this.sOt="wait",this.QFt=n),"wait"===this.sOt&&n-this.QFt>=a&&1<=this.zFt&&(this.sOt="fade-out",this.tOt=n),("fade-out"===this.sOt&&n-this.tOt>=300+o||r&&1<=this.zFt&&n-this.UFt<500)&&this.iOt()}}}{let V=self.Ns,U=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},r=!0;V.JDt=class extends V.nn{constructor(t){t=Object.assign({},i,t),super(),this.qDt=t.messagePort,this.$Dt=t.runtimeBaseUrl,this.XDt=t.previewUrl,this.YDt=!!t.headless,this.KDt=!!t.hasDom,this.ZDt=!!t.isInWorker,r=t.ife,this.QDt=!!t.useAudio,this.tkt=t.exportType,this.skt=t.isNWjs,this.fU=!!t.isiOSCordova,this.ikt=!!t.isiOSWebView,this.ekt=!!t.isWindowsWebView2,this.hkt=!!t.isAnyWebView2Wrapper,this.nkt=!!t.isFBInstantAvailable,this.rkt=!("preview"!==this.tkt||!t.isDebug),this.okt=this.rkt,this.akt=this.rkt,this.lkt=0,this.ukt=[],this.ckt=[],this.fkt=!1,this.dkt="",this.pkt="",this.mkt="",this.gkt="",this.ykt=0,this.wkt=0,this.l3=self.devicePixelRatio,this.Skt=0,this.bkt=0,this.vkt=0,this.Mkt=0,this.xkt=0,this._kt=!1,this.Wg=!0,this.Gkt=!1,this.Tkt=!1,this.Ikt=!1,this.Ckt=null,this.xH=V.an(V.aU,this,t),this.Tq=V.an(V.HX,this),this.Zft=V.an(V.X0t,this),this.Pkt=V.an(V.eL,this,t.wrapperComponentIds),this.Rkt=V.an(V.zAt,this),this._Q=V.an(V.fY,this),this.Ekt=V.an(V.Wlt,this),this.Akt=V.an(V.Vlt,this),this.iut=V.an(V.Ylt,this),this.Dg=V.an(V.xg,{Tg:t=>this.Fkt(t),Cg:t=>this.Okt(t)}),this.Dkt=new Map,this.kkt=[],this.Lkt=new Map,this.Nkt=new Map,this.Bkt=0,this.Wkt=[],this.jkt=new Set,this.Vkt=[],this.Ukt=[],this.Hkt=new Map,this.zkt=!1,this.Jkt=!1,this.qkt=0,this.$kt=0,this.Xkt=new Map,this.Ykt=new Set,this.Kkt=new Set,this.Zkt=[],this.Qkt=[],this.tLt=null,this.sLt=!1,this.iLt="vsync",this.NM="trilinear",this.eLt=!1,this.hLt=!0,this.nLt=!1,this.rLt=!1,this.oLt=null,this.aLt={lLt:t=>{this.HFt=-1,this.uLt=-1,this.kK(t)},cLt:t=>{this.uLt=-1,this.kK(t,!1,"skip-render")},fLt:()=>{this.HFt=-1,this.A3()}},this.HFt=-1,this.uLt=-1,this.dLt=0,this.pLt=0,this.mLt=!1,this.gLt=!1,this.yLt=!1,this.wLt=!0,this.SLt=!0,this.bLt=!1,this.vLt=0,this.MLt=new V.md(1),this.xLt=()=>Math.random(),this._Lt=0,this.GLt=0,this.TLt=0,this.ILt=0,this.CLt=0,this.OCt=1,this.PLt=1/30,this.RLt=0,this.ELt=V.an(V._0),this.ALt=V.an(V._0),this.FLt=V.an(V._0),this.OLt=new Map,this.DLt=-1,this.kLt=0,this.LLt=0,this.NLt=-1,this.BLt=0,this.WLt=0,this.jLt=0,this.VLt=!1,this.ULt="",this.HLt=!1,this.zLt="",this.N4=null,this.JLt="",this.qLt=null,this.$Lt=null,this.NTt=V.an(V.Event.Uf),this.XLt=new Map,this.YLt=new Map,this.KLt=0,this.ZLt=!1,this.QLt=!1,this.t5t=!1,this.s5t=[],this.i5t={pretick:V.an(V.Event,"pretick",!1),tick:V.an(V.Event,"tick",!1),tick2:V.an(V.Event,"tick2",!1),instancecreate:V.an(V.Event,"instancecreate",!1),instancedestroy:V.an(V.Event,"instancedestroy",!1),beforelayoutchange:V.an(V.Event,"beforelayoutchange",!1),layoutchange:V.an(V.Event,"layoutchange",!1)},this.i5t.instancecreate.F6=null,this.i5t.instancedestroy.F6=null,this.e$=V.an(V.Event.Uf),this.e5t=null;const s=(t,s)=>V.ACt.mAt(this,t,s);this.h5t=V.an(V.F0,s),this.n5t=V.an(V.F0,s),this.r5t=V.an(V.F0,s),this.o5t=V.an(V.a5t,this,t.jobScheduler),t.canvas&&(this.tLt=V.an(V.$3t,this)),this.qDt.onmessage=t=>this._OnMessageFromDOM(t.data),this.T4("runtime","visibilitychange",t=>this.l5t(t)),this.T4("runtime","wrapper-extension-message",t=>this.u5t(t)),this.T4("runtime","opus-decode",t=>this.uk(t.arrayBuffer)),this.T4("runtime","get-remote-preview-status-info",()=>this.c5t()),this.T4("runtime","js-invoke-function",t=>this.xdt(t)),this.T4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.T4("runtime","offline-audio-render-completed",t=>this.f5t(t)),this.NTt.addEventListener("window-blur",t=>this.d5t(t)),this.NTt.addEventListener("window-focus",()=>this.p5t()),this._Q.zY(),this.Akt.zY(),this.m5t=null,this.g5t=new WeakMap,this.y5t={keyboard:null,yD:null,wD:null,SD:null},this.w5t=new WeakMap,this.S5t=[]}static vx(t){return V.an(V.JDt,t)}ln(){V.Br(this.kkt),this.Lkt.clear(),this.Nkt.clear(),this.Tq.ln(),this.Tq=null,this.Zft.ln(),this.Zft=null,this.Pkt.ln(),this.Pkt=null,this.xH.ln(),this.xH=null,this.Rkt.ln(),this.Rkt=null,this._Q.ln(),this._Q=null,this.Ekt.ln(),this.Ekt=null,this.Akt.ln(),this.Akt=null,this.iut.ln(),this.iut=null,this.Dg.ln(),this.Dg=null,this.tLt&&(this.tLt.ln(),this.tLt=null),this.NTt.ln(),this.NTt=null,this.b5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.v5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.M5t(t)}}v5t(t){if(this.t5t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),r=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const l=new V.Event(i);l.data=e,this.NTt.Qf(l)}if(r){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.WX(u)}}const a=this.XLt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.x5t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.x5t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.x5t(o,!1,""+t)}):this.x5t(o,!0,t))}else n||r||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else n||r||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.s5t.push(t)}x5t(t,s,i){this.qDt.postMessage({type:"result",responseId:t,isOk:s,result:i})}M5t(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.YLt.get(s);i?h.resolve(e):h.reject(e),this.YLt.delete(s)}T4(t,s,i){let e=this.XLt.get(t);if(e||(e=new Map,this.XLt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}df(t,s,i,e){this.qDt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}LD(t,s,i,e){const h=this.KLt++,n=new Promise((t,s)=>{this.YLt.set(h,{resolve:t,reject:s})});return this.qDt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),n}T8(t,s,i,e=-1){this.df("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}I8(t,s,i){const e=this.KLt++,h=new Promise((t,s)=>{this.YLt.set(e,{resolve:t,reject:s})});return this.T8(t,s,i,e),h}u5t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.YLt.get(s);i.resolve(t.params),this.YLt.delete(s)}else this.v5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}V4(t,s,i){this.T4("wrapper-extension:"+t,s,i)}W4(t){return this.Pkt.W4(t)}_5t(t){if(!this.jX())throw new Error("not in debug mode");this.df("runtime","post-to-debugger",t)}async LCt(t){V.fvt(this),this.jX()?await U.LCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.xH._o("data.json"),this.G5t(),this.o5t.LCt()]);if(await this.T5t(s),await this.I5t(t),this.UDt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.rDt()){const i=this.rDt();console.info(`[C3 runtime] Hosted in ${this.ZF()?"worker":"DOM"}, rendering with WebGL ${i.JM()} [${i.YE()}]`)}else this.oDt()&&console.info(`[C3 runtime] Hosted in ${this.ZF()?"worker":"DOM"}, rendering with WebGPU [${this.oDt().GetAdapterInfoString()}]`);this.qb().yb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.t5t=!0;for(const e of this.s5t)this.v5t(e);V.Br(this.s5t),this.tLt&&this.tLt.ODt();for(const h of t.runOnStartupFunctions)this.ukt.push(this.C5t(h));if(await Promise.all([this.xH.oH(),...this.ukt]),V.Br(this.ukt),!this.xH.lH())return this.tLt&&await this.tLt.LDt(),await this.NTt.Kf(new V.Event("beforeruntimestart")),await this.SE(),this.qDt.postMessage({type:"runtime-ready"}),this;this.tLt&&this.tLt.FDt()}async C5t(t){try{await t(this.m5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async T5t(t){const s=t.project,i=(this.dkt=s[0],this.pkt=s[16],this.mkt=s[31],this.gkt=s[38],s[39]||"loading-logo.png"),e=(this.eLt=!!s[9],this.ykt=this.vkt=s[10],this.wkt=this.Mkt=s[11],this.Rkt.E3t(this.ykt,this.wkt),this.Skt=this.ykt/2,this.bkt=this.wkt/2,this.iLt=s[37],this.sLt=!!s[40],this.NM=s[14],this.Gkt=s[15],this.Tkt=s[42],this.Ikt=s[17],this._kt=!!s[18],this.xkt=s[19],this.$kt=s[21],this.nLt=s[22],this.xH);if(e.NU(s[45]),e.pH(s[7],s[25]),e.WU(s[8]),e.jU(s[32]),e.UU(s[28]),e.cH(s[29]),0===this.xkt){let t;(t="flat"===e.hk()?e.HU()+i:i)&&(this.Ckt=e.tH({url:t}))}this.tLt&&(this.tLt.KOt(V.$3t.iDt(s[12])),this.tLt.tDt(s[23]?"high":"low"),this.tLt.pb(0!==s[24]),this.tLt.hOt(s[34]),this.tLt.eDt(s[41]),this.tLt.nOt(s[13]),this.tLt.rOt(s[30]),this.tLt.lOt(s[46],s[47]),this.tLt.aOt(s[26]),this.tLt.uOt(s[48]));const h=s[43],n=(h&&await this.P5t(h),this.R5t(),this.Pkt.GGt(),this.Zkt=self.E5t(),s[2]);for(const l of n[1])this.Pkt.TGt(l);for(const u of n[0])this.Pkt._Gt(u);this.Zkt=self.E5t(),this.A5t(),this.Pkt.RGt();for(const c of s[3]){const f=V.qlt.vx(this,this.kkt.length,c);this.kkt.push(f),this.Lkt.set(f.Qc().toLowerCase(),f),this.Nkt.set(f.i9(),f)}for(const d of s[4]){const p=this.kkt[d[0]];p.MIt(d)}for(const m of s[27]){const g=m.map(t=>this.kkt[t]);this.Wkt.push(V.an(V.vCt,this,g))}this.F5t();for(const y of this.kkt)y._It();for(const w of s[5])this.Tq.vx(w);const r=s[1];if(r){const S=this.Tq.sY(r);S&&this.Tq.QX(S)}for(const b of s[35])this.Ekt.vx(b);for(const v of s[33])this._Q.vx(v);for(const M of s[44])this.Akt.vx(M);this.Akt.zlt()||(this.Akt.ln(),this.Akt=null);for(const x of s[49])this.iut.vx(x);this.iut.tut()||(this.iut.ln(),this.iut=null);for(const _ of s[6])this.Zft.vx(_);this.Zft.Tdt(),this.O5t(),V.Br(this.Zkt),this.QL();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.df("runtime","set-target-orientation",{targetOrientation:o})}async P5t(t){const s=t.format;"image-sequence"===s?this.oLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.oLt=new self.C3ExportToGIF(this,t):"webm"===s?this.oLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.oLt=new self.C3ExportToMP4Video(this,t)),this.iLt="unlimited-frame",this.tLt.KOt("off"),this.l3=1,self.devicePixelRatio=1,await this.LD("runtime","set-exporting-to-video",{message:this.oLt.GetExportingMessageForPercent(0),duration:this.oLt.oW()})}kDt(){return this.xkt}OOt(){return null!==this.oLt}D5t(){return this.oLt.oW()}k5t(){return this.oLt.GetFramerate()}L5t(){return this.oLt.LCt({width:this.tLt.$k(),height:this.tLt.Yk()})}N5t(){const t=this.dLt/this.k5t();return this.oLt.AddFrame(this.tLt.XOt(),t)}B5t(){this.oLt&&this.oLt.Fit()}f5t(t){this.oLt.OnOfflineAudioRenderCompleted(t)}W5t(){return this.oLt.lb()}HDt(){return this.nkt}zg(){return this.Wg}jD(t){this.ukt.push(t)}J$(t){this.fkt=!!t}j5t(t){this.fkt&&this.ckt.push(t)}Z$(){return this.ckt}mIt(){return this.Bkt++}TIt(){return this.Bkt}_At(t){this.jkt.add(t)}GAt(t){this.jkt.delete(t)}FOt(){return this.jkt}async I5t(t){this.tLt&&(await this.tLt.Ao(t),this.tLt.IDt(this.xkt))}async G5t(){const h=this.xH;if(!h.HD("audio/webm; codecs=opus")){let t=null,s=h.BU(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.V5t()&&h.zU()?await h.qU(e):await h.To(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.U5t(t,"opus-decoder-wasm"),await this.H5t([i])}}async uk(t){const s=await this.z5t("OpusDecode",{arrayBuffer:t},[t]);return s}async SE(){this.mLt=!0,this._Lt=Date.now();let s=null,t=new Promise(t=>s=t);if(this._kt){for(const h of this.kkt)h.$z()||h.DIt()||!h.aL()||h._xt();(async()=>{await this.xH.oH(),await t,this.Wg=!1,this.J5t()})()}else this.Wg=!1;this.xH.aH(),this.jX()&&U.RuntimeInit(r);for(const n of this.Tq.fD())n.yX();this.OOt()&&await this.L5t();const i=this.Tq.tY(),e=(await i.R$(null,this.qb()),await i.W$(!0),this.kLt=performance.now(),s(),this._kt||this.J5t(),await this.LD("runtime","before-start-ticking"));e.isSuspended&&!this.OOt()?(this.vLt++,this.bLt=!0):this.kK()}J5t(){this.M4(V.uX.lX.aX.q5t,null,null),this.df("runtime","register-sw")}Ayt(t){t=Math.floor(t);const s=this.Zkt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}A5t(){for(const t of self.$5t){const s=V.first(Object.keys(t));this.Qkt.push(s)}}Ydt(t){t=Math.floor(t);const s=this.Qkt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}X5t(){return this.KDt}Y5t(){return this.YDt}ZF(){return this.ZDt}EDt(){return this.$Dt}K5t(){return this.XDt}pO(){return this.Zft}IO(){return this.Zft.IO()}Wdt(){return this.Zft.Wdt()}bO(){return this.Zft.bO()}jdt(){return this.Zft.jdt()}uvt(){return 0===this.Wdt().y0t()}Udt(){return this.Zft.Udt()}dAt(){return this.Pkt}Pwt(){return this.Pkt.Pwt()}xz(t){if((t=Math.floor(t))<0||t>=this.kkt.length)throw new RangeError("invalid index");return this.kkt[t]}Z5t(t){return this.Lkt.get(t.toLowerCase())||null}L8(t){return this.Nkt.get(t)||null}Zht(t){const s=V.eL.ML(t);return s?s.TL():null}qz(){return this.kkt}*Q5t(){for(const t of this.kkt)t.$z()||(yield*t.instances())}Uf(){return this.NTt}uO(){return this.e$}WX(t){t.runtime=this.hL();const s=this.jX()&&!this.Zft.KL();s&&U.StartMeasuringScriptTime(),this.e$.dispatchEvent(t),s&&U.AddScriptTime()}hX(t){return t.runtime=this.hL(),this.e$.Kf(t)}tO(){return this.ykt}iO(){return this.wkt}tNt(t,s){if(this.ykt!==t||this.wkt!==s){this.ykt=t,this.wkt=s;const i=this.lD();i.uY(),i.cY()}}G9(){return this.vkt}T9(){return this.Mkt}qOt(t,s){if(this.vkt!==t||this.Mkt!==s){this.vkt=t,this.Mkt=s;const i=this.lD();i.uY(),i.cY()}}DOt(t){this.OOt()||(this.l3=t)}Kk(){return this.l3}MJ(){return this.Skt}xJ(){return this.bkt}Wk(){return this.tLt}PJ(){return this.tLt?this.tLt.PJ():this.vkt}RJ(){return this.tLt?this.tLt.RJ():this.Mkt}FN(){return this.tLt?this.tLt.FN():1}e8(){return this.tLt?this.tLt.e8():1}lq(){return this.tLt?this.tLt.lq():1}oq(){return this.tLt?this.tLt.oq():1}_N(){return this.tLt?this.tLt._N():0}GN(){return this.tLt?this.tLt.GN():0}sNt(){return this.tLt?this.tLt.Hk():0}iNt(){return this.tLt?this.tLt.Jk():0}s8(){return this.tLt?this.tLt.s8():"off"}WJ(t){return this.tLt?this.tLt.WJ(t):null}az(t){this.tLt&&this.tLt.az(t)}NJ(){return this.Gkt}TOt(){return this.Tkt}IOt(){return this.Ikt}XO(){return this.tLt?this.tLt.XO():NaN}q2(){return"nearest"!==this.eO()}KO(){return this.iLt}ZO(t){this.iLt!==t&&(this.iLt=t,-1!==this.HFt||-1!==this.uLt)&&(this.eNt(),this.hNt())}eO(){return this.NM}SIt(){return this._kt}CDt(){return this.Ckt}NDt(){this.Ckt&&(this.Ckt.FI(),this.Ckt.ln(),this.Ckt=null)}lD(){return this.Tq}rD(){return this.Tq.rD()}ltt(){return this._Q}nNt(){return this.Ekt}dPt(){return this.Akt}_ut(){return this.iut}jF(){return this.xH}tH(t){return this.xH.tH(t)}qL(t,s,i,e,h,n){if(n&&this.Akt){if(t instanceof V.qlt&&t.$z()){const o=t.mgt(),a=Math.floor(this.nD()*o.length);return this.qL(o[a],s,i,e,h,n)}const r=this.Akt.Jlt(t,n);if(r){const l=this.Az(r,s,!1,i,e,!1,h,void 0,h);return this.Akt.$lt(l,n),l}}return this.Az(t,s,!1,i,e,!1,h,void 0,h)}Az(t,s,i,e,h,n,r,o,a){let l=null,u=null;if(t instanceof V.qlt){if((u=t).$z()){const b=u.mgt(),v=Math.floor(this.nD()*b.length);u=b[v]}l=u.Gz()}else l=t,u=this.xz(l[1]);const c=u.EL().aL();if(this.Wg&&c&&!u.DIt())return null;const f=s;c||(s=null);let d;d=i&&!n&&l&&!this.Xkt.has(l[2])?l[2]:this.$kt++;const p=l?l[0]:null,m=V.an(V.Instance,{runtime:this,DN:u,Z4:s,kCt:p,WCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.Xkt.set(d,m);let g=null,y=(c&&(g=m.CD(),void 0!==e&&void 0!==h&&(g.Pv(e),g.Av(h)),u.lCt(!0)),s&&(a||s.Oz(m,!0),s.uD().A$(u)),this.qkt++,!0);if(o){const M=o.kN();if(M.$N()&&u.$N()){const x=u.C$(),_=M.C$();x===_&&(y=!1)}}if(u.$N()&&!i&&!n&&y){const G=new Set;for(const T of u.C$().pX())if(T!==u){const I=this.rNt(T,g,G);if(I){const C=this.Az(I,f,!1,g?g.Cv():e,g?g.Ev():h,!0,!1,void 0,a);m.mX(C)}else{const N=this.Az(T,f,!1,g?g.Cv():e,g?g.Ev():h,!0,!1,void 0,a);m.mX(N)}}for(const P of m.XN()){P.mX(m);for(const R of m.XN())P!==R&&P.mX(R)}}if(c&&!i&&r&&this.oNt(m,p,g,s,e,h,a),u.$N()&&!i&&!n&&r)for(const E of m.XN()){const A=E.CD();if(A){const B=E.EL(),F=E.kN().Gz()[0];B.aL()?this.oNt(E,F,A,s,A.Cv(),A.Ev(),a):this.oNt(E,F,A,s,void 0,void 0,a)}}if(!n&&r){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.PB(),W=e-g.Cv()+O.Cv(),j=h-g.Ev()+O.Ev();O.tB(W,j)}u.hCt();const k=l?V.Kr(l[5]):null,L=l?l[4].map(t=>V.Kr(t)):null,w=c&&p&&p[13];if(w&&m.JCt(),m.FIt(k,L),w){const D=p[13];m.M6().jxt(D[2],D[0],D[1])}this.Ukt.push(m),this.zkt=!0,this.jX()&&U.InstanceCreated(m);const S=this.i5t.instancecreate;return S.F6=m,this.NTt.dispatchEvent(S),m}uRt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const n=this.Tq.iY(s),r=n.PD(i);return r.Cz(e)}rNt(t,s,i){const e=s?.fPt()??[];for(const h of e){const n=this.uRt(h),r=!!h[4],o=this.xz(n[1]);if(!i.has(n)&&t===o&&r)return i.add(n),n}}oNt(a,t,s,l,u,c,f){const i=s.EEt(),e=s.fPt();if(a.CD().AEt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],n=g[5],r=g[6],o;if(r)o=r;else{const b=this.Tq.iY(t),v=b.PD(s);o=v.Cz(i)}const y=this.xz(o[1]),w=a.pPt(y),S=d.has(y);if(w&&!S&&h){const M=a.mPt(y),x=(M.CD().LCt(o[0]),u+o[0][0]-p),_=c+o[0][1]-m;M.CD().tB(x,_),M.CD().AEt(n),a.NB(M,{UB:!!(e>>0&1),zB:!!(e>>1&1),qB:!!(e>>2&1),XB:!!(e>>3&1),KB:!!(e>>4&1),n6:!!(e>>5&1),QB:!!(e>>6&1),s6:!!(e>>7&1),e6:!!(e>>8&1)}),d.add(y)}else{const G=u+o[0][0]-p,T=c+o[0][1]-m,I=this.Az(o,l,!1,G,T,!1,!0,a,f);I.CD().AEt(n),a.NB(I,{UB:!!(e>>0&1),zB:!!(e>>1&1),qB:!!(e>>2&1),XB:!!(e>>3&1),KB:!!(e>>4&1),n6:!!(e>>5&1),QB:!!(e>>6&1),s6:!!(e>>7&1),e6:!!(e>>8&1)})}}}}UN(i){if(!this.Ykt.has(i)){let t=i.kN(),s=this.Hkt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.Hkt.set(t,s);if(this.jX()&&U.InstanceDestroyed(i),i.$Ct(),this.zkt=!0,i.$N())for(const e of i.XN())this.UN(e);for(const h of i.children())h.r6()&&this.UN(h);if(!this.Tq.ZL()&&!this.VLt){const n=this.pO();n.XL(!0),i.GPt(),n.XL(!1)}i.TPt(this.Tq.ZL())}}QL(){this.zkt&&(this.Jkt=!0,this.aNt(),this.lNt(),this.Jkt=!1,this.zkt=!1,this.DD())}aNt(){for(const t of this.Ukt){const s=t.kN();s.Oz(t);for(const i of s.e1t())i.Oz(t),i.hCt()}V.Br(this.Ukt)}lNt(){this.NTt.kf(!0);for(const[t,s]of this.Hkt.entries())this.uNt(t,s),s.clear();this.Hkt.clear(),this.NTt.kf(!1)}uNt(t,s){for(const i of s){const e=this.i5t.instancedestroy,h=(e.F6=i,this.NTt.dispatchEvent(e),this.Xkt.delete(i.YN()),this.OLt.delete(i),i.CD());h&&(h.DEt(),h.Nz(),h.$Ct()),this.Ykt.add(i),this.qkt--}V.$r(t.VL(),s),t.hCt(),this.Kkt.add(t);for(const n of t.e1t())V.$r(n.VL(),s),n.hCt(),this.Kkt.add(n);if(t.EL().aL()){const r=new Set([...s].map(t=>t.CD().PD()));for(const o of r)o.Z9(s)}}rCt(){return this.Ukt}*pMt(t){for(const s of this.rCt())t.$z()?s.kN().cvt(t)&&(yield s):s.kN()===t&&(yield s)}AIt(){return this.$kt++}OIt(t,s){this.Xkt.set(t,s)}A8(t){this.SLt!==(t=!!t)&&(this.SLt=!!t,this.SLt)&&this.bLt&&(this.D8(!1),this.bLt=!1)}F8(){return this.SLt}B$(){this.NTt.dispatchEvent(V.an(V.Event,"renderercontextlost")),this.D8(!0);for(const s of this.kkt)!s.$z()&&s.kIt()&&s.L$();const t=this.rD();t&&t.B$(),V.FGt.DH(),V.iH.DH()}async nDt(){await this.rD().R$(null,this.qb()),this.NTt.dispatchEvent(V.an(V.Event,"renderercontextrestored")),this.D8(!1),this.DD()}l5t(t){if(this.SLt){const s=t.hidden;this.D8(s),(this.bLt=s)||this.DD()}}d5t(t){this.UDt()&&this.nLt&&!V.li.bi&&!t.data.parentHasFocus&&(this.D8(!0),this.rLt=!0)}p5t(){this.rLt&&(this.D8(!1),this.rLt=!1)}hNt(){const t=this.aLt;"vsync"===this.iLt?-1===this.HFt&&(this.HFt=self.requestAnimationFrame(t.lLt)):"unlimited-tick"===this.iLt?(-1===this.uLt&&(this.uLt=V.fo(t.cLt)),-1===this.HFt&&(this.HFt=self.requestAnimationFrame(t.fLt))):-1===this.uLt&&(this.uLt=V.fo(t.lLt))}eNt(){-1!==this.HFt&&(self.cancelAnimationFrame(this.HFt),this.HFt=-1),-1!==this.uLt&&(V.do(this.uLt),this.uLt=-1)}OO(){return 0<this.vLt}D8(t){if(!this.OOt()){const s=this.OO(),i=(this.vLt+=t?1:-1,this.vLt<0&&(this.vLt=0),this.OO());if(!s&&i)console.log("[Construct] Suspending"),this.eNt(),this.NTt.dispatchEvent(V.an(V.Event,"suspend")),this.M4(V.uX.lX.aX.cNt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.GLt=e,this.kLt=e,this.DLt=0,this.LLt=0,this.NLt=0,this.BLt=0,this.jLt=0,this.WLt=0,this.NTt.dispatchEvent(V.an(V.Event,"resume")),this.M4(V.uX.lX.aX.fNt,null,null),this.P1t()||this.kK(e)}}}w8(t){this.h5t.fc(t)}M8(t){this.n5t.fc(t)}b8(t){this.r5t.fc(t)}S8(t){this.h5t.M0(t)}x8(t){this.n5t.M0(t)}v8(t){this.r5t.M0(t)}dNt(){const t=globalThis.p8;this.h5t.dd(!0);for(const s of this.h5t)s instanceof t?s.E4():s.kK();this.h5t.dd(!1)}pNt(){const t=globalThis.p8;this.n5t.dd(!0);for(const s of this.n5t)s instanceof t?s.G8():s.dGt();this.n5t.dd(!1)}mNt(){const t=globalThis.p8;this.r5t.dd(!0);for(const s of this.r5t)s instanceof t?s.F4():s.a_t();this.r5t.dd(!1)}*gNt(){const s=globalThis.p8;this.h5t.dd(!0);for(const i of this.h5t){let t;t=i instanceof s?i.E4():i.kK(),V.Vo(t)&&(yield*t)}this.h5t.dd(!1)}*yNt(){const s=globalThis.p8;this.n5t.dd(!0);for(const i of this.n5t){let t;t=i instanceof s?i.G8():i.dGt(),V.Vo(t)&&(yield*t)}this.n5t.dd(!1)}*wNt(){const s=globalThis.p8;this.r5t.dd(!0);for(const i of this.r5t){let t;t=i instanceof s?i.F4():i.a_t(),V.Vo(t)&&(yield*t)}this.r5t.dd(!1)}async kK(a,t,s){this.yLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.lD(),f=this.Wk();if(this.mLt&&(!this.OO()||t||l)){let t=performance.now(),s=(this.gLt=!0,this.SNt(a||0),this.NLt++,this.bNt(),this.vNt()),i=(this.aMt()&&await s,this.NTt.Zf(this.i5t.pretick)),e=(i instanceof Promise&&await i,this.MNt()),h=(this.aMt()&&await e,this.xNt()&&await this._Nt(),c.pD()&&await this.GNt(),this.TNt()),n=(this.aMt()&&await h,c.rD()),r=n.x$(),o=!1;if(-1!==r&&(n._$(),f.M$()!==r)){const d=this.Wk().H$(r);this.ZF()&&(o=!0,await d)}this.df("canvas","update-html-layer-dom-state",{layersDomState:n.s9().filter(t=>t.K5()).map(t=>t.nJ())}),u&&this.A3(),o&&this.df("canvas","cleanup-html-layers"),this.OOt()&&(await this.N5t(),this.NO()>=this.D5t())?this.W5t():(this.OO()||l||this.hNt(),this.dLt++,this.pLt++,this.gLt=!1,this.WLt+=performance.now()-t)}}async vNt(){const t=this.Zft,s=this.jX();this.QL(),t.XL(!0),this.y1t(this.rD()),s&&U.StartMeasuringTime(),this.aMt()?await t.Y1t():t.z1t(),s&&U.AddEventsTime(),this.w1t(),t.XL(!1),this.QL(),t.XL(!0)}async MNt(){const t=this.jX(),s=this.aMt(),i=this.NTt,e=this.i5t,h=this.e5t;t&&U.StartMeasuringTime(),s?await this.INt(this.gNt()):this.dNt(),s?await this.INt(this.yNt()):this.pNt(),t&&U.AddBehaviorTickTime(),t&&U.StartMeasuringTime(),s?await this.CNt(e.tick):i.dispatchEvent(e.tick),t&&U.AddPluginTickTime(),this.Zft.XL(!1),this.WX(h.tick)}async TNt(){const t=this.Zft,s=this.NTt,i=this.i5t,e=this.jX(),h=this.aMt();e&&U.StartMeasuringTime(),h?await t.S1t(this.Tq):t.g1t(this.Tq),e&&U.AddEventsTime(),this.Rkt.h3t(),this.bNt(),this.wLt=!1,t.XL(!0),e&&U.StartMeasuringTime(),h?await this.INt(this.wNt()):this.mNt(),e&&U.AddBehaviorTickTime(),e&&U.StartMeasuringTime(),h?await this.CNt(i.tick2):s.dispatchEvent(i.tick2),e&&U.AddPluginTickTime(),t.XL(!1),h&&await t.R1t()}bNt(){if(0!==this.Ykt.size){const t=this.NTt;t.kf(!0);for(const s of this.Kkt)s.B1t().Cft(this.Ykt);this.Kkt.clear(),this.Zft.Z1t(this.Ykt);for(const i of this.Ykt)i.ln();this.Ykt.clear(),t.kf(!1)}}async GNt(){let t=this.lD(),s=0;for(;t.pD()&&s++<10;)await this.PNt(t.lY())}SNt(t){let s=0;if(this.OOt())s=1/this.k5t(),this.TLt=s,this.ILt=s;else if(0!==this.GLt){const i=Math.max(t-this.GLt,0);.5<(s=i/1e3)&&(s=0),this.TLt=s,this.ILt=V.mn(s,this.RLt,this.PLt)}this.GLt=t,this.CLt=this.ILt*this.OCt,this.ELt.fc(this.CLt),this.ALt.fc(s*this.OCt),this.FLt.fc(this.ILt);for(const[e,h]of this.OLt)h.fc(this.ILt*e.jO());this.tLt&&this.tLt.yDt(),1e3<=t-this.kLt&&(this.kLt+=1e3,1e3<=t-this.kLt&&(this.kLt=t),this.LLt=this.DLt,this.DLt=0,this.BLt=this.NLt,this.NLt=0,this.jLt=Math.min(this.WLt/1e3,1),this.WLt=0,this.tLt&&this.tLt.gDt(),this.Rkt.t3t(),this.jX())&&U.Update1sPerfStats()}HCt(t,s){if(s){if(!this.OLt.has(t)){const i=V.an(V._0);i.P0(this.ELt),this.OLt.set(t,i)}}else this.OLt.delete(t)}zCt(t){const s=this.OLt.get(t);return s?s.ei():this.NO()}async PNt(t){const s=this.NTt,i=this.lD(),e=i.rD();await e.SX(),e.N$(t,this.qb()),e===t&&this.Zft.MX(),this.Rkt.h3t(),this.bNt(),s.dispatchEvent(this.i5t.beforelayoutchange),V.Nf.s0(!0),await t.R$(e,this.qb()),V.Nf.s0(!1),await t.W$(!1),s.dispatchEvent(this.i5t.layoutchange),this.DD(),this.wLt=!0,this.QL(),this.B5t()}DD(){this.hLt=!0}rDt(){return this.tLt?this.tLt.rDt():null}oDt(){return this.tLt?this.tLt.oDt():null}qb(){return this.tLt?this.tLt.qb():null}A3(){const i=this.tLt;if(i&&!i.hDt()){const e=this.qb(),t=e.jE(),h=t&&e.wb(),n=t&&e.Dw();if(h&&e.IE(),this.hLt||this.OOt()){const r=this.Tq.rD(),o=(this.DLt++,e.SE(),this.jX());o&&U.StartMeasuringTime(),this.hLt=!1;let t=null,s=(h&&(t=i.bDt().pP(),e.WE(t)),null);n&&(s=e.StartFrameTiming(2*(1+r.g$())),e.StartMeasuringRenderPassTime(0,1)),this.D9()&&"low"===i.BJ()?e.ER(i.PJ(),i.RJ()):e.AR(),this.RNt(this.qb(),r),t&&e.VE(t),n&&(e.StopMeasuringRenderPassTime(),this.tLt.vDt(s)),e.lb(),o&&(U.AddDrawCallsTime(),U.UpdateInspectHighlight()),i&&i.xDt()}else e.fb()}}AX(t){return"low"===this.Wk().BJ()||t.wb()&&(this.NJ()||this.D9())}RNt(s,i){s.Uw(),s.YR(),s.jR(1,1,1,1),s.EE(null),s.zR(null),s.vE(this.D9()),this.AX(s)&&i.RX(s);const e=i.M$();for(let t=1;t<e;++t)i.kX(s,t),s.Dw()&&s.Restart();this.AX(s)||i.RX(s),i.DX(s)}M4(t,s,i){if(!this.mLt)return!1;let e=!this.gLt&&!this.Zft.O1t(),h=0;e&&(h=performance.now());const n=this.jX(),r=(n&&this.Y8(!1),this.Zft.x1t(this.Tq,t,s,i));if(e){const o=performance.now()-h;this.WLt+=o,n&&U.AddTriggersTime(o)}return n&&this.Y8(!0),r}Yxt(t,s,i){if(!this.aMt())return this.M4(t,s,i);if(this.P1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.gLt||this.Zft.O1t())return this.Zft.T1t(this.Tq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async _4(t,s,i){if(!this.aMt())return this.M4(t,s,i);if(!this.mLt)return!1;if(this.P1t())return this.Zft.I1t(t,s,i);if(!this.rD())return this.Zft._1t(t,s,i);let e=performance.now(),h=this.Zft.T1t(this.Tq,t,s,i),n=h.next();for(;!n.done;)await this.v1t(n.value),n=h.next();return this.OO()||this.Zft.O1t()||(await this.Zft.R1t(),this.yLt&&!this.gLt&&this.hNt()),this.WLt+=performance.now()-e,n.value}Kxt(t,s,i){const e=this.jX(),h=(e&&this.Y8(!1),this.Zft.E1t(this.Tq,t,s,i));return e&&this.Y8(!0),h}Zxt(t,s,i){return this.Zft.A1t(this.Tq,t,s,i)}Qxt(t){return this.MLt.fc(t)}y1t(t){this.Vkt.push(t)}w1t(){if(!this.Vkt.length)throw new Error("layout stack empty");this.Vkt.pop()}TD(){return this.Vkt.length?this.Vkt.at(-1):this.rD()}DO(t){return t&&-1!==t.jO()?this.ILt*t.jO():this.CLt}FK(){return this.CLt}DK(){return this.ILt}LO(){return this.TLt}jO(){return this.OCt}VO(t){(isNaN(t)||t<0)&&(t=0),this.OCt=t}sD(t){this.RLt=Math.max(t,0)}tD(){return this.RLt}hD(t){this.PLt=Math.max(t,0)}eD(){return this.PLt}UO(){return this.LLt}zO(){return this.BLt}qO(){return this.jLt}ENt(){return this._Lt}NO(){return this.ELt.ei()}ANt(){return this.ALt.ei()}WO(){return this.FLt.ei()}Ett(){return this.dLt}FNt(){return this.pLt}ONt(){return this.qkt}$F(){return this.dkt}YF(){return this.pkt}DNt(){return this.mkt}kNt(){return this.gkt}xD(t){if(this.VLt)throw new Error("cannot call while loading state - wait until afterload event");return this.Xkt.get(t)||null}fX(){this.Xkt.clear();for(const t of this.kkt)if(!t.$z())for(const s of t.VL())this.Xkt.set(s.YN(),s)}UDt(){return"preview"===this.tkt}jX(){return this.rkt}kk(){return this.tkt}Lk(){return"nwjs"===this.kk()||this.skt}zDt(){return"cordova"===this.tkt}LNt(){return"Android"===V.li.ci&&("cordova"===this.tkt||"playable-ad-single-file"===this.tkt||"playable-ad-zip"===this.tkt||"instant-games"===this.tkt)}V5t(){return this.fU}NNt(){return this.ikt}Nk(){return this.ekt}BNt(){return this.hkt}HF(){return this.Rkt}EGt(){return this.Pkt.EGt()}AGt(){return this.Pkt.AGt()}D9(){return this.sLt}WNt(){return this.qb()._w(this.T9())}bw(t){return this.qb().bw(t||this.T9())}jNt(){return this.wLt}VNt(t){this.eLt!==(t=!!t)&&(this.eLt=t,this.lD().cY(),this.DD())}nO(){return this.eLt}UNt(t){if(!this.Dkt.has(t)){const i=()=>this.HNt(t);this.Dkt.set(t,i),t.Uf().addEventListener("animationframeimagechange",i)}const s=this.Dg.Pg(t);return s.Hg()||s.Jg().then(()=>this.DD()),s}HNt(t){this.Dg.Fg(t)}Fkt(t){const s=[];for(const i of t.$It())for(const e of i.tW()){const h=e.rW();s.push({source:e,width:h.fm(),height:h.Gm(),tag:e.GW()})}return{Vg:s}}async Okt(t){const s=V.an(V.md),i=[],h=new Map;for(const r of t.$It())for(const o of r.tW()){const a=o.rW().QGt();h.has(a)||(h.set(a,null),i.push(s.fc(async()=>{const t=await a.BH();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.$It())for(const u of l.tW())e.push(s.fc(async()=>{const t=u.rW(),s=h.get(t.QGt()),i=await t.tTt(s),e=await createImageBitmap(i);return{$g:e}}));const n=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Vg:n}}zNt(t){this.ULt=t,this.HLt=!1}JNt(){this.ULt="",this.HLt=!0}qNt(t){this.zLt=t}s2t(t){this.N4=t}$Nt(){return this.JLt}xNt(){return!!(this.ULt||this.HLt||this.zLt||null!==this.N4)}async _Nt(){if(this.ULt&&(this.QL(),await this.XNt(this.ULt),this.YNt()),this.zLt&&(await this.KNt(this.zLt),this.YNt(),this.jX())&&U.StepIfPausedInDebugger(),this.HLt){const t=await this.ZNt();this.JLt=t,await this._4(V.uX.lX.aX.QNt,null),this.JLt="",this.YNt()}if(null!==this.N4){this.QL();try{await this.t4t(this.N4),this.JLt=this.N4,await this._4(V.uX.lX.aX.s4t,null),this.JLt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this._4(V.uX.lX.aX.i4t,null)}this.YNt()}}YNt(){this.ULt="",this.HLt=!1,this.zLt="",this.N4=null}Qk(){return this.qLt||(this.qLt=localforage.Li({name:"c3-localstorage-"+this.DNt(),description:this.$F()})),this.qLt}e4t(){return this.$Lt||(this.$Lt=localforage.Li({name:"c3-savegames-"+this.DNt(),description:this.$F()})),this.$Lt}async XNt(t){const s=await this.ZNt();try{await this.e4t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.JLt=s,await this._4(V.uX.lX.aX.QNt,null),this.JLt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this._4(V.uX.lX.aX.h4t,null)}}async KNt(t){try{const s=await this.e4t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.t4t(s),this.JLt=s,await this._4(V.uX.lX.aX.s4t,null),this.JLt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this._4(V.uX.lX.aX.i4t,null)}}async ZNt(){const t={c3save:!0,version:1,rt:{time:this.NO(),timeRaw:this.ANt(),walltime:this.WO(),timescale:this.jO(),tickcount:this.Ett(),next_uid:this.$kt,running_layout:this.rD().i9(),start_time_offset:Date.now()-this._Lt},types:{},layouts:{},events:this.Zft.bq(),timelines:this._Q.bq(),user_script_data:null};for(const i of this.kkt)i.$z()||i.gCt()||(t.types[i.i9().toString()]=i.bq());for(const e of this.Tq.fD())t.layouts[e.i9().toString()]=e.bq();const s=this.n4t("save");return s.saveData=null,await this.hX(s),t.user_script_data=s.saveData,JSON.stringify(t)}Q$(){return this.VLt}async t4t(t){const s=this.lD(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.i2t(),this.NTt.dispatchEvent(V.an(V.Event,"beforeload"));for(const a of this.Q5t()){const l=a.kN();l.gCt()||a.LY()}let e=i.rt,h=(this.ELt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.ALt.Set(e.timeRaw),this.FLt.Set(e.walltime),this.OCt=e.timescale,this.dLt=e.tickcount,this._Lt=Date.now()-e.start_time_offset,e.running_layout),n=!(this.VLt=!0);if(h!==this.rD().i9()){const u=s.iY(h);if(!u)return;await this.PNt(u),n=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.iY(d);p&&p.vq(f)}const r=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.L8(y);!w||w.$z()||w.gCt()||w.vq(g,r)}for(const S of this.Tq.fD())for(const b of S.w5())b.Mq();if(this.QL(),this.fX(),this.VLt=!1,n){for(const v of this.Q5t())v.tX();for(const[M,x]of Object.entries(i.types)){const _=parseInt(M,10),G=this.L8(_);!G||G.$z()||G.gCt()||G.SCt(x)}}this.$kt=e.next_uid,this.Zft.vq(i.events);for(const T of this.kkt)if(!T.$z()&&T.$N())for(const I of T.VL()){const C=I.dX();for(const P of T.C$().pX())if(P!==T){const R=P.VL();if(C<0||C>=R.length)throw new Error("missing sibling instance");I.mX(R[C])}}this._Q.vq(i.timelines),s.uY(),s.cY();for(const E of r)E._Pt();this.e2t(),this.NTt.dispatchEvent(V.an(V.Event,"afterload")),this.WX(this.n4t("afterload"));for(const[A,F]of Object.entries(i.types)){const O=parseInt(A,10),D=this.L8(O);D&&D.wCt()}const o=this.n4t("load");o.saveData=i.user_script_data,await this.hX(o),this.DD()}r4t(t,s){return t.CD().TEt()-s.CD().TEt()}fAt(t,s){t.CD()&&!this.w5t.has(t)&&(this.w5t.set(t,s),this.S5t.push(t))}i2t(){this.w5t=new WeakMap,V.Br(this.S5t)}e2t(t="full",s=null){this.S5t.sort(this.r4t);for(const i of this.S5t)i.BY(this.w5t.get(i),t,s);for(const e of this.S5t)e.PPt(this.w5t.get(e),t,s);this.i2t()}async H5t(t){const s=await Promise.all(t.map(async t=>{const s=this.zDt()&&this.xH.zU();if(s||"playable-ad-single-file"===this.kk()){const i=await this.xH.Go(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.o5t.o4t(s)}a4t(t,s){this.o5t.l4t(t,s)}U5t(t,s){this.o5t.u4t(t,s)}z5t(t,s,i,e){return this.o5t.z5t(t,s,i,null,null,e)}c4t(t,s,i,e){return this.o5t.c4t(t,s,i,e)}f4t(){return this.o5t.d4t()}vD(t,s){this.df("runtime","invoke-download",{url:t,filename:s})}async ADt(t,s,i,e,h,n){if(e=e||s,h=h||i,this.ZF()){const r=await this.LD("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:n});return r.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return n?self.createImageBitmap(o,n):o}}async p4t(t){return this.ZF()?this.LD("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}m4t(){this.ZLt||(this.ZLt=!0,this.df("runtime","enable-device-orientation"))}g4t(){this.QLt||(this.QLt=!0,this.df("runtime","enable-device-motion"))}nD(){return this.xLt()}y4t(t){this.xLt=t}c5t(){const t=this.qb();return{fps:this.UO(),tps:this.zO(),cpu:this.qO(),gpu:this.XO(),layout:this.rD()?this.rD().Qc():"",renderer:t.wb()?t.YE():t.GetAdapterInfoString()}}P1t(){return!!this.jX()&&U.P1t()}v1t(t){return this.aMt()?U.v1t(t):Promise.resolve()}eyt(){return!!this.aMt()&&U.BreakNext()}w4t(t){this.okt=!!t,this.S4t()}b4t(){return this.okt}aMt(){return this.akt}Y8(t){t?this.lkt--:this.lkt++,this.S4t()}S4t(){this.akt=this.jX()&&this.okt&&0===this.lkt}vmt(){return this.jX()&&U.vmt()}OJ(){return this.jX()&&this.qb().jE()&&U.OJ()}async INt(t){if(t)for(const s of t)await this.v1t(s)}CNt(t){return this.INt(this.NTt.t0(t))}xdt(t){return this.Zft.xdt(t.name,t.params)}BD(t){if(this.ZF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}hL(){return this.m5t}n4t(t){const s=V.an(V.Event,t,!1);return s.runtime=this.m5t,s}R5t(){this.m5t=new self.NF(this),this.e5t={tick:this.n4t("tick")}}F5t(){const t={};for(const s of this.kkt)t[s.Ydt()]={value:s.GL(),enumerable:!0,writable:!1};this.m5t.cO(t)}O5t(){const t={};for(const s of this.pO().h1t())t[s.Ydt()]=s.Kdt();this.m5t.fO(t)}gD(){return this.y5t}AL(t,s){this.g5t.set(t,s)}v5(t){return this.g5t.get(t)}Ck(t){if(!(t instanceof self.PL))throw new TypeError("expected IObjectClass");const s=this.v5(t);if(s&&s instanceof V.qlt)return s;throw new Error("invalid IObjectClass")}BL(t){if(!(t instanceof self.ON))throw new TypeError("expected IInstance");const s=this.v5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}ID(t){if(!(t instanceof self.y6))throw new TypeError("expected IWorldInstance");const s=this.v5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.JDt.vx,self.C3_InitRuntime=(t,s)=>t.LCt(s)}{const La=self.Ns;La.a5t=class extends La.nn{constructor(t,s){super(),this.uf=t,this.v4t=new Map,this.M4t=0,this.x4t=s.inputPort,s.outputPort.onmessage=t=>this._4t(t),this.G4t=s.maxNumWorkers,this.T4t=1,this.I4t=!1,this.C4t=!1}async LCt(){}d4t(){return this.G4t}o4t(t){this.x4t.postMessage({type:"_import_scripts",scripts:t})}l4t(t,s){this.x4t.postMessage({type:"_send_blob",blob:t,id:s})}u4t(t,s){this.x4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}z5t(t,s,i,e,h,n){if(i=i||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const r=this.M4t++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:r,params:s,transferables:i},a=new Promise((t,s)=>{this.v4t.set(r,{resolve:t,progress:e,reject:s,P4t:!1,maxWorkerNum:n})});return h&&h.b0(()=>this.R4t(r)),this.x4t.postMessage(o,i),this.E4t(),a}c4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.M4t++,n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.x4t.postMessage(n,i)}R4t(t){const s=this.v4t.get(t);s&&(s.P4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.x4t.postMessage({type:"_cancel",jobId:t}))}_4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.A4t(e,s.result);break;case"progress":this.F4t(e,s.progress);break;case"error":this.O4t(e,s.error);break;case"ready":this.D4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}A4t(t,s){const i=this.v4t.get(t);if(!i)throw new Error("invalid job ID");i.P4t||i.resolve(s),this.v4t.delete(t)}F4t(t,s){const i=this.v4t.get(t);if(!i)throw new Error("invalid job ID");!i.P4t&&i.progress&&i.progress(s)}O4t(t,s){const i=this.v4t.get(t);if(!i)throw new Error("invalid job ID");i.P4t||i.reject(s),this.v4t.delete(t)}D4t(){this.I4t&&(this.I4t=!1,this.T4t++,this.T4t<this.G4t?this.E4t():this.x4t.postMessage({type:"_no_more_workers"}))}k4t(){let t=0,s=[...this.v4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async E4t(){if(!(this.T4t>=this.G4t||this.I4t||this.C4t||this.k4t()<=this.T4t))try{this.I4t=!0;const t=await this.uf.LD("runtime","create-job-worker");t.outputPort.onmessage=t=>this._4t(t)}catch(t){this.C4t=!0,this.I4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.T4t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.brightness={AOt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float brightness;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= front.a;\nfront.rgb += (brightness - 1.0);\nfront.rgb *= a;\ngl_FragColor = front;\n}",EOt:"",POt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nbrightness : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar output : FragmentOutput;\noutput.color = vec4<f32>((front.rgb + (shaderParams.brightness - 1.0)) * front.a, front.a);\nreturn output;\n}",Vb:!1,Hb:!1,Cb:0,Rb:0,Ab:!1,Ob:!1,kb:!0,Nb:!1,Wb:!1,parameters:[["brightness",0,"percent"]]},self.C3_Shaders.replacecolor={AOt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 sourceColor;\nuniform lowp vec3 destColor;\nuniform lowp float tolerance;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nlowp float diff = length(front.rgb - sourceColor);\nif (diff <= tolerance)\n{\nfront.rgb = mix(front.rgb, destColor, 1.0 - diff / tolerance);\n}\nfront.rgb *= a;\ngl_FragColor = front;\n}",EOt:"",POt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nsourceColor : vec3<f32>,\ndestColor : vec3<f32>,\ntolerance : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar rgb : vec3<f32> = front.rgb;\nvar diff : f32 = length(rgb - shaderParams.sourceColor);\nif (diff <= shaderParams.tolerance)\n{\nrgb = mix(rgb, shaderParams.destColor, 1.0 - diff / shaderParams.tolerance);\n}\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb * front.a, front.a);\nreturn output;\n}",Vb:!1,Hb:!1,Cb:0,Rb:0,Ab:!1,Ob:!1,kb:!0,Nb:!1,Wb:!1,parameters:[["sourceColor",0,"color"],["destColor",0,"color"],["tolerance",0,"percent"]]},self.C3_Shaders.hsladjust={AOt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nprecision mediump float;\nuniform float huerotate;\nuniform float satadjust;\nuniform float lumadjust;\nvec3 rgb_to_hsl(vec3 color)\n{\nvec3 hsl = vec3(0.0, 0.0, 0.0);\nfloat fmin = min(min(color.r, color.g), color.b);\nfloat fmax = max(max(color.r, color.g), color.b);\nfloat delta = fmax - fmin;\nhsl.z = (fmax + fmin) / 2.0;\nif (delta == 0.0)\n{\nhsl.x = 0.0;\nhsl.y = 0.0;\n}\nelse\n{\nif (hsl.z < 0.5)\nhsl.y = delta / (fmax + fmin);\nelse\nhsl.y = delta / (2.0 - fmax - fmin);\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\nif (color.r == fmax)\nhsl.x = dB - dG;\nelse if (color.g == fmax)\nhsl.x = (1.0 / 3.0) + dR - dB;\nelse if (color.b == fmax)\nhsl.x = (2.0 / 3.0) + dG - dR;\nif (hsl.x < 0.0)\nhsl.x += 1.0;\nelse if (hsl.x > 1.0)\nhsl.x -= 1.0;\n}\nreturn hsl;\n}\nfloat hue_to_rgb(float f1, float f2, float hue)\n{\nif (hue < 0.0)\nhue += 1.0;\nelse if (hue > 1.0)\nhue -= 1.0;\nfloat ret;\nif ((6.0 * hue) < 1.0)\nret = f1 + (f2 - f1) * 6.0 * hue;\nelse if ((2.0 * hue) < 1.0)\nret = f2;\nelse if ((3.0 * hue) < 2.0)\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\nelse\nret = f1;\nreturn ret;\n}\nvec3 hsl_to_rgb(vec3 hsl)\n{\nvec3 rgb = vec3(hsl.z);\nif (hsl.y != 0.0)\n{\nfloat f2;\nif (hsl.z < 0.5)\nf2 = hsl.z * (1.0 + hsl.y);\nelse\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\nfloat f1 = 2.0 * hsl.z - f2;\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\n}\nreturn rgb;\n}\nvoid main(void)\n{\nvec4 front = texture2D(samplerFront, vTex);\nvec3 rgb = rgb_to_hsl(front.rgb) + vec3((huerotate > 0.5 ? huerotate - 1.0 : huerotate), 0, (lumadjust - 1.0) * front.a);\nrgb.y *= satadjust;\nrgb = hsl_to_rgb(rgb);\ngl_FragColor = vec4(rgb, front.a);\n}",EOt:"",POt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nhuerotate : f32,\nsatadjust : f32,\nlumadjust : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar huerotate : f32 = shaderParams.huerotate;\nif (huerotate > 0.5)\n{\nhuerotate = huerotate - 1.0;\n}\nvar rgb : vec3<f32> = c3_RGBtoHSL(front.rgb) + vec3<f32>(huerotate, 0.0, (shaderParams.lumadjust - 1.0) * front.a);\nrgb.y = rgb.y * shaderParams.satadjust;\nrgb = c3_HSLtoRGB(rgb);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb, front.a);\nreturn output;\n}",Vb:!1,Hb:!1,Cb:0,Rb:0,Ab:!1,Ob:!1,kb:!0,Nb:!1,Wb:!1,parameters:[["huerotate",0,"percent"],["satadjust",0,"percent"],["lumadjust",0,"percent"]]};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,n=""+e;return h<n?-1:n<h?1:0}},b=(S,self.Ns),i=null,e="",h="",n=[],r="",o="",a="",v=b.an(b.$0t);b.uX.lX=class extends b.txt{constructor(t){super(t),this.U0t=this.uf.pO().q8(),this.Pft=this.uf.pO().IO(),this.L4t=0,this.N4t=0,this.B4t=new Map}ln(){super.ln()}DD(){this.uf.DD()}M4(t){this.uf.M4(t,null,null)}W4t(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}j4t(t,s,i){if(t!==r||s!==o||i!==a){const e=this.W4t(s,i);n=t.match(e),r=t,o=s,a=i}return n}async V4t(t,s){if(s.length){this.L4t+=s.length;const i=[];for(const e of s)i.push(t.A$(e));await b.lo(i,()=>{this.N4t++}),this.N4t++,this.N4t===this.L4t&&(this.N4t=0,this.L4t=0,this.uf.M4(b.uX.lX.aX.U4t,null,null))}}H4t(t,s){for(const i of s)0===i.zL()&&t.k$(i)}z4t(){return v}J4t(s){const i=this.uf.pO(),t=i.IO(),e=t.z8(),h=e.bO(),n=h.H8(),r=e.P0t(),o=t.J8(h),a=i.q8(),l=a.J8();if(l.J0t(s),r)for(let t=0;t<s&&!l.eV();++t)i.Z8(n),l.sV(t),h.Q8(e,o),i.tV(n);else for(let t=0;t<s&&!l.eV();++t)l.sV(t),h.Q8(e,o);return t.hV(),a.hV(),!1}*q4t(s){const i=this.uf.pO(),t=i.IO(),e=t.z8(),h=e.bO(),n=h.H8(),r=e.P0t(),o=t.J8(h),a=i.q8(),l=a.J8();if(l.J0t(s),r)for(let t=0;t<s&&!l.eV();++t)i.Z8(n),l.sV(t),yield*h.pyt(e,o),i.tV(n);else for(let t=0;t<s&&!l.eV();++t)l.sV(t),yield*h.pyt(e,o);return t.hV(),a.hV(),!1}$4t(){const s=this.uf.pO(),t=s.IO(),i=t.z8(),e=i.bO(),h=e.H8(),n=i.P0t(),r=t.J8(e),o=s.q8(),a=o.J8();if(n)for(let t=0;!a.eV();++t)s.Z8(h),a.sV(t),e.Q8(i,r)||a.PW(),s.tV(h);else for(let t=0;!a.eV();++t)a.sV(t),e.Q8(i,r)||a.PW();return t.hV(),o.hV(),!1}*X4t(){const s=this.uf.pO(),t=s.IO(),i=t.z8(),e=i.bO(),h=e.H8(),n=i.P0t(),r=t.J8(e),o=s.q8(),a=o.J8();if(n)for(let t=0;!a.eV();++t){s.Z8(h),a.sV(t);const l=yield*e.pyt(i,r);l||a.PW(),s.tV(h)}else for(let t=0;!a.eV();++t){a.sV(t);const u=yield*e.pyt(i,r);u||a.PW()}return t.hV(),o.hV(),!1}Y4t(t,s,i){const e=this.uf.pO(),h=e.IO(),n=h.z8(),r=n.bO(),o=r.H8(),a=n.P0t(),l=h.J8(r),u=e.q8(),c=u.J8();if(c.X8(t),c.J0t(i),i<s)if(a)for(let t=s;t>=i&&!c.eV();--t)e.Z8(o),c.sV(t),r.Q8(n,l),e.tV(o);else for(let t=s;t>=i&&!c.eV();--t)c.sV(t),r.Q8(n,l);else if(a)for(let t=s;t<=i&&!c.eV();++t)e.Z8(o),c.sV(t),r.Q8(n,l),e.tV(o);else for(let t=s;t<=i&&!c.eV();++t)c.sV(t),r.Q8(n,l);return h.hV(),u.hV(),!1}*K4t(t,s,i){const e=this.uf.pO(),h=e.IO(),n=h.z8(),r=n.bO(),o=r.H8(),a=n.P0t(),l=h.J8(r),u=e.q8(),c=u.J8();if(c.X8(t),c.J0t(i),i<s)if(a)for(let t=s;t>=i&&!c.eV();--t)e.Z8(o),c.sV(t),yield*r.pyt(n,l),e.tV(o);else for(let t=s;t>=i&&!c.eV();--t)c.sV(t),yield*r.pyt(n,l);else if(a)for(let t=s;t<=i&&!c.eV();++t)e.Z8(o),c.sV(t),yield*r.pyt(n,l),e.tV(o);else for(let t=s;t<=i&&!c.eV();++t)c.sV(t),yield*r.pyt(n,l);return h.hV(),u.hV(),!1}Z4t(i){const t=i.UL(),s=t.VL();if(0!==s.length){const e=this.uf.pO(),h=e.IO(),n=h.z8(),r=n.bO(),o=r.H8(),a=n.P0t(),l=h.J8(r),u=e.q8(),c=u.J8(),f=i.$N(),d=v.J8();if(b.Ur(d,s),c.J0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.eV();++t){e.Z8(o);const p=d[t];i.UL().Uft(p),f&&p.Imt(),c.sV(t),r.Q8(n,l),e.tV(o)}else{t.Wft(!1);const m=t.jft();b.Br(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.eV();++t){const g=d[t];m[0]=g,f&&g.Imt(),c.sV(t),r.Q8(n,l)}}h.hV(),u.hV(),b.Br(d),v.hV()}return!1}*Q4t(i){const t=i.UL(),s=t.VL();if(0!==s.length){const e=this.uf.pO(),h=e.IO(),n=h.z8(),r=n.bO(),o=r.H8(),a=n.P0t(),l=h.J8(r),u=e.q8(),c=u.J8(),f=i.$N(),d=v.J8();if(b.Ur(d,s),c.J0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.eV();++t){e.Z8(o);const p=d[t];i.UL().Uft(p),f&&p.Imt(),c.sV(t),yield*r.pyt(n,l),e.tV(o)}else{t.Wft(!1);const m=t.jft();b.Br(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.eV();++t){const g=d[t];m[0]=g,f&&g.Imt(),c.sV(t),yield*r.pyt(n,l)}}h.hV(),u.hV(),b.Br(d),v.hV()}return!1}tBt(i,t){const s=i.UL(),e=s.VL();if(0!==e.length){const h=this.uf.pO(),n=h.IO(),r=h.jdt(),o=n.z8(),a=o.bO(),l=a.H8(),u=o.P0t(),c=n.J8(a),f=h.q8(),d=f.J8(),p=i.$N(),m=v.J8();b.Br(m),d.J0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.Pbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.eV();++t){h.Z8(l);const g=m[t][0];i.UL().Uft(g),p&&g.Imt(),d.sV(t),a.Q8(o,c),h.tV(l)}else{s.Wft(!1);const y=s.jft();b.Br(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.eV();++t){const w=m[t][0];y[0]=w,p&&w.Imt(),d.sV(t),a.Q8(o,c)}}n.hV(),f.hV(),b.Br(m),v.hV()}return!1}*sBt(i,t){const s=i.UL(),e=s.VL();if(0!==e.length){const h=this.uf.pO(),n=h.IO(),r=h.jdt(),o=n.z8(),a=o.bO(),l=a.H8(),u=o.P0t(),c=n.J8(a),f=h.q8(),d=f.J8(),p=i.$N(),m=v.J8();b.Br(m),d.J0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.Pbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.eV();++t){h.Z8(l);const g=m[t][0];i.UL().Uft(g),p&&g.Imt(),d.sV(t),yield*a.pyt(o,c),h.tV(l)}else{s.Wft(!1);const y=s.jft();b.Br(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.eV();++t){const w=m[t][0];y[0]=w,p&&w.Imt(),d.sV(t),yield*a.pyt(o,c)}}n.hV(),f.hV(),b.Br(m),v.hV()}return!1}iBt(t,s){let i=this.B4t.get(t);if(!i){if(!s)return null;i={eBt:null,hBt:new Map},this.B4t.set(t,i)}return i}nBt(t,s,i,e,h){s.wO().Ryt(i,s.xO()),e&&t.tV(h)}*rBt(t,s,i,e,h){yield*s.wO().Eyt(i,s.xO()),e&&t.tV(h)}}}{const Na=self.Ns;Na.uX.lX.gIt=class extends Na.nn{constructor(t){super(),this.vft=t,this.uf=t.XD(),this.Wxt=t.EL()}_xt(){}ln(){this.vft=null,this.uf=null,this.Wxt=null}}}{const Ba=self.Ns;Ba.uX.lX.Instance=class extends Ba.nn{constructor(t,s){super(),this.Gi=t,this.vft=this.Gi.kN(),this.Jxt=this.vft.rvt(),this.uf=this.Gi.XD()}ln(){this.Gi=null,this.vft=null,this.Jxt=null,this.uf=null}}}{const _=self.Ns,Wa=[];_.uX.lX.aX={oBt(){return!0},rX(){return!0},bX(){return!0},cNt(){return!0},fNt(){return!0},OO(){return this.uf.OO()},cgt(){const t=this.uf.Wdt();return!t._0t()&&!t.M0t()},aBt(){let t=this.uf.jdt(),s=t.gbt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.uf.Ett();return s.set("TriggerOnce_lastTick",e),this.uf.jNt()||i!==e-1},lBt(t){const s=this.uf.jdt(),i=s.gbt(),e=i.get("Every_lastTime")||0,h=this.uf.NO(),n=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+n<=h?(i.set("Every_lastTime",e+n),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Ipt(t){const s=this.uf.pO().a1t(t);return s&&s.Ipt()},UDt(){return this.uf.UDt()},bi(){return _.li.bi},q5t(){return!0},uBt(){return!0},cBt(){return!0},QNt(){return!0},h4t(){return!0},s4t(){return!0},i4t(){return!0},fBt(t){return!!this.uf.xD(t)},dBt(t){switch(t){case 0:return"browser"===_.li.wi;case 1:return"iOS"===_.li.ci;case 2:return"Android"===_.li.ci;case 8:return"cordova"===_.li.wi;case 9:return"scirra-arcade"===this.uf.kk();case 10:return"nwjs"===_.li.wi;case 13:return"windows-uwp"===this.uf.kk();default:return!1}},pBt(t,s,i){const e=this.W4t(s,i);return e.test(t)},mBt(t,s,i){return _.compare(t,s,i)},gBt(t,s,i){return s<=t&&t<=i},yBt(t,s,i){return _.compare(t.Get(),s,i)},wBt(t){return!!t.Get()},SBt(t,s){const i=this.uf.NO();if(0!==t)return _.compare(i,t,s);{const e=this.uf.jdt(),h=e.gbt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},bBt(t){return isNaN(t)},x2t(t,s,i){return _.Mn(_.yn(t),_.yn(i))<=_.yn(s)},_2t(t,s){return _._n(_.yn(t),_.yn(s))},kvt(t,s,i){let e=_.yn(t),h=_.yn(s),n=_.yn(i),r=!_._n(n,h);return r?!(!_._n(e,h)&&_._n(e,n)):_._n(e,h)&&!_._n(e,n)},vBt(t,s){return"number"==typeof t?0===s:1===s},MBt(t){return!!t},npt(t){return t.toLowerCase()===this.uf.pO().lpt()},xBt(t,i,e,h){if(!t)return!1;let s=this.z4t(),n=s.J8(),r=t.UL(),o=(_.Ur(n,r.VL()),r.Fft()&&_.Br(r.Vft()),this.uf.jdt()),a=0;for(let t=0,s=n.length;t<s;++t){const u=n[t];n[a]=u,i=o.Pbt(1,t),h=o.Pbt(3,t),_.compare(i,e,h)?++a:r.Bft(u)}_.Nr(n,a),r.Hft(n);const l=!!n.length;return _.Br(n),s.hV(),t.xyt(),l},_Bt(t,s){if(!t)return!1;let i=this.z4t(),e=i.J8(),h=t.UL(),n=(_.Ur(e,h.VL()),h.Fft()&&_.Br(h.Vft()),this.uf.jdt()),r=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[r]=a,n.Pbt(1,t)?++r:h.Bft(a)}_.Nr(e,r),h.Hft(e);const o=!!e.length;return _.Br(e),i.hV(),t.xyt(),o},GBt(t,i,e){if(!t)return!1;const s=t.UL(),h=s.VL();if(0===h.length)return!1;let n=this.uf.jdt(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=n.Pbt(2,t),(null===r||0===i&&e<o||1===i&&e>o)&&(o=e,r=a)}return s.Xft(r),t.xyt(),!0},TBt(t,s){if(!t)return!1;const i=t.UL(),e=i.VL();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.Xft(h),t.xyt(),!0},IBt(t){if(!t)return!1;const s=t.UL(),i=s.VL(),e=Math.floor(this.uf.nD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.Xft(h),t.xyt(),!0},CBt(t){if(!t)return!1;if(!t.zL())return!1;const s=t.UL();return s.Wft(!0),t.xyt(),!0},PBt(t,i,e){if(!t)return!1;const h=t.UL(),s=h.VL(),n=this.uf.bO(),r=n.Yft(),o=this.uf.jdt().cbt();h.Fft()?(_.Ur(Wa,s),h.Aft(),h.Wft(!1)):r?(_.Ur(Wa,h.Vft()),_.Br(h.Vft())):(_.Ur(Wa,h.jft()),_.Br(h.jft()));for(let t=0,s=Wa.length;t<s;++t){const a=Wa[t];_.xor(a.CD().TB(i,e),o)?h.Nft(a):h.Bft(a)}return t.xyt(),_.xor(!!h.jft().length,o)},RBt(s){if(!s)return!1;let i=s.$z(),e=null,h=this.uf.rCt();for(let t=h.length-1;0<=t;--t){const n=h[t];if(i){if(n.kN().cvt(s)){e=n;break}}else if(n.kN()===s){e=n;break}}if(!e){const r=s.VL();r.length&&(e=r.at(-1))}if(!e)return!1;const t=s.UL();return t.Xft(e),s.xyt(),!0},EBt(t){return this.uf.aMt()?this.q4t(t):this.J4t(t)},ABt(){return this.uf.aMt()?this.X4t():this.$4t()},FBt(t,s,i){return this.uf.aMt()?this.K4t(t,s,i):this.Y4t(t,s,i)},pd(t){return this.uf.aMt()?this.Q4t(t):this.Z4t(t)},OBt(t,s,i){return this.uf.aMt()?this.sBt(t,i):this.tBt(t,i)},DBt(t){return!!t&&t.J5()},kBt(t){return!!t&&t.tN()},LBt(t){return!!t&&t.K5()},NBt(t){return!!t&&!t.zL()},BBt(t,s,i){return!!t&&_.compare(100*t.WR(),s,i)},WBt(t){const s=this.uf.rD();return!!s&&s.y$(t)},U4t(){return!0},jBt(){return 0<this.L4t},VBt(t,s){const i=this.uf.dPt();return!!i&&!!s&&!!i.Jlt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},g=function(t,s){return t[1]-s[1]};m,g;const ja=self.Ns,Va=[],Ua=[],Ha=ja.an(ja.Rect),za=ja.an(ja.Ho),Ja=[];ja.uX.lX.Qht={UBt(t,s){t.oht(s)},HBt(t,s){t.pe()&&"number"!=typeof s&&(s=parseFloat(s)),t.oht(t.Get()+s)},zBt(t,s){t.pe()&&t.oht(t.Get()-s)},JBt(t,s){t.oht(!!s)},qBt(t){t.oht(!t.Get())},$Bt(t){t.oht(t.Bdt())},XBt(t){this.uf.pO().r1t(t)},YBt(t,s,i,e,h,n){if(t&&s){const r=this.uf.qL(t,s,i,e,h,n);if(r){h&&s.$L(r);const o=this.uf.pO(),a=(o.XL(!0),r.YL(),o.XL(!1),new Map);r.hPt(a,t,h);for(const[l,u]of a)l.UL().zft(u)}}},KBt(t,s,i,e,h,n){if(t&&s){const r=this.uf.Z5t(t);r&&ja.uX.lX.Qht.YBt.call(this,r,s,i,e,h,n)}},Jz(h,n,r,o,a,t,l,u,c,f,d){if(h){let s=this.uf.TD(),i=s;if(t){const p=this.uf.lD().sY(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.PD(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.PD(u))){Ha.set(n,r,o,a);const m=i.Jz(h,Ha,e,t,c,f,d);h.UL().Hft(m),h.xyt()}}}},ZBt(){const t=this.U0t;t.B0t()&&t.L0t().PW()},Cpt(t,s){const i=this.uf.pO().a1t(t);i&&(0===s?i.Cpt(!1):1===s?i.Cpt(!0):i.Cpt(!i.Ipt()))},QBt(t){this.uf.VO(t)},t6t(t,s){if(s<0&&(s=0),t){const i=t.UL(),e=i.VL();for(const h of e)h.VO(s)}},s6t(t){if(t){const s=t.UL(),i=s.VL();for(const e of i)e.s4()}},Fr(t){if(!(t<0))return this.uf.pO().V1t().q2t(t),!0},AO(t){return this.uf.pO().V1t().$2t(t),!0},i6t(){const t=this.uf.pO();return t.V1t().X2t(t.hpt()),!0},RO(t){this.uf.pO().RO(t)},async MDt(t,s,i,e,h,n){const r=this.uf.Wk();r&&(this.DD(),await r.MDt(0===t?"image/png":"image/jpeg",s/100,i,e,h,n),await this.uf._4(ja.uX.lX.aX.uBt,null))},e6t(t,s){if(!(t<=0||s<=0)){this.uf.qOt(t,s),this.uf.TD().cq();const i=this.uf.Wk();i&&("off"!==i.WOt()&&this.uf.tNt(t,s),i.cC(i.Vj(),i.Uj(),!0),this.uf.DD())}},h6t(t){const s=this.uf.Wk();s&&"off"!==s.WOt()&&(s.tDt(0!==t?"high":"low"),s.cC(s.Vj(),s.Uj(),!0))},Wit(t){this.uf.zNt(t)},n6t(){this.uf.JNt()},r6t(t){this.uf.qNt(t)},o6t(t){this.uf.s2t(t)},a6t(t){},l6t(){for(const t of this.uf.lD().fD())t.PX()},u6t(t){this.uf.VNt(0!==t)},c6t(t,s){this.uf.hD(1/t),this.uf.sD(1/s)},f6t(t,s){this.uf.sD(t),this.uf.hD(s)},d6t(t){this.uf.ZO(["vsync","unlimited-tick","unlimited-frame"][t])},p6t(t,i){if(t){const s=t.UL(),e=s.VL(),h=Va,n=Ua,r=this.uf.TD(),o=t.$z(),a=t.Jwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.CD();if(u){let t;t=o?l.Jnt(i+l.kN().zwt(a)):l.Jnt(i),h.push([u.PD().LF(),u.RD()]),n.push([l,t])}}if(h.length){h.sort(m),n.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=n[t][0],f=r.ED(h[t][0]),d=h[t][1],p=f.AD();p[d]!==c&&((p[d]=c).CD().FD(f,!0),f.OD(c),i=!0)}i&&this.uf.DD(),ja.Br(Va),ja.Br(Ua)}}},_k(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.uf.HF()._k(t,s)},m6t(t){if(!this.uf.zg()){const s=this.uf.lD();s.pD()||s.mD(t)}},g6t(t){if(!this.uf.zg()){const s=this.uf.lD();if(!s.pD()){const i=s.sY(t);i&&s.mD(i)}}},y6t(t){if(!this.uf.zg()){const s=this.uf.lD();if(!s.pD()){const i=s.fD(),e=i.indexOf(s.rD());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.mD(h)}}}},w6t(){if(!this.uf.zg()){const t=this.uf.lD();t.pD()||(t.mD(t.rD()),this.uf.pO().f1t())}},S6t(t,s){t&&t.H5(s)},b6t(t,s){t&&t.X5(s)},v6t(t,s){t&&t.Z5(s)},M6t(t,s){t&&t.VR(s/100)},x6t(t,s){t&&t.sN(s)},_6t(t,s){t&&t.eN(s)},G6t(t,s){t&&t.o5(ja.yn(+s))},T6t(t,s,i){t&&(t.SN(!0),t.l5(s),t.c5(i))},I6t(t){t&&t.SN(!1)},C6t(t,s,i){t&&t.I9(s/100,i/100)},P6t(t,s){t&&t.Ov(+s)},R6t(t,s){if(t){za.xa(s),za.mn();const i=t.wN();i.da(za)||(i.na(za),this.DD())}},E6t(t,s){t&&t.fN(s)},A6t(t,s){t&&t.yv(s)},F6t(t,s,i){if(t){const e=t.s5(),h=e.Fht(i);if(h){const n=1===s;h.wmt()!==n&&(h.RAt(n),t.W6(),this.uf.DD())}}},O6t(t,s,i,e){if(t){const h=t.s5(),n=h.Fht(s);if(n){i=Math.floor(i);const r=n.b_().M_(i);if(r){"color"===r?(za.xa(e),e=za):"percent"===r&&(e/=100);const o=h.V6(n.LF(),i,e);o&&n.wmt()&&this.uf.DD()}}}},D6t(t,s){t&&t.mN(s)},k6t(t){this.uf.TD().n5(+t)},L6t(t){this.uf.TD().o5(ja.yn(+t))},N6t(t,s){const i=this.uf.TD(),e=i.s5(),h=e.Fht(s);if(h){const n=1===t;h.wmt()!==n&&(h.RAt(n),i.W6(),this.uf.DD())}},B6t(t,s,i){const e=this.uf.TD(),h=e.s5(),n=h.Fht(t);if(n){s=Math.floor(s);const r=n.b_().M_(s);if(r){"color"===r?(za.xa(i),i=za):"percent"===r&&(i/=100);const o=h.V6(n.LF(),s,i);o&&n.wmt()&&this.uf.DD()}}},W6t(t,s){const i=this.uf.TD();i.R5(t/100,s/100)},j6t(t){const s=this.uf.TD();0===t?s.F5():s.O5()},V6t(t){const s=this.uf.TD();s.l5(t)},U6t(t){const s=this.uf.TD();s.c5(t)},H6t(t,s){const i=this.uf.TD();i.l5(t),i.c5(s)},z6t(t){if(t){const s=t.Zvt();if(s){const i=s.CD();if(i){const e=this.uf.TD();e.l5(i.Cv()),e.c5(i.Ev())}}}},M5(t,s,i){const e=this.uf.TD();try{e.M5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},_5(t,s,i){if(t){const e=this.uf.TD();try{e._5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},T5(t){if(t){const s=this.uf.TD();s.T5(t)}},C5(){this.uf.TD().C5()},async J6t(t){const s=this.uf.rD();if(s&&t&&!this.uf.zg()){const i=t.$z()?t.mgt():[t];await this.V4t(s,i)}},async q6t(t){await ja.uX.lX.Qht.J6t.call(this,this.uf.Z5t(t))},$6t(t){const s=this.uf.rD();if(s&&t){const i=t.$z()?t.mgt():[t];this.H4t(s,i)}},X6t(t){ja.uX.lX.Qht.$6t.call(this,this.uf.Z5t(t))},Y6t(){const t=this.uf.rD();if(t){const s=t.P$();this.H4t(t,s)}},async K6t(t){const s=this.uf.rD();t&&s&&!this.uf.zg()&&await this.V4t(s,t.T$())},async Z6t(t){const s=this.uf.rD(),i=this.uf.lD().sY(t);i&&s&&!this.uf.zg()&&await this.V4t(s,i.T$())},PO(t){const s=this.Pft.TO();if(s)switch(s.CO()){case 1:"number"==typeof t&&s.PO(t);break;case 2:"string"==typeof t&&s.PO(t);break;case 3:s.PO(t)}},Q6t(t,s,i){const e=this.iBt(t.toLowerCase(),!0),h=e.hBt,n=s.toLowerCase(),r=(h.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ja.first(h.values())||e.eBt);if(r){const o=0!==r._O(),a=0!==i._O();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(n,i)},tWt(t,s){const i=this.iBt(t.toLowerCase(),!0),e=(i.eBt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ja.first(i.hBt.values())||i.eBt);if(e){const h=0!==e._O(),n=0!==s._O();if(h!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.eBt=s},sWt(t,s,i){const e=this.uf,h=e.aMt()?Ja:null,n=(i=Math.floor(i),this.iBt(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let r=n.hBt.get(s.toLowerCase());if(!r){if(!n.eBt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;r=n.eBt,i=0}if(!r.Zu())return h;if(0!==r._O())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.pO(),a=o.bO(),l=a.SO(),u=0<l.length,c=(u&&(r.xO()?o.Z8(l):o.W1t(l)),[]),f=o.Opt(a);if(f){const p=f.kpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Get())}const d=r.kpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Bdt());return e.aMt()?this.rBt(o,r,c,u,l):this.nBt(o,r,c,u,l)}}}{const G=self.Ns;G.uX.lX.tnt={iWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},str(t){return t.toString()},zt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.uf.nD()*t:this.uf.nD()*(s-t)+t},Rwt(...t){const s=Math.floor(this.uf.nD()*t.length);return t[s]},eWt(t,...s){return"number"!=typeof t&&(t=0),s[t=G.mn(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},hWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},nWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(G.yn(t))},cos(t){return Math.cos(G.yn(t))},tan(t){return Math.tan(G.yn(t))},asin(t){return G.wn(Math.asin(t))},acos(t){return G.wn(Math.acos(t))},atan(t){return G.wn(Math.atan(t))},exp(t){return Math.exp(t)},Kt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},mn(t,s,i){return G.mn(t,s,i)},Pt(t,s,i,e){return G.Sn(t,s,i,e)},angle(t,s,i,e){return G.wn(G.vn(t,s,i,e))},Dt(t,s,i){return G.Dt(t,s,i)},Pn(t,s,i){return G.Pn(t,s,i)},En(t,s,i,e){return G.En(t,s,i,e)},An(t,s,i,e,h){return G.An(t,s,i,e,h)},Fn(t,s,i){return G.Fn(t,s,i)},rWt(t,s){return G.wn(G.Mn(G.yn(t),G.yn(s)))},oWt(t,s,i){return G.wn(G.Gn(G.yn(t),G.yn(s),i))},aWt(t,s,i){return G.wn(G.xn(G.yn(t),G.yn(s),G.yn(i)))},lWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},uWt(t,s){return(t|=0)^1<<(0|s)},cWt(t,s){return(t|=0)&1<<(0|s)?1:0},fWt(){return"\n"},dWt(t){return"string"==typeof t?t.toUpperCase():""},pWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},mWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},gWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.fe(s),"i")):-1},yWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.fe(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(G.fe(s),"gi"),i):"string"==typeof t?t:""},wWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},SWt(t,s,i){const e=this.W4t(s,i);return t?t.search(e):-1},bWt(t,s,i,e){const h=this.W4t(s,i);return t?t.replace(h,e):""},vWt(t,s,i){const e=this.j4t(t.toString(),s,i);return e?e.length:0},MWt(t,s,i,e){e=Math.floor(e);const h=this.j4t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},xWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},_Wt(t){return encodeURIComponent(t)},GWt(t){return decodeURIComponent(t)},dt(){return this.uf.FK()},timescale(){return this.uf.jO()},TWt(){return(Date.now()-this.uf.ENt())/1e3},IWt(){return Date.now()},time(){return this.uf.NO()},tickcount(){return this.uf.Ett()},CWt(){return this.uf.ONt()},fps(){return this.uf.UO()},PWt(){return this.uf.qO()},RWt(){return this.uf.XO()},EWt(){return this.uf.Wk().$k()},AWt(){return this.uf.Wk().Yk()},FWt(){return this.uf.tO()},OWt(){return this.uf.iO()},DWt(){return this.uf.tO()},kWt(){return this.uf.iO()},LWt(){return this.uf.TD().u5()},NWt(){return this.uf.TD().f5()},BWt(){return this.uf.TD().Qc()},WWt(){return this.uf.TD().r5()},jWt(){return G.wn(this.uf.TD().a5())},VWt(){return this.uf.TD().fm()},UWt(){return this.uf.TD().Gm()},HWt(){return 100*this.uf.TD().b9()},zWt(){return 100*this.uf.TD().v9()},JWt(t){const s=this.uf.TD().PD(t);return s?s.S9()._l():0},qWt(t){const s=this.uf.TD().PD(t);return s?s.S9().Gl():0},$Wt(t){const s=this.uf.TD().PD(t);return s?s.S9().Tl():0},XWt(t){const s=this.uf.TD().PD(t);return s?s.S9().Il():0},YWt(t){const s=this.uf.TD().PD(t);return s?s.S9().width():0},KWt(t){const s=this.uf.TD().PD(t);return s?s.S9().height():0},ZWt(t){const s=this.uf.TD().PD(t);if(s){const i=s.S9();return(i._l()+i.Tl())/2}return 0},QWt(t){const s=this.uf.TD().PD(t);if(s){const i=s.S9();return(i.Gl()+i.Il())/2}return 0},tjt(t,s,i){const e=this.uf.TD().PD(t);return e?e.xN(s,i)[0]:0},sjt(t,s,i){const e=this.uf.TD().PD(t);return e?e.xN(s,i)[1]:0},ijt(t,s,i){const e=this.uf.TD().PD(t);return e?e.IN(s,i)[0]:0},ejt(t,s,i){const e=this.uf.TD().PD(t);return e?e.IN(s,i)[1]:0},hjt(t,s,i,e){const h=this.uf.TD(),n=h.PD(t),r=h.PD(s);if(!n||!r||n===r)return i;const[o,a]=n.IN(i,e);return r.xN(o,a)[0]},njt(t,s,i,e){const h=this.uf.TD(),n=h.PD(t),r=h.PD(s);if(!n||!r||n===r)return e;const[o,a]=n.IN(i,e);return r.xN(o,a)[1]},rjt(t){const s=this.uf.TD().PD(t);return s?s.iN():0},ojt(t){const s=this.uf.TD().PD(t);return s?G.wn(s.nN()):0},ajt(t){const s=this.uf.TD().PD(t);return s?100*s.WR():0},ljt(t){const s=this.uf.TD().PD(t);return s?s.hN():0},ujt(t){const s=this.uf.TD().PD(t);return s?s.u5():0},cjt(t){const s=this.uf.TD().PD(t);return s?s.f5():0},fjt(t){const s=this.uf.TD().PD(t);return s?100*s.oN():0},djt(t){const s=this.uf.TD().PD(t);return s?100*s.lN():0},pjt(t){const s=this.uf.TD().PD(t);return s?s.Fv():0},mjt(t){const s=this.uf.TD().PD(t);return s?s.LF():-1},gjt(){const t=this.uf.Wk();return t?t._Dt():""},yjt(t){const s=this.U0t;if(!s.B0t())return 0;if(t){const i=s.j0t(t);return i?i.LF():0}return s.L0t().LF()},wjt(){return this.uf.$Nt()},Sjt(t,s,...i){const e=this.iBt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.hBt.get(s.toLowerCase());if(!h){if(!e.eBt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.eBt}const n=h._O(),r=h.gO();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.Zu())return r;const o=this.uf,a=o.pO(),l=a.bO(),u=l.SO(),c=0<u.length,f=(c&&(h.xO()?a.Z8(u):a.W1t(u)),h.kpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Bdt());const d=h.wO(),p=d.MO(d.SO(),h.xO(),n,r,...i);return c&&a.tV(u),p},bjt(){return this.uf.jF().uH()},vjt(){return 0===this.L4t?1:this.N4t/this.L4t},renderer(){return this.uf.oDt()?"webgpu":"webgl"},Mjt(){return this.uf.oDt()?this.uf.oDt().GetAdapterInfoString():this.uf.rDt().YE()},xjt(){let t=this.uf.qb().vb();return Math.round(100*t/1048576)/100},_jt(t,s,i){return G.Wn(t,s,i)},Gjt(t,s,i){return G.Vn(t/100,s/100,i/100)},Tjt(t,s,i,e){return G.jn(t/100,s/100,i/100,e/100)},Ijt(t,s,i){return G.Vn(t/255,s/255,i/255)},Cjt(t,s,i,e){return G.jn(t/255,s/255,i/255,e/255)},Pjt(){return this.uf.$F()},Rjt(){return this.uf.YF()},Ejt(){return this.uf.bO().m$().Qc()},Ajt(){return this.uf.bO().Fgt()}}}{const qa=self.Ns;qa.uX.kht=class extends qa.txt{constructor(t){super(t)}ln(){super.ln()}}}{const $a=self.Ns,Xa=self.$s,Ya=[],Ka=($a.uX.kht.gIt=class extends $a.Bxt{constructor(t){super(t),this.lIt=t.$It()}ln(){$a.Br(this.lIt),super.ln()}_xt(){for(const t of this.lIt)t.uTt(this.uf)}E$(s){const i={IM:this.uf.eO()};return Promise.all(this.lIt.map(t=>t.cTt(s,i)))}L$(){for(const t of this.lIt)t.fTt()}O$(){this.Fjt()}Fjt(){for(const t of this.vft.jL())t.M6().Ojt()}Mbt(t){$a.uX.kht.O2t(this,t)}ovt(t){Ya.push({Uxt:null,Djt:!1,instances:[]})}kjt(t,s,i){const e=Ya.at(-1);e.Uxt=t,e.Djt=i,e.instances.push(s)}avt(t){const s=Ya.pop(),i=s.Uxt,e=s.Djt;if(i){const h=new Map;for(const n of s.instances)n.hPt(h,i,e);for(const[r,o]of h)r.UL().zft(o)}}Ljt(t){const s=this.kN().QIt(t),i=this.XD(),e=s.dTt(0);return e.rW().kV(i.qb(),{IM:i.eO()}).then(()=>this.Fjt()),s}Njt(t){for(const s of this.vft.jL())s.M6().Bjt(t);this.kN().tCt(t)}Wjt(t,s){const i=this.vft.KIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.yTt(s);e<0&&(e+=i.Z6()+1);const h=$a.oTt.lTt(this.XD()),n=(i.pTt(h,e),this.XD());h.rW().kV(n.qb(),{IM:n.eO()}).then(()=>this.Fjt());for(const r of this.vft.jL())r.M6().jjt();return h}Vjt(t,s){const i=this.vft.KIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Z6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.yTt(s);e<0&&(e+=i.Z6()),i.mTt(e);for(const h of this.vft.jL())h.M6().jjt()}Gxt(){return self.Ujt}},new WeakMap);self.Ujt=class extends self.PL{constructor(t){super(t),Ka.set(this,t.rvt())}Hjt(t){Xa.Te(t);const s=Ka.get(this).kN().KIt(t);return s?s.wTt():null}zjt(){return Ka.get(this).kN().YIt().map(t=>t.wTt())}Jjt(t){return Xa.Te(t),Ka.get(this).Ljt(t).wTt()}qjt(t){Xa.Te(t),Ka.get(this).Njt(t)}$jt(t,s){if(Xa.Te(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ka.get(this).Wjt(t,s).sW()}Xjt(t,s){if(Xa.Te(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ka.get(this).Vjt(t,s)}}}{const I=self.Ns,Za=self.$s,Qa=I.an(I.Rect),tl=I.an(I.tu),sl=I.an(I.Za),C=(I.uX.kht.Instance=class extends I.w_t{constructor(t,s){super(t);let i=!0,e="",h=0,n=!0;s&&(i=!!s[0],e=s[1],h=s[2],n=s[3]),this.Yjt=this.vft.KIt(e)||this.vft.$It()[0],this.Kjt=I.mn(h,0,this.Yjt.Z6()-1),this.Zjt=this.Yjt.dTt(this.Kjt);const r=this.Zjt.rW(),o=(this.Qjt=r.z2(),this.t8t=r.VC(),this.s8t=r.R_t(),this.M_t(),t.iPt(2,!0),t.iPt(1,0<=this.Yjt.H6()),this.i8t=Math.abs(this.Yjt.H6()),this.e8t=this.Yjt.X6(),this.h8t=I.an(I._0),this.n8t=0,this.r8t=0,this.o8t="",this.a8t=-1,this.l8t="",this.u8t=0,this.CD());this.c8t=o.lB(),o.H5(i),o.GB(n),o.grt(this.Zjt.lW()),o.wrt(this.Zjt.cW()),o.$Et(this.Zjt.vW()),o.Q4(),1===this.vft.XIt()&&1===this.vft.$It()[0].Z6()||0===this.i8t||this.l_t()}ln(){this.Yjt=null,this.Zjt=null,this.Qjt=null,this.h8t=null,super.ln()}T_t(){return this.Zjt.rW()}bit(){return!0}DH(){this.Qjt=null}G_t(){this.Ojt()}gM(t){const s=this.Qjt;if(null!==s){t.zR(s);const i=this.CD();i.p6()?this.f8t(i,t):this.d8t(i,t)}}d8t(t,s){let i=this.c8t;this.uf.nO()&&(i=t.jEt(i)),s.iE(i,this.s8t)}f8t(s,t){const i=s.nAt();if(s.oAt()){s.NEt(Qa,tl,!1);let t=tl;this.uf.nO()&&(t=s.jEt(t)),i.mM(s.m6(),t,this.s8t),s.rAt(!1)}i.gM(t)}p8t(){return this.h8t.ei()}m8t(){return this.Gi.ePt(2)}g8t(t){this.Gi.iPt(2,t)}y8t(){return this.Gi.ePt(1)}w8t(t){this.Gi.iPt(1,t)}S8t(){return this.Gi.ePt(4)}b8t(t){this.Gi.iPt(4,t)}kK(){this.l8t&&this.v8t(),0<=this.a8t&&this.M8t();const t=this.i8t;if(this.m8t()&&0!==t){const s=this.uf.DO(this.Gi),i=(this.h8t.fc(s),this.p8t()),e=this.Zjt,h=e.oW()/t;if(!(i<this.n8t+h)){const n=this.Yjt,r=this.e8t,o=n.Z6(),a=n.J6(),l=n.z6(),u=n.K6(),c=(this.y8t()?this.Kjt++:this.Kjt--,this.n8t+=h,this.Kjt>=o&&(u?(this.w8t(!1),this.Kjt=o-2):!l&&(this.r8t++,this.r8t>=a)?this.x8t(!1):this.Kjt=r),this.Kjt<0&&(u?(this.Kjt=1,this.w8t(!0),l||(this.r8t++,this.r8t>=a&&this.x8t(!0))):!l&&(this.r8t++,this.r8t>=a)?this.x8t(!0):this.Kjt=r),this.Kjt=I.mn(this.Kjt,0,o-1),n.dTt(this.Kjt));i>this.n8t+c.oW()/t&&(this.n8t=i),this._8t(e,c)}}else this.qxt()}x8t(t){this.Kjt=t?0:this.Yjt.Z6()-1,this.g8t(!1),this.o8t=this.Yjt.Qc(),this.b8t(!0),this.Vxt("animationend",!1,{animationName:this.o8t}),this.M4(I.uX.kht.aX.G8t),this.M4(I.uX.kht.aX.T8t),this.b8t(!1),this.r8t=0}_8t(i,e,t){if(i!==e){const s=this.CD(),h=i.rW(),n=e.rW(),r=h.fm(),o=h.Gm(),a=n.fm(),l=n.Gm(),u=(t&&t.onFrameChange?t.onFrameChange(s,r,o,a,l):(r!==a&&s.Mm(s.fm()*(a/r)),o!==l&&s.pm(s.Gm()*(l/o))),s.grt(e.lW()),s.wrt(e.cW()),s.$Et(e.vW()),s.Q4(),this.Zjt=e,this.Qjt=n.z2(),this.t8t=n.VC(),this.s8t=n.R_t(),this.ZW().Rht());for(let t=0,s=u.length;t<s;++t)u[t].gGt(i,e);this.Vxt("framechange",!1,{animationName:this.Yjt.Qc(),I8t:this.Kjt}),this.M4(I.uX.kht.aX.C8t),this.uf.DD()}}P8t(t){this.g8t(!0),this.n8t=this.p8t(),1===t&&0!==this.Kjt&&(this.a8t=0,this.S8t()||this.M8t()),this.l_t()}R8t(t,s,i){this.l8t=t,this.u8t=s,this.l_t(),!i&&this.S8t()||this.v8t()}E8t(){return this.Yjt}A8t(){return this.l8t||this.Yjt.Qc()}Bjt(t){I.wh(t,this.A8t())&&this.R8t(this.vft.sCt().Qc(),1,!0)}F8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.vft.KIt(this.A8t());if(!s)return;if(-1===(t=s.gTt(t)))return}isFinite(t)&&(this.a8t=t,this.S8t()||this.M8t())}jjt(){if(!this.l8t&&-1===this.a8t){const t=this.Zjt,s=this.Yjt.dTt(I.mn(this.Kjt,0,this.Yjt.Z6()-1));t!==s&&this._8t(t,s),1<this.Yjt.Z6()&&0<this.i8t&&this.l_t()}}O8t(){return this.Kjt}D8t(){return this.Zjt.GW()}k8t(t){this.i8t=Math.abs(t),this.w8t(0<=t),0<this.i8t&&this.l_t()}L8t(){return this.y8t()?this.i8t:-this.i8t}N8t(t){"string"==typeof t&&-1===(t=this.Yjt.gTt(t))||(t=I.mn(Math.floor(t),0,this.Yjt.Z6()-1),this.e8t=t)}B8t(){return this.e8t}v8t(t){const s=this.Zjt,i=this.vft.KIt(this.l8t);if(this.l8t="",i&&(i!==this.Yjt||!this.m8t())){this.Yjt=i,this.w8t(0<=i.H6()),this.i8t=Math.abs(i.H6()),this.e8t=i.X6(),this.Kjt=I.mn(this.Kjt,0,this.Yjt.Z6()-1),1===this.u8t&&(this.Kjt=0),this.g8t(!0),this.n8t=this.p8t();const e=this.Yjt.dTt(this.Kjt);this._8t(s,e,t)}}M8t(t){const s=this.Zjt,i=this.Kjt;if(this.Kjt=I.mn(Math.floor(this.a8t),0,this.Yjt.Z6()-1),this.a8t=-1,t||i!==this.Kjt){const e=this.Yjt.dTt(this.Kjt);this._8t(s,e),this.n8t=this.p8t()}}Ojt(){const t=this.Zjt.rW();this.Qjt=t.z2(),this.t8t=t.VC(),this.s8t=t.R_t(),this.CD().rAt(!0)}z2(){return this.Qjt}VC(){return this.t8t}R_t(){return this.s8t}pW(){return this.Zjt.pW()}vvt(t){let s=this.Zjt,i=this.CD(),e=null;if("string"==typeof t)e=s.SW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.wW(t-1)}let h=i.nB();if(!e)return[i.Cv(),i.Ev(),h];if(sl.T(e.PTt()),i.p6()){const[n,r,o]=i.m6().MM(sl.hl(),sl.rl());sl.set(n,r),h+=o}return sl.offset(-s.lW(),-s.cW()),sl.scale(i.fm(),i.Gm()),sl.rotate(i.a5()),sl.offset(i.Cv(),i.Ev()),[sl.hl(),sl.rl(),h]}W8t(){return this.CD().QEt().Wu()}j8t(t){t=Math.floor(t);const s=this.CD(),i=s.QEt(),e=i.Wu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Bu();return[h[2*t+0]+s.Cv(),h[2*t+1]+s.Ev()]}d_t(){const s=I.uX.kht.Qht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.Yjt.Qc(),V8t:t=>this.m_t(s.U8t,t,0)},{name:t+".current-frame",value:this.Kjt,V8t:t=>this.m_t(s.H8t,t)},{name:t+".is-playing",value:this.m8t(),V8t:t=>t?this.m_t(s.z8t,0):this.m_t(s.J8t)},{name:t+".speed",value:this.i8t,V8t:t=>this.m_t(s.q8t,t)},{name:t+".repeats",value:this.r8t,V8t:t=>this.r8t=t}]}]}jv(){const t={a:this.Yjt.i9()},s=(0!==this.n8t&&(t.fs=this.n8t),this.p8t()),i=(0!==s&&(t.at=s),0!==this.Kjt&&(t.f=this.Kjt),0!==this.i8t&&(t.cas=this.i8t),1!==this.r8t&&(t.ar=this.r8t),0!==this.e8t&&(t.rt=this.e8t),this.m8t()||(t.ap=this.m8t()),this.y8t()||(t.af=this.y8t()),this.CD());return i._B()&&(t.ce=i._B()),t}Vv(t){const s=this.kN().ZIt(t.a),i=(s&&(this.Yjt=s),this.n8t=t.hasOwnProperty("fs")?t.fs:0,this.h8t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.Kjt=I.mn(i,0,this.Yjt.Z6()-1),this.i8t=t.hasOwnProperty("cas")?t.cas:0,this.r8t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.e8t=I.mn(e,0,this.Yjt.Z6()-1),this.g8t(!t.hasOwnProperty("ap")||!!t.ap),this.w8t(!t.hasOwnProperty("af")||!!t.af),this.Yjt.dTt(this.Kjt)),n=(this.Zjt=h,this.Ojt(),this.CD());n.grt(h.lW()),n.wrt(h.cW()),n.$Et(h.vW()),n.GB(!!t.ce),this.m8t()&&this.l_t()}Lnt(t){const s=this.CD();switch(t){case 3:return s._B();case 2:return I.mn(this.Kjt,0,this.Yjt.Z6()-1);case 1:return this.Yjt.Qc()}}Unt(t,s,i){const e=this.CD();switch(t){case 3:e.GB(!!s);break;case 2:{this.g8t(!1);const h=this.Yjt.Z6()-1,n=s=I.mn(s,0,h),r=this.Yjt.dTt(this.Kjt),o=this.Yjt.dTt(n);this._8t(r,o,i),this.Kjt=I.mn(n,0,h);break}case 1:{this.l8t=s,this.v8t(i);const a=this.Yjt.Z6();1<a&&0<this.Yjt.H6()?this.l_t():this.qxt();break}}}Gxt(){return self.$8t}},new WeakMap),il=new Map([["current-frame",0],["beginning",1]]);self.$8t=class extends self.y6{constructor(){super(),C.set(this,self.ON.BN().M6())}dW(){return C.get(this).pW()}mW(t){return this.gW(t)[0]}yW(t){return this.gW(t)[1]}X8t(t){return this.gW(t)[2]}gW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return C.get(this).vvt(t)}bW(){return C.get(this).W8t()}MW(t){return Za.Me(t),C.get(this).j8t(t)[0]}_W(t){return Za.Me(t),C.get(this).j8t(t)[1]}xW(t){return Za.Me(t),C.get(this).j8t(t)}Y8t(){C.get(this).g8t(!1)}K8t(t="current-frame"){Za.Te(t);const s=il.get(t);if(void 0===s)throw new Error("invalid mode");C.get(this).P8t(s)}Z8t(t,s="beginning"){Za.Te(t),Za.Te(s);const i=il.get(s);if(void 0===i)throw new Error("invalid mode");const e=C.get(this);if(!e.kN().KIt(t))throw new Error(`animation name "${t}" does not exist`);e.R8t(t,i)}Hjt(t){Za.Te(t);const s=C.get(this).kN().KIt(t);return s?s.wTt():null}get animation(){return C.get(this).E8t().wTt()}get animationName(){return C.get(this).A8t()}set I8t(t){Za.Me(t),C.get(this).F8t(t)}get I8t(){return C.get(this).O8t()}set Q8t(t){Za.Te(t),C.get(this).F8t(t)}get Q8t(){return C.get(this).D8t()}set tVt(t){Za.Me(t),C.get(this).k8t(t)}get tVt(){return C.get(this).L8t()}set sVt(t){Za.Me(t),C.get(this).N8t(t)}get sVt(){return C.get(this).B8t()}get imageWidth(){return C.get(this).T_t().fm()}get imageHeight(){return C.get(this).T_t().Gm()}iVt(){const t=C.get(this).T_t();return[t.fm(),t.Gm()]}async eVt(t){Za.eh(t,Blob);const s=C.get(this),i=s.XD(),e=s.T_t(),h=I.an(I.FGt);if(h.qGt(i,t),await h.kV(i.qb(),{IM:i.eO()}),s.un())h.ln();else{e.$Gt(h);const n=s.rvt();n.Fjt(),n.kN().Uf().dispatchEvent(new I.Event("animationframeimagechange")),i.DD()}}hVt(t,s){Za.Te(s),C.get(this).CD().kEt(!!t,s)}}}{const el=self.Ns;el.uX.kht.aX={nVt(t){return el.wh(this.A8t(),t)},rVt(t,s){return el.compare(this.Kjt,t,s)},oVt(t,s){if("string"!=typeof s)return!1;const i=this.Zjt.GW();return el.compare(i.toLowerCase(),t,s.toLowerCase())},aVt(t,s){return el.compare(this.L8t(),t,s)},T8t(t){return el.wh(this.o8t,t)},G8t(){return!0},C8t(){return!0},lVt(){return this.CD().fm()<0},uVt(){return this.CD().Gm()<0},cVt(){return!0},fVt(){return!0},_B(){return this.CD()._B()}}}{const hl=self.Ns;hl.uX.kht.Qht={dVt(t,s,i,e,h){if(t&&s){const[n,r]=this.vvt(i),o=this.uf.qL(t,s,n,r,e,h);if(o){if(e&&s.$L(o),t.EL().fL()){const l=o.CD();l.o5(this.CD().a5()),l.Q4()}const a=this.uf.pO();a.XL(!0),o.YL(),a.XL(!1),t!==this.uf.Udt().kN()&&this.Jxt.kjt(t,o,e)}}},J8t(){this.g8t(!1)},z8t(t){this.P8t(t)},U8t(t,s){this.R8t(t,s)},H8t(t){this.F8t(t)},q8t(t){this.k8t(t)},pVt(t){this.N8t(t)},mVt(s,t){try{0===s?this.rvt().Ljt(t):this.rvt().Njt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},gVt(s,t,i){try{0===s?this.rvt().Wjt(t,i):this.rvt().Vjt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},yVt(t){const s=this.CD(),i=s.fm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Mm(e),s.Q4())},wVt(t){const s=this.CD(),i=s.Gm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.pm(e),s.Q4())},n5(t){const s=this.Zjt,i=s.rW(),e=this.CD(),h=e.fm()<0?-1:1,n=e.Gm()<0?-1:1,r=i.fm()*t*h,o=i.Gm()*t*n;e.fm()===r&&e.Gm()===o||(e.cC(r,o),e.Q4())},async SVt(t,s,i){const e=this.Zjt,h=e.rW(),n=this.CD(),r=this.uf,o=this.Jxt;if(h.eH()===t)0===s&&(n.cC(h.fm(),h.Gm()),n.Q4()),this.M4(hl.uX.kht.aX.cVt);else{const a=hl.an(hl.FGt);try{if(await a.JGt(r,t),!a.PH())throw new Error("image failed to load");if(this.un())return void a.ln();await a.kV(r.qb(),{IM:r.eO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.un()||this.M4(hl.uX.kht.aX.fVt))}this.un()?a.ln():(h.$Gt(a),o.Fjt(),o.kN().Uf().dispatchEvent(new hl.Event("animationframeimagechange")),r.DD(),0===s&&(n.cC(h.fm(),h.Gm()),n.Q4()),await this._4(hl.uX.kht.aX.cVt))}},bVt(t){this.CD().GB(t)},kEt(t,s){this.CD().kEt(0===t,s)},vVt(t){this.CD().yv(t),this.uf.DD()}}}{const nl=self.Ns;nl.uX.kht.tnt={MVt(){return this.O8t()},xVt(){return this.D8t()},_Vt(){return this.Yjt.Z6()},GVt(){return this.Yjt.Qc()},TVt(){return this.L8t()},IVt(){return this.Yjt.H6()},CVt(t){return this.vvt(t)[0]},PVt(t){return this.vvt(t)[1]},RVt(t){return this.vvt(t)[2]},EVt(){return this.pW()},AVt(){return this.T_t().fm()},FVt(){return this.T_t().Gm()},OVt(t){return this.j8t(t)[0]},DVt(t){return this.j8t(t)[1]},kVt(){return this.W8t()}}}{const rl=self.Ns;rl.uX.Keyboard=class extends rl.txt{constructor(t){super(t)}ln(){super.ln()}}}{let i=function(){return s.CL().M6()};i;const ol=self.Ns;ol.uX.Keyboard.gIt=class extends ol.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}Gxt(){return self.LVt}};let s=null;self.LVt=class extends self.PL{constructor(t){super(t),(s=t).XD().gD().keyboard=this}NVt(t){const s=i();if("string"==typeof t)return s.BVt(t);if("number"==typeof t)return s.WVt(t);throw new TypeError("expected string or number")}}}{const al=self.Ns;al.uX.Keyboard.Instance=class extends al.Hxt{constructor(t,s){super(t),this.jVt=new Set,this.VVt=new Set,this.UVt=0,this.HVt="",this.zVt="";const i=this.XD().Uf();this.v0=new al.w0(al.f0.y0(i,"keydown",t=>this.JVt(t.data)),al.f0.y0(i,"keyup",t=>this.qVt(t.data)),al.f0.y0(i,"window-blur",()=>this.$Vt()),al.f0.y0(i,"keyboard-blur",()=>this.$Vt()))}ln(){super.ln()}JVt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.jVt.has(i)||(this.jVt.add(i),this.VVt.add(s),this.HVt=i,this.UVt=s,this.zVt=e,this.M4(al.uX.Keyboard.aX.XVt),this.M4(al.uX.Keyboard.aX.YVt),this.M4(al.uX.Keyboard.aX.KVt),this.M4(al.uX.Keyboard.aX.ZVt))}qVt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.jVt.delete(i),this.VVt.delete(s),this.HVt=i,this.UVt=s,this.zVt=e,this.M4(al.uX.Keyboard.aX.QVt),this.M4(al.uX.Keyboard.aX.tUt),this.M4(al.uX.Keyboard.aX.sUt),this.M4(al.uX.Keyboard.aX.iUt)}$Vt(){for(const t of this.VVt)this.VVt.delete(t),this.UVt=t,this.M4(al.uX.Keyboard.aX.QVt),this.M4(al.uX.Keyboard.aX.tUt),this.M4(al.uX.Keyboard.aX.iUt);this.jVt.clear()}BVt(t){return this.jVt.has(t)}WVt(t){return this.VVt.has(t)}jv(){return{tk:this.UVt,tkk:this.zVt}}Vv(t){this.UVt=t.tk,t.hasOwnProperty("tkk")&&(this.zVt=t.tkk)}d_t(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.UVt},{name:t+".debugger.last-key-string",value:al.uX.Keyboard.tnt.eUt(this.UVt)},{name:t+".debugger.last-typed-key",value:this.zVt}]}]}}}{const ll=self.Ns,ul=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];ll.uX.Keyboard.aX={BVt(t){return this.VVt.has(t)},YVt(t){return this.UVt===t},XVt(){return!0},QVt(){return!0},tUt(t){return this.UVt===t},WVt(t){return t=Math.floor(t),this.VVt.has(t)},ZVt(t){return this.UVt===t},iUt(t){return this.UVt===t},KVt(t){const s=ul[t];return this.HVt===s},sUt(t){const s=ul[t];return this.HVt===s},hUt(t){const s=ul[t];return this.jVt.has(s)}}}{const cl=self.Ns;cl.uX.Keyboard.Qht={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const fl=self.Ns;fl.uX.Keyboard.tnt={nUt(){return this.UVt},eUt(t){return s(t)},rUt(){return this.zVt}}}{const dl=self.Ns;dl.uX.oUt=class extends dl.txt{constructor(t){super(t)}ln(){super.ln()}}}{let h=function(){return s.CL().M6()};h;const pl=self.Ns,ml=self.$s;pl.uX.oUt.gIt=class extends pl.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}Gxt(){return self.aUt}};let s=null;self.aUt=class extends self.PL{constructor(t){super(t),(s=t).XD().gD().yD=this}lUt(t){return h().uUt(t)[0]}cUt(t){return h().uUt(t)[1]}fUt(t){return h().uUt(t)}dUt(t){return h().pUt(t)}mUt(t){ml.Te(t),h().gUt(t)}yUt(t){const s=h(),i=s.XD(),e=i.Ck(t);s.wUt(e)}}}{let r=self.Ns,o=null;r.uX.oUt.Instance=class extends r.Hxt{constructor(t,s){super(t,"mouse"),this.SUt=[!1,!1,!1,!1,!1],this.bUt=0,this.vUt=0,this.MUt=0,this.xUt=0,this._Ut=0,this.GUt=0,this.TUt=0,this.IUt=0,this.CUt=!1,this.PUt=0,this.RUt=0,this.s_t([["pointer-lock-change",t=>this.EUt(t)],["pointer-lock-error",t=>this.AUt(t)]]);const i=this.XD().Uf();this.v0=new r.w0(r.f0.y0(i,"pointermove",t=>this.FUt(t.data)),r.f0.y0(i,"pointerdown",t=>this.OUt(t.data)),r.f0.y0(i,"pointerup",t=>this.DUt(t.data)),r.f0.y0(i,"dblclick",t=>this.kUt(t.data)),r.f0.y0(i,"wheel",t=>this.LUt(t.data)),r.f0.y0(i,"window-blur",()=>this.d5t()))}ln(){super.ln()}OUt(t){"mouse"===t.pointerType&&(this.bUt=t.pageX-this.uf._N(),this.vUt=t.pageY-this.uf.GN(),this.NUt(t.lastButtons,t.buttons))}FUt(t){this.PUt=t.movementX,this.RUt=t.movementY,this.M4(r.uX.oUt.aX.BUt),this.PUt=0,this.RUt=0,"mouse"===t.pointerType&&(this.bUt=t.pageX-this.uf._N(),this.vUt=t.pageY-this.uf.GN(),this.NUt(t.lastButtons,t.buttons))}DUt(t){"mouse"===t.pointerType&&this.NUt(t.lastButtons,t.buttons)}NUt(t,s){this.WUt(t,s,1,0),this.WUt(t,s,4,1),this.WUt(t,s,2,2),this.WUt(t,s,8,3),this.WUt(t,s,16,4)}WUt(t,s,i,e){!(t&i)&&s&i?this.jUt(e):t&i&&!(s&i)&&this.VUt(e)}jUt(t){this.SUt[t]=!0,this.M4(r.uX.oUt.aX.UUt),this.MUt=t,this.xUt=0,this.M4(r.uX.oUt.aX.HUt),this.M4(r.uX.oUt.aX.zUt)}VUt(t){this.SUt[t]&&(this.SUt[t]=!1,this.MUt=t,this.M4(r.uX.oUt.aX.JUt))}kUt(t){this.MUt=t.button,this.xUt=1,this.M4(r.uX.oUt.aX.HUt),this.M4(r.uX.oUt.aX.zUt)}LUt(t){this._Ut=t.deltaY<0?1:0,this.GUt=t.deltaX,this.TUt=t.deltaY,this.IUt=t.deltaZ,this.M4(r.uX.oUt.aX.qUt)}d5t(){for(let t=0,s=this.SUt.length;t<s;++t){if(!this.SUt[t])return;this.SUt[t]=!1,this.MUt=t,this.M4(r.uX.oUt.aX.JUt)}}uUt(t){const s=this.uf.rD(),i=this.bUt,e=this.vUt;if(void 0===t){const h=s.ED(0);return h.mq(i,e)}{const n=s.PD(t);return n?n.xN(i,e):[0,0]}}pUt(t){return t=Math.floor(t),!!this.SUt[t]}$Ut(){return 0<=this.bUt&&0<=this.vUt&&this.bUt<this.uf.sNt()&&this.vUt<this.uf.iNt()}gUt(t){o!==t&&(o=t,this.i_t("cursor",t))}async wUt(t){if(!r.li.bi&&t){const s=t.Zvt();if(s){const i=s.CD(),e=s.T_t();if(i&&e&&o!==e){const h=await(o=e).sTt(),n=`url(${h}) ${Math.round(i.lW()*e.fm())} ${Math.round(i.cW()*e.Gm())}, auto`;this.i_t("cursor",n)}}}}EUt(t){this.XUt(t["has-pointer-lock"])}AUt(t){this.XUt(t["has-pointer-lock"]),this.M4(r.uX.oUt.aX.YUt)}XUt(t){this.CUt!==t&&(this.CUt=t,this.CUt?this.M4(r.uX.oUt.aX.KUt):this.M4(r.uX.oUt.aX.ZUt))}d_t(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.bUt+","+this.vUt},{name:t+".debugger.left-button",value:this.SUt[0]},{name:t+".debugger.middle-button",value:this.SUt[1]},{name:t+".debugger.right-button",value:this.SUt[2]},{name:t+".debugger.button-4",value:this.SUt[3]},{name:t+".debugger.button-5",value:this.SUt[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.uf.rD().y5().map(t=>({name:"$"+t.Qc(),value:t.xN(this.bUt,this.vUt).join(", ")}))}]}}}{const gl=self.Ns;gl.uX.oUt.aX={HUt(t,s){return this.MUt===t&&this.xUt===s},UUt(){return!0},QUt(t){return this.SUt[t]},JUt(t){return this.MUt===t},tHt(t){const s=this.uf.jdt(),i=s.cbt(),e=[];return this.$Ut()&&e.push([this.bUt,this.vUt]),gl.xor(this.uf.HF().l3t(t,e,i),i)},zUt(t,s,i){if(t!==this.MUt||s!==this.xUt)return!1;if(!this.$Ut())return!1;const e=this.bUt,h=this.vUt;return this.uf.HF().l3t(i,[[e,h]],!1)},qUt(t){return 2===t||this._Ut===t},KUt(){return!0},ZUt(){return!0},YUt(){return!0},sHt(){return this.CUt},BUt(){return!0}}}{const yl=self.Ns,wl=["auto","pointer","text","crosshair","move","help","wait","none"];yl.uX.oUt.Qht={iHt(t){this.gUt(wl[t])},eHt(t){this.wUt(t)},hHt(t){this.h_t("request-pointer-lock",{unadjustedMovement:t})},nHt(){this.i_t("release-pointer-lock")}}}{const Sl=self.Ns;Sl.uX.oUt.tnt={d2t(t){return this.uUt(t)[0]},p2t(t){return this.uUt(t)[1]},rHt(){return this.bUt},oHt(){return this.vUt},aHt(){return this.PUt},lHt(){return this.RUt},uHt(){return this.GUt},cHt(){return this.TUt},fHt(){return this.IUt}}}{const bl=self.Ns;bl.uX.Touch=class extends bl.txt{constructor(t){super(t)}ln(){super.ln()}}}{let i=function(){return s.CL().M6()};i;const vl=self.Ns,Ml=self.$s;vl.uX.Touch.gIt=class extends vl.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}Gxt(){return self.dHt}};let s=null;self.dHt=class extends self.PL{constructor(t){super(t),(s=t).XD().gD().wD=this}requestPermission(t){Ml.Te(t);const s=i();if("orientation"===t)return s.pHt(0);if("motion"===t)return s.pHt(1);throw new Error("invalid type")}}}{const P=self.Ns;P.uX.Touch.Instance=class extends P.Hxt{constructor(t,s){super(t,"touch"),this.mHt=new Map,this.gHt=!1,this.yHt=!1,this.wHt=0,this.SHt=0,this.bHt=0,this.vHt=0,this.MHt=0,this.xHt=0,this._Ht=0,this.GHt=0,this.THt=0,this.IHt=0,this.CHt=0,this.PHt=0,this.RHt=0,this.EHt=0,this.AHt=0,this.FHt=0,this.xUt=0,this.OHt=[],s&&(this.gHt=s[0]),this.t_t("permission-result",t=>this.DHt(t));const i=this.XD().Uf();this.v0=new P.w0(P.f0.y0(i,"pointerdown",t=>this.OUt(t.data)),P.f0.y0(i,"pointermove",t=>this.FUt(t.data)),P.f0.y0(i,"pointerup",t=>this.DUt(t.data,!1)),P.f0.y0(i,"pointercancel",t=>this.DUt(t.data,!0)),P.f0.y0(i,"deviceorientation",t=>this.kHt(t.data)),P.f0.y0(i,"deviceorientationabsolute",t=>this.LHt(t.data)),P.f0.y0(i,"devicemotion",t=>this.NHt(t.data)),P.f0.y0(i,"tick2",t=>this.PY()))}ln(){this.mHt.clear(),super.ln()}OUt(t){if("mouse"===t.pointerType){if(!this.gHt)return;this.yHt=!0}const s=t.pointerId;if(!this.mHt.has(s)){const i=t.pageX-this.uf._N(),e=t.pageY-this.uf.GN(),h=performance.now(),n=this.mHt.size,r=(this.CHt=n,this.PHt=s,P.an(P.uX.Touch.BHt));r.LCt(h,i,e,s,n),this.mHt.set(s,r),this.M4(P.uX.Touch.aX.WHt),this.M4(P.uX.Touch.aX.jHt),this.EHt=i,this.AHt=e,this.xUt=0,this.M4(P.uX.Touch.aX.VHt)}}FUt(t){if("mouse"!==t.pointerType||this.yHt){const s=this.mHt.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.gA()<2)){const e=t.pageX-this.uf._N(),h=t.pageY-this.uf.GN();s.n7(i,e,h,t.width,t.height,t.pressure)}}}}DUt(t,s){if("mouse"===t.pointerType){if(!this.yHt)return;this.yHt=!1}const i=performance.now(),e=t.pointerId,h=this.mHt.get(e);if(h){if(this.CHt=h.UHt(),this.PHt=h.ij(),!s){const n=t.pageX-this.uf._N(),r=t.pageY-this.uf.GN();this.EHt=n,this.AHt=r,this.xUt=1,this.M4(P.uX.Touch.aX.VHt)}if(this.M4(P.uX.Touch.aX.HHt),this.M4(P.uX.Touch.aX.zHt),!s){const o=h.JHt(i);"single-tap"===o?(this.M4(P.uX.Touch.aX.qHt),this.EHt=h.Cv(),this.AHt=h.Ev(),this.M4(P.uX.Touch.aX.$Ht)):"double-tap"===o&&(this.M4(P.uX.Touch.aX.XHt),this.EHt=h.Cv(),this.AHt=h.Ev(),this.M4(P.uX.Touch.aX.YHt))}h.ln(),this.mHt.delete(e)}}pHt(i){return this.h_t("request-permission",{type:i}),new Promise((t,s)=>{this.OHt.push({type:i,resolve:t,reject:s})})}DHt(t){const s=t.result,i=t.type,e=(this.RHt=i,this.OHt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.OHt=this.OHt.filter(t=>t.type!==i),s?(this.M4(P.uX.Touch.aX.KHt),0===i?this.uf.m4t():this.uf.g4t()):this.M4(P.uX.Touch.aX.ZHt)}kHt(t){"number"==typeof t.webkitCompassHeading?this.wHt=t.webkitCompassHeading:t.absolute&&(this.wHt=t.alpha),this.SHt=t.alpha,this.bHt=t.beta,this.vHt=t.gamma}LHt(t){this.wHt=t.alpha}NHt(t){const s=t.acceleration,i=(s&&(this.MHt=s.x,this.xHt=s.y,this._Ht=s.z),t.accelerationIncludingGravity);i&&(this.GHt=i.x,this.THt=i.y,this.IHt=i.z)}PY(){let t=performance.now(),s=0;for(const i of this.mHt.values())i.gA()<=t-50&&i.QHt(t),i.t7t(t)&&(this.CHt=i.UHt(),this.PHt=i.ij(),this.FHt=s,this.M4(P.uX.Touch.aX.s7t),this.EHt=i.Cv(),this.AHt=i.Ev(),this.M4(P.uX.Touch.aX.i7t),this.FHt=0),++s}e7t(t){t=Math.floor(t);for(const s of this.mHt.values()){if(0===t)return s;--t}return null}h7t(t,s){return 0<=t&&0<=s&&t<this.uf.sNt()&&s<this.uf.iNt()}d_t(){return[{title:"plugins.touch.debugger.touches",properties:[...this.mHt.values()].map(t=>({name:"$"+t.ij(),value:t.Cv()+", "+t.Ev()}))}]}}}{const xl=self.Ns;xl.uX.Touch.aX={jHt(){return!0},zHt(){return!0},n7t(){return 0<this.mHt.size},VHt(t,s){return!!t&&s===this.xUt&&!!this.h7t(this.EHt,this.AHt)&&this.uf.HF().l3t(t,[[this.EHt,this.AHt]],!1)},r7t(t){if(!t)return!1;const s=this.uf.jdt(),i=s.cbt(),e=[...this.mHt.values()].filter(t=>this.h7t(t.Cv(),t.Ev())).map(t=>[t.Cv(),t.Ev()]);return xl.xor(this.uf.HF().l3t(t,e,i),i)},o7t(t,s,i){const e=this.e7t(t);return!!e&&xl.compare(e.H6(),s,i)},a7t(){return!0},l7t(){return!0},u7t(t,s,i){this.uf.m4t();let e;return e=0===t?this.SHt:1===t?this.bHt:this.vHt,xl.compare(e,s,i)},c7t(t,s,i){this.uf.g4t();let e;return e=0===t?this.GHt:1===t?this.THt:2===t?this.IHt:3===t?this.MHt:4===t?this.xHt:this._Ht,xl.compare(e,s,i)},WHt(t){return(t=Math.floor(t))===this.CHt},HHt(t){return(t=Math.floor(t))===this.CHt},f7t(t){return t=Math.floor(t),this.mHt.size>=t+1},s7t(){return!0},qHt(){return!0},XHt(){return!0},i7t(t){return!!t&&!!this.h7t(this.EHt,this.AHt)&&this.uf.HF().l3t(t,[[this.EHt,this.AHt]],!1)},$Ht(t){return!!t&&!!this.h7t(this.EHt,this.AHt)&&this.uf.HF().l3t(t,[[this.EHt,this.AHt]],!1)},YHt(t){return!!t&&!!this.h7t(this.EHt,this.AHt)&&this.uf.HF().l3t(t,[[this.EHt,this.AHt]],!1)},KHt(t){return this.RHt===t},ZHt(t){return this.RHt===t}}}{const _l=self.Ns;_l.uX.Touch.Qht={d7t(t){this.pHt(t)}}}{const Gl=self.Ns;Gl.uX.Touch.tnt={p7t(){return this.mHt.size},d2t(t){const s=this.e7t(this.FHt);return s?s.m7t(this.uf.TD(),t,!0):0},p2t(t){const s=this.e7t(this.FHt);return s?s.m7t(this.uf.TD(),t,!1):0},g7t(t,s){const i=this.e7t(t);return i?i.m7t(this.uf.TD(),s,!0):0},y7t(t,s){const i=this.e7t(t);return i?i.m7t(this.uf.TD(),s,!1):0},w7t(t,s){const i=this.mHt.get(t);return i?i.m7t(this.uf.TD(),s,!0):0},S7t(t,s){const i=this.mHt.get(t);return i?i.m7t(this.uf.TD(),s,!1):0},rHt(){const t=this.e7t(0);return t?t.Cv():0},oHt(){const t=this.e7t(0);return t?t.Ev():0},b7t(t){const s=this.e7t(t);return s?s.Cv():0},v7t(t){const s=this.e7t(t);return s?s.Ev():0},M7t(t){const s=this.mHt.get(t);return s?s.Cv():0},x7t(t){const s=this.mHt.get(t);return s?s.Ev():0},_7t(t){const s=this.e7t(t);return s?s.H6():0},G7t(t){const s=this.mHt.get(t);return s?s.H6():0},T7t(t){const s=this.e7t(t);return s?Gl.wn(s.a5()):0},I7t(t){const s=this.mHt.get(t);return s?Gl.wn(s.a5()):0},C7t(){return this.uf.m4t(),this.wHt},P7t(){return this.uf.m4t(),this.SHt},R7t(){return this.uf.m4t(),this.bHt},E7t(){return this.uf.m4t(),this.vHt},A7t(){return this.uf.g4t(),this.GHt},F7t(){return this.uf.g4t(),this.THt},O7t(){return this.uf.g4t(),this.IHt},D7t(){return this.uf.g4t(),this.MHt},k7t(){return this.uf.g4t(),this.xHt},L7t(){return this.uf.g4t(),this._Ht},N7t(){return this.CHt},B7t(){return this.PHt},W7t(t){const s=this.mHt.get(t);return s?s.fm():0},j7t(t){const s=this.mHt.get(t);return s?s.Gm():0},V7t(t){const s=this.mHt.get(t);return s?s.U7t():0}}}{let r=self.Ns,s=-1e3,i=-1e3,e=-1e4;r.uX.Touch.BHt=class extends r.nn{constructor(){super(),this.H7t=0,this.GG=0,this._Lt=0,this.d3=0,this.z7t=0,this.J7t=0,this.q7t=0,this.Qa=0,this.sl=0,this.$7t=0,this.X7t=0,this.Km=0,this.Zm=0,this.Y7t=0,this.K7t=!1,this.Z7t=!1}ln(){}LCt(t,s,i,e,h){this.H7t=e,this.GG=h,this.d3=t,this.z7t=t,this._Lt=t,this.J7t=s,this.q7t=i,this.Qa=s,this.sl=i,this.$7t=s,this.X7t=i}n7(t,s,i,e,h,n){this.z7t=this.d3,this.d3=t,this.$7t=this.Qa,this.X7t=this.sl,this.Qa=s,this.sl=i,this.Km=e,this.Zm=h,this.Y7t=n,!this.Z7t&&15<=r.Sn(this.J7t,this.q7t,this.Qa,this.sl)&&(this.Z7t=!0)}ij(){return this.H7t}UHt(){return this.GG}gA(){return this.d3}QHt(t){this.z7t=t}Cv(){return this.Qa}Ev(){return this.sl}H6(){const t=r.Sn(this.Qa,this.sl,this.$7t,this.X7t),s=(this.d3-this.z7t)/1e3;return 0<s?t/s:0}a5(){return r.vn(this.$7t,this.X7t,this.Qa,this.sl)}fm(){return this.Km}Gm(){return this.Zm}U7t(){return this.Y7t}t7t(t){return!this.K7t&&500<=t-this._Lt&&!this.Z7t&&r.Sn(this.J7t,this.q7t,this.Qa,this.sl)<15&&(this.K7t=!0)}JHt(t){return!this.K7t&&t-this._Lt<=333&&!this.Z7t&&r.Sn(this.J7t,this.q7t,this.Qa,this.sl)<15?t-e<=666&&r.Sn(s,i,this.Qa,this.sl)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Qa,i=this.sl,e=t,"single-tap"):""}m7t(t,s,i){if(void 0===s){const e=t.ED(0);return e.mq(this.Qa,this.sl)[i?0:1]}{const h=t.PD(s);return h?h.xN(this.Qa,this.sl)[i?0:1]:0}}}}{const Tl=self.Ns;Tl.uX.Q7t=class extends Tl.txt{constructor(t){super(t)}ln(){super.ln()}}}{const Il=self.Ns;Il.uX.Q7t.gIt=class extends Il.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const Cl=self.Ns;Cl.uX.Q7t.Instance=class extends Cl.Hxt{constructor(t,s){super(t,"localstorage"),this.tzt="",this.fG="",this.szt=[],this.izt="",this.ezt=!1,this.hzt=0,this.nzt=0,this.rzt=!1,s&&(this.rzt=s[0]);const i=this.uf.Qk();this.Zk=null,this.rzt?this.Zk=i.Li({Ni:!0}):this.Zk=i,this.ozt=new Map,this.azt=!1,this.uf.jD(this.Iv())}async Iv(){const t=await Promise.race([this.e_t("init"),Cl.Fr(3e3)]);t&&(this.ezt=t.isPersistent)}ln(){super.ln()}async lzt(t){this.izt=this.uzt(t),await this._4(Cl.uX.Q7t.aX.czt)}uzt(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}d_t(){return this.azt||this.fzt(),[{title:"plugins.localstorage.name",properties:[...this.ozt.entries()].map(s=>({name:"$"+s[0],value:s[1],V8t:t=>this.Zk.setItem(s[0],t)}))}]}async fzt(){this.azt=!0;try{const i=await this.Zk.keys(),e=(i.sort((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0}),await Promise.all(i.map(t=>this.Zk.getItem(t))));this.ozt.clear();for(let t=0,s=i.length;t<s;++t)this.ozt.set(i[t],e[t])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.azt=!1}}}}{const Pl=self.Ns;Pl.uX.Q7t.aX={dzt(t){return this.tzt===t},pzt(){return!0},mzt(t){return this.tzt===t},gzt(){return!0},yzt(t){return this.tzt===t},wzt(){return!0},Szt(){return!0},bzt(){return!0},czt(){return!0},vzt(t){return this.tzt===t},Mzt(t){return this.tzt===t},xzt(t,s){return Pl.compare(this.tzt,t,s)},_zt(t,s){return Pl.compare(this.fG,t,s)},Gzt(){return 0<this.nzt},Tzt(){return 0<this.hzt},Izt(){return!0},Czt(){return!0},Pzt(){return this.ezt}}}{let i=function(t){return"string"==typeof t||"number"==typeof t};i;const Rl=self.Ns;Rl.uX.Q7t.Qht={async Rzt(t,s){this.nzt++;try{const i=await this.Zk.setItem(t,s);await this.Qxt(async()=>{this.tzt=t,this.fG=i,await this._4(Rl.uX.Q7t.aX.pzt),await this._4(Rl.uX.Q7t.aX.dzt)})}catch(t){await this.lzt(t)}finally{this.nzt--,0===this.nzt&&await this._4(Rl.uX.Q7t.aX.Izt)}},async Ezt(t,s){if(s){const i=s.Zvt(this.Gi);if(i){const e=i.M6();if(e){const h=e.GetArrayBufferReadOnly();this.nzt++;try{await this.Zk.setItem(t,h),await this.Qxt(async()=>{this.tzt=t,this.fG="",await this._4(Rl.uX.Q7t.aX.pzt),await this._4(Rl.uX.Q7t.aX.dzt)})}catch(t){await this.lzt(t)}finally{this.nzt--,0===this.nzt&&await this._4(Rl.uX.Q7t.aX.Izt)}}}}},async Azt(t){this.hzt++;try{const s=await this.Zk.getItem(t);await this.Qxt(async()=>{this.tzt=t,this.fG=i(s)?s:"",await this._4(Rl.uX.Q7t.aX.gzt),await this._4(Rl.uX.Q7t.aX.mzt)})}catch(t){await this.lzt(t)}finally{this.hzt--,0===this.hzt&&await this._4(Rl.uX.Q7t.aX.Czt)}},async Fzt(s,t){if(t){const i=t.Zvt(this.Gi);if(i){const e=i.M6();this.hzt++;try{let t=await this.Zk.getItem(s);t=t instanceof ArrayBuffer?t:new ArrayBuffer(0),await this.Qxt(async()=>{this.fG="",this.tzt=s,e.SetArrayBufferTransfer(t),await this._4(Rl.uX.Q7t.aX.gzt),await this._4(Rl.uX.Q7t.aX.mzt)})}catch(t){await this.lzt(t)}finally{this.hzt--,0===this.hzt&&await this._4(Rl.uX.Q7t.aX.Czt)}}}},async Ozt(t){try{const s=await this.Zk.getItem(t);await this.Qxt(async()=>{this.tzt=t,null==s?(this.fG="",await this._4(Rl.uX.Q7t.aX.Mzt)):(this.fG=i(s)?s:"",await this._4(Rl.uX.Q7t.aX.vzt))})}catch(t){await this.lzt(t)}},async hf(t){try{await this.Zk.removeItem(t),await this.Qxt(async()=>{this.tzt=t,this.fG="",await this._4(Rl.uX.Q7t.aX.wzt),await this._4(Rl.uX.Q7t.aX.yzt)})}catch(t){await this.lzt(t)}},async Dzt(){try{await this.Zk.clear(),await this.Qxt(async()=>{this.tzt="",this.fG="",Rl.Br(this.szt),await this._4(Rl.uX.Q7t.aX.Szt)})}catch(t){await this.lzt(t)}},async kzt(){try{const t=await this.Zk.keys();await this.Qxt(async()=>{this.szt=t,await this._4(Rl.uX.Q7t.aX.bzt)})}catch(t){await this.lzt(t)}},async Lzt(){const t=await this.e_t("request-persistent");t.isOk&&(this.ezt=t.isPersistent)},Nzt(s){if(this.rzt){let t;try{t=JSON.parse(s)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}t&&t["is-c3-storage"]&&Array.isArray(t.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.Zk.ki(new Map(t.items))}}}}{const El=self.Ns;El.uX.Q7t.tnt={Bzt(){return this.fG},Key(){return this.tzt},Wzt(){return this.szt.length},jzt(t){return(t=Math.floor(t))<0||t>=this.szt.length?"":this.szt[t]},Vzt(){return this.izt},Uzt(){return this.rzt?JSON.stringify({"is-c3-storage":!0,items:[...this.Zk.Di()]}):""}}}{const Al=self.Ns;Al.uX.Hzt=class extends Al.Rxt{constructor(t){super(t,"text-input"),this.Oxt("click",(t,s)=>t.zzt(s)),this.Oxt("dblclick",(t,s)=>t.kUt(s)),this.Oxt("change",(t,s)=>t.Jzt(s))}ln(){super.ln()}}}{const Fl=self.Ns;Fl.uX.Hzt.gIt=class extends Fl.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const Ol=self.Ns,Dl=self.$s,kl=["text","password","email","number","tel","url","textarea","search"],Ll=(Ol.uX.Hzt.Instance=class extends Ol.O_t{constructor(t,s){super(t,"text-input"),this.cf="",this.qzt="",this.$zt="",this.jyt=!0,this.Xzt=!1,this.Yzt=!1,this.wf="text",this.N_t=!0,this.Kzt=-1,this.ff="",this.Zzt="",s&&(this.cf=s[0],this.qzt=s[1],this.$zt=s[2],this.CD().H5(s[3]),this.jyt=s[4],this.Xzt=s[5],this.Yzt=s[6],this.wf=kl[s[7]],this.N_t=s[8],this.ff=s[9],this.Zzt=s[10]),this.X_t({type:this.wf,id:this.ff,className:this.Zzt})}ln(){super.ln()}Y_t(){return{text:this.cf,placeholder:this.qzt,title:this.$zt,isEnabled:this.jyt,isReadOnly:this.Xzt,spellCheck:this.Yzt,maxLength:this.Kzt}}async zzt(t){this.Vxt("click",!0),await this._4(Ol.uX.Hzt.aX.Qzt)}async kUt(t){this.Vxt("dblclick",!0),await this._4(Ol.uX.Hzt.aX.t9t)}async Jzt(t){this.cf=t.text,this.Vxt("change",!0),await this._4(Ol.uX.Hzt.aX.s9t)}i9t(t){this.cf!==t&&(this.cf=t,this.Q_t())}e9t(){return this.cf}h9t(t){this.qzt!==t&&(this.qzt=t,this.Q_t())}n9t(){return this.qzt}r9t(t){this.$zt!==t&&(this.$zt=t,this.Q_t())}o9t(){return this.$zt}OMt(t){this.jyt!==(t=!!t)&&(this.jyt=t,this.Q_t())}kMt(){return this.jyt}a9t(t){this.Xzt!==(t=!!t)&&(this.Xzt=t,this.Q_t())}l9t(){return this.Xzt}u9t(t){t=Math.max(+t,-1),this.Kzt!==t&&(this.Kzt=t,this.Q_t())}c9t(){return this.Kzt}f9t(){Promise.resolve().then(()=>this.J_t("scroll-to-bottom"))}gM(t){}jv(){return{t:this.cf,p:this.qzt,ti:this.$zt,e:this.jyt,r:this.Xzt,sp:this.Yzt,ml:this.Kzt,type:this.wf,id:this.ff}}Vv(t){this.cf=t.t,this.qzt=t.p,this.$zt=t.ti,this.jyt=t.e,this.Xzt=t.r,this.Yzt=t.sp,this.Kzt=t.hasOwnProperty("ml")?t.ml:-1,this.wf=t.type,this.ff=t.id,this.Q_t()}Lnt(t){switch(t){case 0:return this.cf;case 1:return this.qzt;case 2:return this.$zt;case 4:return this.jyt;case 5:return this.Xzt;case 6:return this.Yzt;case 8:return this.N_t}}Unt(t,s){switch(t){case 0:this.cf!==s&&(this.cf=s,this.Q_t());break;case 1:this.qzt!==s&&(this.qzt=s,this.Q_t());break;case 2:this.$zt!==s&&(this.$zt=s,this.Q_t());break;case 4:this.jyt!==!!s&&(this.jyt=!!s,this.Q_t());break;case 5:this.Xzt!==!!s&&(this.Xzt=!!s,this.Q_t());break;case 6:this.Yzt!==!!s&&(this.Yzt=!!s,this.Q_t());break;case 8:this.N_t=!!s}}d_t(){const s=Ol.uX.Hzt.Qht,t="plugins.textbox";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.cf,V8t:t=>this.m_t(s.pf,t)},{name:t+".properties.enabled.name",value:this.jyt,V8t:t=>this.m_t(s.F2t,t)},{name:t+".properties.read-only.name",value:this.Xzt,V8t:t=>this.m_t(s.d9t,t)}]}]}Gxt(){return self.p9t}},new WeakMap);self.p9t=class extends self.S6{constructor(){super(),Ll.set(this,self.ON.BN().M6())}set text(t){Dl.Te(t),Ll.get(this).i9t(t)}get text(){return Ll.get(this).e9t()}set placeholder(t){Dl.Te(t),Ll.get(this).h9t(t)}get placeholder(){return Ll.get(this).n9t()}set m9t(t){Dl.Te(t),Ll.get(this).r9t(t)}get m9t(){return Ll.get(this).o9t()}set isEnabled(t){Ll.get(this).OMt(t)}get isEnabled(){return Ll.get(this).kMt()}set isReadOnly(t){Ll.get(this).a9t(t)}get isReadOnly(){return Ll.get(this).l9t()}set maxLength(t){Dl.Me(t),Ll.get(this).u9t(t)}get maxLength(){return Ll.get(this).c9t()}g9t(){Ll.get(this).f9t()}}}{const Nl=self.Ns;Nl.uX.Hzt.aX={y9t(t,s){return 0===s?Nl.wh(this.cf,t):this.cf===t},s9t(){return!0},Qzt(){return!0},t9t(){return!0}}}{const Bl=self.Ns;Bl.uX.Hzt.Qht={pf(t){this.i9t(t.toString())},w9t(t){""!==t&&this.i9t(this.e9t()+t)},S9t(t){this.h9t(t)},b9t(t){this.r9t(t)},d9t(t){this.a9t(0===t)},v9t(){this.f9t()},M9t(t){this.u9t(t)}}}{const Wl=self.Ns;Wl.uX.Hzt.tnt={Text(){return this.e9t()},x9t(){return this.c9t()}}}{const jl=self.Ns;jl.uX._9t=class extends jl.txt{constructor(t){super(t)}ln(){super.ln()}}}{const Vl=self.Ns;Vl.uX._9t.gIt=class extends Vl.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const Ul=self.Ns;Ul.uX._9t.Instance=class extends Ul.Hxt{constructor(t,s){if(super(t),this.G9t="",this.T9t=0,this.I9t="",this.C9t=0,this.o0=-1,this.P9t=new Map,this.R9t=null,this.E9t="",this.A9t=!1,this.F9t=null,this.O9t=null,this.D9t=null,this.skt=this.uf.Lk(),this.skt){this.F9t=N("fs"),this.O9t=N("path");const i=self.process||nw.process;this.D9t=this.O9t.dirname(i.execPath)+"\\"}}ln(){super.ln()}async k9t(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.I9t=t,await this._4(Ul.uX._9t.aX.L9t),this.I9t=t,await this._4(Ul.uX._9t.aX.czt)}async N9t(t){this.I9t=t,await this._4(Ul.uX._9t.aX.B9t),this.I9t=t,await this._4(Ul.uX._9t.aX.W9t)}async j9t(t,s){s.lengthComputable&&(this.C9t=s.loaded/s.total,this.I9t=t,await this._4(Ul.uX._9t.aX.V9t))}async U9t(t,s){s.lengthComputable&&(this.C9t=s.loaded/s.total,this.I9t=t,await this._4(Ul.uX._9t.aX.H9t))}z9t(i,e,t){if(this.skt){const s=this.F9t,h=this.D9t+e;s.existsSync(h)?s.readFile(h,{encoding:"utf8"},(t,s)=>{t?this.k9t(i,e,t):(this.G9t=s.replace(/\r\n/g,"\n"),this.N9t(i))}):this.k9t(i,e,t)}else this.k9t(i,e,t)}async J9t(s,i){const t=this.uf.jF(),e=this.R9t;this.R9t=null;try{if(e){const h=await t.qU(i);e.SetArrayBufferTransfer(h),this.G9t=""}else{const n=await t.$U(i);this.G9t=n.replace(/\r\n/g,"\n")}this.T9t=0,this.N9t(s)}catch(t){this.k9t(s,i,t)}}q9t(o,a,t,l){return new Promise(s=>{const i=t=>{this.z9t(o,a,t),s()},e=this.R9t;this.R9t=null;try{const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(4===h.readyState){if(e?this.G9t="":this.G9t=(h.responseText||"").replace(/\r\n/g,"\n"),this.T9t=h.status,400<=h.status)this.k9t(o,a,h.status+h.statusText);else{const t=this.G9t.length||e&&h.response instanceof ArrayBuffer;this.skt&&!t||!this.skt&&0===h.status&&!t||(e&&e.SetArrayBufferTransfer(h.response),this.N9t(o))}s()}},h.onerror=i,h.ontimeout=i,h.onabort=i,h.onprogress=t=>this.j9t(o,t),h.upload.onprogress=t=>this.U9t(o,t),h.open(t,a),0<=this.o0&&void 0!==h.timeout&&(h.timeout=this.o0),h.responseType=e?"arraybuffer":"text",l&&!this.P9t.has("Content-Type")&&("string"!=typeof l?h.setRequestHeader("Content-Type","application/octet-stream"):h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[n,r]of this.P9t)try{h.setRequestHeader(n,r)}catch(t){console.error(`[Construct] AJAX: Failed to set header '${n}: ${r}': `,t)}if(this.P9t.clear(),this.E9t){try{h.overrideMimeType(this.E9t)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.E9t=""}this.A9t&&(h.withCredentials=!0,this.A9t=!1),l?h.send(l):h.send()}catch(t){i(t)}})}d_t(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.T9t},{name:t+".last-data",value:this.G9t}]}]}jv(){return{lastData:this.G9t,lastStatusCode:this.T9t}}Vv(t){this.G9t=t.lastData,this.T9t=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.I9t="",this.C9t=0}}}{const Hl=self.Ns;Hl.uX._9t.aX={W9t(t){return Hl.wh(this.I9t,t)},B9t(){return!0},czt(t){return Hl.wh(this.I9t,t)},L9t(){return!0},V9t(t){return Hl.wh(this.I9t,t)},H9t(t){return Hl.wh(this.I9t,t)}}}{const zl=self.Ns;zl.uX._9t.Qht={async Request(t,s){this.uf.zDt()&&zl.bo(s)&&this.uf.jF().zU()?await this.J9t(t,s):await this.q9t(t,s,"GET",null)},async $9t(t,s){this.uf.zDt()&&this.uf.jF().zU()?await this.J9t(t,s):await this.q9t(t,s,"GET",null)},async X9t(t,s,i,e){await this.q9t(t,s,e,i)},async Y9t(t,s,i,e){if(i){const h=i.Zvt(this.Gi);if(h){const n=h.M6(),r=n.GetArrayBufferReadOnly();await this.q9t(t,s,e,r)}}},K9t(t){this.o0=1e3*t},Z9t(t,s){this.P9t.set(t,s)},Q9t(t){if(t){const s=t.Zvt(this.Gi);s&&(this.R9t=s.M6())}},tJt(t){this.E9t=t},sJt(t){this.A9t=!!t}}}{const Jl=self.Ns;Jl.uX._9t.tnt={iJt(){return this.G9t},eJt(){return this.T9t},hJt(){return this.C9t},Tag(){return this.I9t}}}{const ql=self.Ns,$l=[];ql.uX.Audio=class extends ql.txt{constructor(t){super(t)}nJt(t){$l.push(t)}static async rJt(){await Promise.all($l),ql.Br($l)}ln(){super.ln()}}}{let s=function(){return i.CL().M6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const Xl=self.Ns,Yl=self.$s;Xl.uX.Audio.gIt=class extends Xl.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}Gxt(){return self.oJt}};let i=null;self.oJt=class extends self.PL{constructor(t){super(t),i=t}get aJt(){return t().GetAudioContextExtern()}get lJt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().uJt()}set isSilent(t){s().cJt(t)}get masterVolume(){return s().fJt()}set masterVolume(t){Yl.Me(t),s().dJt(t)}pJt(){s().mJt()}}}{const Kl=self.Ns,Zl=["interactive","balanced","playback"];Kl.uX.Audio.Instance=class extends Kl.Hxt{constructor(t,s){super(t,"audio"),this.gJt=0,this.yJt=[],this.wJt=!0,this.SJt=0,this.bJt=0,this.vJt=!1,this.MJt=1,this.xJt=1,this._Jt=[this.uf.G9()/2,this.uf.T9()/2,600],this.GJt=[0,0,-1],this.TJt=[0,1,0],this.IJt=600,this.CJt=1e4,this.PJt=1,this.RJt=null,this.EJt=-1,this.AJt=1,this.FJt=!1,this.OJt=0,this.DJt="suspended",this.kJt=0,this.LJt=new Map,this.NJt=0,this.BJt=0,this.WJt=new Map,this.jJt=new Map;let i="interactive";s&&(this.SJt=s[0],this.bJt=s[1],this.vJt=s[2],i=Zl[s[3]],this.wJt=s[4],this.MJt=s[5],this.xJt=s[6],this._Jt[2]=s[7],this.IJt=s[8],this.CJt=s[9],this.PJt=s[10]),this.VJt=[],this.UJt=[],this.HJt=[],this.s_t([["state",t=>this.zJt(t)],["audiocontext-state",t=>this.JJt(t)],["fxstate",t=>this.qJt(t)],["trigger",t=>this.$Jt(t)],["buffer-metadata",t=>this.XJt(t)]]);const e=this.XD().Uf(),h=(this.v0=new Kl.w0(Kl.f0.y0(e,"instancedestroy",t=>this.YJt(t.F6)),Kl.f0.y0(e,"afterload",()=>this.BY()),Kl.f0.y0(e,"suspend",()=>this.KJt()),Kl.f0.y0(e,"resume",()=>this.ZJt())),"Safari"===Kl.li.di),n=this.uf.NNt(),r=this.uf.jF().zU(),o="playable-ad-single-file"===this.uf.kk(),a=h||n||r||o;this.uf.jD(this.e_t("create-audio-context",{preloadList:this.uf.jF().bH().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.SJt,latencyHint:i,panningModel:this.MJt,distanceModel:this.xJt,refDistance:this.IJt,maxDistance:this.CJt,rolloffFactor:this.PJt,listenerPos:this._Jt,usePlayMusicAsSoundWorkaround:a}).then(t=>{this.OJt=t.sampleRate,this.DJt=t.audioContextState,this.kJt=t.outputLatency})),this.l_t()}ln(){this.RJt=null,super.ln()}QJt(t){return this.wJt?t.split(" ").filter(t=>!!t):t?[t]:[]}tqt(s,t){for(const i of t){let t=!1;for(const e of s)if(Kl.wh(e,i)){t=!0;break}if(!t)return!1}return!0}sqt(t,s){return this.tqt(t,this.QJt(s))}nJt(t){this.EL().nJt(t)}YJt(t){this.RJt===t&&(this.RJt=null)}iqt(t){return Math.pow(10,t/20)}eqt(t){const s=this.iqt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}hqt(t){return Math.log(t)/Math.log(10)*20}nqt(t){return this.hqt(Math.max(Math.min(t,1),0))}KJt(){this.vJt||this.i_t("set-suspended",{isSuspended:!0})}ZJt(){this.vJt||this.i_t("set-suspended",{isSuspended:!1})}zJt(t){const s=t.tickCount,i=(this.kJt=t.outputLatency,this.VJt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.VJt=t.audioInstances,this.HJt=t.analysers,0<i.length&&Kl.$h(this.VJt,i)}XJt(t){this.WJt.set(t.originalUrl,{duration:t.duration})}JJt(t){this.DJt=t.audioContextState}lnt(){return this.uf.OOt()?"running":this.DJt}qJt(t){this.UJt=t.fxstate}rqt(t){const s=this.QJt(t);for(const i of this.VJt)if(this.tqt(i.tags,s))return i;return null}oqt(t){const s=this.QJt(t);return this.VJt.some(t=>this.tqt(t.tags,s)&&t.isPlaying)}aqt(t,s,i,e,h){if(this.oqt(s))return null;const n=this.WJt.get(t),r={tags:this.QJt(s),duration:n?n.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.VJt.push(r),r}lqt(t){const s=this.QJt(t);for(const i of this.VJt)this.tqt(i.tags,s)&&(i.isPlaying=!1)}async $Jt(t){const s=t.type,i=(this.yJt=t.tags,t.aiid);if("ended"===s){for(const e of this.VJt)if(e.aiid===i){e.isPlaying=!1;break}await this._4(Kl.uX.Audio.aX.uqt)}else"fade-ended"===s&&await this._4(Kl.uX.Audio.aX.cqt)}fqt(t){return this.sqt(this.yJt,t)}kK(){const t={timeScale:this.uf.jO(),gameTime:this.uf.ANt(),instPans:this.dqt(),tickCount:this.uf.FNt()};if(this.RJt){const s=this.RJt.CD();this._Jt[0]=s.Cv(),this._Jt[1]=s.Ev(),t.listenerPos=this._Jt,t.listenerOrientation=[...this.GJt,...this.TJt]}this.i_t("tick",t)}pqt(t,s,i,e,h){if(0!==i){const n=Math.sin(i),r=Math.cos(i),o=(t-=e)*n,a=(s-=h)*n,l=t*r,u=s*r;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}dqt(){return this.VJt.filter(t=>-1!==t.uid).map(t=>this.uf.xD(t.uid)).filter(t=>t).map(t=>{const s=t.CD(),i=s.PD().a5(),[e,h]=this.pqt(s.Cv(),s.Ev(),-i,this._Jt[0],this._Jt[1]);return{uid:t.YN(),x:e,y:h,z:s.nB(),angle:s.a5()-i}})}mqt(t,s){for(const i of this.HJt)if(i.index===s&&Kl.wh(i.tag,t))return i;return null}gqt(t){for(const s of this.QJt(t)){const i=s.toLowerCase();this.LJt.set(i,(this.LJt.get(i)||0)+1)}}uJt(){return this.FJt}cJt(t){this.FJt!==(t=!!t)&&(this.FJt=t,this.i_t("set-silent",{isSilent:t}))}fJt(){return this.AJt}dJt(t){this.AJt!==t&&(this.AJt=t,this.i_t("set-master-volume",{vol:t}))}mJt(){this.i_t("stop-all");for(const t of this.VJt)t.isPlaying=!1}yqt(t){return!t.hasOwnProperty("placeholder")&&3!==this.bJt&&!(t.isMusic&&1===this.bJt||!t.isMusic&&2===this.bJt)}jv(){return{isSilent:this.FJt,masterVolume:this.AJt,listenerZ:this._Jt[2],listenerForwardVec:this.GJt,listenerUpVec:this.TJt,listenerUid:this.RJt?this.RJt.YN():-1,remoteUrls:[...this.jJt.entries()],playing:this.VJt.filter(t=>this.yqt(t)),effects:this.UJt,analysers:this.HJt}}Vv(t){if(this.FJt=t.isSilent,this.AJt=t.masterVolume,this._Jt[2]=t.listenerZ,this.RJt=null,this.EJt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.GJt=t.listenerForwardVec:this.GJt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.TJt=t.listenerUpVec:this.TJt=[0,1,0],this.jJt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.jJt.set(s,i);this.VJt=t.playing;for(const e of this.VJt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.UJt=t.effects,this.HJt=t.analysers}BY(){if(-1!==this.EJt&&(this.RJt=this.uf.xD(this.EJt),this.EJt=-1,this.RJt)){const t=this.RJt.CD();this._Jt[0]=t.Cv(),this._Jt[1]=t.Ev()}for(const s of this.VJt){const i=this.uf.jF().SH(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.UJt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const n=this.uf.jF().SH(h.bufferOriginalUrl);n&&(h.bufferUrl=n.url,h.bufferType=n.type)}this.i_t("load-state",{saveLoadMode:this.bJt,timeScale:this.uf.jO(),gameTime:this.uf.ANt(),listenerPos:this._Jt,listenerOrientation:[...this.GJt,...this.TJt],isSilent:this.FJt,masterVolume:this.AJt,playing:this.VJt.filter(t=>null!==t.bufferUrl),effects:this.UJt})}d_t(){const t=[];for(const[i,e]of Object.entries(this.UJt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.VJt.length},...this.VJt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Ql=self.Ns;Ql.uX.Audio.aX={uqt(t){return this.fqt(t)},cqt(t){return this.fqt(t)},wqt(){return this.BJt===this.NJt},Sqt(){return!0},bqt(){return this.uJt()},vqt(){for(const t of this.VJt)if(t.isPlaying)return!0;return!1},Mqt(t){return this.oqt(t)}}}{const R=self.Ns,tu=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];R.uX.Audio.Qht={Play(t,s,i,e,h){const n=R.uX.Audio.Qht.xqt.call(this,t,s,i,e,h);return this.nJt(n),n},unt(t,s,i,e){R.uX.Audio.Qht.xqt.call(this,t,0,s,0,i,e)},async xqt(t,s,i,e,h,n){if(!this.FJt){const r=t[1],o=this.uf.jF().SH(t[0]);if(o){const a=this.gJt,l=(this.gJt=0,this.aqt(t[0],h,r,0!==s,this.eqt(i)));try{await this.e_t("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:r,tags:this.QJt(h),isLooping:0!==s,vol:this.eqt(i),stereoPan:R.mn(e/100,-1,1),pos:n||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.uf.FNt())}}}},async _qt(t,s,i,e,h,n,r,o,a,l,u){if(!this.FJt){const c=t[1],f=this.uf.jF().SH(t[0]);if(f){const d=this.gJt,p=(this.gJt=0,this.aqt(t[0],u,c,0!==s,this.eqt(i)));try{await this.e_t("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.QJt(u),isLooping:0!==s,vol:this.eqt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:n,angle:R.yn(r),innerAngle:R.yn(o),outerAngle:R.yn(a),outerGain:this.eqt(l)}})}finally{p&&(p.placeholder=this.uf.FNt())}}}},async Gqt(t,s,i,e,h,n,r,o){if(!this.FJt&&e){const a=e.Zvt();if(a&&a.CD()){const l=a.CD(),u=l.PD().a5(),[c,f]=this.pqt(l.Cv(),l.Ev(),-u,this._Jt[0],this._Jt[1]),d=t[1],p=this.uf.jF().SH(t[0]);if(p){const m=this.gJt,g=(this.gJt=0,this.aqt(t[0],o,d,0!==s,this.eqt(i)));try{await this.e_t("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.QJt(o),isLooping:0!==s,vol:this.eqt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.nB(),angle:l.a5()-u,innerAngle:R.yn(h),outerAngle:R.yn(n),outerGain:this.eqt(r),uid:a.YN()}})}finally{g&&(g.placeholder=this.uf.FNt())}}}}},async Tqt(t,s,i,e,h,n){if(!this.FJt){const r=1===t,o=this.uf.jF().SH(s)||this.jJt.get(s.toLowerCase());if(o){const a=this.gJt,l=(this.gJt=0,this.aqt(s,n,r,0!==i,this.eqt(e)));try{await this.e_t("play",{originalUrl:s,url:o.url,type:o.type,isMusic:r,tags:this.QJt(n),isLooping:0!==i,vol:this.eqt(e),stereoPan:R.mn(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.uf.FNt())}}}},async Iqt(t,s,i,e,h,n,r,o,a,l,u,c){if(!this.FJt){const f=1===t,d=this.uf.jF().SH(s)||this.jJt.get(s.toLowerCase());if(d){const p=this.gJt,m=(this.gJt=0,this.aqt(s,c,f,0!==i,this.eqt(e)));try{await this.e_t("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.QJt(c),isLooping:0!==i,vol:this.eqt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:n,z:r,angle:R.yn(o),innerAngle:R.yn(a),outerAngle:R.yn(l),outerGain:this.eqt(u)}})}finally{m&&(m.placeholder=this.uf.FNt())}}}},async Cqt(t,s,i,e,h,n,r,o,a){if(!this.FJt&&!this.FJt&&h){const l=h.Zvt();if(l&&l.CD()){const u=l.CD(),c=u.PD().a5(),[f,d]=this.pqt(u.Cv(),u.Ev(),-c,this._Jt[0],this._Jt[1]),p=1===t,m=this.uf.jF().SH(s)||this.jJt.get(s.toLowerCase());if(m){const g=this.gJt,y=(this.gJt=0,this.aqt(s,a,p,0!==i,this.eqt(e)));try{await this.e_t("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.QJt(a),isLooping:0!==i,vol:this.eqt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.nB(),angle:u.a5()-c,innerAngle:R.yn(n),outerAngle:R.yn(r),outerGain:this.eqt(o),uid:l.YN()}})}finally{y&&(y.placeholder=this.uf.FNt())}}}}},Pqt(t,s){this.i_t("set-looping",{tags:this.QJt(t),isLooping:0===s})},Rqt(t,s){this.i_t("set-muted",{tags:this.QJt(t),isMuted:0===s})},ont(t,s){this.i_t("set-volume",{tags:this.QJt(t),vol:this.eqt(s)})},Eqt(t,s,i,e){this.i_t("fade-volume",{tags:this.QJt(t),vol:this.eqt(s),duration:i,stopOnEnd:0===e})},Aqt(t,s){this.i_t("set-stereo-pan",{tags:this.QJt(t),p:R.mn(s/100,-1,1)})},async Fqt(t){const s=t[1],i=this.uf.jF().SH(t[0]);i&&(this.NJt++,await this.e_t("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.BJt++)},async Oqt(t,s){const i=1===t,e=this.uf.jF().SH(s)||this.jJt.get(s.toLowerCase());e&&(this.NJt++,await this.e_t("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.BJt++)},BW(t,s){this.i_t("set-playback-rate",{tags:this.QJt(t),rate:Math.max(s,0)})},PW(t){this.lqt(t),this.i_t("stop",{tags:this.QJt(t)})},Dqt(){this.mJt()},kqt(t,s){this.i_t("set-paused",{tags:this.QJt(t),paused:0===s})},Lqt(t,s){this.i_t("seek",{tags:this.QJt(t),pos:s})},Nqt(t){2===t&&(t=this.uJt()?1:0),this.cJt(0===t)},Bqt(t){const s=this.eqt(t);this.dJt(s)},Wqt(t,s,i,e,h,n,r){const o=tu[s];this.gqt(t),this.i_t("add-effect",{type:"filter",tags:this.QJt(t),params:[o,i,e,h,n,R.mn(r/100,0,1)]})},jqt(t,s,i,e){this.gqt(t),this.i_t("add-effect",{type:"delay",tags:this.QJt(t),params:[s,this.eqt(i),R.mn(e/100,0,1)]})},Vqt(t,s,i,e,h,n){this.gqt(t),this.i_t("add-effect",{type:"flanger",tags:this.QJt(t),params:[s/1e3,i/1e3,e,h/100,R.mn(n/100,0,1)]})},Uqt(t,s,i,e,h,n,r){this.gqt(t),this.i_t("add-effect",{type:"phaser",tags:this.QJt(t),params:[s,i,e,h,n,R.mn(r/100,0,1)]})},Hqt(t,s,i,e){const h=this.uf.jF().SH(s[0]);h&&(this.gqt(t),this.i_t("add-effect",{type:"convolution",tags:this.QJt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,R.mn(e/100,0,1)]}))},zqt(t,s){this.gqt(t),this.i_t("add-effect",{type:"gain",tags:this.QJt(t),params:[this.eqt(s)]})},Jqt(t,s){this.gqt(t),this.i_t("add-effect",{type:"stereopan",tags:this.QJt(t),params:[R.mn(s/100,-1,1)]})},qqt(t){this.gqt(t),this.i_t("add-effect",{type:"gain",tags:this.QJt(t),params:[0]})},$qt(t,s,i){this.gqt(t),this.i_t("add-effect",{type:"tremolo",tags:this.QJt(t),params:[s,R.mn(i/100,0,1)]})},Xqt(t,s,i){this.gqt(t),this.i_t("add-effect",{type:"ringmod",tags:this.QJt(t),params:[s,R.mn(i/100,0,1)]})},Yqt(t,s,i,e,h,n){this.gqt(t),this.i_t("add-effect",{type:"distortion",tags:this.QJt(t),params:[this.iqt(s),this.iqt(i),e,this.iqt(h),R.mn(n/100,0,1)]})},Kqt(t,s,i,e,h,n){this.gqt(t),this.i_t("add-effect",{type:"compressor",tags:this.QJt(t),params:[s,i,e,h/1e3,n/1e3]})},Zqt(t,s,i){this.gqt(t),this.i_t("add-effect",{type:"analyser",tags:this.QJt(t),params:[s,i]})},Qqt(t){const s=this.QJt(t);for(const i of s)this.LJt.set(i.toLowerCase(),0);this.i_t("remove-effects",{tags:s}),this.UJt={}},V6(t,s,i,e,h,n){this.i_t("set-effect-param",{tags:this.QJt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:n})},t$t(t){if(t){const s=t.Zvt();s&&s.CD()&&(this.RJt=s)}},s$t(t){this._Jt[2]=t},i$t(t,s,i,e,h,n){this.GJt[0]=t,this.GJt[1]=s,this.GJt[2]=-i,this.TJt[0]=e,this.TJt[1]=h,this.TJt[2]=-n},e$t(t){this.gJt=Math.max(t,0)},h$t(t){const s=t[1],i=this.uf.jF().SH(t[0]);i&&this.i_t("unload",{url:i.url,type:i.type,isMusic:s})},n$t(t,s){const i=1===t,e=this.uf.jF().SH(s)||this.jJt.get(s.toLowerCase());e&&this.i_t("unload",{url:e.url,type:e.type,isMusic:i})},r$t(){this.i_t("unload-all")},o$t(t,s,i){this.jJt.set(i.toLowerCase(),{url:t,type:s})}}}{const su=self.Ns;su.uX.Audio.tnt={a$t(t){const s=this.rqt(t);return s?s.duration:0},ent(t){const s=this.rqt(t);return s?s.playbackTime:0},ant(t){const s=this.rqt(t);return s?s.playbackRate:0},hnt(t){const s=this.rqt(t);return s?this.nqt(s.volume):0},l$t(){return this.nqt(this.fJt())},u$t(t){return this.LJt.get(t.toLowerCase())||0},c$t(t,s){const i=this.mqt(t,Math.floor(s));return i?i.binCount:0},f$t(t,s,i){const e=this.mqt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},d$t(t,s){const i=this.mqt(t,Math.floor(s));return i?i.peak:0},p$t(t,s){const i=this.mqt(t,Math.floor(s));return i?i.rms:0},m$t(){return this.OJt},g$t(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},y$t(){return this.kJt},w$t(t,s){return 0==(t=su.mn(+t,0,100)/100)?-1/0:t<.1?this.nqt(su.Dt(0,this.eqt(s),10*t)):su.Dt(s,0,(t-.1)/.9)}}}{const iu=self.Ns;iu.uX.Text=class extends iu.txt{constructor(t){super(t)}ln(){super.ln()}}}{const eu=self.Ns;eu.uX.Text.gIt=class extends eu.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}E$(t){}L$(){}}}{const hu=self.Ns,nu=self.$s,ru=[0,0,0],ou=["left","center","right"],au=["top","center","bottom"],lu=["ltr","rtl"],uu=["word","cjk","character"],cu=new hu.Rect,fu=new hu.tu,du=new hu.Ho,pu=hu.an(hu.Za),mu=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),E=(hu.uX.Text.Instance=class extends hu.w_t{constructor(t,s){if(super(t),this.cf="",this.S$t=!0,this.b$t="Arial",this.v$t=12,this.M$t=0,this.XT=!1,this.YT=!1,this.dv=hu.an(hu.Ho),this.iI=0,this.eI=0,this.rI="word",this.oI=0,this.x$t="auto",this._$t=1,this.G$t=null,this.T$t="",this.I$t=!1,this.C$t=!1,this.P$t=null,this.R$t=-1,this.E$t=-1,this.A$t=0,this.F$t=hu.an(hu.ny._b,this.uf.qb(),{timeout:5}),this.F$t.DI=()=>this.uf.DD(),this.O$t=()=>this.D$t(),this.k$t=!1,s){this.cf=s[0],this.S$t=!!s[1],this.b$t=s[2],this.v$t=s[3],this.M$t=s[4],this.XT=!!s[5],this.YT=!!s[6],this.iI=s[8],this.eI=s[9],this.rI=uu[s[10]],this.oI=s[11],this.L$t(this.uf.L8(s[12]));const i=s[7];this.dv.Yo(i[0],i[1],i[2]),this.CD().H5(s[13]),this.C$t=!!s[15]}this.N$t(),this.B$t()}ln(){this.L$t(null),this.W$t(),this.P$t&&(this.P$t.ln(),this.P$t=null),this.F$t.ln(),this.F$t=null,super.ln()}N$t(){const t=this.F$t;t.pf(this.cf),t.BI(this.S$t),this.F$t.VT()&&this.G$t?this.F$t.lm(this.XD().UNt(this.G$t)):this.F$t.lm(null),t.WI("nearest"!==this.uf.eO()),t.jI(this.b$t),t.zI(this.M$t),t.qI(this.XT),t.XI(this.YT),t.wv(this.dv),t.iC(ou[this.iI]),t.hC(au[this.eI]),t.rC(this.rI),t.aC(lu[this.oI])}j$t(){let t=this.CD(),s=(this.F$t.VI(this.v$t),this.F$t.HI(t.eEt()),t.PD()),i;"auto"===this.x$t?i=s.gJ(t.nB()):"fixed"===this.x$t&&(i=this._$t),t.p6()&&i!==this.F$t.fC()&&t.rAt(!0),this.F$t.cC(t.fm(),t.Gm(),i)}L$t(t){t&&(t.$z()||t.EL().constructor!==hu.uX.kht)||t!==this.G$t&&(this.G$t&&this.G$t.Uf().removeEventListener("animationframeimagechange",this.O$t),this.G$t=t,this.G$t&&this.G$t.Uf().addEventListener("animationframeimagechange",this.O$t),this.N$t(),this.I$t=!1,this.uf.DD())}D$t(){this.uf.HNt(this.G$t),this.uf.DD(),this.k$t=!0}B$t(){if(this.C$t){let t=this.cf;this.S$t&&(t=hu.Ah.im(t)),this.P$t?this.P$t.pf(t):this.P$t=hu.an(hu.lf,this.uf,t)}else this.P$t&&(this.P$t.ln(),this.P$t=null)}gM(t){const s=this.CD(),i=(this.j$t(),this.k$t&&(this.k$t=!1,this.F$t.VT())&&this.G$t&&this.F$t.lm(this.XD().UNt(this.G$t)),this.F$t.z2());if(i){const e=s.PD();if(0===s.a5()&&0===e.a5()&&0===s.nB()&&!s.p6()&&e.O9()){const h=s.lB(),[n,r]=e.EN(h.Zn(),h.Qn()),[o,a]=e.EN(h.er(),h.hr()),l=n-Math.round(n),u=r-Math.round(r),[c,f]=(cu.set(n,r,o,a),cu.offset(-l,-u),fu.vu(cu),t.rE(t.GE()));this.uf.Wk().HV(t,c,f),t.zR(i),t.OS(fu,this.F$t.VC()),e.JV(t)}else t.zR(i),s.p6()?this.f8t(s,t):this.d8t(s,t)}}d8t(t,s){let i=t.lB();this.uf.nO()&&(i=this.V$t(i)),s.OS(i,this.F$t.VC())}f8t(s,t){const i=s.nAt();if(s.oAt()){s.NEt(cu,fu,!1);let t=fu;this.uf.nO()&&(t=this.V$t(t)),i.mM(s.m6(),t,this.F$t.VC()),s.rAt(!1)}i.gM(t)}V$t(t){const s=t.Zn()-Math.round(t.Zn()),i=t.Qn()-Math.round(t.Qn());return 0==s&&0==i?t:(fu.T(t),fu.offset(-s,-i),fu)}I_t(){const t=this.F$t.z2();return t?[t.fm(),t.Gm()]:[100,100]}C_t(){return this.F$t.VC()}E_t(){return!1}jv(){const t={t:this.cf,c:this.dv.toJSON(),fn:this.b$t,ps:this.v$t};return this.S$t&&(t.bbc=this.S$t),0!==this.iI&&(t.ha=this.iI),0!==this.eI&&(t.va=this.eI),"word"!==this.rI&&(t.wr=this.rI),0!==this.M$t&&(t.lho=this.M$t),this.XT&&(t.b=this.XT),this.YT&&(t.i=this.YT),-1!==this.E$t&&(t.tw={st:this.R$t,en:this.E$t,l:this.A$t}),this.G$t&&(t.ioc=this.G$t.i9()),"fixed"===this.x$t&&(t.fs=this._$t),t}Vv(t){if(this.W$t(),this.cf=t.t,this.dv.Va(t.c),this.b$t=t.fn,this.v$t=t.ps,this.S$t=!!t.hasOwnProperty("bbc")&&t.bbc,this.iI=t.hasOwnProperty("ha")?t.ha:0,this.eI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.rI="boolean"==typeof s?s?"word":"character":s}else this.rI="word";if(this.M$t=t.hasOwnProperty("lho")?t.lho:0,this.XT=!!t.hasOwnProperty("b")&&t.b,this.YT=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.R$t=i.st,this.E$t=i.en,this.A$t=i.l}if(t.hasOwnProperty("ioc")){const e=this.XD().L8(t.ioc);e&&this.L$t(e)}else this.L$t(null);t.hasOwnProperty("fs")?(this.x$t="fixed",this._$t=t.fs):this.x$t="auto",this.N$t(),this.B$t(),this.I$t=!1,-1!==this.E$t&&this.l_t()}Lnt(t){switch(t){case 0:return this.uC();case 1:return this.S$t;case 2:return this.U$t();case 3:return this.H$t();case 4:return this.z$t();case 5:return this.J$t();case 6:return this.q$t();case 7:return ru[0]=this.dv.ra(),ru[1]=this.dv.oa(),ru[2]=this.dv.aa(),ru;case 8:return this.$$t();case 9:return this.X$t();case 10:return this.Y$t();case 15:return this.K$t()}}Unt(t,s){switch(t){case 0:this.i9t(s);break;case 1:this.S$t!==!!s&&(this.S$t=!!s,this.N$t());break;case 2:this.Z$t(s);break;case 3:this.Q$t(s);break;case 4:this.tXt(s);break;case 5:this.sXt(s);break;case 6:this.iXt(s);break;case 7:const i=this.dv,e=s;i.ra()===e[0]&&i.oa()===e[1]&&i.aa()===e[2]||(this.dv.Yo(e[0],e[1],e[2]),this.N$t());break;case 8:this.eXt(s);break;case 9:this.hXt(s);break;case 10:this.nXt(s)}}p_t(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.dv.Ko(s,i,e),this.N$t())}i9t(t){this.cf!==t&&(this.cf=t,this.F$t.pf(t),this.B$t(),this.I$t=!1,this.uf.DD())}uC(){return this.cf}rXt(t,s){this.j$t(),this.i9t(t),this.R$t=this.uf.WO(),this.E$t=this.R$t+s/this.ZW().QN(),this.A$t=this.F$t.gC(),this.F$t.KI(0),this.l_t()}W$t(){this.R$t=-1,this.E$t=-1,this.A$t=0,this.F$t.KI(-1),this.qxt()}oXt(){-1!==this.E$t&&(this.W$t(),this.M4(hu.uX.Text.aX.aXt),this.uf.DD())}Z$t(t){this.b$t!==t&&(this.b$t=t,this.F$t.jI(t),this.uf.DD())}U$t(){return this.b$t}sXt(t){this.XT!==(t=!!t)&&(this.XT=t,this.F$t.qI(t),this.uf.DD())}J$t(){return this.XT}iXt(t){this.YT!==(t=!!t)&&(this.YT=t,this.F$t.XI(t),this.uf.DD())}q$t(){return this.YT}Q$t(t){this.v$t!==t&&(this.v$t=t,this.uf.DD())}H$t(){return this.v$t}lXt(t){this.dv.da(t)||(this.dv.na(t),this.F$t.wv(this.dv),this.uf.DD())}uXt(){return this.dv}tXt(t){this.M$t!==t&&(this.M$t=t,this.N$t(),this.uf.DD())}z$t(){return this.M$t}eXt(t){this.iI!==t&&(this.iI=t,this.N$t(),this.uf.DD())}$$t(){return this.iI}hXt(t){this.eI!==t&&(this.eI=t,this.N$t(),this.uf.DD())}X$t(){return this.eI}cXt(t){this.nXt(uu[t])}nXt(t){this.rI!==t&&(this.rI=t,this.N$t(),this.uf.DD())}Y$t(){return this.rI}fXt(t){this.oI!==t&&(this.oI=t,this.N$t(),this.uf.DD())}dXt(){return this.oI}pXt(t){this.C$t=!!t,this.B$t()}K$t(){return this.C$t}mXt(t){this.x$t!==t&&(this.x$t=t,this.uf.DD())}gXt(){return this.x$t}yXt(t){this._$t!==t&&(this._$t=t,"fixed"===this.x$t)&&this.uf.DD()}wXt(){return this._$t}SXt(){return this.j$t(),this.F$t.dC()}bXt(){return this.j$t(),this.F$t.mC()}vXt(t,s){this.j$t();const i=this.CD(),e=(pu.set(t-i.Cv(),s-i.Ev()),pu.rotate(-i.a5()),pu.offset(i.fm()*i.lW(),i.Gm()*i.cW()),pu.It(i.fm(),i.Gm()),pu.scale(this.F$t.fm(),this.F$t.Gm()),this.F$t.wC(pu.hl(),pu.rl()));if(e){const h=e.dg("tag");if(h)return h.param}return""}MXt(t,s,i){const e=this.vXt(s,i);return e&&hu.wh(t,e)}xXt(t,s){this.j$t(),s=Math.floor(s);const i=this.F$t.bC(t,s);if(!i)return null;const e=this.CD(),h=this.F$t.tC(),n=i.og(),r=i.lg()-(i.Gm()-i.Im())*h,o=i.fm()*h/this.F$t.fm()*e.fm(),a=i.Gm()*h/this.F$t.Gm()*e.Gm();return pu.set(n,r),pu.It(this.F$t.fm(),this.F$t.Gm()),pu.scale(e.fm(),e.Gm()),pu.offset(-e.fm()*e.lW(),-e.Gm()*e.cW()),pu.rotate(e.a5()),pu.offset(e.Cv(),e.Ev()),{x:pu.hl(),y:pu.rl(),width:o,height:a}}_Xt(t){return this.j$t(),this.F$t.vC(t)}GXt(t){let s=mu.get(t);return null===s?"":`</${s||"span"||"span"}>`}TXt(t,s){let i=mu.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async IXt(){if(!this.I$t){let t=new hu.Ah(this.cf,{kp:!0}).$p(),s=new Map,h='<span class="c3-text"',i=[],n=(i.push(`font-family: '${this.U$t()}';`),this.J$t()&&i.push("font-weight: bold;"),this.q$t()&&i.push("font-style: italic;"),"character"===this.Y$t()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.G$t?this.XD().UNt(this.G$t):null);if(this.G$t){const o=hu.an(hu.md),a=[],l=new Map;for(const c of t)if(c.xm()){const f=c.Sg(n);if(f){const d=f.ty(),p=d.rW().QGt();l.has(p)||(l.set(p,null),a.push(o.fc(async()=>{const t=await p.BH();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.xm()){const g=m.Sg(n);if(g){const y=g.ty(),w=y.rW().QGt();u.push(o.fc(async()=>{const t=await y.rW().sTt(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const r=new Map;for(const b of t){let e=b.mg(),t=[...r.keys()];t.reverse();for(const v of t)e.has(v)&&e.get(v)===r.get(v)||(r.delete(v),h+=this.GXt(v));for(const[M,x]of e)r.has(M)||(r.set(M,x),h+=this.TXt(M,x));if(b.vm()&&(h+=hu.tp(hu.Z1(b.Bm().join("")),"\n","<br>")),b.xm()&&n){const _=b.Sg(n);if(_){const G=s.get(_);if(G){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.uf.eO()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${b.wg()}" width="${_.fm()}" height="${_.Gm()}" style="${t.join(";")}" src="${G}">`}}}}const e=[...r.keys()];e.reverse();for(const T of e)h+=this.GXt(T);h+="</span>",this.T$t=h,this.I$t=!0}return this.T$t}kK(){const s=this.uf.WO();if(s>=this.E$t)this.W$t(),this.M4(hu.uX.Text.aX.aXt),this.uf.DD();else{let t=hu.Rn(this.R$t,this.E$t,s,0,this.A$t);(t=Math.floor(t))!==this.F$t.ZI()&&(this.F$t.KI(t),this.uf.DD())}}d_t(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.uC(),V8t:t=>this.i9t(t)},{name:t+".properties.font.name",value:this.U$t(),V8t:t=>this.Z$t(t)},{name:t+".properties.size.name",value:this.H$t(),V8t:t=>this.Q$t(t)},{name:t+".properties.line-height.name",value:this.z$t(),V8t:t=>this.tXt(t)},{name:t+".properties.bold.name",value:this.J$t(),V8t:t=>this.sXt(t)},{name:t+".properties.italic.name",value:this.q$t(),V8t:t=>this.iXt(t)}]}]}Gxt(){return self.CXt}},new WeakMap),gu=new Map([["left",0],["center",1],["right",2]]),yu=new Map([["top",0],["center",1],["bottom",2]]),wu=["ltr","rtl"];new Set(["auto","fixed"]);self.CXt=class extends self.y6{constructor(){super(),E.set(this,self.ON.BN().M6())}get text(){return E.get(this).uC()}set text(t){nu.Te(t);const s=E.get(this);s.W$t(),s.i9t(t)}PXt(t,s){nu.Te(t),nu.Me(s);const i=E.get(this);i.W$t(),i.rXt(t,s)}RXt(){E.get(this).oXt()}set XV(t){nu.Te(t),E.get(this).Z$t(t)}get XV(){return E.get(this).U$t()}set KV(t){E.get(this).sXt(t)}get KV(){return E.get(this).J$t()}set ZV(t){E.get(this).iXt(t)}get ZV(){return E.get(this).q$t()}set YV(t){nu.Me(t),E.get(this).Q$t(t)}get YV(){return E.get(this).H$t()}set EXt(t){if(nu.je(t),t.length<3)throw new Error("expected 3 elements");du.Yo(t[0],t[1],t[2]),E.get(this).lXt(du)}get EXt(){const t=E.get(this).uXt();return[t.ra(),t.oa(),t.aa()]}set lineHeight(t){nu.Me(t),E.get(this).tXt(t)}get lineHeight(){return E.get(this).z$t()}set sU(t){nu.Te(t);const s=gu.get(t);if(void 0===s)throw new Error("invalid mode");E.get(this).eXt(s)}get sU(){return ou[E.get(this).$$t()]}set verticalAlign(t){nu.Te(t);const s=yu.get(t);if(void 0===s)throw new Error("invalid mode");E.get(this).hXt(s)}get verticalAlign(){return au[E.get(this).X$t()]}set iU(t){if(!uu.includes(t))throw new Error("invalid mode");E.get(this).nXt(t)}get iU(){return E.get(this).Y$t()}set eU(t){nu.Te(t);const s=wu.indexOf(t);if(-1===s)throw new Error("invalid text direction");E.get(this).fXt(s)}get eU(){return wu[E.get(this).dXt()]}set AXt(t){E.get(this).pXt(!!t)}get AXt(){return E.get(this).K$t()}FXt(t){nu.Me(t);const s=E.get(this);s.mXt("fixed"),s.yXt(t)}OXt(){E.get(this).mXt("auto")}get rU(){return E.get(this).SXt()}get oU(){return E.get(this).bXt()}DXt(){const t=E.get(this);return[t.SXt(),t.bXt()]}kXt(t,s,i){return nu.Te(t),nu.Me(s),nu.Me(i),E.get(this).MXt(t,s,i)}LXt(t,s){return nu.Me(t),nu.Me(s),E.get(this).vXt(t,s)}NXt(t,s=0){return nu.Te(t),nu.Me(s),E.get(this).xXt(t,s)}BXt(t){return nu.Te(t),E.get(this)._Xt(t)}WXt(t){const s=E.get(this),i=s.XD().Ck(t);s.L$t(i)}jXt(){return E.get(this).IXt()}}}{const Su=self.Ns;Su.uX.Text.aX={y9t(t,s){return s?this.cf===t:Su.wh(this.cf,t)},VXt(){return-1!==this.E$t},aXt(){return!0},UXt(t,s,i){return this.MXt(t,s,i)}}}{const bu=self.Ns,vu=bu.an(bu.Ho);bu.uX.Text.Qht={pf(t){this.W$t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.i9t(t.toString())},w9t(t){this.W$t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.i9t(this.cf+t)},HXt(t,s){this.W$t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.rXt(t.toString(),s)},zXt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.b$t&&i===this.XT&&e===this.YT||(this.Z$t(t),this.sXt(i),this.iXt(e))},VI(t){this.Q$t(t)},JXt(t){vu.xa(t),vu.mn(),this.lXt(vu)},qXt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},vVt(t){this.CD().yv(t),this.uf.DD()},$Xt(){this.oXt()},zI(t){this.tXt(t)},XXt(t){this.eXt(t)},YXt(t){this.hXt(t)},KXt(t){this.cXt(t)},aC(t){this.fXt(t)},ZXt(t){this.L$t(t)},QXt(){return this.IXt()},tYt(t){this.pXt(t)},sYt(t,s){this.mXt(["auto","fixed"][t]),this.yXt(s)}}}{const Mu=self.Ns;Mu.uX.Text.tnt={Text(){return this.cf},iYt(){return this.S$t?Mu.Ah.im(this.cf):this.cf},eYt(){return this.b$t},hYt(){return this.v$t},nYt(){return this.SXt()},rYt(){return this.bXt()},oYt(){return this.M$t},aYt(t,s){return this.vXt(t,s)},lYt(t){return this._Xt(t)},uYt(t,s){const i=this.xXt(t,s);return i?i.x:0},cYt(t,s){const i=this.xXt(t,s);return i?i.y:0},fYt(t,s){const i=this.xXt(t,s);return i?i.width:0},dYt(t,s){const i=this.xXt(t,s);return i?i.height:0},pYt(){return this.T$t}}}{const xu=self.Ns;xu.uX.mYt=class extends xu.txt{constructor(t){super(t)}ln(){super.ln()}}}{const _u=self.Ns;_u.uX.mYt.gIt=class extends _u.Bxt{constructor(t){super(t),this.gYt=_u.an(self.yYt)}ln(){super.ln()}_xt(){this.rW().$D(this.uf)}E$(t){return this.rW().kV(t,{IM:this.uf.eO()})}L$(){this.rW().FI()}wYt(){return this.gYt}SYt(t,s,i,e){const h=this.rW(),n=this.gYt;n.Mm(h.fm()),n.pm(h.Gm()),n.bYt(t),n.vYt(s),n.MYt(i),n.xYt(e),n._Yt()}}}{const Gu=self.Ns,Tu=self.$s,Iu=Gu.an(Gu.Za),Cu=["left","center","right"],Pu=["top","center","bottom"],Ru=["word","cjk","character"],A=(Gu.uX.mYt.Instance=class extends Gu.w_t{constructor(t,s){super(t),this.cf="",this.S$t=!0,this.GYt=16,this.TYt=16,this.IYt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";if(this.CYt=1,this.PYt=0,this.$T=0,this.iI=0,this.eI=0,this.rI="word",this.RYt=!0,this.C$t=!1,this.P$t=null,this.EYt=null,this.R$t=-1,this.E$t=-1,this.A$t=0,s){this.cf=s[0],this.S$t=s[1],this.GYt=s[2],this.TYt=s[3],this.IYt=s[4],i=s[5],this.CYt=s[6],this.PYt=s[7],this.$T=s[8],this.iI=s[9],this.eI=s[10],this.rI=Ru[s[11]];const h=this.CD();h.H5(s[12]),this.C$t=!!s[14]}this.Jxt.SYt(this.GYt,this.TYt,this.IYt,i),this.EYt=Gu.an(self.AYt,this.Jxt.wYt());const e=this.CD();this.EYt.cC(e.fm(),e.Gm()),this.FYt(),this.B$t(),this.Gi.XCt()}ln(){this.W$t(),this.P$t&&(this.P$t.ln(),this.P$t=null),this.EYt.ln(),this.EYt=null,super.ln()}FYt(){const t=this.EYt;t&&(t.BI(this.S$t),t.pf(this.cf),t.rC(this.rI),t.OYt(Cu[this.iI]),t.DYt(Pu[this.eI]),t.kYt(this.PYt),t.zI(this.$T))}j$t(){const t=this.CD();this.EYt.cC(t.fm(),t.Gm()),this.EYt.n5(this.CYt)}B$t(){if(this.C$t){let t=this.cf;this.S$t&&(t=Gu.Ah.im(t)),this.P$t?this.P$t.pf(t):this.P$t=Gu.an(Gu.lf,this.uf,t)}else this.P$t&&(this.P$t.ln(),this.P$t=null)}gM(e){const h=this.vft.rW(),n=h.z2();if(n){e.zR(n);let t=this.CD(),s=t.lB(),i=this.EYt;i.n5(this.CYt),i.LYt(t.eEt()),this.uf.nO()&&(s=t.jEt(s)),i.cC(t.fm(),t.Gm()),i.wYt().NYt(h.VC()),i.wv(t.dB()),i.gM(e,s.Zn(),s.Qn(),t.a5()),this.RYt=!1}}jv(){const t={t:this.cf,ebbc:this.S$t,csc:this.CYt,csp:this.PYt,lh:this.$T,ha:this.iI,va:this.eI,w:this.rI,cw:this.Jxt.wYt().BYt(),ch:this.Jxt.wYt().WYt(),cs:this.Jxt.wYt().jYt(),sd:this.Jxt.wYt().VYt()};return-1!==this.E$t&&(t.tw={st:this.R$t,en:this.E$t,l:this.A$t}),t}Vv(t){if(this.W$t(),this.cf=t.t,this.S$t=t.ebbc,this.CYt=t.csc,this.PYt=t.csp,this.$T=t.lh,this.iI=t.ha,this.eI=t.va,t.hasOwnProperty("w")){const i=t.w;this.rI="boolean"==typeof i?i?"word":"character":i}else this.rI="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.R$t=e.st,this.E$t=e.en,this.A$t=t.l}const s=this.Jxt.wYt();s.bYt(t.cw),s.vYt(t.ch),s.MYt(t.cs),s.xYt(t.sd),this.FYt(),this.B$t(),-1!==this.E$t&&this.l_t()}Lnt(t){switch(t){case 0:return this.uC();case 1:return this.S$t;case 2:return this.Jxt.wYt().BYt();case 3:return this.Jxt.wYt().WYt();case 4:return this.Jxt.wYt().jYt();case 5:return this.Jxt.wYt().VYt();case 6:return this.UYt();case 7:return this.HYt();case 8:return this.z$t();case 9:return this.$$t();case 10:return this.X$t();case 11:return this.Y$t()}}Unt(t,s){switch(t){case 0:this.i9t(s);break;case 1:this.S$t!==!!s&&(this.S$t=!!s,this.FYt());break;case 2:this.Jxt.wYt().bYt(s);break;case 3:this.Jxt.wYt().vYt(s);break;case 4:this.Jxt.wYt().MYt(s);break;case 5:this.Jxt.wYt().xYt(s);break;case 6:this.zYt(s);break;case 7:this.JYt(s);break;case 8:this.tXt(s);break;case 9:this.eXt(s);break;case 10:this.hXt(s);break;case 11:this.nXt(s)}}i9t(t){this.cf!==t&&(this.cf=t,this.EYt.pf(t),this.B$t(),this.uf.DD())}uC(){return this.cf}rXt(t,s){this.i9t(t),this.R$t=this.uf.WO(),this.E$t=this.R$t+s/this.ZW().QN(),this.A$t=Gu.vp(Gu.Ah.im(t)),this.EYt.KI(0),this.l_t()}W$t(){this.R$t=-1,this.E$t=-1,this.A$t=0,this.EYt.KI(-1),this.qxt()}oXt(){-1!==this.E$t&&(this.W$t(),this.M4(Gu.uX.mYt.aX.aXt),this.uf.DD())}zYt(t){this.CYt!==t&&(this.CYt=t,this.EYt.n5(this.CYt),this.uf.DD())}UYt(){return this.CYt}JYt(t){this.PYt!==t&&(this.PYt=t,this.EYt.kYt(this.PYt),this.uf.DD())}HYt(){return this.PYt}tXt(t){this.$T!==t&&(this.$T=t,this.EYt.zI(this.$T),this.uf.DD())}z$t(){return this.$T}eXt(t){this.iI!==t&&(this.iI=t,this.FYt(),this.uf.DD())}$$t(){return this.iI}hXt(t){this.eI!==t&&(this.eI=t,this.FYt(),this.uf.DD())}X$t(){return this.eI}cXt(t){this.nXt(Ru[t])}nXt(t){this.rI!==t&&(this.rI=t,this.FYt(),this.uf.DD())}Y$t(){return this.rI}pXt(t){this.C$t=!!t,this.B$t()}K$t(){return this.C$t}SXt(){return this.j$t(),this.EYt.dC()}bXt(){return this.j$t(),this.EYt.mC()}vXt(t,s){this.j$t();const i=this.CD(),e=(Iu.set(t-i.Cv(),s-i.Ev()),Iu.rotate(-i.a5()),Iu.offset(i.fm()*i.lW(),i.Gm()*i.cW()),this.EYt.wC(Iu.hl(),Iu.rl()));if(e){const h=e.dg("tag");if(h)return h.param}return""}MXt(t,s,i){const e=this.vXt(s,i);return e&&Gu.wh(t,e)}xXt(t,s){this.j$t(),s=Math.floor(s);const i=this.EYt.bC(t,s);if(!i)return null;const e=this.CD();return Iu.set(i.og(),i.lg()),Iu.offset(-e.fm()*e.lW(),-e.Gm()*e.cW()),Iu.rotate(e.a5()),Iu.offset(e.Cv(),e.Ev()),{x:Iu.hl(),y:Iu.rl(),width:i.fm(),height:i.Gm()}}_Xt(t){return this.j$t(),this.EYt.vC(t)}kK(){const s=this.uf.WO();if(s>=this.E$t)this.W$t(),this.M4(Gu.uX.mYt.aX.aXt),this.uf.DD();else{let t=Gu.Rn(this.R$t,this.E$t,s,0,this.A$t);(t=Math.floor(t))!==this.EYt.ZI()&&(this.EYt.KI(t),this.uf.DD())}}d_t(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.uC(),V8t:t=>this.i9t(t)},{name:t+".properties.scale.name",value:this.UYt(),V8t:t=>this.zYt(t)},{name:t+".properties.character-spacing.name",value:this.HYt(),V8t:t=>this.JYt(t)},{name:t+".properties.line-height.name",value:this.z$t(),V8t:t=>this.tXt(t)}]}]}Gxt(){return self.qYt}},new WeakMap),Eu=new Map([["left",0],["center",1],["right",2]]),Au=new Map([["top",0],["center",1],["bottom",2]]);self.qYt=class extends self.y6{constructor(){super(),A.set(this,self.ON.BN().M6())}get text(){return A.get(this).uC()}set text(t){Tu.Te(t);const s=A.get(this);s.W$t(),s.i9t(t)}PXt(t,s){Tu.Te(t),Tu.Me(s);const i=A.get(this);i.W$t(),i.rXt(t,s)}RXt(){A.get(this).oXt()}set $Yt(t){Tu.Me(t),A.get(this).zYt(t)}get $Yt(){return A.get(this).UYt()}set XYt(t){Tu.Me(t),A.get(this).JYt(t)}get XYt(){return A.get(this).HYt()}set lineHeight(t){Tu.Me(t),A.get(this).tXt(t)}get lineHeight(){return A.get(this).z$t()}set sU(t){Tu.Te(t);const s=Eu.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).eXt(s)}get sU(){return Cu[A.get(this).$$t()]}set verticalAlign(t){Tu.Te(t);const s=Au.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).hXt(s)}get verticalAlign(){return Pu[A.get(this).X$t()]}set iU(t){if(!Ru.includes(t))throw new Error("invalid mode");A.get(this).nXt(t)}get iU(){return A.get(this).Y$t()}set AXt(t){A.get(this).pXt(!!t)}get AXt(){return A.get(this).K$t()}get rU(){return A.get(this).SXt()}get oU(){return A.get(this).bXt()}DXt(){const t=A.get(this);return[t.SXt(),t.bXt()]}kXt(t,s,i){return Tu.Te(t),Tu.Me(s),Tu.Me(i),A.get(this).MXt(t,s,i)}LXt(t,s){return Tu.Me(t),Tu.Me(s),A.get(this).vXt(t,s)}NXt(t,s=0){return Tu.Te(t),Tu.Me(s),A.get(this).xXt(t,s)}BXt(t){return Tu.Te(t),A.get(this)._Xt(t)}}}{const Fu=self.Ns;Fu.uX.mYt.aX={y9t(t,s){return s?this.cf===t:Fu.wh(this.cf,t)},VXt(){return-1!==this.E$t},aXt(){return!0},UXt(t,s,i){return this.MXt(t,s,i)}}}{const Ou=self.Ns;Ou.uX.mYt.Qht={pf(t){this.W$t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.i9t(t.toString())},w9t(t){this.W$t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.i9t(this.cf+t)},HXt(t,s){this.W$t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.rXt(t.toString(),s)},$Xt(){this.oXt()},n5(t){this.zYt(t)},YYt(t){this.JYt(t)},zI(t){this.tXt(t)},bYt(t,s){let i=!1,e=this.Jxt.wYt();for(const h of t)if(" "===h)e.KYt(s),i=!0;else{const n=e.ZYt(h);n&&(n.QYt(s),i=!0)}i&&e.tKt(),this.uf.DD()},vVt(t){this.CD().yv(t),this.uf.DD()},XXt(t){this.eXt(t)},YXt(t){this.hXt(t)},KXt(t){this.cXt(t)},tYt(t){this.pXt(t)}}}{const Du=self.Ns;Du.uX.mYt.tnt={sKt(t){const s=this.Jxt.wYt().ZYt(t);return s?s.iKt():this.Jxt.wYt().BYt()},eKt(){return this.TYt},hKt(){return this.CYt},nKt(){return this.PYt},oYt(){return this.$T},Text(){return this.cf},iYt(){return this.S$t?Du.Ah.im(this.cf):this.cf},nYt(){return this.SXt()},rYt(){return this.bXt()},aYt(t,s){return this.vXt(t,s)},lYt(t){return this._Xt(t)},uYt(t,s){const i=this.xXt(t,s);return i?i.x:0},cYt(t,s){const i=this.xXt(t,s);return i?i.y:0},fYt(t,s){const i=this.xXt(t,s);return i?i.width:0},dYt(t,s){const i=this.xXt(t,s);return i?i.height:0}}}{const ku=self.Ns;self.rKt=class{constructor(t,s,i,e){let h=t.BYt(),n=t.WYt();this.gYt=t,this.oKt=s,this.aKt=new ku.Rect(i,e,i+h,e+n),this.lKt=new ku.Rect,this.uKt=-1,this.cKt()}ln(){this.gYt=null,this.aKt=null,this.lKt=null}cKt(){let t=this.gYt.fm(),s=this.gYt.Gm();this.lKt.T(this.aKt),this.lKt.It(t,s),this.lKt.Ql(this.gYt.VC())}wYt(){return this.gYt}fKt(){return this.oKt}VC(){return this.lKt}QYt(t){this.uKt=t}iKt(){return this.uKt<0?this.gYt.BYt():this.uKt}}}{let n=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||P.Ao(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},P=(n,C,self.Ns),R=new P.Rect,E=new P.tu,A=new P.Ho,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.AYt=class{constructor(t){this.gYt=t,this.dI=0,this.pI=0,this.cf="",this.ZT=!1,this.hI=null,this.nI=P.an(P.hm),this.rI="word",this.aI=!1,this.lI=!1,this.iI="left",this.eI="top",this.k7=1,this.dKt=1,this.pKt=0,this.$T=0,this.dv=P.an(P.Ho),this.cI=-1,this.fI=0,this.II=t=>this.CI(t),this.gYt.mKt(this)}ln(){this.gYt.gKt(this),this.dv=null,this.II=null,this.nI.ic(),this.nI=null,this.gYt=null,this.hI=null}CI(t){if(t.xm())return{width:0,height:0};const s=t.Bm(),i=t.dg("scale"),e=(i?parseFloat(i.param):this.k7)*this.dKt,h=t.dg("scalex"),n=(h?parseFloat(h.param):1)*e,r=t.dg("scaley"),o=(r?parseFloat(r.param):1)*e,a=this.gYt.WYt()*o+this.$T,l=this.wYt(),u=l.BYt()*n,c=this.yKt();if(l.wKt()){let i=0,e=0;for(const f of s){let t=u,s=l.ZYt(f);s?t=s.iKt()*n:" "===f&&(t=l.SKt()*n),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:u*d+p*c,height:a}}}NI(){this.lI=!0}HT(){this.NI(),this.aI=!0,this.nI.ic()}cC(t,s){t<=0||s<=0||this.dI===t&&this.pI===s||(this.dI!==t?this.HT():this.NI(),this.dI=t,this.pI=s)}KI(t){this.cI=Math.floor(t)}ZI(){return this.cI}wC(t,s){this.pC();const i=this.nI.om();for(const e of i)if(s>e.lg()&&s<e.lg()+e.Gm())for(const h of e.Em())if(t>=h.og()&&t<h.og()+h.fm())return h;return null}*SC(t){this.pC();const s=this.nI.om();for(const i of s)for(const e of i.Em()){const h=e.dg("tag");h&&P.wh(h.param,t)&&(yield e)}}bC(t,s){for(const i of this.SC(t)){if(0===s)return i;--s}return null}vC(t){let s=0;for(const i of this.SC(t))++s;return s}pC(){this.CC(),this.PC()}CC(){if(this.aI){!this.ZT||this.hI&&this.hI.toString()===this.cf||(this.hI=new P.Ah(this.cf,{kp:!0}));const t=-this.yKt();this.nI.hm(this.ZT?this.hI.$p():this.cf,this.II,this.dI,this.rI,t),this.aI=!1}}PC(){this.lI&&(this.RC(),this.lI=!1)}RC(){let i=0,e=this.$T,h=P.Kr(this.nI.om());for(const s of h){s.rg(NaN),s.ag(NaN);for(const n of s.Em())n.rg(NaN),n.ag(NaN)}const t=h.reduce((t,s)=>t+s.Gm(),0)-e;"center"===this.eI?i=Math.max(Math.floor(this.pI/2-t/2),0):"bottom"===this.eI&&(i=Math.floor(this.pI-t));for(let t=0,s=h.length;t<s;++t){const r=h[t],o=r.Gm();if(0<t&&i>this.pI-(o-e))break;0<=i&&this.DC(r,i),i+=o}}DC(t,s){let i=0;"center"===this.iI?i=Math.max(Math.floor((this.dI-t.fm())/2),0):"right"===this.iI&&(i=Math.max(Math.floor(this.dI-t.fm()),0)),t.rg(i),t.ag(s);for(const e of t.Em())e.xm()||(this.bKt(e,i,s),i+=e.fm())}bKt(t,s,i){const e=t.dg("offsetx"),h=(s+=e?n(e.param,t.Gm()):0,t.dg("offsety"));i+=h?n(h.param,t.Gm()):0,t.rg(s),t.ag(i)}gM(t,s,i,e){this.pC(),this.fI=0;const h=P.Kr(this.nI.om()),n=Math.sin(e),r=Math.cos(e);for(const o of h)this.vKt(t,o,s,i,n,r)}vKt(t,s,i,e,h,n){const r=s.og(),o=s.lg();if(Number.isFinite(r)&&Number.isFinite(o)){const a=s.Gm();for(const l of s.Em())this.NC(t,l,i,e,h,n,a)}}NC(o,a,l,u,c,f,d){let p=a.og(),m=a.lg();if(Number.isFinite(p)&&Number.isFinite(m)){let n=a.Bm(),r=a.fm();if(-1!==this.cI){if(this.fI>=this.cI)return;this.fI+n.length>this.cI&&(n=n.slice(0,this.cI-this.fI),r=this.CI(a).width),this.fI+=n.length}const g=a.dg("background");if(!(P.H1(n)&&!g||a.pg("hide"))){const y=a.dg("scale"),w=(y?parseFloat(y.param):this.k7)*this.dKt,S=a.dg("scalex"),b=(S?parseFloat(S.param):1)*w,v=a.dg("scaley"),M=(v?parseFloat(v.param):1)*w,x=this.gYt.WYt()*M,_=this.$T;m+=d-_-x;let t=1,s=a.dg("opacity"),i=(s&&(t=parseFloat(s.param)/100),g&&(o.Xw(),A.Oa(C(g.param)),A.ea(A.la()*t*this.dv.la()),A.ba(),o.wv(A),R.set(p,m,p+r,m+x),R.Tl()>this.dI&&R.bl(this.dI),E.xu(R,c,f),E.offset(l,u),o.tu(E),o.Uw()),a.dg("color")),e=(i?(A.Oa(C(i.param)),A.ea(this.dv.la())):A.T(this.dv),A.ea(A.la()*t),A.ba(),o.wv(A),this.gYt.BYt()*b),h=Math.abs(this.yKt());for(const G of n){const T=this.gYt.ZYt(G);if(T){const I=T.iKt()*b;if(p+I>this.dI+h+1e-5)return;R.set(p,m,p+e,m+x),E.xu(R,c,f),E.offset(l,u),o.OS(E,T.VC()),p+=I+this.pKt}else p+=this.gYt.SKt()*b+this.pKt}}}}wYt(){return this.gYt}BI(t){this.ZT!==(t=!!t)&&(this.ZT=t,this.HT())}VT(){return this.ZT}pf(t){this.cf!==t&&(this.cf=t,this.HT())}rC(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.rI!==t&&(this.rI=t,this.HT())}OYt(t){if(!s.has(t))throw new Error("invalid alignment");this.iI!==t&&(this.iI=t,this.NI())}DYt(t){if(!i.has(t))throw new Error("invalid alignment");this.eI!==t&&(this.eI=t,this.NI())}n5(t){this.k7!==t&&(this.k7=t,this.HT())}r5(){return this.k7}LYt(t){this.dKt!==t&&(this.dKt=t,this.HT())}eEt(){return this.dKt}kYt(t){this.pKt!==t&&(this.pKt=t,this.HT())}yKt(){return this.pKt}zI(t){this.$T=t,this.HT()}JI(){return this.$T}VR(t){t=P.mn(t,0,1),this.dv.a=t}wv(t){this.dv.equals(t)||this.dv.T(t)}HR(){return this.dv}dC(){return this.pC(),this.nI.Xm()}mC(){this.pC();const t=this.gYt.WYt()*this.k7,s=this.$T,i=t+s;return this.nI.am()*i-s}}}{const Lu=self.Ns,Nu={width:256,height:256,MKt:16,xKt:16,characterSet:""};self.yYt=class{constructor(t){if((t=Object.assign({},Nu,t)).width<=0||t.height<=0||t.MKt<=0||t.xKt<=0)throw new Error("invalid size");this.Km=t.width,this.Zm=t.height,this.GYt=t.MKt,this.TYt=t.xKt,this.IYt=t.characterSet,this._Kt="",this.GKt=null,this.TKt=!1,this.IKt=-1,this.lKt=new Lu.Rect(0,0,1,1),this.CKt=new Map,this.PKt=!0,this.RKt=new Set}ln(){this.lKt=null,this.EKt(),this.CKt=null,this.RKt&&this.RKt.clear(),this.RKt=null}EKt(){for(let t of this.CKt.values())t.ln();this.CKt.clear()}mKt(t){this.RKt.add(t)}gKt(t){this.RKt.delete(t)}_Yt(){if(this.PKt){this.EKt();let s=Lu.Sp(this.IYt),h=Math.floor(this.Km/this.GYt),t=Math.floor(this.Zm/this.TYt),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.CKt.has(i)){let t=e%h,s=Math.floor(e/h);this.CKt.set(i,Lu.an(self.rKt,this,i,t*this.GYt,s*this.TYt))}}if(this.TKt=!1,this.IKt=-1,Array.isArray(this.GKt))for(let s of this.GKt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.GYt)for(let s of t){let t=this.CKt.get(s);t?(t.QYt(i),this.TKt=!0):" "===s&&(this.IKt=i,this.TKt=!0)}}this.PKt=!1;for(let t of this.RKt)t.HT()}}tKt(){this.TKt=!0;for(const t of this.RKt)t.HT()}ZYt(t){return this._Yt(),this.CKt.get(t)||null}wKt(){return this.TKt}Mm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Km!==t&&(this.Km=t,this.PKt=!0)}fm(){return this.Km}pm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Zm!==t&&(this.Zm=t,this.PKt=!0)}Gm(){return this.Zm}NYt(t){if(!this.lKt.equals(t)){this.lKt.T(t);for(const s of this.CKt.values())s.cKt()}}VC(){return this.lKt}bYt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.GYt!==t&&(this.GYt=t,this.PKt=!0)}BYt(){return this.GYt}vYt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.TYt!==t&&(this.TYt=t,this.PKt=!0)}WYt(){return this.TYt}MYt(t){this.IYt!==t&&(this.IYt=t,this.PKt=!0)}jYt(){return this.IYt}xYt(t){if(this._Kt!==t&&(this._Kt=t,this.PKt=!0,this.GKt=null,this._Kt.length))try{this.GKt=JSON.parse(this._Kt)}catch(t){this.GKt=null}}VYt(){return this._Kt}KYt(t){this.IKt!==(t=t<0?-1:t)&&(this.IKt=t,0<=this.IKt)&&(this.TKt=!0)}SKt(){return this.IKt<0?this.GYt:this.IKt}}}{const Bu=self.Ns;Bu.uX.AKt=class extends Bu.txt{constructor(t){super(t)}ln(){super.ln()}}}{const Wu=self.Ns;Wu.uX.AKt.gIt=class extends Wu.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){this.rW().$D(this.uf)}E$(t){return this.rW().kV(t,{IM:this.uf.eO()})}L$(){this.rW().FI()}}}{let s=function(t){return Hu.get(t).FKt()};s;const ju=self.Ns,Vu=self.$s,Uu=ju.an(ju.Rect),Hu=(ju.uX.AKt.Instance=class extends ju.w_t{constructor(t,s){super(t),this.OKt=!0;const i=ju.an(self.DKt);(this.LKt=i).kKt=()=>this.NKt(),this.BKt=null,this.WKt=(t,s,i,e,h,n)=>this.jKt(t,s,i,e,h,n),this.VKt=t=>this.UKt(t);let e=this.HKt=!0;s&&(i.zKt(s[0]),i.JKt(ju.yn(s[1])),i.qKt(s[2]?"one-shot":"continuous-spray"),this.$Kt(this.uf.L8(s[3])),e=s[4],i.XKt(s[5]),i.YKt(s[6]),i.KKt(s[7]/100),i.ZKt(s[8]),i.QKt(s[9]),i.tZt(s[10]),i.sZt(s[11]),i.iZt(s[12]),i.eZt(s[13]),i.hZt(s[14]),i.nZt(s[15]),i.rZt(s[16]),i.oZt(s[17]),i.aZt(s[18]),i.lZt(s[19]),i.K9t(s[20])),this.uZt(),this.BKt&&(this.HKt=!1),"one-shot"===i.cZt()?i.fZt():i.dZt(!0);const h=this.CD();h.H5(e),h.UEt(!0),this.Gi.Uf().addEventListener("bboxchange",()=>{h.VEt(this.LKt.oB())}),this.XD().qb().Dw()&&h.FEt(),this.NY=t=>this.BY(t),this.XD().Uf().addEventListener("afterload",this.NY),this.l_t()}ln(){this.XD().Uf().removeEventListener("afterload",this.NY),this.NY=null,this.LKt.ln(),this.LKt=null,this.WKt=null,this.VKt=null,super.ln()}FKt(){return this.LKt}pZt(t){this.LKt.zKt(t),"one-shot"===this.LKt.cZt()&&this.OKt&&this.LKt.mZt(t)}$Kt(t){(t=t===this.kN()?null:t)===this.BKt||(this.BKt=t,this.LKt.gZt=t?t=>this.yZt(t):null,this.BKt)||(this.HKt=!0)}uZt(){const t=this.LKt,s=this.CD();t.wZt(s.WR()),t.u6t(this.uf.nO()),t.SZt(s.Cv()),t.bZt(s.Ev()),t.vZt(s.a5()),t.MZt(Math.abs(s.eEt()))}NKt(){this.uf.UN(this.Gi)}gM(t){if(this.HKt){const s=this.vft.rW(),i=s.z2();if(i){const e=this.CD(),h=e.PD(),n=Uu,r=(this.uf.Wk().TDt()?n.set(-1/0,-1/0,1/0,1/0):h.k9()?h.fq(e.nB(),n):h.M9(e.nB(),n),t.zR(i),h.x9(e.nB()));this.LKt.xZt(h.FN()*r),this.LKt.gM(t,s.R_t(),n,h.k9())}}}jv(){const t=this.LKt;return{r:t._Zt(),sc:t.GZt(),st:t.cZt(),isp:t.TZt(),isz:t.IZt(),io:t.CZt(),gr:t.PZt(),xr:t.RZt(),yr:t.EZt(),spr:t.AZt(),szr:t.FZt(),grnd:t.OZt(),acc:t.DZt(),g:t.kZt(),lar:t.LZt(),lsr:t.NZt(),lor:t.BZt(),dm:t.WZt(),to:t.jZt(),s:t.VZt(),pcc:t.UZt(),ft:this.OKt,soc:this.BKt?this.BKt.i9():null,p:t.HZt().map(t=>t.toJSON())}}Vv(t,s){const i=this.LKt;if(i.zKt(t.r),i.JKt(t.sc),i.qKt(t.st),i.XKt(t.isp),i.YKt(t.isz),i.KKt(t.io),i.ZKt(t.gr),i.QKt(t.xr),i.tZt(t.yr),i.sZt(t.spr),i.iZt(t.szr),i.eZt(t.grnd),i.hZt(t.acc),i.nZt(t.g),i.rZt(t.lar),i.oZt(t.lsr),i.aZt(t.lor),i.lZt(t.dm),i.K9t(t.to),i.dZt(t.s),i.zZt(t.pcc),this.OKt=t.ft,t.hasOwnProperty("soc")){const n=this.XD().L8(t.soc);n&&this.$Kt(n)}const e=t.p,h=(i.mZt(e.length,!1),i.HZt());for(let t=0,s=h.length;t<s;++t)h[t].Va(e[t]);"state"===s&&this.BKt&&(i.JZt(),i.qZt(this))}BY(){const t=this.LKt,i=(t.JZt(),t.qZt(this),t.HZt());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.$Zt();if(h){const n=h.CD();if(n){const r=n.ZW();if(r){const o=e.XZt(),a=r.YN();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.XD(),u=l.xD(o);u&&l.UN(u)}}}}}}kK(){const t=this.uf.DO(this.Gi);this.uZt(),this.OKt&&"one-shot"===this.LKt.cZt()&&this.LKt.YZt(),this.LKt.kK(t),this.LKt.VZt()&&this.uf.DD(),this.CD().Q4(),this.OKt=!1}KZt(t){for(this.OKt&&"one-shot"===this.LKt.cZt()&&this.LKt.YZt();0<t;)this.LKt.kK(1/60),t-=1/60;this.LKt.VZt()&&this.uf.DD(),this.CD().Q4(),this.OKt=!1}yZt(t,s){let i,e=(i=(i=(i="number"==typeof s?this.uf.xD(s):i)&&i.kN()!==this.BKt?null:i)||this.uf.qL(this.BKt,this.CD().PD(),t.Cv(),t.Ev())).CD();return e.cC(t.rc(),t.rc()),e.o5(t.a5()),e.VR(t.WR()),e.pB(this.CD().dB()),e.Q4(),e.MB(this.ZW(),!0),i.iX(),t.ZZt(this.WKt),t.QZt(this.VKt),i}jKt(t,s,i,e,h,n){if(!t.i8()){const r=t.CD();r.eB(s,i),r.cC(r.fm()+e,r.Gm()+e),r.o5(r.a5()+h),r.VR(r.WR()+n),r.Q4()}}UKt(t){t.i8()||this.uf.UN(t)}Lnt(t){const s=this.LKt;switch(t){case 0:return s._Zt();case 1:return ju.wn(s.GZt());case 2:return"one-shot"===s.cZt()?1:0;case 5:return s.TZt();case 6:return s.IZt();case 7:return 100*s.CZt();case 8:return s.PZt();case 9:return s.RZt();case 10:return s.EZt();case 11:return s.AZt();case 12:return s.FZt();case 13:return s.OZt();case 14:return s.DZt();case 15:return s.kZt();case 16:return s.LZt();case 17:return s.NZt();case 18:return s.BZt();case 19:return s.WZt();case 20:return s.jZt()}}Unt(t,s){const i=this.LKt;switch(t){case 0:i.zKt(s);break;case 1:i.JKt(ju.yn(s));break;case 2:i.qKt(s?"one-shot":"continuous-spray");break;case 5:i.XKt(s);break;case 6:i.YKt(s);break;case 7:i.KKt(s/100);break;case 8:i.ZKt(s);break;case 9:i.QKt(s);break;case 10:i.tZt(s);break;case 11:i.sZt(s);break;case 12:i.iZt(s);break;case 13:i.eZt(s);break;case 14:i.hZt(s);break;case 15:i.nZt(s);break;case 16:i.rZt(s);break;case 17:i.oZt(s);break;case 18:i.aZt(s);break;case 19:i.lZt(s);break;case 20:i.K9t(s)}}d_t(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.LKt;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.tQt()},{name:s+".type.name",value:[s+".type.items."+e.cZt()]},{name:i+".is-spraying",value:e.VZt(),V8t:t=>e.dZt(t)},{name:s+".rate.name",value:e._Zt(),V8t:t=>e.zKt(t)},{name:s+".spray-cone.name",value:ju.wn(e.GZt()),V8t:t=>e.JKt(ju.yn(t))},{name:s+".speed.name",value:e.TZt(),V8t:t=>e.XKt(t)},{name:s+".size.name",value:e.IZt(),V8t:t=>e.YKt(t)},{name:s+".opacity.name",value:e.CZt(),V8t:t=>e.KKt(t)},{name:s+".grow-rate.name",value:e.PZt(),V8t:t=>e.ZKt(t)},{name:s+".x-randomiser.name",value:e.RZt(),V8t:t=>e.QKt(t)},{name:s+".y-randomiser.name",value:e.EZt(),V8t:t=>e.tZt(t)},{name:s+".initial-speed-randomiser.name",value:e.AZt(),V8t:t=>e.sZt(t)},{name:s+".size-randomiser.name",value:e.FZt(),V8t:t=>e.iZt(t)},{name:s+".grow-rate-randomiser.name",value:e.OZt(),V8t:t=>e.eZt(t)},{name:s+".acceleration.name",value:e.DZt(),V8t:t=>e.hZt(t)},{name:s+".gravity.name",value:e.kZt(),V8t:t=>e.nZt(t)},{name:s+".angle-randomiser.name",value:e.LZt(),V8t:t=>e.rZt(t)},{name:s+".life-speed-randomiser.name",value:e.NZt(),V8t:t=>e.oZt(t)},{name:s+".opacity-randomiser.name",value:e.BZt(),V8t:t=>e.aZt(t)},{name:s+".timeout.name",value:e.jZt(),V8t:t=>e.K9t(t)}]}]}Gxt(){return self.sQt}},new WeakMap);self.sQt=class extends self.y6{constructor(){super(),Hu.set(this,self.ON.BN().M6())}set iQt(t){s(this).dZt(!!t)}get iQt(){return s(this).VZt()}set rate(t){Vu.Me(t),Hu.get(this).pZt(t)}get rate(){return s(this)._Zt()}set eQt(t){Vu.Me(t),s(this).JKt(t)}get eQt(){return s(this).GZt()}set hQt(t){Vu.Me(t),s(this).XKt(t)}get hQt(){return s(this).TZt()}set nQt(t){Vu.Me(t),s(this).YKt(t)}get nQt(){return s(this).IZt()}set rQt(t){Vu.Me(t),s(this).KKt(t)}get rQt(){return s(this).CZt()}set oQt(t){Vu.Me(t),s(this).QKt(t)}get oQt(){return s(this).RZt()}set aQt(t){Vu.Me(t),s(this).tZt(t)}get aQt(){return s(this).EZt()}set lQt(t){Vu.Me(t),s(this).sZt(t)}get lQt(){return s(this).AZt()}set uQt(t){Vu.Me(t),s(this).iZt(t)}get uQt(){return s(this).FZt()}set cQt(t){Vu.Me(t),s(this).ZKt(t)}get cQt(){return s(this).PZt()}set fQt(t){Vu.Me(t),s(this).eZt(t)}get fQt(){return s(this).OZt()}set acceleration(t){Vu.Me(t),s(this).hZt(t)}get acceleration(){return s(this).DZt()}set dQt(t){Vu.Me(t),s(this).nZt(t)}get dQt(){return s(this).kZt()}set pQt(t){Vu.Me(t),s(this).rZt(t)}get pQt(){return s(this).LZt()}set mQt(t){Vu.Me(t),s(this).oZt(t)}get mQt(){return s(this).NZt()}set gQt(t){Vu.Me(t),s(this).aZt(t)}get gQt(){return s(this).BZt()}set timeout(t){Vu.Me(t),s(this).K9t(t)}get timeout(){return s(this).jZt()}yQt(t){Vu.Me(t),Hu.get(this).KZt(t)}wQt(t){const s=Hu.get(this);t?s.$Kt(s.XD().Ck(t)):s.$Kt(null)}}}{const zu=self.Ns;zu.uX.AKt.aX={VZt(){return this.LKt.VZt()}}}{const Ju=self.Ns;Ju.uX.AKt.Qht={dZt(t){this.LKt.dZt(0!==t)},zKt(t){this.pZt(t)},SQt(t){this.$Kt(t)},bQt(){this.$Kt(null)},JKt(t){this.LKt.JKt(Ju.yn(t))},XKt(t){this.LKt.XKt(t)},YKt(t){this.LKt.YKt(t)},KKt(t){this.LKt.KKt(t/100)},ZKt(t){this.LKt.ZKt(t)},vQt(t){this.LKt.QKt(t)},MQt(t){this.LKt.tZt(t)},xQt(t){this.LKt.sZt(t)},_Qt(t){this.LKt.iZt(t)},GQt(t){this.LKt.eZt(t)},TQt(t){this.LKt.hZt(t)},nZt(t){this.LKt.nZt(t)},IQt(t){this.LKt.rZt(t)},CQt(t){this.LKt.oZt(t)},PQt(t){this.LKt.aZt(t)},K9t(t){this.LKt.K9t(t)},RQt(t){this.KZt(t)},vVt(t){this.CD().yv(t),this.uf.DD()}}}{const qu=self.Ns;qu.uX.AKt.tnt={EQt(){return this.LKt.tQt()},AQt(){return this.LKt._Zt()},FQt(){return qu.wn(this.LKt.GZt())},OQt(){return this.LKt.TZt()},DQt(){return this.LKt.IZt()},kQt(){return 100*this.LKt.CZt()},LQt(){return this.LKt.PZt()},NQt(){return this.LKt.RZt()},BQt(){return this.LKt.EZt()},WQt(){return this.LKt.FZt()},jQt(){return this.LKt.AZt()},VQt(){return this.LKt.OZt()},UQt(){return this.LKt.DZt()},HQt(){return this.LKt.kZt()},zQt(){return this.LKt.LZt()},JQt(){return this.LKt.NZt()},qQt(){return this.LKt.BZt()},$Qt(){return this.LKt.jZt()}}}{const $u=self.Ns,Xu=[],Yu=new Set(["continuous-spray","one-shot"]),Ku=["fade-to-invisible","timeout-expired","particle-stopped"],Zu=$u.an($u.Rect);self.DKt=class{constructor(){this.XQt=0,this.YQt=0,this.KQt="continuous-spray",this.ZQt=!1,this.QQt=0,this.tts=!1,this.sts=0,this.its=0,this.ets=0,this.hts=0,this.nts=0,this.rts=1,this.ots=0,this.ats=0,this.lts=0,this.uts=0,this.cts=0,this.fts=0,this.dts=0,this.pts=0,this.gts=0,this.yts=0,this.wts=0,this.Sts=0,this.bts=0,this.o0=0,this.vts=0,this.Mts=1,this.kKt=null,this.gZt=null,this.xts=[],this.IRt=new $u.Rect,this.dv=new $u.Ho}ln(){this.c0(),$u.Br(this.xts),this.xts=null,this.kKt=null,this.gZt=null,this.IRt=null,this.dv=null}c0(){const i=this.xts;for(let t=0,s=i.length;t<s;++t)i[t].qMt();$u.$h(Xu,i),$u.Br(i),1e3<Xu.length&&$u.Nr(Xu,1e3),this.ZQt=!1}fZt(){for(let t=0,s=this.XQt;t<s;++t)this._ts();this.xts.length&&(this.ZQt=!0)}_ts(t=!0){let s=null;return Xu.length?(s=Xu.pop()).Gts(this):s=$u.an(self.Tts,this),this.xts.push(s),t?s.LCt(this.gZt):s.LCt(),s}YZt(){const i=this.xts,e=this.gZt;for(let t=0,s=i.length;t<s;++t)i[t].LCt(e)}JZt(){const i=this.xts,e=this.gZt;for(let t=0,s=i.length;t<s;++t)i[t].Its(e)}qZt(i){const e=this.xts;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=h.$Zt();if(n){const r=n.CD();r.Pv(h.Cv()),r.Av(h.Ev()),r.cC(h.rc(),h.rc()),r.VR(h.WR()),r.o5(h.a5()),r.pB(i.CD().dB()),r.Q4()}}}mZt(t,s=!0){const i=this.xts;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.qMt(),Xu.push(h)}1e3<Xu.length&&$u.Nr(Xu,1e3)}else if(t>i.length){const n=t-i.length;for(let t=0;t<n;++t)this._ts(s)}}HZt(){return this.xts}tQt(){return this.xts.length}kK(t){this.Cts(t),this.Pts(t),this.Rts()}Cts(t){if("continuous-spray"===this.KQt&&this.ZQt){this.vts+=t*this.XQt;const s=Math.floor(this.vts);this.vts-=s;for(let t=0;t<s;++t)this._ts()}}zZt(t){this.vts=t}UZt(){return this.vts}Pts(i){let e=this.IRt,h=(e.set(this.sts,this.its,this.sts,this.its),this.xts),n=0;for(let t=0,s=h.length;t<s;++t){const r=h[t];(h[n]=r).kK(i),r.wmt()?(++n,e.Zl(r.oB())):(r.qMt(),Xu.push(r))}$u.Nr(h,n),1e3<Xu.length&&$u.Nr(Xu,1e3)}Rts(){"one-shot"===this.KQt&&0===this.xts.length&&this.ZQt&&(this.kKt&&this.kKt(),this.ZQt=!1)}gM(i,e,h,n){Zu.set(e.Zn(),e.Qn(),e.er(),e.hr()),i.oE(Zu),this.dv.T(i.HR());const r=this.xts;for(let t=0,s=r.length;t<s;++t){const o=r[t];h.$l(o.oB())&&o.gM(i,e,n)}i.aE()}HR(){return this.dv}zKt(t){this.XQt=+t}_Zt(){return this.XQt}JKt(t){this.YQt=+t}GZt(){return this.YQt}qKt(t){if(!Yu.has(t))throw new Error("invalid spray type");this.KQt=t}cZt(){return this.KQt}dZt(t){this.ZQt=!!t}VZt(){return this.ZQt}wZt(t){this.QQt=+t}Ets(){return this.QQt}u6t(t){this.tts=!!t}Ats(){return this.tts}SZt(t){this.sts=+t}Fts(){return this.sts}bZt(t){this.its=+t}Ots(){return this.its}vZt(t){this.ets=+t}Dts(){return this.ets}XKt(t){this.hts=+t}TZt(){return this.hts}YKt(t){this.nts=+t}IZt(){return this.nts}MZt(t){this.rts=+t}kts(){return this.rts}KKt(t){this.ots=+t}CZt(){return this.ots}ZKt(t){this.ats=+t}PZt(){return this.ats}QKt(t){this.lts=+t}RZt(){return this.lts}tZt(t){this.uts=+t}EZt(){return this.uts}sZt(t){this.cts=+t}AZt(){return this.cts}iZt(t){this.fts=+t}FZt(){return this.fts}eZt(t){this.dts=+t}OZt(){return this.dts}hZt(t){this.pts=+t}DZt(){return this.pts}nZt(t){this.gts=+t}kZt(){return this.gts}rZt(t){this.yts=+t}LZt(){return this.yts}oZt(t){this.wts=+t}NZt(){return this.wts}aZt(t){this.Sts=+t}BZt(){return this.Sts}Lts(t){let s=Ku.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.bts=s}lZt(t){this.Lts(Ku[t])}Nts(){return Ku[this.bts]}WZt(){return this.bts}K9t(t){this.o0=+t}jZt(){return this.o0}xZt(t){this.Mts=+t}Bts(){return this.Mts}oB(){return this.IRt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Ns),l=new m.tu,u=new m.Ho,t=self.devicePixelRatio||1,c=!1;self.Tts=class{constructor(t){this.Wts=t,this.l0=!1,this.Qa=0,this.sl=0,this.eTt=0,this.L7=0,this.jts=1,this.Vts=0,this.Uts=0,this.GH=0,this.Hts=0,this.zts=0,this.Jts=0,this.ku=new m.Rect,this.qts=null,this.$ts=NaN,this.Xts=null,this.Yts=null}Gts(t){this.Wts=t}LCt(t){const s=this.Wts;this.l0=!0,this.Qa=s.Fts()+p(s.RZt()),this.sl=s.Ots()+p(s.EZt()),this.eTt=s.TZt()+p(s.AZt()),this.L7=s.Dts()+p(s.GZt()),this.jts=s.CZt(),this.Vts=this.jts,this.GH=(s.IZt()+p(s.FZt()))*s.kts(),this.Hts=this.GH/2,this.Uts=s.PZt()+p(s.OZt()),this.zts=0,this.Jts=0,this.Kts(),t?this.qts||(this.qts=t(this)):(this.qts=null,this.Xts=null,this.Yts=null)}Its(t){t?this.qts&&!this.qts.i8()||(this.qts=t(this,this.$ts)):(this.qts=null,this.Xts=null,this.Yts=null)}ZZt(t){this.Xts=t}QZt(t){this.Yts=t}qMt(){const t=this.Yts;t&&t(this.qts),this.qts=null,this.Xts=null,this.Yts=null}toJSON(){let t;return this.qts&&this.qts.CD()&&(t=this.qts.CD().ZW().YN()),[this.Qa,this.sl,this.eTt,this.L7,this.jts,this.Uts,this.GH,this.zts,this.Jts,t]}Va(t){this.Qa=t[0],this.sl=t[1],this.eTt=t[2],this.L7=t[3],this.jts=t[4],this.Vts=this.jts,this.Uts=t[5],this.GH=t[6],this.zts=t[7],this.Jts=t[8],this.$ts=t[9],this.Hts=this.GH/2,this.Kts()}kK(t){let s=this.Wts,i=this.eTt*t,e=this.L7,h=Math.cos(e)*i,n=Math.sin(e)*i+this.zts*t,r=(this.Qa+=h,this.sl+=n,this.Uts*t),o=(this.GH+=r,this.Hts=this.GH/2,this.eTt+=s.DZt()*t,this.zts+=s.kZt()*t,this.Jts+=t,this.Kts(),s.LZt()),a=s.NZt(),l=s.BZt(),u=0;0!==o&&(u=p(o*t),this.L7+=u),0!==a&&(this.eTt+=p(a*t)),0!==l&&(this.jts=m.mn(this.jts+p(l*t),0,1));const c=1<=this.GH&&(2===s.WZt()?0<this.eTt:this.Jts<s.jZt()),f=this.Xts;if(f&&c){let t=s.Ets()*this.jts;0===s.WZt()&&(t*=1-this.Jts/s.jZt());const d=t-this.Vts;this.Vts=t,f(this.qts,h,n,r,u,d)}this.l0=c}wmt(){return this.l0}oB(){return this.ku}Kts(){const t=this.Qa,s=this.sl,i=this.Hts;this.ku.set(t-i,s-i,t+i,s+i)}gM(h,n,r){if(!this.qts){let i=this.Wts,e=i.Ets()*this.jts;if(0===i.WZt()&&(e*=1-this.Jts/i.jZt()),!(e<=0)){const o=this.GH,a=o*i.Bts()*t;if(!(a<1)){let t=this.Qa,s=this.sl;i.Ats()&&(t=t+.5|0,s=s+.5|0),h.Dw()?h.lE(t,s,o,e):r||a>h.JE()||a<h.zE()?(u.T(i.HR()),u.Sa(e),h.wv(u),c=!0,l.vu(this.ku),h.iE(l,n)):(c&&(h.wv(i.HR()),c=!1),h.lE(t,s,a,e))}}}}$Zt(){return this.qts}XZt(){return this.$ts}Cv(){return this.Qa}Ev(){return this.sl}rc(){return this.GH}a5(){return this.L7}WR(){return this.jts}}}{const Qu=self.Ns;Qu.uX.HTMLElement=class extends Qu.Rxt{constructor(t){super(t,"html-element"),this.Oxt("initial-content",(t,s)=>t.Zts(s)),this.Oxt("click",(t,s)=>t.zzt(s)),this.Oxt("animationend",(t,s)=>t.Qts(s))}ln(){super.ln()}}}{const tc=self.Ns;tc.uX.HTMLElement.gIt=class extends tc.Bxt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const sc=self.Ns,ic=self.$s,ec=(sc.uX.HTMLElement.Instance=class extends sc.O_t{constructor(t,s){super(t,"html-element"),this.Zg="div",this.tss="",this.sss="",this.ff="",this.Zzt="",this.iss="",this.ess="";let i=this.hss="",e=!(this.nss="html"),h=0,n=!1,r=sc.an(sc.Ho),o=!1,a=sc.an(sc.Ho),l=(this.N_t=!0,this.B_t=0,!1),u="";if(s){this.Zg=s[0]||"div",i=s[1];const c=s[2];1===c?i=sc.an(sc.Ah,i,{jp:!0}).lp():2===c&&(this.nss="text"),this.CD().H5(s[3]),this.ff=s[4],this.Zzt=s[5],e=s[6],h=s[7],n=s[9],r.Va(s[10]),o=s[11],a.Va(s[12]),this.N_t=s[13],l=s[14],u=s[15]}"html"===this.nss?this.tss=i:this.sss=i,this.X_t({tag:this.Zg,str:i,type:this.nss,id:this.ff,className:this.Zzt,"allow-context-menu":e,"stop-input-events-mode":h,"css-color":n?r._a():"","css-background-color":o?a._a():"","allow-text-selection":l,"style-attribute":u})}ln(){super.ln()}rss(t,s){let i="html";return"bbcode"===s?t=sc.an(sc.Ah,t,{jp:!0}).lp():"text"===s&&(i="text"),{contentType:i,str:t}}async oss(t,s="html",i="",e=!1){const{contentType:h,str:n}=this.rss(t,s);if(!i)if("html"===h){if("html"===this.nss&&this.tss===n)return;this.tss=n}else if("text"===h){if("text"===this.nss&&this.sss===n)return;this.sss=n}await this.ass("set-content",{str:n,type:h,selector:i,"is-all":e})}async lss(t,s="html",i=!0,e="",h=!1){if(t){const{contentType:n,str:r}=this.rss(t,s);await this.ass("insert-content",{str:r,type:n,"at-end":i,selector:e,"is-all":h})}}async uss(t,s=!1,i=!1){await this.ass("remove-content",{selector:t,"is-clear":s,"is-all":i})}async css(t,s,i,e=!1){await this.ass("set-content-class",{mode:t,"class-array":s,selector:i,"is-all":e})}async fss(t,s,i,e,h=!1){await this.ass("set-content-attribute",{mode:t,attribute:s,value:i,selector:e,"is-all":h})}async dss(t,s,i,e=!1){await this.ass("set-content-css-style",{prop:sc.jo(t),value:s,selector:i,"is-all":e})}async ass(t,s){const i=await this.$_t(t,s);i.isOk&&(this.tss=i.html,this.sss=i.text)}async pss(t,s){const i=await this.$_t("get-element-box",{selector:s});if(i.isOk){const e=this.uf.Wk(),h=i.left-e._N(),n=i.top-e.GN(),r=i.right-e._N(),o=i.bottom-e.GN();for(const a of t){const l=a.CD();if(l){const u=l.PD(),[c,f]=u.xN(h,n,l.Fv()),[d,p]=u.xN(r,o,l.Fv());if(isFinite(c)&&isFinite(f)&&isFinite(d)&&isFinite(p)){const m=d-c,g=p-f,y=l.lW(),w=l.cW(),S=c+y*m,b=f+w*g;l.Cv()===S&&l.Ev()===b&&l.fm()===m&&l.Gm()===g||(l.tB(S,b),l.cC(m,g),l.Q4())}}}}}async mss(t,s,i,e,h){const n=t.CD(),r=t.T_t();if(n&&r){const o=await r.sTt(),a=await this.$_t("insert-img-element",{blobUrl:o,width:r.fm(),height:r.Gm(),selector:s,insertAt:i,id:e,class:h});a.isOk&&(this.tss=a.html,this.sss=a.text)}}async gss(t,s,i){await this.$_t("set-scroll-position",{selector:t,direction:s,position:i})}Y_t(){return{html:this.tss}}Zts(t){this.tss=t.html,this.sss=t.text}yss(){return this.tss}wss(){return this.sss}async zzt(t){const s=t.chain;for(const i of s)this.iss=i.targetId,this.ess=i.targetClass,this.Vxt("click",!0,{targetId:this.iss,targetClass:this.ess}),this.iss&&await this._4(sc.uX.HTMLElement.aX.Sss),this.ess&&await this._4(sc.uX.HTMLElement.aX.bss);if(0<s.length){const e=s[0];this.iss=e.targetId,this.ess=e.targetClass}else this.iss="",this.ess="";await this._4(sc.uX.HTMLElement.aX.Qzt),this.iss="",this.ess=""}async Qts(t){this.iss=t.targetId,this.ess=t.targetClass,this.hss=t.animationName,this.Vxt("animationend",!0,{targetId:this.iss,targetClass:this.ess,animationName:this.hss}),await this._4(sc.uX.HTMLElement.aX.vss),this.iss="",this.ess="",this.hss=""}gM(t){}jv(){return{t:this.Zg,h:this.tss,id:this.ff,c:this.Zzt}}Vv(t){this.Zg=t.t,this.tss=t.h,this.ff=t.id,this.Zzt=t.c,this.Q_t()}Lnt(t){}Unt(t,s){}d_t(){return[]}Gxt(){return self.Mss}},new WeakMap),hc=new Set(["html","bbcode","text"]),nc=new Set(["add","toggle","remove"]),rc=new Set(["set","remove"]),oc=["start","end","replace"],ac=new Set(["left","top"]);self.Mss=class extends self.S6{constructor(){super(),ec.set(this,self.ON.BN().M6())}xss(t,s="html",i="",e=!1){if(ic.Te(t),hc.has(s))return ic.Te(i),ec.get(this).oss(t,s,i,!!e);throw new Error("invalid type")}_ss(t,s="html",i=!0,e="",h=!1){if(ic.Te(t),hc.has(s))return ic.Te(e),ec.get(this).lss(t,s,!!i,e,!!h);throw new Error("invalid type")}Gss(t,s,i,e=!1){if(nc.has(t))return"string"==typeof s&&(s=s.split(" ")),ic.je(s),ic.Te(i),ec.get(this).css(t,s,i,!!e);throw new Error("invalid mode")}Tss(t,s,i,e,h=!1){if(rc.has(t))return ic.Te(s),i=i.toString(),ic.Te(e),ec.get(this).fss(t,s,i,e,!!h);throw new Error("invalid type")}Iss(t,s,i,e){return ic.Te(t),s=s.toString(),ic.Te(i),ec.get(this).dss(t,s,i,!!e)}Css(t,s){ic.eh(t,self.y6),ic.Te(s);const i=ec.get(this),e=i.XD(),h=e.ID(t);return ec.get(this).pss([h],s)}Pss(t,s,i,e,h){ic.eh(t,self.$8t),ic.Te(s),ic.Ie(e),ic.Ie(h);const n=oc.indexOf(i);if(n<0)throw new Error("invalid insert position");const r=ec.get(this),o=r.XD(),a=o.ID(t);return ec.get(this).mss(a,s,n,e,h)}Rss(t,s,i){if(ic.Te("selector"),ac.has(s))return ic.ge(i),ec.get(this).gss(t,s,i);throw new Error("invalid direction")}get Ess(){return ec.get(this).yss()}set Ess(t){ec.get(this).oss(t,"html","",!1)}get textContent(){return ec.get(this).wss()}set textContent(t){ec.get(this).oss(t,"text","",!1)}}}{const lc=self.Ns;lc.uX.HTMLElement.aX={Qzt(){return!0},Sss(t){return lc.wh(this.iss,t)},bss(t){const s=this.ess.toLowerCase().split(" "),i=t.toLowerCase().split(" ");return i.every(t=>s.includes(t))},vss(t){return lc.wh(this.hss,t)}}}{const uc=self.Ns,cc=["html","bbcode","text"],fc=["add","toggle","remove"],dc=["set","remove"];uc.uX.HTMLElement.Qht={Ass(t,s,i,e){return this.oss(s,cc[t],i,0!==e)},Fss(t,s,i,e,h){return this.lss(s,cc[t],0!==i,e,0!==h)},Oss(t,s,i){return this.uss(s,0!==t,0!==i)},Dss(t,s,i,e){return this.css(fc[t],s.split(" "),i,0!==e)},kss(t,s,i,e,h){return this.fss(dc[t],s,i.toString(),e,0!==h)},Lss(t,s,i,e){return this.dss(t,s,i,0!==e)},Nss(t,s){if(t)return this.pss(t.UL().VL(),s)},Bss(t,s,i,e,h){if(t){const n=t.Zvt();if(n)return this.mss(n,s,i,e,h)}},Wss(t,s,i){return this.gss(t,["left","top"][s],i)}}}{const pc=self.Ns;pc.uX.HTMLElement.tnt={jss(){return this.tss},Vss(){return this.sss},Uss(){return this.iss},Hss(){return this.ess},Z1(t){return pc.Z1(t.toString())}}}{const mc=self.Ns;mc.qat.zss=class extends mc.sGt{constructor(t){super(t)}ln(){super.ln()}}}{const gc=self.Ns;gc.qat.zss.gIt=class extends gc.rGt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const yc=self.Ns,wc=self.$s,Sc=self.I6,F=(yc.qat.zss.Instance=class extends yc.aGt{constructor(t,s){super(t),this.Jss=200,this.qss=600,this.$ss=600,this.Xss=0,this.Yss=!0,this.Kss=!1,this.jyt=!0,this.eTt=0,this.Zss=this.CD().a5(),this.Qss=[],s&&(this.Jss=s[0],this.qss=s[1],this.$ss=s[2],this.Xss=yc.yn(s[3]),this.Yss=s[4],this.Kss=s[5],this.jyt=s[6]),this.tis=null,this.sis=NaN,this.iis=NaN,this.eis=[0,0],this.his={MZ:this.eis}}ln(){this.tis&&(this.tis.ln(),this.tis=null),this.sis=NaN,this.iis=NaN,this.eis=null,this.his=null,super.ln()}jv(){return{ms:this.Jss,acc:this.qss,dec:this.$ss,rs:this.Xss,sa:this.Yss,sos:this.Kss,s:this.eTt,ma:this.Zss,wp:this.Qss.map(t=>({x:t.x,y:t.y})),e:this.jyt}}Vv(t){this.Jss=t.ms,this.qss=t.acc,this.$ss=t.dec,this.Xss=t.rs,this.Yss=t.sa,this.Kss=t.sos,this.eTt=t.s,this.Zss=t.ma,this.Qss=t.wp.map(t=>({x:t.x,y:t.y})),this.OMt(t.e),this.jyt&&0<this.Qss.length&&this.l_t()}nis(t,s,i,e){i&&yc.Br(this.Qss),this.Qss.push({x:t,y:s,opts:e}),this.jyt&&this.l_t()}ris(){return this.Qss.length}ois(t){return(t=Math.floor(t))<0||t>=this.Qss.length?0:this.Qss[t].x}ais(t){return(t=Math.floor(t))<0||t>=this.Qss.length?0:this.Qss[t].y}lis(){return 0<this.Qss.length}uis(){yc.Br(this.Qss),this.eTt=0,this.qxt()}cis(){return 0<this.Qss.length?this.Qss[0].x:0}fis(){return 0<this.Qss.length?this.Qss[0].y:0}dis(){if(0<this.Qss.length){const t=this.Qss[0];if(t.opts)return t.opts.pis}return!1}mis(){if(0<this.Qss.length){const t=this.Qss[0];if(t.opts)return t.opts.pis&&t.opts.gis}return!1}yis(){if(0<this.Qss.length){const t=this.Qss[0];if(t.opts)return t.opts.wis}return NaN}Sis(){if(0<this.Qss.length){const t=this.Qss[0];if(t.opts)return t.opts.bis}return NaN}vis(t){this.lis()&&(this.eTt=Math.min(t,this.Jss))}Mis(){return this.eTt}xis(t){this.Jss=Math.max(t,0),this.vis(this.eTt)}_is(){return this.Jss}Gis(){return this.jyt&&this.lis()&&this.dis()?!!this.mis():0!==this.Xss}kK(){if(this.jyt&&this.lis()){let t=this.uf.DO(this.Gi),n=this.Gi.CD(),s=n.Cv(),i=n.Ev(),e=n.a5(),h=this.eTt,r=this.Jss,o=this.qss,a=this.$ss,l=this.cis(),u=this.fis(),c=yc.vn(s,i,l,u),f=!1;if(0<a&&1===this.Qss.length){const m=.5*h*h/a*1.0001;if(f=yc.bn(s,i,l,u)<=m*m){const g=yc.Sn(s,i,l,u);h=Math.sqrt(2*a*g),r=h,this.eTt=h}}if(this.Gis()){const y=yc.Mn(this.Zss,c);if(y>Number.EPSILON){const w=y/this.Xss,S=yc.Sn(n.Cv(),n.Ev(),l,u),b=S/(2*Math.sin(y)),v=b*y;r=Math.min(r,yc.mn(v/w,0,this.Jss))}}let d=f?-a:o,p=Math.min(h*t+.5*d*t*t,r*t);if(f){if(0<a&&(this.eTt=Math.max(this.eTt-a*t,0),0===this.eTt))return void this.Tis(n,l,u)}else this.eTt=0===o?r:Math.min(this.eTt+o*t,r);if(yc.bn(n.Cv(),n.Ev(),l,u)<=p*p)this.Tis(n,l,u);else{if(this.Gis()?this.Zss=yc.xn(this.Zss,c,this.Xss*t):this.Zss=c,n.eB(Math.cos(this.Zss)*p,Math.sin(this.Zss)*p),this.Yss){const M=this.dis(),x=this.mis();if(M&&!x){let t=this.Sis(),s=this.yis(),i=n.Cv(),e=n.Ev();self.isNaN(this.iis)&&(this.iis=0),self.isNaN(t)&&(t=0);let h;h=this.iis===t?(this.eis[0]=this.sis,this.eis[1]=s,this.tis.vZ(i,e,this.his)):this.tis.oy(i,e),n.o5(this.tis.GZ(h[0],h[1]))}else n.o5(this.Zss),this.sis=NaN,this.iis=NaN}n.Q4(),this.Iis(s,i,e)}}}Tis(t,s,i){t.tB(s,i),t.Q4();const e=this.Qss[0];e.opts&&e.opts.pis?(this.sis=e.opts.wis,this.iis=e.opts.bis):(this.sis=NaN,this.iis=NaN),this.Qss.shift(),0===this.Qss.length&&(this.tis&&(this.tis.ln(),this.tis=null,this.sis=NaN,this.iis=NaN),this.eTt=0,this.qxt()),this.Vxt("arrived"),this.M4(yc.qat.zss.aX.Cis)}Iis(t,s,i){const e=this.uf.HF();if(this.Kss&&e.Mk(this.Gi)){this.uis();const h=this.Gi.CD(),n=h.Cv(),r=h.Ev(),o=yc.vn(n,r,t,s),a=yc.Sn(n,r,t,s);e.y3t(this.Gi,Math.cos(o),Math.sin(o),Math.max(a,1))||(h.tB(t,s),h.o5(i),h.Q4()),this.Vxt("hitsolid"),this.M4(yc.qat.zss.aX.Pis)}}Ris(){return this.Yss}Eis(t){this.Yss=!!t}Ais(t){if(this.Zss=t,this.jyt&&this.Yss&&!this.lis()){const s=this.CD();s.o5(this.Zss),s.Q4()}}Fis(){return this.Zss}Ois(t){this.qss=Math.max(t,0)}Dis(){return this.qss}kis(t){this.$ss=Math.max(t,0)}Lis(){return this.$ss}Nis(t){this.Xss=Math.max(t,0)}Bis(){return this.Xss}Wis(t){this.Kss=!!t}jis(){return this.Kss}OMt(t){this.jyt!==(t=!!t)&&(this.jyt=t,this.jyt&&this.lis()?this.l_t():this.qxt())}kMt(){return this.jyt}Lnt(t){switch(t){case 0:return this._is();case 1:return this.Dis();case 2:return this.Lis();case 3:return yc.wn(this.Bis());case 4:return this.Ris();case 5:return this.jis();case 6:return this.kMt()}}Unt(t,s){switch(t){case 0:this.xis(s);break;case 1:this.Ois(s);break;case 2:this.kis(s);break;case 3:this.Nis(yc.yn(s));break;case 4:this.Eis(s);break;case 5:this.Wis(s);break;case 6:this.OMt(s)}}d_t(){const t="behaviors.moveto";return[{title:"$"+this.A6().Qc(),properties:[{name:t+".debugger.speed",value:this.Mis(),V8t:t=>this.vis(t)},{name:t+".debugger.angle-of-motion",value:yc.wn(this.Fis()),V8t:t=>this.Zss=yc.yn(t)},{name:t+".debugger.target-x",value:this.cis()},{name:t+".debugger.target-y",value:this.fis()},{name:t+".debugger.waypoint-count",value:this.ris()},{name:t+".properties.max-speed.name",value:this._is(),V8t:t=>this.xis(t)},{name:t+".properties.acceleration.name",value:this.Dis(),V8t:t=>this.Ois(t)},{name:t+".properties.deceleration.name",value:this.Lis(),V8t:t=>this.kis(t)},{name:t+".properties.rotate-speed.name",value:yc.wn(this.Bis()),V8t:t=>this.Nis(yc.yn(t))},{name:t+".properties.enabled.name",value:this.kMt(),V8t:t=>this.OMt(t)}]}]}Gxt(){return self.Vis}},new WeakMap);self.Vis=class extends Sc{constructor(){super(),F.set(this,Sc.BN().M6())}Uis(t,s,i=!0){wc.Me(t),wc.Me(s),F.get(this).nis(t,s,!!i)}His(){return F.get(this).cis()}zis(){return F.get(this).fis()}Jis(){const t=F.get(this);return[t.cis(),t.fis()]}qis(){return F.get(this).ris()}$is(t){return wc.Me(t),F.get(this).ois(t)}Xis(t){return wc.Me(t),F.get(this).ais(t)}Yis(t){wc.Me(t);const s=F.get(this);return[s.ois(t),s.ais(t)]}stop(){F.get(this).uis()}get Kis(){return F.get(this).lis()}get speed(){return F.get(this).Mis()}set speed(t){wc.Me(t),F.get(this).vis(t)}get Zis(){return F.get(this)._is()}set Zis(t){wc.Me(t),F.get(this).xis(t)}get acceleration(){return F.get(this).Dis()}set acceleration(t){wc.Me(t),F.get(this).Ois(t)}get Qis(){return F.get(this).Lis()}set Qis(t){wc.Me(t),F.get(this).kis(t)}get tes(){return F.get(this).Fis()}set tes(t){wc.Me(t),F.get(this).Ais(t)}get ses(){return F.get(this).Bis()}set ses(t){wc.Me(t),F.get(this).Nis(t)}get ies(){return F.get(this).jis()}set ies(t){F.get(this).Wis(t)}get isEnabled(){return F.get(this).kMt()}set isEnabled(t){F.get(this).OMt(t)}}}{const bc=self.Ns;bc.qat.zss.aX={ees(){return this.lis()},hes(t,s){return bc.compare(this.Mis(),t,s)},Zu(){return this.kMt()},Cis(){return!0},Pis(){return!0}}}{const vc=self.Ns;vc.qat.zss.Qht={nes(t,s,i){this.nis(t,s,0===i)},res(t,s,i){if(t){const e=t.WL(this.Gi);if(e&&e.CD()){const[h,n]=e.vvt(s);this.nis(h,n,0===i)}}},oes(i){const t=this.Gi.Kat(vc.qat.Pathfinding);if(t){const e=t._GetPath();if(0!==e.length)for(let t=0,s=e.length;t<s;++t){const h=e[t];this.nis(h.x,h.y,0===t&&0===i)}}},aes(t,s,i){const e=vc.an(vc.eZ,t,s);if(e.yZ()){e.SZ(this.Gi.CD());let s=!0;for(const h of e.wZ())switch(h.x_()){case"line":{const n=h.Cv(),r=h.Ev();this.nis(n,r,s&&0===i),s=!1;break}case"cubic-bezier":for(let t=0;t<=h.cQ();t++){const o=t*h.fQ(),a=h.Map(o),l=a[0],u=a[1];this.nis(l,u,s&&0===i,{pis:!0,gis:s,wis:h.mQ(o),bis:h.LF()}),s=!1}}this.tis=e}else e.ln()},les(t,s,i){const e=this.uf.ltt().fK(t);e&&vc.qat.zss.Qht.aes.call(this,e,s,i)},PW(){this.uis()},ues(t){this.Ais(vc.yn(t))},ces(t){this.vis(t)},fes(t){this.xis(t)},hZt(t){this.Ois(t)},des(t){this.kis(t)},pes(t){this.Nis(vc.yn(t))},mes(t){this.Wis(t)},F2t(t){this.OMt(t)}}}{const Mc=self.Ns;Mc.qat.zss.tnt={ges(){return this.Mis()},yes(){return this._is()},wes(){return this.Dis()},Ses(){return this.Lis()},bes(){return Mc.wn(this.Fis())},ves(){return Mc.wn(this.Bis())},Mes(){return this.cis()},xes(){return this.fis()},_es(){return this.ris()},Ges(t){return this.ois(t)},Tes(t){return this.ais(t)}}}{const xc=self.Ns;xc.qat.Jat=class extends xc.sGt{constructor(t){super(t)}ln(){super.ln()}}}{const _c=self.Ns;_c.qat.Jat.gIt=class extends _c.rGt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const Gc=self.Ns,Tc=Gc.qat.Jat;Tc.Instance=class extends Gc.aGt{constructor(t,s){super(t),this.Ies=!1,this.Nu=!0,s&&(this.Ies=!1,this.Nu=!!s[0]),this.Ces=new Map,this.Pes=[],this.Res=new Map,this.Ees=null,this.Aes=null,this.Fes=null,this.Oes=null,this.Des="",this.kes=[],this.NY=t=>this.BY(),this.XD().Uf().addEventListener("afterload",this.NY)}ln(){this.XD().Uf().removeEventListener("afterload",this.NY),this.NY=null,this.Ees&&(this.Les(this.Ees),this.Ees=null),this.Nes(),this.Bes=null,this.Wes(),this.Pes=null,this.jes(),this.Res=null,this.kes=null,super.ln()}Zat(t){this.kes.push(t)}Qat(){this.kes.pop()}Ves(){return this.kes[this.kes.length-1]}F2t(t){this.Nu=!!t,t?this.Res&&this.Res.size&&this.c_t():this.$xt();for(const s of this.Ues())t?this.Hes(s)&&s.RW():((s.IsPlaying()||s.Ftt())&&this.zes(s),s.PW());t&&this.Wes()}Zu(){return this.Nu}zes(t){this.Pes.push(t)}Hes(t){return this.Pes.includes(t)}Wes(){Gc.Br(this.Pes)}Jes(){return this.Ees}$st(){const t=this.O6();return!!t&&!t.i8()}qes(t,s,i=!1){const e=s?this.$es(s,i):this.Ues(i);if(e&&e.length)for(const h of e)if(h.EW(t))return h}Xes(t,s){for(const i of this.Ces.values())for(const e of i)if(!e.TW()&&e.EW(t)&&s(e))return!0;for(const h of this.Res.values())for(const n of h)if(!n.TW()&&n.EW(t)&&s(n))return!0;return!1}Yes(t){for(const s of this.Ces.values())for(const i of s)if(!i.TW()&&t(i))return!0;for(const e of this.Res.values())for(const h of e)if(!h.TW()&&t(h))return!0;return!1}Kes(t,s){return this.qes(t,s,!0)}*Zes(t,s,i=!1){const e=s?this.$es(s,i):this.Ues(i);if(e&&e.length)for(const h of e)h.EW(t)&&(yield h)}*Qes(t,s){yield*this.Zes(t,s,!0)}$es(i,t){if(t){let t=this.Ces.get(i),s=this.Res.get(i);return(t=t||[]).concat(s||[]).filter(t=>t).filter(t=>!t.TW())}{let t=this.Ces.get(i);return(t=t||[]).filter(t=>t).filter(t=>!t.TW())}}Ues(t){if(t){const s=[...this.Ces.values()].flat(),i=[...this.Res.values()].flat();return s.concat(i).filter(t=>t).filter(t=>!t.TW())}{const e=[...this.Ces.values()].flat();return e.filter(t=>t).filter(t=>!t.TW())}}ths(){return this.Ues(!0)}jv(t=0){return{s:!1,e:!!this.Nu,at:this.shs(),dt:this.ihs(),wt:this.ehs(),ft:this.hhs()}}Vv(t,s="full"){t&&(this.Aes=t.at,this.Fes=t.dt,this.Oes=t.wt,this.Des=t.ft,this.Ies=!1,this.Nu=!!t.e,"state"===s)&&this.BY()}BY(){const t=this.XD().ltt();if(this.nhs(this.Aes,this.Ces,t),this.Fes){Gc.Br(this.Pes);for(const s of this.Fes)this.rhs(this.Pes,s,t)}this.nhs(this.Oes,this.Res,t),this.Ees=this.ohs(this.Des,t),this.Nu?this.Res&&this.Res.size&&this.c_t():this.$xt()}nhs(s,i,e){if(s)for(const h in s){let t=i.get(h);t?Gc.Br(t):t=[];const n=s[h];for(const r of n){const o=this.rhs(t,r.name,e);if(o)this.ahs(r.name,r,e);else{const a=Gc.Art.ilt({runtime:this.XD(),json:r});Gc.Art.fit(a,this.O6().YN()),a.Fat(t=>this.lhs(t)),e.gK(a),this.rhs(t,a,e)}}i.set(h,t)}}ohs(t,s){return s.dK(t)}rhs(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.ohs(s,i);if(e)return!!t.push(e)}return!1}ahs(t,s,i){if("string"==typeof t){const e=this.ohs(t,i);e&&(e.vq(s),Gc.Art.fit(e,this.O6().YN()))}else t.vq(s),Gc.Art.fit(t,this.O6().YN())}shs(){const t={};for(const[s,i]of this.Ces)t[s]=i.filter(t=>!t.TW()).map(t=>t.bq());return t}ihs(){return this.Pes.filter(t=>!t.TW()).map(t=>t.Qc())}ehs(){const t={};for(const[s,i]of this.Res)t[s]=i.map(t=>t.bq());return t}hhs(){return this.Ees?this.Ees.Qc():""}a_t(){this.jes()}uhs(t){const s=Tc.fhs.chs(t.property,t.olt,t.llt,t.ease,t.resultMode,this.O6()),i=Tc.phs.dhs(t.property),e=(Tc.phs.mhs(i)||this.ghs(t.property),Gc.Art.ilt({runtime:this.XD(),id:i,tags:t.tags,time:t.time,F6:this.O6(),hlt:!!t.hlt,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,elt:s}));return e.Fat(t=>this.lhs(t)),this.yhs(e,t.property),e}whs(t){const s=t.ij();if(this.Ces.has(s)){const i=this.Ces.get(s);if(i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}XW(t,s=!1){this.whs(t),t.TW()||this.Shs(t)||(t.PW(s),this.bhs(t))}ghs(t,s=!1){if(Gc.me(t)){const i=Tc.phs.dhs(t);if(this.Ces.has(i)){const e=this.Ces.get(i),h=this.Jes();for(const n of e)n===h||n.TW()||this.Shs(n)||(n.PW(s),n.ln());Gc.Br(e)}}else{const r=this.Jes();for(const o of this.Ues())o===r||o.TW()||this.Shs(o)||(o.PW(s),o.ln());for(const a of this.Ces.keys())Gc.Br(this.Ces.get(a)),this.Ces.delete(a);this.Ces.clear()}}Les(t){this.XW(t,!0)}Nes(){this.ghs(NaN,!0)}Lnt(t){if(0===t)return this.Nu}Unt(t,s){0===t&&(this.Nu=!!s)}vhs(t){const s=t.ZW(),i=s.Rht();for(const e of i){const h=e.A6();if(h.NIt()===this.constructor)return h}}M4(t,s,i,e){return this.uf?super.M4(t):s.M4(t,i,e)}lhs(t){this.Ees=t,Tc.aX.Mhs(t);let s,i;if(this.XD())s=this.Gi,i=this.uf,this.M4(Tc.aX.xhs),this.M4(Tc.aX._hs),this.XW(t);else{if(!(s=t.ZW()))return;if(s&&s.i8())return;i=s.XD();const e=this.vhs(t);this.M4(Tc.aX.xhs,i,s,e),this.M4(Tc.aX._hs,i,s,e),t.PW()}this.Ees=null,Tc.aX.Mhs(null),t.tj()&&i.UN(s)}yhs(t,s){const i=Tc.phs.dhs(s),e=(this.Ces.has(i)||this.Ces.set(i,[]),this.Ces.get(i));e.push(t)}bhs(t){const s=t.ij();this.Res.has(s)||this.Res.set(s,[]),this.Res.get(s).push(t),this.f_t()||this.c_t()}Shs(t){const s=t.ij();return!!this.Res.has(s)&&this.Res.get(s).includes(t)}jes(){if(this.Res.size){for(const t of this.Res.values()){for(const s of t)s.TW()||s.ln();Gc.Br(t)}this.Res.clear(),this.f_t()&&this.$xt()}}d_t(){return[{title:"$"+this.A6().Qc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Zu(),V8t:t=>this.F2t(t)}]}]}Gxt(){return self.Ghs}}}{let i=self.Ns,s=null;i.qat.Jat.aX={zat(){return!0},$at(t){const s=this.Ves();return!!s&&s.EW(t)},Xat(t){const s=this.Ves();return!!s&&(s.xtt()===t||2===t)},Yat(t,s){const i=this.Ves();return!!i&&(i.xtt()===s||2===s)&&i.EW(t)},Mhs(t){s=t},xhs(t){return s.EW(t)},_hs(){return!0},IsPlaying(t){return this.Xes(t,i.Art.IsPlaying)},vqt(){return this.Yes(i.Art.IsPlaying)},HW(t){return this.Xes(t,i.Art.HW)},Ths(){return this.Yes(i.Art.HW)},K6(t,s){return 0===s?this.Xes(t,i.Art.tlt):1===s&&this.Xes(t,i.Art.slt)},Ihs(t){return 0===t?this.Yes(i.Art.tlt):1===t&&this.Yes(i.Art.slt)}}}{const Ic=self.Ns,Cc=self.yc,Pc=Ic.qat.Jat;Pc.Qht={F2t(t){this.F2t(!!t)},async Chs(...t){if(this.Zu()&&this.$st()){const s=this.uhs(Pc.Rhs.Phs(this,...t));s.Play()&&await s.VW()}},async Ehs(...t){if(this.Zu()&&this.$st()){const s=this.uhs(Pc.Rhs.Ahs(this,...t));s.Play()&&await s.VW()}},async Fhs(...t){if(this.Zu()&&this.$st()){const s=this.uhs(Pc.Rhs.Ohs(this,...t));s.Play()&&await s.VW()}},Dhs(t){if(this.Zu()&&this.$st())for(const s of this.Zes(t))s.PW()},khs(){if(this.Zu()&&this.$st())for(const t of this.Ues())t.PW()},Lhs(t){if(this.Zu()&&this.$st())for(const s of this.Zes(t))s.RW()},Nhs(){if(this.Zu()&&this.$st())for(const t of this.Ues())t.RW()},Bhs(t){if(this.Zu()&&this.$st())for(const s of this.Zes(t))this.XW(s)},Whs(){if(this.Zu()&&this.$st())for(const t of this.Ues())this.XW(t)},jhs(t,s,i){if(this.Zu()&&this.$st()){const e=Ic.qat.Jat.phs.Vhs(s);for(const h of this.Zes(t))h.Nat([e]),h.Bat(i,e)}},Uhs(t,s,i,e){if(this.Zu()&&this.$st()){const h=Ic.qat.Jat.phs.Hhs(s);for(const n of this.Zes(t))n.Nat(h),n.Bat(i,h[0]),n.Bat(e,h[1])}},zhs(t,s){if(this.Zu()&&this.$st())for(const i of this.Zes(t,"value"))i.kat(s,"value")},Jhs(t,s){if(this.Zu()&&this.$st())for(const i of this.Zes(t,"value"))i.Nat(["value"]),i.Bat(s,"value")},qhs(t,s){if(this.Zu()&&this.$st()){const i=Cc.Dc(s);for(const e of this.Zes(t))e.KW(i)}},$hs(t){if(this.Zu()&&this.$st()){const s=Cc.Dc(t);for(const i of this.Ues())i.KW(s)}},Xhs(t,s){if(this.Zu()&&this.$st())for(const i of this.Zes(t))i.AW(s)},Yhs(t){if(this.Zu()&&this.$st())for(const s of this.Ues())s.AW(t)},Khs(t,s){if(this.Zu()&&this.$st())for(const i of this.Zes(t))i.BW(s)},Zhs(t){if(this.Zu()&&this.$st())for(const s of this.Ues())s.BW(t)},Qhs(t,s){if(this.Zu()&&this.$st())for(const i of this.Zes(t))i.sj(!!s)},tns(t){if(this.Zu()&&this.$st())for(const s of this.Ues())s.sj(!!t)}}}{const Rc=self.Ns;Rc.qat.Jat.tnt={sns(t){const s=this.Kes(t);return s?s.gA():0},hJt(t){const s=this.Kes(t);return s?s.gA()/s.OW():0},ant(t){const s=this.Kes(t);return s?s.WW():0},ins(t){const s=this.Kes(t,"value");return s?s.hj("value").ej():0},jMt(){let t=this.Jes();return(t=t||this.Ves())?t.Itt():""}}}{const Ec=self.Ns,Ac=self.yc,Fc=["position","size","scale"],Oc=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],Dc=["value"],kc=[].concat(Fc).concat(Oc).concat(Dc),Lc={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},Nc=Object.assign({},kc.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),Lc);Ec.qat.Jat.phs=class{constructor(){}static ens(){return[...Ac.Gc()]}static Dc(t){return[...Ac.Gc()][t]}static dhs(t){return kc[t]}static hns(t){return kc.indexOf(t)}static nns(t){return Fc[t]}static Vhs(t){return Oc[t]}static rns(t){return Dc[t]}static ons(t){return Lc[t]}static Hhs(t){return Ec.Ge(t)?Nc[t]:Nc[kc[t]]}static ans(t){return!!Lc[t]}static lns(t){return"offsetColor"===t}static uns(t){return"offsetAngle"===t}static cns(t){return"offsetOpacity"===t}static mhs(t){return"value"===t}}}{const Bc=self.Ns,Wc=Bc.qat.Jat,jc=new Map;Wc.fhs=class{constructor(){}static chs(t,s,i,e,h,n){0===jc.size&&this.fns();let r=Wc.pns.dns(t),o=jc.get(r);return Bc.me(t)&&(t=Wc.phs.dhs(t)),this.mns(o,t,s,i,e,h,n)}static gns(t,s){const i=Bc.qat.Jat.chs(t);return i.yns(s)}static fns(){const t=Wc.pns,s=Wc.wns;this.Sns(t.bns,this.vns,s.Mns),this.Sns(t.COLOR,this.xns,s._ns),this.Sns(t.Gns,this.Tns,s.Ins),this.Sns(t.Cns,this.Pns,s.Mns),this.Sns(t.Rns,this.Ens,s.Mns)}static Sns(t,s,i){jc.set(t,this.Ans(t,s,i))}static Ans(t,s,i){return{name:t,Fns:s,yns:i}}static mns(t,s,i,e,h,n,r){return t.Fns(s,t.yns(i),t.yns(e),h,n,r)}static vns(t,i,e,h,n,s){const r=Wc.phs.ons(t);return r.map((t,s)=>({nlt:"world-instance",property:t,type:"float",valueType:"numeric",olt:i[s],llt:e[s],ease:Wc.phs.Dc(h),resultMode:n}))}static xns(t,s,i,e,h,n){return Bc.uX.Text&&n.EL()instanceof Bc.uX.Text?{nlt:"plugin",rlt:[7],property:"color",type:"color",valueType:"color",olt:s,llt:i,ease:Wc.phs.Dc(e),resultMode:h}:{nlt:"world-instance",property:t,type:"color",valueType:"color",olt:s,llt:i,ease:Wc.phs.Dc(e),resultMode:h}}static Tns(t,s,i,e,h,n){return{nlt:"world-instance",property:t,type:"angle",valueType:"angle",olt:s,llt:i,ease:Wc.phs.Dc(e),resultMode:h}}static Ens(t,s,i,e,h,n){return{nlt:"world-instance",property:t,type:"float",valueType:"numeric",olt:s,llt:i,ease:Wc.phs.Dc(e),resultMode:h}}static Pns(t,s,i,e,h,n){return{nlt:"value",property:t,type:"float",valueType:"numeric",olt:s,llt:i,ease:Wc.phs.Dc(e),resultMode:h}}}}{const Vc=self.Ns,Uc=Vc.qat.Jat,Hc={resultMode:"absolute"},zc=Object.assign({},Hc,{tags:"",property:"",time:0,ease:0,hlt:0,loop:!1,pingPong:!1,repeatCount:1}),Jc=Object.assign({},zc,{initialValueMode:"current-state",olt:0,llt:0}),qc=Object.assign({},zc,{initialValueMode:"current-state",olt:[0,0],llt:[0,0]}),$c=Object.assign({},zc,{initialValueMode:"current-state",olt:[0,0,0],llt:[0,0,0]}),Xc=Object.assign({},Jc,{initialValueMode:"start-value"});Uc.Rhs=class{constructor(){}static Ons(t,s,i,e,h,n,r,o){t.tags=s,t.time=i,t.ease=e,t.hlt=h,t.loop=n,t.pingPong=r,t.repeatCount=o}static Phs(t,s,i,e,h,n,r,o,a,l){const u="string"==typeof i?i:Uc.phs.Vhs(i),c=Uc.phs.lns(u)?$c:Jc;return this.Ons(c,s,h,n,r,o,a,l),Uc.phs.lns(u)?($c.llt[0]=Vc.Un(e),$c.llt[1]=Vc.Hn(e),$c.llt[2]=Vc.zn(e),$c.property=Uc.phs.hns(u)):Uc.phs.cns(u)?Jc.llt=e/100:Jc.llt=e,c.property=Uc.phs.hns(u),c}static Ahs(t,s,i,e,h,n,r,o,a,l,u){this.Ons(qc,s,n,r,o,a,l,u);const c="string"==typeof i?i:Uc.phs.nns(i);return qc.llt[0]=e,qc.llt[1]=h,qc.property=Uc.phs.hns(c),qc}static Ohs(t,s,i,e,h,n,r,o,a,l){return this.Ons(Xc,s,h,n,r,o,a,l),Xc.olt=i,Xc.llt=e,Xc.property=Uc.phs.hns("value"),Xc}}}{const Yc=self.Ns,Kc=Yc.qat.Jat,Zc=[];Kc.pns=class{constructor(){}static dns(t){if(0===Zc.length){const s=Zc;s.push({wP:Kc.phs.ans,result:this.bns}),s.push({wP:Kc.phs.lns,result:this.COLOR}),s.push({wP:Kc.phs.uns,result:this.Gns}),s.push({wP:Kc.phs.mhs,result:this.Cns}),s.push({wP:()=>!0,result:this.Rns})}Yc.me(t)&&(t=Yc.qat.Jat.phs.dhs(t));for(const i of Zc)if(i.wP(t))return i.result}static get bns(){return"pair"}static get COLOR(){return"color"}static get Gns(){return"angle"}static get Cns(){return"value"}static get Rns(){return"other"}}}{const Qc=self.Ns,tf=Qc.qat.Jat;tf.wns=class{constructor(){}static Ins(t){const s=Qc.yn(parseFloat(t));return Qc.gn(s)}static _ns(t){return t.slice(0)}static Mns(t){return t}}}{let l=function(t){ef.Te(t);let s=nf.vc(t),i;if(-1===(i=s?nf.kc(s,null):nf.kc(t,null)))throw new Error(`invalid ease name '${t}'`);return i},u=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};l,u;const sf=self.Ns,ef=self.$s,hf=self.I6,nf=self.yc,rf=sf.qat.Jat,of=new WeakMap,af=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),lf={tags:"",Dns:!1,loop:!1,pingPong:!1,repeatCount:1,olt:0},uf={$W:l};self.Ghs=class extends hf{constructor(){super(),of.set(this,hf.BN().M6())}kns(t,s,i,e,h){const n=of.get(this);if(!n.Zu()||!n.$st())return null;const r=af.get(t);if(!r)throw new Error("invalid tween property");"one"===r.type||"value"===r.type?ef.ge(s):(ef.je(s),"two"===r.type?(ef.ge(s[0]),ef.ge(s[1])):"color"===r.type&&(ef.ge(s[0]),ef.ge(s[1]),ef.ge(s[2]))),"angle"===t?s=sf.wn(s):"opacity"===t?s*=100:"color"===t&&(s=sf.Vn(s[0],s[1],s[2]));const o=l(e);ef.Me(i),h=Object.assign({},lf,h),"value"===r.type&&ef.ge(h.olt),u(h.tags,!0);let a;if("one"===r.type||"color"===r.type?a=n.uhs(rf.Rhs.Phs(n,h.tags,r.name,s,i,o,!!h.Dns,!!h.loop,!!h.pingPong,h.repeatCount)):"two"===r.type?a=n.uhs(rf.Rhs.Ahs(n,h.tags,r.name,s[0],s[1],i,o,!!h.Dns,!!h.loop,!!h.pingPong,h.repeatCount)):"value"===r.type&&(a=n.uhs(rf.Rhs.Ohs(n,h.tags,h.olt,s,i,o,!!h.Dns,!!h.loop,!!h.pingPong,h.repeatCount))),a.Play())return a.ult(n,uf);throw new Error("failed to start tween")}*Lns(){const t=of.get(this);for(const s of t.Ues())yield s.ult(t,uf)}*Nns(t){u(t);const s=of.get(this);for(const i of s.Zes(t))yield i.ult(s,uf)}get isEnabled(){return of.get(this).Zu()}set isEnabled(t){of.get(this).F2t(t)}}}{const cf=self.Ns;cf.qat.Bns=class extends cf.sGt{constructor(t){super(t)}ln(){super.ln()}}}{const ff=self.Ns;ff.qat.Bns.gIt=class extends ff.rGt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const df=self.Ns,pf=self.$s,mf=self.I6,gf=2*Math.PI,yf=Math.PI/2,wf=3*Math.PI/2,Sf=[0,1,8,3,4,2,5,6,9,7],bf=(df.qat.Bns.Instance=class extends df.aGt{constructor(t,s){super(t),this.Wns=0,this.jns=0,this.Vns=0,this.Uns=0,this.Hns=0,this.jyt=!0,this.zns=0,this.Jns=0,this.qns=0,this.$ns=0,this.Xns=0,this.Yns=0,this.fwt=0,this.Kns=0,this.Zns=0,this.Qns=0,this.trs=0,s&&(this.jns=Sf[s[0]],this.Vns=s[1],this.$ns=this.uf.nD()*s[3],this.zns=s[2],this.Uns=s[2],this.Uns+=this.$ns,this.Jns=s[4],0!==this.Uns&&(this.Xns=this.uf.nD()*s[5],this.Wns=s[4]/this.Uns*gf,this.Wns+=this.Xns/this.Uns*gf),this.Yns=this.uf.nD()*s[7],this.qns=s[6],this.Hns=s[6],this.Hns+=this.Yns,this.jyt=!!s[8]),5===this.jns&&(this.Hns=df.yn(this.Hns)),this.LCt(),this.jyt&&this.l_t()}ln(){super.ln()}jv(){return{i:this.Wns,e:this.jyt,mv:this.jns,w:this.Vns,p:this.Uns,mag:this.Hns,iv:this.fwt,iv2:this.Kns,r:this.trs,lkv:this.Zns,lkv2:this.Qns}}Vv(t){this.Wns=t.i,this.OMt(t.e),this.jns=t.mv,this.Vns=t.w,this.Uns=t.p,this.Hns=t.mag,this.fwt=t.iv,this.Kns=t.iv2,this.trs=t.r,this.Zns=t.lkv,this.Qns=t.lkv2}LCt(){const t=this.Gi.CD();switch(this.jns){case 0:this.fwt=t.Cv();break;case 1:this.fwt=t.Ev();break;case 2:this.fwt=t.fm(),this.trs=t.Gm()/t.fm();break;case 3:this.fwt=t.fm();break;case 4:this.fwt=t.Gm();break;case 5:this.fwt=t.a5();break;case 6:this.fwt=t.WR();break;case 7:this.fwt=0;break;case 8:this.fwt=t.Cv(),this.Kns=t.Ev();break;case 9:this.fwt=t.Fv()}this.Zns=this.fwt,this.Qns=this.Kns}srs(t){switch(t%=gf,this.Vns){case 0:return Math.sin(t);case 1:return t<=yf?t/yf:t<=wf?1-2*(t-yf)/Math.PI:(t-wf)/yf-1;case 2:return 2*t/gf-1;case 3:return-2*t/gf+1;case 4:return t<Math.PI?-1:1}return 0}kK(){const t=this.uf.DO(this.Gi);this.jyt&&0!==t&&(0===this.Uns?this.Wns=0:this.Wns=(this.Wns+t/this.Uns*gf)%gf,this.irs())}irs(){const t=this.Gi.CD();switch(this.jns){case 0:t.Cv()!==this.Zns&&(this.fwt+=t.Cv()-this.Zns),t.Pv(this.fwt+this.srs(this.Wns)*this.Hns),this.Zns=t.Cv();break;case 1:t.Ev()!==this.Zns&&(this.fwt+=t.Ev()-this.Zns),t.Av(this.fwt+this.srs(this.Wns)*this.Hns),this.Zns=t.Ev();break;case 2:t.Mm(this.fwt+this.srs(this.Wns)*this.Hns),t.pm(t.fm()*this.trs);break;case 3:t.Mm(this.fwt+this.srs(this.Wns)*this.Hns);break;case 4:t.pm(this.fwt+this.srs(this.Wns)*this.Hns);break;case 5:t.a5()!==this.Zns&&(this.fwt=df.gn(this.fwt+(t.a5()-this.Zns))),t.o5(this.fwt+this.srs(this.Wns)*this.Hns),this.Zns=t.a5();break;case 6:t.VR(this.fwt+this.srs(this.Wns)*this.Hns/100);break;case 8:t.Cv()!==this.Zns&&(this.fwt+=t.Cv()-this.Zns),t.Ev()!==this.Qns&&(this.Kns+=t.Ev()-this.Qns),t.Pv(this.fwt+Math.cos(t.a5())*this.srs(this.Wns)*this.Hns),t.Av(this.Kns+Math.sin(t.a5())*this.srs(this.Wns)*this.Hns),this.Zns=t.Cv(),this.Qns=t.Ev();break;case 9:t.Ov(this.fwt+this.srs(this.Wns)*this.Hns)}t.Q4()}ers(t,s){}hrs(t){this.Uns=t}nrs(){return this.Uns}rrs(t){this.Hns=t}ors(t){5===this.jns&&(t=df.yn(t)),this.rrs(t)}ars(){return this.Hns}lrs(){let t=this.ars();return 5===this.jns?df.wn(t):t}urs(t){5===this.jns&&5!==t&&(this.Hns=df.wn(this.Hns)),this.jns=t,this.LCt()}crs(){return this.jns}frs(t){this.Vns=t}drs(){return this.Vns}prs(t){this.Wns=df.mn(t,0,2*Math.PI),this.irs()}mrs(){return this.Wns}OMt(t){this.jyt=!!t,this.jyt?this.l_t():this.qxt()}kMt(){return this.jyt}Lnt(t){switch(t){case 0:return this.jns;case 1:return this.Vns;case 2:return this.zns;case 6:return this.qns;case 8:return this.jyt}}Unt(t,s){switch(t){case 0:this.jns=Sf[s],this.LCt();break;case 1:this.Vns=s;break;case 2:this.zns=s,this.Uns=this.zns+this.$ns,this.jyt||(0!==this.Uns?(this.Wns=this.Jns/this.Uns*gf,this.Wns+=this.Xns/this.Uns*gf):this.Wns=0);break;case 6:this.qns=s,this.Hns=this.qns+this.Yns,5===this.jns&&(this.Hns=df.yn(this.Hns));break;case 8:this.jyt=!!s}}d_t(){const t="behaviors.sin";return[{title:"$"+this.A6().Qc(),properties:[{name:t+".properties.enabled.name",value:this.kMt(),V8t:t=>this.OMt(t)},{name:t+".properties.period.name",value:this.nrs(),V8t:t=>this.hrs(t)},{name:t+".properties.magnitude.name",value:this.lrs(),V8t:t=>this.ors(t)},{name:t+".debugger.value",value:this.srs(this.mrs())*this.lrs()}]}]}Gxt(){return self.grs}},new WeakMap),vf=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],Mf=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.grs=class extends mf{constructor(){super(),bf.set(this,mf.BN().M6())}set yrs(t){pf.Me(t),bf.get(this).hrs(t)}get yrs(){return bf.get(this).nrs()}set wrs(t){pf.Me(t),bf.get(this).rrs(t)}get wrs(){return bf.get(this).ars()}set Srs(t){bf.get(this).prs(t)}get Srs(){return bf.get(this).mrs()}set brs(t){pf.Te(t);const s=vf.indexOf(t);if(-1===s)throw new Error("invalid movement");bf.get(this).urs(s)}get brs(){return vf[bf.get(this).crs()]}set vrs(t){pf.Te(t);const s=Mf.indexOf(t);if(-1===s)throw new Error("invalid wave");bf.get(this).frs(s)}get vrs(){return Mf[bf.get(this).drs()]}get value(){const t=bf.get(this);return t.srs(t.mrs())*t.ars()}Mrs(){bf.get(this).LCt()}set isEnabled(t){bf.get(this).OMt(!!t)}get isEnabled(){return bf.get(this).kMt()}}}{const xf=self.Ns;xf.qat.Bns.aX={Zu(){return this.kMt()},xrs(t){return this.crs()===t},_rs(t,s){return xf.compare(this.nrs(),t,s)},Grs(t,s){return xf.compare(this.lrs(),t,s)},Trs(t){return this.drs()===t}}}{const _f=self.Ns;_f.qat.Bns.Qht={F2t(t){this.OMt(0!==t)},Irs(t){this.hrs(t)},Crs(t){this.ors(t)},Prs(t){this.urs(t)},Rrs(t){this.Vns=t},Ers(t){const s=2*Math.PI;this.prs(t*s%s)},Ars(){this.LCt()}}}{const Gf=self.Ns;Gf.qat.Bns.tnt={Frs(){return this.mrs()/(2*Math.PI)},Ors(){return this.nrs()},Drs(){return this.lrs()},ins(){return this.srs(this.mrs())*this.lrs()}}}{const Tf=self.Ns;Tf.qat.krs=class extends Tf.sGt{constructor(t){super(t)}ln(){super.ln()}}}{const If=self.Ns;If.qat.krs.gIt=class extends If.rGt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const Cf=self.Ns,Pf=self.$s,Rf=self.I6,Ef=(Cf.qat.krs.Instance=class extends Cf.aGt{constructor(t,s){super(t);const i=this.CD(),e=(this.eTt=0,this.qss=0,this.Jo=0,this.Lrs=!1,this.Yss=!1,this.Nrs=!1,this.jyt=!0,this.Brs=0,this.Wrs=0,this.$7t=i.Cv(),this.X7t=i.Ev(),this.jrs=i.a5(),this.Vrs=0,this.Urs=Math.min(Math.abs(i.fm()),Math.abs(i.Gm())/2),this.Hrs=!1,s&&(this.eTt=s[0],this.qss=s[1],this.Jo=s[2],this.Lrs=!!s[3],this.Yss=!!s[4],this.Nrs=!!s[5],this.jyt=!!s[6]),i.a5());this.Brs=Math.cos(e)*this.eTt,this.Wrs=Math.sin(e)*this.eTt,this.jyt&&(this.l_t(),this.Lrs)&&this.pGt()}ln(){super.ln()}jv(){const t={dx:this.Brs,dy:this.Wrs,lx:this.$7t,ly:this.X7t,lka:this.jrs,t:this.Vrs};return 0!==this.qss&&(t.acc=this.qss),0!==this.Jo&&(t.g=this.Jo),this.Nrs&&(t.st=this.Nrs),this.jyt||(t.e=this.jyt),this.Lrs&&(t.bos=this.Lrs),this.Yss&&(t.sa=this.Yss),t}Vv(t){this.Brs=t.dx,this.Wrs=t.dy,this.$7t=t.lx,this.X7t=t.ly,this.jrs=t.lka,this.Vrs=t.t,this.qss=t.hasOwnProperty("acc")?t.acc:0,this.Jo=t.hasOwnProperty("g")?t.g:0,this.Nrs=!!t.hasOwnProperty("st")&&t.st,this.Lrs=!!t.hasOwnProperty("bos")&&t.bos,this.Yss=!!t.hasOwnProperty("sa")&&t.sa,this.OMt(!t.hasOwnProperty("e")||t.e)}kK(){if(this.jyt){const h=this.uf.DO(this.Gi),n=this.Gi.CD();if(n.a5()!==this.jrs){const t=n.a5();if(this.Yss){const s=Cf.Sn(0,0,this.Brs,this.Wrs);this.Brs=Math.cos(t)*s,this.Wrs=Math.sin(t)*s}this.jrs=t}let i=0,e=0;if(0!==this.qss){let t=Cf.Sn(0,0,this.Brs,this.Wrs),s;s=0===this.Brs&&0===this.Wrs?n.a5():Cf.vn(0,0,this.Brs,this.Wrs),t+=this.qss*h,i=Math.cos(s)*this.qss,e=Math.sin(s)*this.qss,t<0&&(t=0,i=0,e=0),this.Brs=Math.cos(s)*t,this.Wrs=Math.sin(s)*t}if(0!==this.Jo&&(this.Wrs+=this.Jo*h,e+=this.Jo),this.$7t=n.Cv(),this.X7t=n.Ev(),0!==this.Brs||0!==this.Wrs){const r=this.Brs*h+.5*i*h*h,o=this.Wrs*h+.5*e*h*h,a=Cf.Sn(0,0,r,o);if(this.zrs(r,o,a),this.Vrs+=a,this.Yss&&(0!=r||0!=o)){const l=Cf.vn(0,0,r,o);n.o5(l),this.jrs=n.a5()}n.Q4()}}}zrs(t,s,i){const e=this.CD();if(!this.Nrs||i<=this.Urs)e.eB(t,s),e.Q4(),this.Nrs&&this.M4(Cf.qat.krs.aX.Jrs);else{this.Hrs=!1;const h=e.Cv(),n=e.Ev(),r=h+t,o=n+s,a=Cf.vn(0,0,t,s),l=Math.cos(a)*this.Urs,u=Math.sin(a)*this.Urs,c=Math.floor(i/this.Urs);for(let t=1;t<=c;++t)if(e.tB(h+l*t,n+u*t),e.Q4(),this.M4(Cf.qat.krs.aX.Jrs),this.Gi.i8()||this.Hrs)return;e.tB(r,o),e.Q4(),this.M4(Cf.qat.krs.aX.Jrs)}}dGt(){if(this.jyt&&this.Lrs&&(0!==this.Brs||0!==this.Wrs)){const t=this.uf.DO(this.Gi),s=this.Gi.CD(),i=this.uf.HF(),e=i.Mk(this.Gi);if(e){i.e3t(this.Gi,e);const h=Cf.Sn(0,0,this.Brs,this.Wrs),n=i.v3t(this.Gi,this.$7t,this.X7t);this.Brs=Math.cos(n)*h,this.Wrs=Math.sin(n)*h,s.eB(this.Brs*t,this.Wrs*t),s.Q4(),this.Yss&&(s.o5(n),this.jrs=s.a5(),s.Q4()),i.y3t(this.Gi,this.Brs/h,this.Wrs/h,Math.max(2.5*h*t,30))||i.b3t(this.Gi,100)}}}Lnt(t){switch(t){case 0:return this.Mis();case 1:return this.Dis();case 2:return this.qrs();case 4:return this.Yss;case 5:return this.Nrs;case 6:return this.kMt()}}Unt(t,s){switch(t){case 0:this.vis(s);break;case 1:this.qss=s;break;case 2:this.Jo=s;break;case 4:this.Yss=!!s;break;case 5:this.Nrs=!!s;break;case 6:this.OMt(!!s)}}vis(t){const s=Cf.vn(0,0,this.Brs,this.Wrs);this.Brs=Math.cos(s)*t,this.Wrs=Math.sin(s)*t}Mis(){return Cf.Nn(Cf.Sn(0,0,this.Brs,this.Wrs),6)}Ois(t){this.qss=t}Dis(){return this.qss}$rs(t){this.Jo=t}qrs(){return this.Jo}Ais(t){const s=Cf.Sn(0,0,this.Brs,this.Wrs);this.Brs=Math.cos(t)*s,this.Wrs=Math.sin(t)*s}Fis(){return Cf.vn(0,0,this.Brs,this.Wrs)}Xrs(t){this.Lrs!==(t=!!t)&&(this.Lrs=t,this.jyt)&&(this.Lrs?this.pGt():this.uGt())}Yrs(){return this.Lrs}Krs(t){this.Vrs=t}Zrs(){return this.Vrs}OMt(t){this.jyt=!!t,this.jyt?(this.l_t(),this.Lrs&&this.pGt()):(this.qxt(),this.uGt())}kMt(){return this.jyt}d_t(){const t="behaviors.bullet";return[{title:"$"+this.A6().Qc(),properties:[{name:t+".debugger.vector-x",value:this.Brs,V8t:t=>this.Brs=t},{name:t+".debugger.vector-y",value:this.Wrs,V8t:t=>this.Wrs=t},{name:t+".properties.speed.name",value:this.Mis(),V8t:t=>this.vis(t)},{name:t+".debugger.angle-of-motion",value:Cf.wn(this.Fis())},{name:t+".properties.gravity.name",value:this.qrs(),V8t:t=>this.$rs(t)},{name:t+".properties.acceleration.name",value:this.Dis(),V8t:t=>this.Ois(t)},{name:t+".debugger.distance-travelled",value:this.Zrs()},{name:t+".properties.enabled.name",value:this.kMt(),V8t:t=>this.OMt(t)}]}]}Gxt(){return self.Qrs}},new WeakMap);self.Qrs=class extends Rf{constructor(){super(),Ef.set(this,Rf.BN().M6())}get speed(){return Ef.get(this).Mis()}set speed(t){Pf.Me(t),Ef.get(this).vis(t)}get acceleration(){return Ef.get(this).Dis()}set acceleration(t){Pf.Me(t),Ef.get(this).Ois(t)}get dQt(){return Ef.get(this).qrs()}set dQt(t){Pf.Me(t),Ef.get(this).$rs(t)}get tes(){return Ef.get(this).Fis()}set tes(t){Pf.Me(t),Ef.get(this).Ais(t)}get tos(){return Ef.get(this).Yrs()}set tos(t){Ef.get(this).Xrs(!!t)}get ios(){return Ef.get(this).Zrs()}set ios(t){Pf.Me(t),Ef.get(this).Krs(t)}get isEnabled(){return Ef.get(this).kMt()}set isEnabled(t){Ef.get(this).OMt(t)}}}{const Af=self.Ns;Af.qat.krs.aX={hes(t,s){const i=Math.hypot(this.Brs,this.Wrs);return Af.compare(i,t,s)},eos(t,s){return Af.compare(this.Zrs(),t,s)},Jrs(){return!0},Zu(){return this.kMt()}}}{const Ff=self.Ns;Ff.qat.krs.Qht={ces(t){this.vis(t)},hZt(t){this.Ois(t)},nZt(t){this.$rs(t)},hos(t){this.Ais(Ff.yn(t))},C3(t){if(t){const s=t.Zvt(this.Gi);if(s){const i=this.Gi.CD(),e=this.uf.HF(),h=this.uf.DO(this.Gi),n=Ff.Sn(0,0,this.Brs,this.Wrs),r=e.v3t(this.Gi,this.$7t,this.X7t,s);this.Brs=Math.cos(r)*n,this.Wrs=Math.sin(r)*n,i.eB(this.Brs*h,this.Wrs*h),i.Q4(),this.Yss&&(i.o5(r),this.jrs=i.a5(),i.Q4()),0!==n&&(this.Lrs?e.y3t(this.Gi,this.Brs/n,this.Wrs/n,Math.max(2.5*n*h,30))||e.b3t(this.Gi,100):e.g3t(this.Gi,this.Brs/n,this.Wrs/n,Math.max(2.5*n*h,30),s))}}},nos(t){this.Xrs(t)},ros(t){this.Krs(t)},F2t(t){this.OMt(t)},oos(){this.Hrs=!0}}}{const Of=self.Ns;Of.qat.krs.tnt={ges(){return this.Mis()},wes(){return this.Dis()},aos(){return Of.wn(this.Fis())},los(){return this.Zrs()},HQt(){return this.qrs()}}}{const Df=self.Ns;Df.qat.uos=class extends Df.sGt{constructor(t){super(t)}ln(){super.ln()}}}{const kf=self.Ns;kf.qat.uos.gIt=class extends kf.rGt{constructor(t){super(t)}ln(){super.ln()}_xt(){}}}{const Lf=self.Ns,Nf=self.$s,Bf=self.I6,Wf=(Lf.qat.uos.Instance=class extends Lf.aGt{constructor(t,s){super(t),this.fos=0,this.dos=0,this.mos=0,this.gos=0,this.yos=0,this.l_t()}ln(){super.ln()}wos(t,s,i){this.fos=t,this.dos=s,this.mos=1,this.gos=s,this.yos=i,this.Gi.CD().H5(!1),this.uf.DD()}Sos(){this.yos=0,this.Gi.CD().H5(!0),this.uf.DD()}vos(){return 0<this.yos}jv(){return{on:this.fos,off:this.dos,s:this.mos,stl:this.gos,tl:this.yos}}Vv(t){this.fos=t.on,this.dos=t.off,this.mos=t.s,this.gos=t.stl,this.yos=null===t.tl?1/0:t.tl}kK(){if(!(this.yos<=0)){const t=this.uf.DO(this.Gi);if(this.yos-=t,this.yos<=0)return this.yos=0,this.Gi.CD().H5(!0),this.uf.DD(),this.Vxt("flashend"),this.Yxt(Lf.qat.uos.aX.Mos);this.gos-=t,this.gos<=0&&(0===this.mos?(this.Gi.CD().H5(!1),this.mos=1,this.gos+=this.dos):(this.Gi.CD().H5(!0),this.mos=0,this.gos+=this.fos),this.uf.DD())}}d_t(){const t="behaviors.flash.debugger";return[{title:"$"+this.A6().Qc(),properties:[{name:t+".on-time",value:this.fos,V8t:t=>this.fos=t},{name:t+".off-time",value:this.dos,V8t:t=>this.dos=t},{name:t+".is-flashing",value:0<this.yos},{name:t+".time-left",value:this.yos}]}]}Gxt(){return self.xos}},new WeakMap);self.xos=class extends Bf{constructor(){super(),Wf.set(this,Bf.BN().M6())}_os(t,s,i){Nf.Me(t),Nf.Me(s),Nf.Me(i),Wf.get(this).wos(t,s,i)}stop(){Wf.get(this).Sos()}get Gos(){return Wf.get(this).vos()}}}{const jf=self.Ns;jf.qat.uos.aX={Tos(){return this.vos()},Mos(){return!0}}}{const Vf=self.Ns;Vf.qat.uos.Qht={uos(t,s,i){this.wos(t,s,i)},Ios(){this.Sos()}}}{const Uf=self.Ns;Uf.qat.uos.tnt={}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},o=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,o,0;self.iSt=[()=>0,()=>"",()=>.7,()=>.6,()=>"BACKGROUND",()=>360,()=>-1944,t=>{const s=t.fSt(0),i=t.fSt(1).sSt();return()=>s.Nwt()+3+i.Get()/10},()=>1,()=>270,t=>{const s=t.fSt(0).sSt();return()=>500+Math.pow(1.7*s.Get(),1.25)},()=>"Default",()=>"OBJECT SPAWN",()=>"OBJECTS",t=>{const s=t.fSt(0).Awt();return()=>120+240*Math.floor(s(3))},()=>1350,t=>{const s=t.fSt(0).Awt();return()=>Math.floor(s(46))},()=>-64,()=>30,t=>{const s=t.fSt(0).sSt(),i=t.fSt(1).Awt();return()=>.5+2/(s.Get()+1)-i(30)/100},()=>45,t=>{const s=t.fSt(0).sSt(),i=t.fSt(1).Awt();return()=>.3+2/(s.Get()+1)-i(30)/100},t=>{const s=t.fSt(0).Awt();return()=>.3-s(20)/100},()=>4,t=>{const s=t.fSt(0).Awt();return()=>5+Math.floor(s(8))},()=>"Bonus",t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).sSt();return()=>1+Math.floor(s(3))+4/(i.Get()+1)},t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).sSt();return()=>1+Math.floor(s(5))+5/(.1*(i.Get()+5))},t=>{const s=t.fSt(0).Awt();return()=>Math.floor(s(48))},t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).sSt();return()=>5+Math.floor(s(10))+1/(.1*(i.Get()+5))},t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).sSt();return()=>3+Math.floor(s(10))+1/(.1*(i.Get()+5))},t=>{const s=t.fSt(0).Awt();return()=>1+Math.floor(s(7))},()=>"x2",()=>3,()=>6,()=>"x3",()=>"x4",()=>"BONUSES & POINTS",()=>2,t=>{const s=t.fSt(0);return()=>s.Nwt()},t=>{const s=t.fSt(0);return()=>s.Nwt()+16},()=>"FREEZE",()=>52e3,()=>48e3,()=>"MULTIPLIER",()=>"MAGNET",()=>"COLLISIONS",()=>"COLLISIONS BETWEEN OBJECTS",()=>64,()=>"MOUTH COLLISIONS",t=>{const s=t.fSt(0).Awt();return()=>1+Math.floor(s(5))},()=>5,()=>"catch",t=>{const s=t.fSt(0).Awt();return()=>s(360)},t=>{const s=t.fSt(0).sSt();return()=>+s.Get()+1},()=>.5,()=>-711970017835007,()=>.52,()=>-717750023016447,()=>.025,()=>.54,()=>.56,()=>"bonus",t=>{const s=t.fSt(0).sSt();return()=>10+10*s.Get()},()=>.62,()=>.68,()=>570,()=>"10p",()=>"20p",()=>"30p",()=>"40p",()=>"5sec",()=>"Magnet",()=>"magnet",()=>"Animation 1",()=>737,()=>804,()=>100,()=>.3,()=>"svilpe",()=>"auksti",()=>"intro",()=>"default",()=>"outro",t=>{const s=t.fSt(0).Awt();return()=>1200+s(400)},t=>{const s=t.fSt(0).Awt();return()=>1+Math.floor(s(3))},()=>-7,()=>.01,()=>"UI",()=>640,t=>{const s=t.fSt(0).sSt();return()=>s.Get()},()=>9,()=>210,()=>250,()=>305,()=>-664105190949887,t=>{const s=t.fSt(0).sSt();return()=>s.Get()/5},t=>{const s=t.fSt(0).sSt();return()=>s.Get()/20},()=>20,()=>-100,()=>"Unmute",()=>.1,()=>60,()=>"Mute",()=>"CONTROLS",()=>"Mobile",()=>"Desktop",()=>-1,()=>135,()=>585,()=>"RESET ON START",()=>"modal",()=>-200,()=>920,()=>1480,t=>{const s=t.fSt(0);return()=>s.Nwt()+2},t=>{const s=t.fSt(0);return()=>s.Ywt()+1},t=>{const s=t.fSt(0);return()=>s.Ywt()-1},()=>220,()=>120,()=>16,()=>"maxlength",()=>"8",()=>"cachedName",()=>"cachedNickname",()=>"cachedEmail",()=>"cachedPhone",()=>"cachedTerms",t=>{const s=t.fSt(0).Awt();return()=>s()},t=>{const s=t.fSt(0).Awt(),i=t.fSt(1);return()=>s(i.Nwt())},()=>7,()=>"^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$",()=>"gi",()=>"^[0-9]",t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).Awt(),e=t.fSt(2);return()=>s(i(e.Nwt(),8))},t=>{const s=t.fSt(0);return()=>s.Nwt().toString()},()=>"SendScore",()=>"https://portachi.com/mbl/ac2/save_scores.php",t=>{const s=t.fSt(0).sSt(),i=t.fSt(1),e=t.fSt(2),h=t.fSt(3),n=t.fSt(4),r=t.fSt(5).sSt();return()=>o("score=",s.Get())+"&name="+i.Nwt()+"&surname="+e.Nwt()+"&email="+h.Nwt()+"&phone="+n.Nwt()+"&token="+r.Get()},()=>"POST",()=>558,()=>183,()=>362,()=>539,()=>719,()=>386,()=>971,()=>405,()=>894,()=>200,()=>969,()=>866,()=>"success",()=>"Record already exists",()=>"selected",()=>33,t=>{const s=t.fSt(0);return()=>s.Nwt()+440},t=>{const s=t.fSt(0);return()=>s.Nwt()-176},t=>{const s=t.fSt(0);return()=>s.Nwt()+60},t=>{const s=t.fSt(0),i=t.fSt(1),e=t.fSt(2);return()=>s.Nwt()-i.Nwt()/e.Vwt()*240},t=>{const s=t.fSt(0);return()=>s.Nwt()/10.7},t=>{const s=t.fSt(0);return()=>s.Nwt()-180},t=>{const s=t.fSt(0);return()=>s.Nwt()+6},t=>{const s=t.fSt(0);return()=>s.Nwt()+90},t=>{const s=t.fSt(0);return()=>s.Nwt()+320},t=>{const s=t.fSt(0);return()=>s.Nwt()+430},t=>{const s=t.fSt(0);return()=>s.Nwt()/20},()=>500,t=>{const s=t.fSt(0);return()=>s.Nwt()+380},t=>{const s=t.fSt(0);return()=>s.Nwt()-150},t=>{const s=t.fSt(0),i=t.fSt(1);return()=>s.Nwt()/i.Vwt()*1.5},t=>{const s=t.fSt(0);return()=>s.Nwt()+180},t=>{const s=t.fSt(0);return()=>s.Nwt()-190},t=>{const s=t.fSt(0);return()=>s.Nwt()/190},()=>32,()=>1.6,()=>.9,()=>"GetLottery",()=>"https://portachi.com/mbl/ac2/get_lottery.php",t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).Awt();return()=>s(i(),1,";")},t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).Awt();return()=>s(i(),0,";")},t=>{const s=t.fSt(0).Awt(),i=t.fSt(1).sSt();return()=>s(i.Get(),"izloze")},t=>{const s=t.fSt(0).sSt();return()=>"nkam izloze, kad noersim "+s.Get()+" bumbu"},()=>"GetScores",()=>"https://portachi.com/mbl/ac2/get_scores.php",()=>432,()=>144,t=>{const s=t.fSt(0);return()=>s.Nwt()/3.48/100},()=>166,t=>{const s=t.fSt(0);return()=>0*s.Vwt()},()=>"1",t=>{const s=t.fSt(0);return()=>1.1*s.Vwt()},()=>.23,()=>1144,()=>"cachedPrize",()=>2.5,()=>"4",()=>-500,()=>.2,()=>-600,()=>320,t=>{const s=t.fSt(0);return()=>s.Vwt()},t=>{const s=t.fSt(0);return()=>.8*s.Vwt()},()=>"2",t=>{const s=t.fSt(0);return()=>.97*s.Vwt()},()=>.25,()=>"3",()=>.35,()=>1008.8,()=>1040,()=>.45,()=>290,()=>"5",()=>380,()=>-20,t=>{const s=t.fSt(0);return()=>s.Nwt()-200},t=>{const s=t.fSt(0);return()=>s.Nwt()-20},()=>"OHO! TU NORI",t=>{const s=t.fSt(0);return()=>s.Nwt()+.075},()=>"6",()=>-3,()=>165,()=>"click",()=>115,()=>"lottery_1",()=>"lottery_2",()=>"lottery_3",()=>"lottery_4",()=>"lottery_5",()=>612,()=>57]}var t=self.Ns;self.E5t=function(){return[t.uX.kht,t.uX.Keyboard,t.qat.zss,t.qat.Jat,t.qat.Bns,t.uX.oUt,t.uX.Touch,t.uX.Q7t,t.uX.Hzt,t.uX._9t,t.uX.Audio,t.qat.krs,t.uX.Text,t.uX.mYt,t.qat.uos,t.uX.AKt,t.uX.HTMLElement,t.uX.lX.aX.rX,t.uX.kht.Qht.qMt,t.uX.kht.Qht.J8t,t.uX.Audio.Qht.Play,t.uX.lX.Qht.Fr,t.uX.kht.aX.oMt,t.uX.lX.Qht.YBt,t.uX.kht.aX.gvt,t.uX.lX.aX.oBt,t.uX.kht.Qht.Av,t.uX.kht.tnt.p2t,t.uX.kht.Qht.Xvt,t.uX.kht.Qht.bvt,t.uX.kht.aX.LMt,t.qat.krs.Qht.hos,t.qat.krs.Qht.ces,t.uX.lX.aX.yBt,t.uX.kht.Qht.H5,t.uX.kht.Qht.U8t,t.uX.lX.aX.aBt,t.uX.kht.aX.G8t,t.uX.lX.Qht.m6t,t.uX.kht.aX.J5,t.uX.lX.aX.lBt,t.uX.lX.Qht.zBt,t.uX.lX.Qht.HBt,t.uX.lX.aX.Ipt,t.uX.lX.tnt.random,t.uX.kht.Qht.H8t,t.uX.lX.aX.pd,t.uX.kht.aX.fMt,t.uX.kht.Qht.YMt,t.uX.AKt.Qht.bvt,t.uX.AKt.Qht.wvt,t.uX.kht.tnt.d2t,t.uX.kht.Qht.$vt,t.qat.zss.Qht.ces,t.qat.zss.Qht.hZt,t.qat.zss.Qht.des,t.uX.lX.Qht.UBt,t.qat.zss.Qht.F2t,t.qat.krs.Qht.F2t,t.qat.zss.Qht.res,t.uX.kht.aX.cMt,t.uX.kht.Qht.dVt,t.uX.kht.Qht.o5,t.uX.mYt.Qht.n5,t.uX.mYt.Qht.Hvt,t.uX.kht.Qht.cC,t.uX.kht.Qht.VR,t.qat.Jat.Qht.Ehs,t.qat.Jat.Qht.Chs,t.uX.Audio.Qht.PW,t.uX.kht.aX.T8t,t.uX.kht.aX.nVt,t.qat.krs.Qht.C3,t.uX.mYt.Qht.pf,t.uX.kht.Qht.Pv,t.uX.kht.Qht.z8t,t.qat.uos.Qht.uos,t.uX.kht.aX.rVt,t.uX.Audio.Qht.Bqt,t.uX.oUt.aX.zUt,t.uX.Touch.aX.$Ht,t.uX.kht.Qht.pm,t.uX.Touch.aX.jHt,t.uX.Keyboard.aX.XVt,t.uX.Keyboard.aX.YVt,t.uX.Touch.aX.VHt,t.qat.zss.Qht.nes,t.uX.lX.Qht.S6t,t.uX.kht.aX.dvt,t.uX.kht.aX.pvt,t.uX.kht.Qht.bVt,t.uX.kht.tnt.m2t,t.uX.kht.tnt.g2t,t.qat.krs.tnt.aos,t.uX.kht.aX.Tvt,t.Cos["5.RegistrationEvents_Event1"],t.uX.Hzt.Qht.M9t,t.uX.Hzt.Qht.C2t,t.uX.Q7t.Qht.Azt,t.uX.Q7t.aX.mzt,t.uX.Hzt.Qht.pf,t.uX.Q7t.tnt.Bzt,t.uX.Hzt.tnt.Text,t.Cos["5.RegistrationEvents_Event14"],t.uX.lX.aX.DBt,t.uX.Hzt.aX.y9t,t.uX.lX.aX.mBt,t.uX.lX.tnt.zt,t.uX.lX.aX.pBt,t.uX.Q7t.Qht.Rzt,t.uX.lX.tnt.iWt,t.uX.lX.tnt.left,t.uX._9t.Qht.X9t,t.uX.lX.aX.cgt,t.qat.Bns.Qht.F2t,t.uX.kht.Qht.wvt,t.uX.Hzt.Qht.wvt,t.uX._9t.aX.W9t,t.uX._9t.tnt.iJt,t.uX._9t.aX.czt,t.uX.Hzt.Qht.H5,t.uX.lX.Qht.b6t,t.uX.mYt.Qht.Av,t.uX.Text.Qht.Av,t.uX.Text.Qht.VI,t.uX.Text.tnt.m2t,t.uX.Text.tnt.p2t,t.uX.mYt.tnt.p2t,t.uX.Text.tnt.hYt,t.uX.kht.Qht.n5,t.uX.lX.tnt.mWt,t.uX.lX.tnt.find,t.uX.Text.Qht.pf,t.uX.Text.Qht.Mm,t.uX.Text.Qht.Pv,t.uX.Text.Qht.H5,t.uX.mYt.Qht.H5,t.qat.Jat.aX.xhs,t.uX.mYt.Qht.YYt,t.uX.Text.aX.y9t,t.uX.mYt.tnt.hKt,t.uX.lX.aX.q5t]},self.$5t=[{Pos:0},{Keyboard:0},{zss:0},{Jat:0},{Ros:0},{Eos:0},{Aos:0},{Fos:0},{Oos:0},{Dos:0},{kos:0},{Los:0},{Nos:0},{Bos:0},{Wos:0},{jos:0},{Vos:0},{Uos:0},{oUt:0},{Touch:0},{Hos:0},{Q7t:0},{zos:0},{Jos:0},{qos:0},{$os:0},{_9t:0},{Audio:0},{Xos:0},{Yos:0},{Kos:0},{Zos:0},{Qos:0},{tas:0},{sas:0},{ias:0},{eas:0},{nas:0},{ras:0},{oas:0},{aas:0},{las:0},{krs:0},{uas:0},{fas:0},{das:0},{pas:0},{mas:0},{gas:0},{yas:0},{was:0},{Sas:0},{bas:0},{vas:0},{Mas:0},{xas:0},{_as:0},{Gas:0},{uos:0},{Tas:0},{Ias:0},{Cas:0},{Pas:0},{Ras:0},{Eas:0},{Aas:0},{Fas:0},{Oas:0},{Das:0},{kas:0},{Las:0},{Nas:0},{Bas:0},{Was:0},{jas:0},{Vas:0},{Uas:0},{Has:0},{zas:0},{Jas:0},{qas:0},{$as:0},{Xas:0},{Yas:0},{registration:0},{Kas:0},{Zas:0},{Qas:0},{tls:0},{sls:0},{ils:0},{C0:0},{els:0},{hls:0},{nls:0},{rls:0},{ols:0},{als:0},{lls:0},{uls:0},{cls:0},{fls:0},{dls:0},{pls:0},{mls:0},{gls:0},{yls:0},{wls:0},{Sls:0},{bls:0},{vls:0},{Mls:0},{xls:0},{_ls:0},{Gls:0},{Tls:0},{Ils:0},{Cls:0},{Pls:0},{Rls:0},{Els:0},{Als:0},{gameTime:0},{Fls:0},{Ols:0},{Dls:0},{kls:0},{Lls:0},{Nls:0},{Bls:0},{Wls:0},{jls:0},{Vls:0},{Uls:0},{Hls:0},{zls:0},{Jls:0},{email:0},{qls:0},{$ls:0},{Xls:0},{Yls:0}],self.Kls={Pos:class extends self.$8t{},Keyboard:class extends self.ON{},Eos:class extends self.$8t{},Dos:class extends self.$8t{},kos:class extends self.$8t{},Los:class extends self.$8t{},Nos:class extends self.$8t{},Wos:class extends self.$8t{},jos:class extends self.$8t{},Vos:class extends self.$8t{},Uos:class extends self.$8t{},oUt:class extends self.ON{},Touch:class extends self.ON{},Hos:class extends self.$8t{},Q7t:class extends self.ON{},zos:class extends self.p9t{},Jos:class extends self.p9t{},qos:class extends self.p9t{},$os:class extends self.p9t{},_9t:class extends self.ON{},Audio:class extends self.ON{},Xos:class extends self.$8t{},Yos:class extends self.$8t{},Kos:class extends self.$8t{},Zos:class extends self.$8t{},Qos:class extends self.$8t{},tas:class extends self.$8t{},sas:class extends self.$8t{},ias:class extends self.$8t{},ras:class extends self.$8t{},uas:class extends self.$8t{},fas:class extends self.$8t{},das:class extends self.CXt{},pas:class extends self.$8t{},mas:class extends self.$8t{},gas:class extends self.$8t{},yas:class extends self.$8t{},was:class extends self.$8t{},Sas:class extends self.$8t{},bas:class extends self.$8t{},vas:class extends self.$8t{},Mas:class extends self.$8t{},xas:class extends self.$8t{},_as:class extends self.$8t{},Gas:class extends self.qYt{},Tas:class extends self.qYt{},Ias:class extends self.qYt{},Cas:class extends self.$8t{},Pas:class extends self.$8t{},Ras:class extends self.$8t{},Eas:class extends self.$8t{},Aas:class extends self.$8t{},Fas:class extends self.$8t{},Oas:class extends self.$8t{},Das:class extends self.$8t{},kas:class extends self.$8t{},Las:class extends self.$8t{},Nas:class extends self.CXt{},Bas:class extends self.$8t{},Was:class extends self.$8t{},jas:class extends self.$8t{},Vas:class extends self.$8t{},Uas:class extends self.$8t{},Has:class extends self.$8t{},zas:class extends self.$8t{},Jas:class extends self.sQt{},qas:class extends self.sQt{},$as:class extends self.sQt{},Xas:class extends self.sQt{},Yas:class extends self.$8t{},registration:class extends self.Mss{},Kas:class extends self.$8t{},Zas:class extends self.$8t{},Qas:class extends self.$8t{},tls:class extends self.$8t{},sls:class extends self.$8t{},ils:class extends self.$8t{},C0:class extends self.$8t{},els:class extends self.$8t{},hls:class extends self.CXt{},nls:class extends self.$8t{},rls:class extends self.$8t{},ols:class extends self.$8t{},als:class extends self.CXt{},lls:class extends self.CXt{},uls:class extends self.CXt{},cls:class extends self.qYt{},fls:class extends self.CXt{},dls:class extends self.CXt{},pls:class extends self.CXt{},mls:class extends self.CXt{},gls:class extends self.$8t{},yls:class extends self.$8t{},wls:class extends self.$8t{},Sls:class extends self.$8t{},bls:class extends self.$8t{},vls:class extends self.$8t{},Mls:class extends self.$8t{},xls:class extends self.$8t{},_ls:class extends self.$8t{},Gls:class extends self.$8t{},Tls:class extends self.$8t{},Ils:class extends self.CXt{},Cls:class extends self.$8t{},Pls:class extends self.$8t{},Rls:class extends self.$8t{}},self.Ns.Cos={async"5.RegistrationEvents_Event1"(t,s){var i=document.getElementById("phone_input");8<i.value.length&&(i.value=i.value.substring(0,8))},async"5.RegistrationEvents_Event14"(e,t){const s=e.JF.Ols;{var i=s;const h=(new Date).getMinutes().toString(),n=(console.log(h),(new TextEncoder).encode(i.toString()+h));crypto.subtle.digest("SHA-256",n).then(t=>{const s=Array.from(new Uint8Array(t)),i=s.map(t=>t.toString(16).padStart(2,"0")).join("");e.JF.qls=i})}}};